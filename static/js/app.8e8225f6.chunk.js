(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{585:function(e,t,n){e.exports=n(917)},787:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///8wKzuFnqGuw75XZGkUFSn///9rnbxSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAX0lEQVQoz73OwQ3AMAgDQFbwCl4hK3gF9l+lkKp5tHE/leoXnARyxH/BzAuAo0LBgsYZCyDVR/SgKeQld0j1TYVMA92LUJW3UMV6lQxEj8hyOJgj1s8NRPaaufYnfMwBfSomp3LRKswAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},788:function(e,t,n){e.exports=n.p+"static/media/wood.d9ecccf0.png"},789:function(e,t,n){e.exports=n.p+"static/media/coins.d53016da.png"},790:function(e,t,n){e.exports=n.p+"static/media/mana.647cb04d.png"},791:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///8zO08UFSmuw75ug5D///914ehsAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAZ0lEQVQoz62OwQ3AMAgDWcEreAVWYP+ZSghtJErST3kg3SnGEflzAJ4FVI0nEUzuxWC/uheTsTJVABb8hKoAPWHOd3EVUDqbc0aqQPyZnHflLaKSxHpQRVQyi6UXFmJs6cWY3L34nAu44ClxNouvIQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},792:function(e,t,n){e.exports=n.p+"static/media/water.9e69c784.png"},793:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///8VZEQUFSm58IZjvyP////Gb/X2AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAUUlEQVQoz73O0QkAIAgE0FZwhVvBFdx/prQIVKT6iO7vHojX2rsQDkDM2IJ2CZLBunjJYJ3gJMPo+lavUAOA+VZTw+UOkbTDw+phRwC41PAhHUroIs3wrrJaAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},794:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX/////KzyaBAT/pgBhIz7/6Xb///+xkIV3AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAWElEQVQoz63OQQlAMQwD0FiIhVqIhVqofyu/u/wNCtllueVBQ4GX4QWCV5AHLggHQJaFQDYcMoHJohyIKhXTQXX26oCUap0Y4ALt0Qn9lxR/n4CMztEnuHwVpR5JAdiDWwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},795:function(e,t,n){e.exports=n.p+"static/media/attack.28dc7456.png"},796:function(e,t,n){e.exports=n.p+"static/media/attackDelay.e1c1436c.png"},797:function(e,t,n){e.exports=n.p+"static/media/defense.c8a95e19.png"},798:function(e,t,n){e.exports=n.p+"static/media/hp.7245ec10.png"},799:function(e,t,n){e.exports=n.p+"static/media/hpRegen.aab27f85.png"},800:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///9AN0sdGimkPOpgM7vSg+P///+zG2b1AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAY0lEQVQoz73Q0QkAIQwD0K6QFbJCVsgK7r/KWQ9Eeurn9a8PSkIjfhwAvAIkmxdAa12WowMYR4ClATwAMVbPchXY/IL7KbegDB0iYQfBpI6eKRWyGDKTS/UCcnlohWDZv3CdB9mJJoU/PIJRAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},801:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///+aBAQUFSn/pgD/Kzz///9+b5d3AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAVElEQVQoz73OwQ3AIAxDUa/ACl6hK2T/mZoIECWRxaESX+LgdyHApdqKAp6RmQAX6xECphAC4r8QegJ8+aOtOxJ0Ybpjg+MdUz67Qsi2K6ClXeFPL24iIiN4fISOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},802:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///8UFSlhIz6YUEbGiGKNqJ/k6Nr////hfI/wAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAcklEQVQoz43R0RHAIAgDUFfIClkhK7iCK7D/CAWvPT2qtvnjfQBiKb8DEHsA6bWGZED1Gqp7oGpE2IL387BNQxIUNDNrPAB9Kc67Z/CxknVcA32nGvBIhnvxb1A0XQO69OdhDXFizfUb4o/ibRgnzHDOBSvxMSXp6jiwAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},803:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABHElEQVRYR+2WzRGCQAyFgQbAm9qFR4ZSrAGKoQQK8cZw9EgF/tyACnTYmRz2YcyyjoQDXBxIIO99SYQwUD5C5frBJsCZwC3PX9/aFVWVFT4Mg9OznZLGJ6sJeMSxcb7v+1nz+kwSky+REAmoCSDkx7K0nN+LwjrH3iMpiQRLQE0AV5ickH3OKcbbtjWXdmn6cSYmBNQF4NBJznE1ML9rmnkEVivAt+dE4JplhsS566y2T2aAI7B6AeSUZoKmfjECfxfA7T/tOTq/RJG5dKpr8/vzDKgJoMLcfkvOKe5NYHEBVJB7DSMJyseeS84pzr4N1QUgCVwz6fOI6zne5/xFpCYASVCvJQL4n8/liwRWI0By7Bt3JuBbQLpvE/AGFlceMMXqLnoAAAAASUVORK5CYIIA"},804:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///+58IYUFSk1QEhjvyP///8Ouw5/AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYklEQVQoz6XP2wnAMAxDUa+gFbTCXcH7z1S3hLakeXxUhGAfCCgRLYou6tcVqIEWoBvnEHuwn3JDsOQVxAYqkIbXZ3sgVUmmQIJUz5hADSavizGcvdJ1Xj0+gGzxD1wLHsMBx4cZgVLbW7UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},805:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJFBMVEX///8aJSxTFBSzdUtyExOaVACdnJzf3tJFU3d8boEUFSn////cm99fAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYElEQVQoz63QQQ3AMAiFYSxgYRZqAQtYqAUszEItVOXeSNcsZPTS/Te+E0D0V3wgXgAXj1PgIopkSgTM1VB95AvMTsg2tLYAFfNEcxiLZXCLp/PaCBDv9bEI1DsjWsBeF2U/RKsn+RQvAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},806:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX/////pgAUFSk1QEirWlP///9PTK/7AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAbUlEQVQoz33OgQ3AIAgEQFb4FX6FX4H9ZyrYNkFRiUG8hPhmb8GWwvpAxQY5YdqaAHUhHw3+XoYGo8gl6QSSEWDeexCkBMVwBJcz2hEcX/kB4rs0V8mxQAQXoBq+gzPODQQSusDIrCIdqK9t4AFICR0XUBjz/wAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},807:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///+rWlNhIz7/9xn/pgD///+yX7YvAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAATElEQVQoz63NsREAIAgDQFZghazACuw/k9gJ4bDQdPkzKPItGsEMZnYFH0G9PnBeKDBALPJRAkQ3lQmA/C3BvnouOiiLDnJnQOkMb1lFoBIROsgdbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},808:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAD1BMVEX///9AN0v///YUFSn///+DOuRfAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAHklEQVQoz2NgGAWYQBAC8AkoGYMgPgFjMMQjMBQAAAS8BMlgeYEGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},809:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEX///8jMJ0QWKgUsvoEjfkdGilhIz7/8bG7Z0n/uTX////hqLpHAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAhUlEQVQoz5XPUQ0EMQgEUCyMhbGABSxgAQtnoRbW7Q3b+9q2m9x8NOGlBWr2TwC8AugR+QKlmqgz1Gd0fdUOSCRj6EXafeEJjADDNRNz6BM07a598ABQM3X0cdURPLSVDoC5BTVkaTnVvdoKlvT++FxuC5LeqzOfrGAp6vBXr9A0Y0d4yxdCFkbLzPunxAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},810:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///9hIz4UFSmYUEbGiGL///9kMjjeAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAcklEQVQoz43QwQ3AIAwDQK/gFbxCVmD/mRpTWqESUPOCEzEB4F+RgHgAhiG4B92gE4g8AJ3amttYQ04k5l6gaoCUmZmqJ3UBjx55s7ADsmUD4/2AL2RaXuqmIQsIPi5Pphp6k2v60xXGI7fQ19NTCjjVBU5uGtW89DHgAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},811:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEX///9TFBSaVAAUFSmzdUtyExO+x7adnJz7++hAN0v///8+KyF0AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAATklEQVQoz2NgoCIQJCQgqGSMX0DQxQVVBF0AyEcVQRcA85FF0AUElWDAGJdAKAzgEmAQTAODcoQtGAIdHUqhoR1p+AVcKBWYCQG4BSgEAFLINFWWS6VVAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},812:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEX///94LE0UFSn//3n/0EjIewD7++ggbcAjMJ0Ejfn///8qWD8OAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAdklEQVQoz63Q0RHCMAwDUK+gFbRCVtAKWoEVskJXYFuUwkehLj+gL+fd+ZxT1Z+CZ3gFGceKCLQAD+o2N5syWhiZ5hJCPQjUNu8Bih3QoneA0UIRjmTj9T5DMcm3krqAfe3QRgeA/CafAKUemV9gNXy8eoIf8wBmvDVlSTqSbAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},813:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEX///8fZEUUFSkUsX8b5XdhIz7/0EjIewD//3n///91Xz+KAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYUlEQVQoz43PURHAMAgDUCzEQizEAhawMAu1MNnjb125luWPd9wRzP4GQAMU0YAvsgJcEreQJ3MUtgC5+2dhBTEIf+cKjGvQpxIFYtwR6oDzHwUsEuwMefYMKdFAtu/glAeduiIjz+GVRAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},814:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///94LE0UFSn//3n/0EjIewD7++j////ldOpNAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAcElEQVQoz63Q0Q2AIAwEUFa4FW4FVrgVuoL7j+BVJVGp/uiFkOYlUGhrPwV7+AQue0YESkB0alkUQQVK6K4cA1SDMIBiBQx5JSBQQiMixdvx+AkanbyS43cTbMdO06gAUFzkDpDH474vkBM+d53gY1aG+y45RKWAOwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},815:function(e,t,n){e.exports=n.p+"static/media/exploration.28dc7456.png"},816:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///9AN0tug5Cz2tv///YUFSn///9i5Fb6AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAP0lEQVQoz2NgGFRAEAjwCggqGRsrCeIVcBEEInwCoaFAgVB8Agyhgi5KBASMQ1FdiiGA7hUsAsYEBQiaQWMAAO7bDBdlfjE4AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},817:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///8UFSlhIz6YUEbGiGKNqJ/k6Nr////hfI/wAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAcklEQVQoz43R0RHAIAgDUFfIClkhK7iCK7D/CAWvPT2qtvnjfQBiKb8DEHsA6bWGZED1Gqp7oGpE2IL387BNQxIUNDNrPAB9Kc67Z/CxknVcA32nGvBIhnvxb1A0XQO69OdhDXFizfUb4o/ibRgnzHDOBSvxMSXp6jiwAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},818:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///9AN0sUFSlwl66z2ttkdHr///9FJoxxAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAU0lEQVQoz73QQQ3AMAxD0VAwhU/BFEKh/Kms2nppq1S7bD4+RY6SiP8iBBxAlo0pQTlCBZANWlKC7mGmjgX8gEt4scUjJUS/a752g167fGyDr3MB63Id45GlFzsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},819:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEX///9AN0uuw74UFSlkdHqz2ttTFBSzdUv////is9/GAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAUklEQVQoz2NgoB4QBAK8AoJKQGCMR0BQyUVQ0AVJBIuAYGioID4BYyIEgIYqueARSHMBuguJjyGQVp5mDAQMOAVAfJSwQBcgqIDBGI2PKUAHAADxIBtduPotCgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},820:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJFBMVEX///9hIz7GiGKYUEbk6NqNqJ9QVVgBAAUUFSnkIxx0ABH///9t5S5AAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAeElEQVQoz63PWw3AIAyF4Vo4FmqhFmoBC1jAwixgAZVr2bIL69jLeCD5v+QkQPTTATAHMMuNRrBmvdIIW/M5GwGyt99OTwCOZtEIJGGfIWkOoEgSgfjLrDWCYuCz3ksARjDog9r7CU4G2mqlN3BCnoN/8guIWm0RrIvxQI0cMNI5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},821:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEX///81QEhsx/63//ErWoMga5wUFSn9/OEjMJ1yExONqJ+zdUuYUEb///+PM8R8AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYklEQVQoz63IQRGAQAiFYSpQYStQgQpUoAIVtoIVqGAFQ4k44+wB14P7X968D2BlGE0BGzXCCeQfZQSOhAQ1KoHNTAgxxjoUsHH+7gn6BuIfYPYXPGLNqWG/O7ISrvSpgAWduk2BXeTApRAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},822:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///8QWKj9/OEUFSn/pgD/KzyaBAT///+ND2uIAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYklEQVQoz63Q0QnAMAgE0KzgCl3hVrgVssLtP0K1FNJKYij0/nxEI7Y2Yi0lgx32A6ACYAMgYX0HorQEqXv9aMkgRmBLiGmkYrk5iMAFY0KCeFnD3fWS7+B1XEAFxM++3RROW18wN5fr91YAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},823:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///9mIp0UFSn/yfTSg+P////Jt2liAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAUUlEQVQoz73O0QkAIAgE0FZwhVvBFdx/prQIVKT6iO7vHojX2rsQDkDM2IJ2CZLBunjJYJ3gJMPo+lavUAOA+VZTw+UOkbTDw+phRwC41PAhHUroIs3wrrJaAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},829:function(e,t,n){var r={"./af":365,"./af.js":365,"./ar":366,"./ar-dz":367,"./ar-dz.js":367,"./ar-kw":368,"./ar-kw.js":368,"./ar-ly":369,"./ar-ly.js":369,"./ar-ma":370,"./ar-ma.js":370,"./ar-sa":371,"./ar-sa.js":371,"./ar-tn":372,"./ar-tn.js":372,"./ar.js":366,"./az":373,"./az.js":373,"./be":374,"./be.js":374,"./bg":375,"./bg.js":375,"./bm":376,"./bm.js":376,"./bn":377,"./bn-bd":378,"./bn-bd.js":378,"./bn.js":377,"./bo":379,"./bo.js":379,"./br":380,"./br.js":380,"./bs":381,"./bs.js":381,"./ca":382,"./ca.js":382,"./cs":383,"./cs.js":383,"./cv":384,"./cv.js":384,"./cy":385,"./cy.js":385,"./da":386,"./da.js":386,"./de":387,"./de-at":388,"./de-at.js":388,"./de-ch":389,"./de-ch.js":389,"./de.js":387,"./dv":390,"./dv.js":390,"./el":391,"./el.js":391,"./en-au":392,"./en-au.js":392,"./en-ca":393,"./en-ca.js":393,"./en-gb":394,"./en-gb.js":394,"./en-ie":395,"./en-ie.js":395,"./en-il":396,"./en-il.js":396,"./en-in":397,"./en-in.js":397,"./en-nz":398,"./en-nz.js":398,"./en-sg":399,"./en-sg.js":399,"./eo":400,"./eo.js":400,"./es":401,"./es-do":402,"./es-do.js":402,"./es-mx":403,"./es-mx.js":403,"./es-us":404,"./es-us.js":404,"./es.js":401,"./et":405,"./et.js":405,"./eu":406,"./eu.js":406,"./fa":407,"./fa.js":407,"./fi":408,"./fi.js":408,"./fil":409,"./fil.js":409,"./fo":410,"./fo.js":410,"./fr":411,"./fr-ca":412,"./fr-ca.js":412,"./fr-ch":413,"./fr-ch.js":413,"./fr.js":411,"./fy":414,"./fy.js":414,"./ga":415,"./ga.js":415,"./gd":416,"./gd.js":416,"./gl":417,"./gl.js":417,"./gom-deva":418,"./gom-deva.js":418,"./gom-latn":419,"./gom-latn.js":419,"./gu":420,"./gu.js":420,"./he":421,"./he.js":421,"./hi":422,"./hi.js":422,"./hr":423,"./hr.js":423,"./hu":424,"./hu.js":424,"./hy-am":425,"./hy-am.js":425,"./id":426,"./id.js":426,"./is":427,"./is.js":427,"./it":428,"./it-ch":429,"./it-ch.js":429,"./it.js":428,"./ja":430,"./ja.js":430,"./jv":431,"./jv.js":431,"./ka":432,"./ka.js":432,"./kk":433,"./kk.js":433,"./km":434,"./km.js":434,"./kn":435,"./kn.js":435,"./ko":436,"./ko.js":436,"./ku":437,"./ku.js":437,"./ky":438,"./ky.js":438,"./lb":439,"./lb.js":439,"./lo":440,"./lo.js":440,"./lt":441,"./lt.js":441,"./lv":442,"./lv.js":442,"./me":443,"./me.js":443,"./mi":444,"./mi.js":444,"./mk":445,"./mk.js":445,"./ml":446,"./ml.js":446,"./mn":447,"./mn.js":447,"./mr":448,"./mr.js":448,"./ms":449,"./ms-my":450,"./ms-my.js":450,"./ms.js":449,"./mt":451,"./mt.js":451,"./my":452,"./my.js":452,"./nb":453,"./nb.js":453,"./ne":454,"./ne.js":454,"./nl":455,"./nl-be":456,"./nl-be.js":456,"./nl.js":455,"./nn":457,"./nn.js":457,"./oc-lnc":458,"./oc-lnc.js":458,"./pa-in":459,"./pa-in.js":459,"./pl":460,"./pl.js":460,"./pt":461,"./pt-br":462,"./pt-br.js":462,"./pt.js":461,"./ro":463,"./ro.js":463,"./ru":464,"./ru.js":464,"./sd":465,"./sd.js":465,"./se":466,"./se.js":466,"./si":467,"./si.js":467,"./sk":468,"./sk.js":468,"./sl":469,"./sl.js":469,"./sq":470,"./sq.js":470,"./sr":471,"./sr-cyrl":472,"./sr-cyrl.js":472,"./sr.js":471,"./ss":473,"./ss.js":473,"./sv":474,"./sv.js":474,"./sw":475,"./sw.js":475,"./ta":476,"./ta.js":476,"./te":477,"./te.js":477,"./tet":478,"./tet.js":478,"./tg":479,"./tg.js":479,"./th":480,"./th.js":480,"./tk":481,"./tk.js":481,"./tl-ph":482,"./tl-ph.js":482,"./tlh":483,"./tlh.js":483,"./tr":484,"./tr.js":484,"./tzl":485,"./tzl.js":485,"./tzm":486,"./tzm-latn":487,"./tzm-latn.js":487,"./tzm.js":486,"./ug-cn":488,"./ug-cn.js":488,"./uk":489,"./uk.js":489,"./ur":490,"./ur.js":490,"./uz":491,"./uz-latn":492,"./uz-latn.js":492,"./uz.js":491,"./vi":493,"./vi.js":493,"./x-pseudo":494,"./x-pseudo.js":494,"./yo":495,"./yo.js":495,"./zh-cn":496,"./zh-cn.js":496,"./zh-hk":497,"./zh-hk.js":497,"./zh-mo":498,"./zh-mo.js":498,"./zh-tw":499,"./zh-tw.js":499};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=829},839:function(e,t){},855:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEX///9sPEpAN0v///adXz7HmVyTk5MUFSn///8qylyOAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAQ0lEQVQoz2NgGEpAUEkQDJQEcQkoGbuEAoGLsRIuAUGYgCD5Akppgi5AIJimhE8AqAOPQDlMSzkuAcFyKBDEJUB7AAA6+ycNP8waowAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},856:function(e,t,n){e.exports=n.p+"static/media/basementBat.03b5b98f.png"},857:function(e,t,n){e.exports=n.p+"static/media/mouse.139223ad.png"},858:function(e,t,n){e.exports=n.p+"static/media/skeleton.fd7f5027.png"},859:function(e,t,n){e.exports=n.p+"static/media/angrySheep.868ded22.png"},860:function(e,t,n){e.exports=n.p+"static/media/littleDevil.5b0c08f5.png"},861:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///8UFSkfZEXs7+kb5XcUsX////9swsgrAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAMUlEQVQoz2NgGHZAUElJSVAQn4CSsbFLqBJeARcXpVBBfAJAU1H5mAIMgmh8TIFBDwDxkgeTCNHXRgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},862:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///8UFSlOQVo5LU2+x7aAfYP///8F0SFqAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAALklEQVQoz2NgGHZAUEnJWFAQn4CSi0uoEn6B0FBj/AIMgmh8TAEGQTQ+psCgBwC9xgdPk33szAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},863:function(e,t,n){e.exports=n.p+"static/media/earthSpeck.069668e6.png"},864:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///8UFSltPUvs7+n/inv/KzysMjL///+EyttnAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAALklEQVQoz2NgGHZAUElJSVAQn4CSsbFLKH4BF5c0/AIMgmh8TAEGQTQ+psCgBwDHhgiBSowpdgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},865:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///8UFSlgM7vs7+nxhfWkPOr///8l8MOxAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAMklEQVQoz2NgGHZAUElJSVAQn4CSsbFLqBJeAReX0FBBfAIMgi6ofEwBBiU0PqbAoAcAqfkIXzX2+n4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},866:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAq0lEQVRYR2NkGGDAOMD2M4w6YDQERkNgNARGQ4DkEBAR1fwPKr4N/b9hLcXPb+RCEX/z+jpeO4aeA1xT5MEhsLz7FIpP530zAvNPn/kJpj9s5gbTu+c8pG4IDBoHuDb+QQmB3fUsYL6A71cwvT9FFExTPQ3AQmDAHADzNnpuINXnMHNIzgWDxgHoDoHxCcU5euFBdggMGgdQ2qilOARGHTAaAqMhMBoClIYAAElDUiGRTJfvAAAAAElFTkSuQmCC"},867:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///8UFSkyELDs7+lsx/5Oe/D///9l7kv3AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAALklEQVQoz2NgGHZAUElJSVAQn4CSsbFLKH4BFxcl/AJAU1H5mAIMgmh8TIFBDwDLpwdxcKuRhQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},868:function(e,t,n){e.exports=n.p+"static/media/slime.d7b715fc.png"},869:function(e,t,n){e.exports=n.p+"static/media/ancientHeadmaster.b7fa7587.png"},870:function(e,t,n){e.exports=n.p+"static/media/redSlime.68b597d0.png"},871:function(e,t,n){e.exports=n.p+"static/media/zombie.a720d22e.png"},872:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///9AN0sdGilug5BXZGk7QE3///8/NTpPAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAZ0lEQVQoz63Q0Q3AIAgEUFe4FW4FVmAF9l+lJ2n9oOJPS2LiPYVEx/izwDOAZjjAjB6BDu7oq6kCQuWKLdAUZUsqwDXRcmwDNA1MIX0HyIa5QofcAalAXefzkAKqsLnnAVj/+wVf6wKvTizlX11jPgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},873:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///+YUEZhIz4UFSnqt4DGiGL///9lxA6tAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAWklEQVQoz43QUQ3AQAgD0LNQC7WAhVrAv5X1byxkHHy+UCCcsyrwBiFeYNFCJUdgCjGDwBGcYMygBXhooQaRUoLvbR2816R/OIF0pnyggUNg1g80sHyP7zDUA1F8H52JYm82AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},874:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///9sPErk6Nrqt4AUFSn////tDsucAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAXUlEQVQoz73O0Q2AMAgEUFZgBVa4Fdh/Jg9rtJSif14ICS+EIPJXVD9AzTKtwNkME1WAZdrAkJsKXAJ1TysTDFEeB3QPIbwY1oF4AJzVwSnO1gMlvn/mCuIReYM2B937HvMirh0nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},875:function(e,t,n){e.exports=n.p+"static/media/enchantedSheep.9e3d62ed.png"},876:function(e,t,n){e.exports=n.p+"static/media/blackSheep.0a5a0c4f.png"},877:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEX///9AN0tIRWJkdHrAvbGTk5MUFSlQVViaBARhIz7kIxz/WUP5ko////8bpoOqAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAeklEQVQoz43QXQ3GMAiF4Vo4FmYBC7WAhVqYBSxgAQtYqKjRLd9PtpbsveNJoElLeRe2CAmAakRIoDLANYGNz5WWQAhTW0Pc47oTf9+9A0TGUSYRzEHNTUZmuoLe3WPMoVsCEHP3MUtbgH5AF3Dt/DYmUACN/n7sAWkHnkJ6lx4zUsAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},878:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJFBMVEX///8EjfkQWKjL9f9h1/P9/OFsPEqrWlMUFSnGiGI1QEj///8YtWUlAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAXElEQVQoz6XPQQ3AQAhEUSxgAQtYwMJawMJawMJaQGXTI7PJ9FBuvPwDiIxREw7qysFicbBwDu/uxiA91rgLIXfVDADy1HwDIU8Lhe9gYwDQGPQVlFD4H0jBjvAAe4kqX5EiKlsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},879:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEX///9h1/MEjfn9/OHL9f8QWKg1QEhsPErgIBj/inv/0Ej5cAsUFSn///91BQiRAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAaklEQVQoz4XOWxHAMAhE0bWAhbUQC1iIhVjAAhZqoRZqoaLa/pFHCX/3MMwAxBECKUjZAHUD1A3UtzWDqjJe9ECV/q0RKEVY8QcNJkXDfgZzxp7B/PDYCzjdkIGd191aAl9jvMh6Adb3BA9s+DOJjowL+QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},880:function(e,t,n){e.exports=n.p+"static/media/mimic.b13d0981.png"},881:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABbklEQVRYR2NkGGDAOMD2M5DsAAdz7/8gR5ucPIbi9gWiEmD+m9fXSTKTJMUgCwbMASUMgmCfm0c5gX0qrccPpp9e+gimTy7bB6ZJDQmiQ2DQOCCoIxAl7mEhABOEhUQPw3uiPEeUIpDhsBAYcAeMvDQAy3ZfOf+Co9n+wEms+R8mqKgtD2bev/qQqHKBYBoYNA7YPxMSAqUG+EPg9cTrYHWi+ZrUDYEBc4Cpgwe4BNR5/A3so3lruVDSAJxzbQeKz335RMH8+XcP4Y1mgmlgwB2QqGwHDgGH2GtgH11ugKQFQuCtsi51QmDQOKB26h+wj6Q1QlE8v2JBK9bAOLBYi7ohMOgdYGuhBvbx4RO3wDTdQ4BuDkCPcJiP0cWLp0LKAUJtRILlACwXwNLAgDkAVg7AghrmELqFwIA5AL0oRo8K9BCApf7Nn15TJw0MuANgcY3uEFx1AbE+h+knmAsGjQMI1X7kyhMdAuRaQEgfAAUWKDCEIdYFAAAAAElFTkSuQmCC"},882:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJ1BMVEX///9AN0sQWKgUsvr9/OFh1/M1QEgUFSlIRWKxIBv/pgD/0Ej////X3D1IAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAgElEQVQoz4XQbQ3DQAgG4LOABSy8FrCABSxgAQtnoRZqbly7pc062PvnwpNc+BhjhThD48o3EERUb/IAFhBBuYHzSwO2urp7AwZRd+uARdFA8NwitslRgDF47vvMx35D5OBrMgBRgwqQVoABqkfNXgD/g5Q3fC70gLX+ccNRQpsX9xpOO1NXcLEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},883:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEX///8dZEBs2CAtoS8UFSk1QEgVZETqt4BsPEr7++j///8v6huhAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAgUlEQVQoz33PUREDIQwE0FhYC2shFmIBC7FwFmLh3HbpR4+W0Aw/vJkNi5kGsO/ZgfgHAJyr7KCbzrN4hxkg/AwBUObjCEAEyXGGeXMnpmS24G/BVZlswUKj5ndps7WgahHXXfl5eYPZripcMo5gSX0gl0wHQ6EzpDqtKxtY0j/wAhXLOYOtg6I4AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},884:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEX///9AN0t0ABEUFSmrWlPGiGI1QEj/0Ej/pgAUsEYVZERs2CC58Ib///+1qBE6AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAY0lEQVQoz43NQRHAMAhEUSzEAhawgIVYwAIWYgELsYCFiGrSW9Pppv/4ZliIflaYBQJr1Ye8oVZVhnDaKDa/ihUAvqDJNxi7exMDEDzrCHKMiDhBYsjcTnaII/QFHQDZHQFAXSG/UMHVSD70AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},885:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEX///9AN0t0ABEUFSmrWlPGiGI1QEj/0Ej/pgBhIz7kIxz/WUP5ko////80yYgGAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAZklEQVQoz43QUQ3AMAhF0VmoBSxgAQu1gAUs1AIWsICFihr929LsdffzJEDCdf2sETEEki4v2aF3EYJw2tG0rrIyAFswAKib2WD/Bg9aIcg5I+IEiSGzRhhAnEB9gQMoqZ4/3QB1A026VjPkfBZxAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},886:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABZElEQVRYR2NkGGDAOMD2M5DsAAdz7/8gR5ucPIbi9gWiEmD+m9fXSTKTJMUgCwbMASUMgmCfm0c5gX0qrccPpp9e+gimTy7bB6ZJDQmiQ2DQOCCoIxAl7mEhABOEhUQPw3uiPEeUIpDhsBAYcAeMvDQAy3ZfOf+Co9n+wEms+R8mqKgtD2bev/qQqHKBYBoYNA7YPxMSAqUG+EPg9cTrYHWi+ZrUDYEBc4Cpgwe4BOT+zgz2EcwhKAkBxLm2A8XnOkpKYP6Bk1vxRjPBNDDgDoAlwisaYZA4PTwfw/PYBBxEuakTAoPGAb+iJoN9FGoujeLh1ukrsIaIzo1V1A2BQe8ANSNbsI9vnTsMpukeAnRzAHqEw3yMkRC2dVC3JISlgQFzAKwcgAU1zCF0C4EBcwB6UYweFeghAEv9V+7do04aGHAHwOIa3SG4KgRifQ7TT7A2HDQOIKoKJEMR0SFAhtlEaQEAbG4iMLG1M3gAAAAASUVORK5CYIIA"},887:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///9hIz4dGinGiGKYUEb4xpz///9tG9KaAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAa0lEQVQoz63QwQ3AMAgDQFbwCqzgFViB/VcpplU/hbxqRZG4ByDM/gng9TsOQHiFWMGDobwyQKbqA4CZJJO+Q0lZbICay56MDSiQPF0HeIMRuo5+7FN9QEMD3XUD1JVx7+Y2gawCXdo2OOUCGag0MwUtb40AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},888:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJFBMVEX///8dGikjMJ2uw74URjAggFYUsEYckkJs2CDs7+kQWKj///+EABYyAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAgklEQVQoz43QQRUDIQwEUCyMBSzEQizEwlioBSxgoSo7sPSym/R1TpN/ILy09n/Qey9ABUo3s57CLgL3AFJYlbFCbyk0+GssYQkSjkFyEBVAg8KowKEH92avgAv2ZqTgGrfwfC2BYBx0ZIA5LaS6UFgOwNtsKmbnhje4zBV85yf8ygcuh1thU1BKBgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},889:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///9hIz4dGinGiGKYUEb///+eqHk9AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAZklEQVQoz63RwQ0AIQhEUVv4LdCCLdB/TeuwmywJyklO5gVH1DEuFaZqgCnBjsBUuTdgPp0UXGCsQCwHV0C7InkPaBHibCHmIoLfcwuoefWCfxEFdCpE5An+F2ggz7mHuF/+mApNPVLRJ9myN+ghAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},890:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///8KWK5F0PEEjfn9/OG14O0UFSn////S9Ol9AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAUElEQVQoz83LMRGAQAxE0Vj4FmIhFrCABfxLYK8ilxxQ0LDdfzNr9q/BC+DBI+DbLBXUu2epMFpwyQI8Au24A0OH3B2GEKk7SObuYJTu8GUnXRoTy4+2u4QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},891:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGVSURBVFhHYxjxgBFKUwxkpTT/g2hrO30wHx2sWLECq11MUHrAAIarIiIiwD6BgaOHLkJZ+AHM59nZ2WAaHUydOhVMo4fE4AkBmM8J+QBXiLCJlUBZEPBWgxtM8x5qBNMw8PjZ9UEaArBUDAPoPnoYGwOmeU6vB9OEwBfTQDAtv3gJmL57IRkjvYHAgIcA3AGguEGPHxAAxSUIC6gygjHIZzDfYQOE5NHB4CsHYACWJmBpAZYGQKGADD7cRkk6cABTB5OX7DUA04M3F6AD9FzxvPgClAUB6CGBDmA+h+UaWHkwdEJA2WAu2Au/XvWA+Z/t6sE0rhROqHwQvvEVTKOXB4M/BNBLQEJ5HFdIwPSh54bBFwIwn8MALASoBdDrhgEPAZwOAPkcn+9BcY0tvnGJowNQOQPCgy8NwEpAXPke3XfElgswdTBxWMk4eENg2cpZYD468J36FMoiD2zOlgbTUeFpYHrwhgA6gLULFkxWA9MwYGNjA2VhB0eOHIGyIADm88FbEuIChEIGF4DVpjAwyNoDDAwAqjGezpTvlrkAAAAASUVORK5CYII="},892:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///9hIz4dGimYUEbGiGL///9qY/aJAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYUlEQVQoz82QwQ3AIAwDs4JX8ApZwfvP1IRWESXw66N+IOUEF2Sz3wRgJM4TgEuIucgKQAGDeLzbAh+3WeIGKHfO4gZCqlncQf78FovBd8Bem2wPUqwcq4EVPB1xbZH2US5vviE18wktGgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},893:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGDSURBVFhHYxjxgBFKw4FAxIr/UCYY8B5qBNOPn13HUIsPwMyB6f9sVw+mP6yIQDGHCUoPGIC7Bt3Fz4svgOnbgTfBtGHVNTCN7iMYQBc/36YFplXXq4NpGOA5vR5Mw0Ji8ISAtYMvOASWzGsF82E+ZokKAtOzBI+A6fzwbDCNC0xcORVMp723AdN/lq0D07AQiUmqBtNHD2weZCEgK6UJDgE5NRUwv7i5EEyHnbIG0wKqEKW4QgLd5x9uQzLTKrOjYLq3th9MP7p1B0zDctXgCQEYgIUEDMBSNSwtwAAsJGAA5nMYgMU9LHfAAHp5MvhCAB3AQgQ93xMCMJ8TKkEHfwjAAHpIwPI1DKCXlMTWHUMvBA4dWQnmo5fxsDrDziYcTA+fEECPe/S6AQbQy/4hkwvIdgDIx8iYXDB40wB63H8xDQTTsFoRF4DVgrCWD6G0MPjTwLxsMTAmFRCrb/CmARiApQVYi8dQWgRM4wLnn74B07AW0/CtDXGBIVcbjnTAwAAAHXOo7cBCkPIAAAAASUVORK5CYII="},894:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///87QE3f3tKuw75ug5AdGins7+n///9TRpwkAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAiUlEQVQoz43Q0Q0EIQgEUFqYFmxhWpgWaIH+S7hhN3dxT02WL3hRQSJeBIBn8g8YVDpHahAbgEgiHXAirJAlqQV0UrkBVFFj+DirsIHwYbCB7ux6hZZu7ZZ3vcIljl+9QqQ8lL8YR0C/qu+eNuCyF9R/P4GfLDafIL1fQyJPENeCp8lX6FuYyxk+GIBDvUCdC2IAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},895:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///87QE3f3tKuw75ug5AdGiltPUv///+S/abuAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAZUlEQVQoz7WP0Q2AQAxCuwIrdAVWYIWu4P4jyCX6ofbOH+WLvoQGIj4RgKu5AyRV9igl0QJSKktiD2zhUImw7UDUVpm0bKIFJhq3zvsJwr0kN4sFcEYrgNHaoTl4/zEGHsNm4G/t7zcwWWTRQhoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},896:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEX///87QE1ug5Df3tKuw74dGin///9FiP3BAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAcklEQVQoz62QwQ1DMQxCvQIrsEJW8Arsv0ohrSq13/mXlkMET8JyXPUPwfpw3wBcTcUrDhPoBmURPQKBpEvyQ0IDENRrdWQ7gBDu6InJVxACT85qO1/Bq8R3HgCyVMgJ+DK7gjoCZaBvcAb1/FPdgN/0AMlONe2hISHkAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},897:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEX///8QWKgdGikEjfkUsvo7QE3f3tKuw77///9Hf6fnAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAdUlEQVQoz43PWRHAIAwEUCzEwlqIBSxgAQux3w3ttByB6Q7D8T5IktKfCMZzAWgWCFdWhFCq3xh6LRGgmLpws4IIEvhdi+CpMgNJWvD2vgBFtX8HoMwJfC6f8Aitry2wqMNXeAW7wbZAqYx1VWa45x+nneCUC4IXMBUswqp1AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},898:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADKSURBVFhHYxgFIx4wQmmqgwod3/8getpSHTA/K/oKmO64shnFTiYoPWCA6iGA7vNtelPBtNelbDD9Sb99mIYAzOd+MaJg/qYlr8E0LCTYXDaA6Tevrw/zEIABWEj49R4H0+g+h4GhHwIwnxvrsYH5mbuvgWkYwOVzGBi6IYDL54R8jA6GXgig53dCqZwQGDohQG2fw8DgDwFa+RwGBm8I0NrnMDD4QoBaJRyxYPCEAL19DgODJwRERDXBIQADtPY5DAx4CIx0wMAAAG0cXChWg+PPAAAAAElFTkSuQmCC"},899:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEX///9ug5D9/OHk6NpLWmOuw747QE01QEgUFSmNqJ////9eP8z0AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAASUlEQVQoz2NgoDsQFCQgIKhEQEBQyRi/AEEFLugK0AVcjEPRFKAJpBmHljPgE3AR7EBVgC4A5DMw4BNwmYmuAF2gHNUGLAKUAgBHBhGJfqglBgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},900:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///94LE0UFSnGiGKrWlP///9c2lH5AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAOklEQVQoz2NgoDcQVMInoCTIIGgsiE8AyEPhYwooCRqj2oEpgMbHEBB0EWTAK0BYAboVmAJ4A2KQAACkdgdxDRr/9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},901:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///9sPEqrWlPGiGIUFSn///8eGYHMAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAATElEQVQoz63OsQ0AIAhEUVb4K7ACK7j/TBorPQwWSncPCJh9LaAGPJwKRg5vBcxMAdcBQ3KC+ZQ8oRve1pwA6Scg9n6C64DJhQM8VwdUlBHvFahZogAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},902:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEX///8EjfkQWKjL9f/9/OFh1/M1QEirWlMUFSn////qNOrUAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAR0lEQVQoz2NgoDMQVFLCLyBo7IJfAMg3xitAUIFSKJoCdAGCCtJCXUJRFGAKlIemMeATSCvv6GDAJwDkMzDgF0C1AYsAxQAAVxQYC2ENkZAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},903:function(e,t,n){e.exports=n.p+"static/media/darknessWand.80236e6c.png"},904:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADKSURBVFhHYxgFIx4wQmmqgwod3/8gOs3vC5g/axMPmO64shnFTiYoPWCA6iGA7nPFtwfB9H1hezCt1LZ/mIYAzOd+MaJg/qYlr8E0LCTMZr8A029eXx/mIQADsJDw6z0OptF9DgNDPwRgPjfWYwPzM3dfA9MwgMvnMDB0QwCXzwn5GB0MvRBAz++EUjkhMHRCgNo+h4HBHwK08jkMDN4QoLXPYWDwhQC1SjhiweAJAXr7HAYGTwiIiGqCQwAGaO1zGBjwEBjpgIEBACWoXSipcJDwAAAAAElFTkSuQmCC"},905:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///94LE3kIxz/0EjGiGIUFSmrWlP///8joEw2AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAARElEQVQoz2NgoC4QVBLELyCoZKyEV0DQRVApFL+AoEsoAz4BwbRQNAVoAkA+AwM+AXQbMATooYCgIwkpYEALBiwChAAA10oSd7dMhrcAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},906:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJFBMVEX///9sPEqrWlMUFSnGiGJh1/MQWKjL9f/9/OEEjfk1QEj////hOVNWAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAU0lEQVQoz2NgoC8QFCQgIKhkjF9A0MU4NA2fgKCLYGh5x0zcAkB+Wnl5R+hMXAJAviBDWkdHBy6BVWA3pXXA7UUXWAV1dBqqAiQBYzRvYgoMCgAA2HQea/gNacgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},907:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA80lEQVRYR2NkGGDAOMD2M4w6gGYhUKHj+x8UvfpaneBYvnitHEx3XNmMYufwcwC6zyN2fAf7fIUHJ5iOXKVF2xAYMAfALPaLEQX7dNOS12AalgZy9weD+W9eX6dNCAwaB8AKNlhI+PUex+pzmDqq5QJYCNDdATCLjfXYwHZn7r6GUrqjxzl60U9xCAyYA3BZTMjHVAuBAXMAenYjlMoJVfckp4EBcwC1LSa5HBgwB9DKYqJDYMAcQGuLCYbAgDmAWgUMofyPMwQGzAH0thgjBAbcASKimuB2PAyQWqsRG+c4a8MBdwC5PqBUH8m1IaUWousHACeUtiHth9mZAAAAAElFTkSuQmCC"},908:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA8UlEQVRYR2NkGGDAOMD2M4w6gGYhUKHj+x8UvYxLD4Jj+X+0PZjuuLIZxc7h5wB0n7epQZJ51S0I3a7/ibYhMGAOgFnsFyMK9ummJa/BNCwNzHaRBvPfvL5OmxAYNA6AFWywkPDrPY7V5zB1VMsFsBCguwNgFhvrsYHtztx9DaV0R49z9KKf4hAYMAfgspiQj6kWAgPmAPTsRiiVE6ruSU4DA+YAaltMcjkwYA6glcVEh8CAOYDWFhMMgQFzALUKGEL5H2cIDJgD6G0xRggMuANERDXB7XgYILVWIzbOcdaGA+4Acn1AqT6Sa0NKLUTXDwArdLYhH7o63AAAAABJRU5ErkJgggAA"},909:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEX///9sPErGiGIQWKj9/OHL9f8EjfkUFSlh1/OrWlP///+ZgQA6AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAbElEQVQoz63QQRHAMAgEQCxgAQtnAQuxEAtYwELcNm2GPNqQTmd6v9sXB9GHML8AC7AFFtVSN2ACVfUcrMFLl5qBsfAlGfRuRMhhdIJnYE3GcGjBCmbv4Cs4b6IA0AK4WSwcL3zC7PHLO/yQA0tcL9EQsvdwAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},910:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJ1BMVEX///8QWKgEjfnL9f/9/OFh1/NsPErk6NoUFSnGiGI1QEirWlP///92yvn8AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAR0lEQVQoz2NgoDIQVFLCLyBo7CKIVwDID8UvkIbGxxBIK+/oYMAnkDYTVR5DIG3mKga8AtRQQNANhBTsRleALoAWDFgECAAAr6AiRZhVN6oAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},911:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEX///9sPEo1QEirWlPGiGL9/OEUFSmuw77////kA0u+AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAWElEQVQoz63OQRXAMAgDUCzEAhawgAUsYGH2l+Moe7ls3Phtk5r9OgAkuEcGJFRmtACALy4BTGRkK6jgPjomMBHPig3OP7UCr3G8gbuZAuRxYcHR8AKf5wZkcR054En5nAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},912:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJ1BMVEX///9ug5AEjfn9/OHL9f8QWKg7QE1h1/M1QEhLWmMUFSmNqJ////9ih8l7AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAYklEQVQoz5XNQRHAMAgEQCxgAQuxgAUsxAIWsBALsVBzpb8QWjK93+3cAMCfIFEN2FoN3rmEpyMUcB7wPthAvAt8QgfRMMhgxLpeSGCkZFBBx9gTDJyeAsY1w4EMFj+8wDE3EoomHwuNbJsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDDxG9wvAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAwgEZkkwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="},913:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADKSURBVFhHYxgFIx4wQmmqgwod3/8g+rhMPZhv+aQRTHdc2YxiJxOUHjBA9RBA9/nBBHUwbb/gJpg+uMNkmIYAzOd+MaJg/qYlr8E0LCSuno0F029eXx/mIQADsJDw6z0OptF9DgNDPwRgPjfWYwPzM3dfA9MwgMvnMDB0QwCXzwn5GB0MvRBAz++EUjkhMHRCgNo+h4HBHwK08jkMDN4QoLXPYWDwhQC1SjhiweAJAXr7HAYGTwiIiGqCQwAGaO1zGBjwEBjpgIEBABqAXSht1cx6AAAAAElFTkSuQmCC"},914:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEX///94LE0UFSn7++j//3n/0EjIewD////HWgnzAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAWElEQVQoz83OywnAAAgDUFfIClnBFbJCVnD/EWoLhULRSy/1IPjwF/GfAHAljMAUYCVncLqUWqBcKXuGgLOHaobzpF1coGsVHite0P3u92cgiZYFbtzhSxz8DCGbL0zUyAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMPEb3C8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMjJUMDg6MDM6NDUrMDA6MDCARmSTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},915:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEX///81QEhsPEr4xpz7++jGiGIUFSl4LE3////xzTw9AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjDBYIAzYGArEsAAAAY0lEQVQoz7XQUQ3AQAgDUCzUQi1gAQu1gIWzPy5ZliUX+Nr46/spYPbZgJwBHsEBABYI7IAV6BKcA8gV8lsOgMTC4g6Mmbs3nvUPQKa0AR3UbdXrSmshl3OJA1iiXvDKJ/w9F2jcKuf60VilAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEyLTIyVDA4OjAzOjQ1KzAwOjAw8RvcLwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMi0yMlQwODowMzo0NSswMDowMIBGZJMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"},917:function(e,t,n){"use strict";n.r(t);var r=n(931),o=n(0),i=n.n(o),a=n(17),u=n.n(a),c=n(18),l=n.n(c),s=n(12),f=n.n(s),d=n(9),h=n.n(d),g=n(517),m=n(541),A=n(88),y=n(150),p=n(237),v=n(69),b=n(14),j=n(164),O=n(73),k=n(10),x=n(105),w=n(39),C=n(8),S=n(48),E=n(66),M=n(3),R=n(11),B=n(34),T=n(577),D=n(928),P={};function I(e,t,n,r){var o;if(e.isFake)return n(e);var i=e.global.tickCount,a=t(e);return null!=(o=P)&&o[a]&&(r||P[a][0]==i)||(P[a]=[i,n(e)]),P[a][1]}var _={};function N(){for(var e of(P={},Object.values(_)))e()}function F(e,t){_[e]=t}var L=n(4),Y=n.n(L),V=n(5),U=n.n(V),Q=new(function(){function e(){Y()(this,e),this.demoMode=!1}return U()(e,[{key:"setDemoMode",value:function(e){this.demoMode=e}},{key:"isDemo",value:function(){return this.demoMode}}]),e}());function G(e){return JSON.parse(JSON.stringify(e))}var H,W,J=n(54);function z(){var e,t;return null==J.default||null==(e=J.default.expoConfig)||null==(t=e.extra)?void 0:t.buildRunTimestamp}function Z(){var e;return null==J.default||null==(e=J.default.expoConfig)?void 0:e.version}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.None="None",e.Exploring="Exploring",e.ExploringBoss="ExploringBoss",e.Reviving="Reviving",e.Combat="Combat"}(H||(H={}));var K={currentHP:100,explorationStatus:H.None,explorationStartTime:0,currentDungeonFloorId:"",currentEnemy:{id:"",currentHP:1},currentSummon:void 0,successfulExplorationsPerFloor:{},playerActionProgress:0,summonActionProgress:0,enemyActionProgress:0,lastPlayerActionResult:void 0,lastEnemyActionResult:void 0,lastPlayerHitCause:void 0,actionResultQueue:[],variables:{}},$={Hand:void 0,Body:void 0,Accessory:void 0},ee={secondsPlayed:0,activeSecondsPlayed:0,flags:{},maxPrimarySchoolLevels:{},maxSchoolLevels:{},unlockedElements:{Fire:!0,Earth:!0,Water:!0,Air:!0},unlockedSchools:{Conjuration:!0,Enchantment:!0,Illusion:!0,Alchemy:!1,Evocation:!1,Protection:!1,Breeding:!1,Summoning:!1,Divination:!1},researchersHiredLastRun:0,timeCapsulesLastRun:0,lastDungeonFloorCompletedLastRun:void 0,totalTimesResetted:0,targetFps:30,endingsTriggered:[],startTimestamp:Date.now(),allowAnalytics:!1,appVersionTimestamp:0,appVersionString:null!=(W=Z())?W:"0.0.0",isFullVersionSave:!Q.isDemo(),themeMode:"light",hideEventTags:[],automaticallyBuiltBuildingsStartOff:!1,enableSwiping:!0,enableBottomMenu:!0,leftHandedMode:!1,putCastSpellOnBottomMenu:!0,autocastLoadouts:[],quickbars:[],currentQuickbar:0,tickCount:0,wakeLock:!1,hiddenFromBottomMenu:[],hideDamageEffects:!1,doNotUseNativeDriver:!1,timesEnemyDefeated:{},overrideElementDisplay:"no",zoomLevel:1,hideTooltips:!1,newGamePlusCount:0,newGamePlusMax:0,newGamePlusBuffLevel:0,newGamePlusDifficultyLevel:0,thisWorldSecondsPlayed:0,thisWorldActiveSecondsPlayed:0,thisWorldStartTimestamp:0,notifications:[]},te={secondsPlayed:0,activeSecondsPlayed:0,newFlagsOnRetirement:{},endingTriggered:void 0,startTimestamp:Date.now(),lastDungeonFloorCompleted:void 0},ne={resources:{},buildings:{},flags:{},elementExperience:{Fire:0,Earth:0,Water:0,Air:0},schoolExperience:{Conjuration:0,Enchantment:0,Illusion:0},schoolExponents:{},research:{totalResearchers:0,researcherAllocation:{schools:{}}},autocast:{apprenticeAllocation:{},spellAutocastProgress:{},apprenticesPaused:!1,loadouts:{},lastLoadoutUsed:0},creatures:{totalCreatures:0,creatureAllocation:{},lastRewardTime:{}},eventQueue:[],eventOccurrences:{},pityEnabledAtSeconds:void 0,pityCounter:0,nextEventIsManuallyTriggered:!1,global:ee,thisRun:te,temporaryEffects:{},recentSpellsCast:[],nextRandomEvent:600,primaryElement:void 0,primarySchool:void 0,inventory:[],equipment:$,exploration:K,explorationMessageLog:[],creatureMessageLog:[],lastSpellCastTimes:{},uiCommands:[],lastProcessedTime:Date.now(),lastItemUsedTimes:{},quickbar:[],favoriteSpells:[],skipAheadTime:0,warpTimeSecs:0,summoningBlockedUntilTime:0,strengtheningsBought:{MaxHP:0,Attack:0,AttackDelay:0,Defense:0,HPRegen:0,Dodge:0,Accuracy:0,CritChance:0},equipmentLoadouts:[],lastEquipmentLoadoutModified:0,currentChallengeId:void 0,isFake:!1},re=i.a.createContext(q(q({},G(ne)),{},{apply:function(e){},overwrite:function(e){}})),oe={},ie={};function ae(e,t){oe[e]=t}function ue(e,t){e.global.tickCount++,N(),Object.keys(oe).forEach((function(n){e=oe[n](e,t)})),e.global.totalTimesResetted+=1;var n=G(ne);return n.lastProcessedTime=Date.now(),n.global=e.global,e.global.tickCount++,N(),Object.keys(ie).forEach((function(e){n=ie[e](n,t)})),e.global.tickCount++,N(),n}function ce(e,t){var n;return(null==(n=e.flags)?void 0:n[t])||!1}function le(e,t){return t.flags[e]=!0,t.global.flags["ever_"+e]=!0,t}function se(e,t){var n;return(null==(n=e.global.flags)?void 0:n["ever_"+t])||!1}function fe(e){return le.bind(this,e)}function de(e,t){return t.flags[e]=!1,t}function he(e){return de.bind(this,e)}function ge(e,t){return t.thisRun||(t.thisRun=te),t.thisRun.newFlagsOnRetirement[e]=!0,t}function me(e){return ge.bind(this,e)}function Ae(e,t){return t.global||(t.global=ee),t.global.flags[e]=!0,t}function ye(e){return Ae.bind(this,e)}function pe(e,t){return t.global.flags[e]=!1,t}function ve(e,t){var n,r;return(null==e||null==(n=e.global)||null==(r=n.flags)?void 0:r[t])||!1}function be(e,t){var n,r,o,i;return(null==e||null==(n=e.global)||null==(r=n.flags)?void 0:r[t])||(null==e||null==(o=e.thisRun)||null==(i=o.newFlagsOnRetirement)?void 0:i[t])||!1}function je(e){return e.exploration||(e.exploration=K),e.exploration.variables={},e}ae("new_flags",(function(e){for(var t in e.global||(e.global=ee),(null==e||null==(n=e.thisRun)?void 0:n.newFlagsOnRetirement)||{}){var n;e.global.flags[t]=!0}return e}));var Oe=function(e){return e.Addition="Addition",e.Multiplier="Multiplier",e.Power="Power",e.Override="Override",e}({}),ke={};function xe(e,t,n,r){var o={id:t,transformation:r,type:n,tags:e};new Set(e.flat(2)).forEach((function(e){var n,r=null!=(n=null==ke?void 0:ke[e])?n:[];r.some((function(e){return e.id===t}))||(r.push(o),ke[e]=r)}))}var we={};function Ce(e,t,n,r){var o=null!=r?r:{},i=function(e){var t=e.join();if(null==(null==we?void 0:we[t])){var n=e.map((function(e){var t;return null!=(t=null==ke?void 0:ke[e])?t:[]})).flat().filter((function(t){return t.tags.some((function(t){return t.every((function(t){return e.includes(t)}))}))})),r=l()(new Set(n));we[t]=Object.fromEntries(Object.values(Oe).map((function(e){return[e,r.filter((function(t){return t.type===e}))]})))}return we[t]}(e),a=i[Oe.Power].map((function(e){return e.transformation(t,o,n)})).reduce((function(e,t){return Math.pow(null!=e?e:1,null!=t?t:1)}),n),u=i[Oe.Addition].map((function(e){return e.transformation(t,o,null!=a?a:0)})).reduce((function(e,t){return(null!=e?e:0)+(null!=t?t:0)}),a),c=i[Oe.Multiplier].map((function(e){return e.transformation(t,o,null!=u?u:0)})).reduce((function(e,t){return(null!=e?e:1)*(null!=t?t:1)}),u);return i[Oe.Override].map((function(e){return e.transformation(t,o,null!=c?c:0)})).reduce((function(e,t){return null!=t?t:e}),c)}function Se(e,t,n,r){return I(t,(function(t){return"t:"+e.join("")+n+JSON.stringify(r)}),(function(t){return Ce(e,t,n,r)}))}var Ee=function(e){return e.Production="Production",e.Consumption="Consumption",e.Cost="Cost",e.ManualGathering="ManualGathering",e.Loot="Loot",e.LootChance="LootChance",e.Cap="Cap",e.PerBuildingCap="PerBuildingCap",e.PerItemCap="PerItemCap",e.Researcher="Researcher",e.Apprentice="Apprentice",e.InventorySlot="InventorySlot",e.Creature="Creature",e.Threshold="Threshold",e.CostScale="CostScale",e.Research="Research",e.GameSpeed="GameSpeed",e.ExplorationBossRequirement="ExplorationBossRequirement",e.ExplorationDelay="ExplorationDelay",e.FromExploration="FromExploration",e.FromCreatures="FromCreatures",e.StunResistance="StunResistance",e.AutocastDelay="AutocastDelay",e.RandomEventWeight="RandomEventWeight",e.StorylineTriggerChance="StorylineTriggerChance",e.ExpRequirementScale="ExpRequirementScale",e.TimePiecePerResearch="TimePiecePerResearch",e.TimePiecePerEvent="TimePiecePerEvent",e.TimePiecePerWarpedSec="TimePiecePerWarpedSec",e.TimePiecePerMobMonstium="TimePiecePerMobMonstium",e.TimePiecePerCreaturesSec="TimePiecePerCreaturesSec",e.TimePiecePerFastSpeedup="TimePiecePerFastSpeedup",e.TimePiecePerFasterSpeedup="TimePiecePerFasterSpeedup",e.OfflineTimePieceGain="OfflineTimePieceGain",e.AttackDamageReceived="AttackDamageReceived",e.PostStunProtectionDuration="PostStunProtectionDuration",e.CanCastSpell="CanCastSpell",e.SchoolExpByUsage="SchoolExpByUsage",e.FinalIncomePerSec="FinalIncomePerSec",e.MaxSchoolLevel="MaxSchoolLevel",e.Action="Action",e.Spell="Spell",e.ActionEffect="ActionEffect",e.SpellCooldown="SpellCooldown",e.ActionMagnitude="ActionMagnitude",e.ActionVariance="ActionVariance",e.TemporaryEffectMagnitude="TemporaryEffectMagnitude",e.TemporaryEffectDuration="TemporaryEffectDuration",e.TemporaryEffectDurationPostProcessing="TemporaryEffectDurationPostProcessing",e.ItemEffect="ItemEffect",e.ItemQuality="ItemQuality",e.ItemCost="ItemCost",e}({}),Me={},Re={},Be={};function Te(e,t,n){Me[e]=t,null!=n&&(Re[e]=n)}function De(e){delete Me[e],delete Re[e],delete Be[e]}function Pe(e){return Object.keys(Me).filter((function(t){if(null!=(null==Re?void 0:Re[t])){var n=null==Be?void 0:Be[t],r=Re[t](e,n);if(null==(null==Be?void 0:Be[t]))return Be[t]=r,!1;if(r==(null==Be?void 0:Be[t]))return!1;Be[t]=r}return!0})).map((function(t){return Me[t](e)})).filter((function(e){return null!=e}))}function Ie(e,t){var n=[t];do{n.length>0&&(e.global.tickCount+=1,e=n.reduce((function(e,t){return t(e)}),e)),n=Pe(e)}while(n.length>0);return e.global.tickCount+=1,Object.assign({},e)}var _e=function(){function e(){Y()(this,e),this.store={},this.maxId=1}return U()(e,[{key:"register",value:function(e){var t=(this.maxId++).toString();(function(e){return"getId"in e})(e)&&(t=e.getId()),this.store[t]=e}},{key:"getById",value:function(e){return this.store[e]}},{key:"getAll",value:function(){return Object.values(this.store)}},{key:"reset",value:function(){this.maxId=1,this.store={}}}]),e}(),Ne=function(){function e(t,n){Y()(this,e),this.id=t,this.listener=n}return U()(e,[{key:"getId",value:function(){return this.id}},{key:"getListener",value:function(){return this.listener}}]),e}(),Fe=new _e,Le=(function(){function e(t,n){Y()(this,e),this.id=t,this.listener=n}U()(e,[{key:"getId",value:function(){return this.id}},{key:"getListener",value:function(){return this.listener}}])}(),new _e),Ye={};function Ve(){return new Promise((function(e,t){requestAnimationFrame((function(){e(null)}))}))}function Ue(e,t){Ye[e]=t}function Qe(e,t){return function(n){var r=Ce([Ee.GameSpeed],n,1,{isWarp:t}),o=e*r;return Object.values(Ye).forEach((function(e){n=e(n,o,t)})),n}}var Ge={secsPerTick:.5},He=Ge;function We(){return(We=u()((function*(e,t,n,r){var o=e;o.lastProcessedTime=n,Fe.getAll().forEach((function(e){var n=e.getListener()(t);n&&(o=n(o))})),r(o)}))).apply(this,arguments)}function Je(){return(Je=u()((function*(e,t,n,r){He=Ge;var o=e.warpTimeSecs,i=0,a=e;n(i,o);for(var u=0;i<o;){var c=Ce([Ee.GameSpeed],a,1,{isWarp:!0}),l=He.secsPerTick/c,s=Math.min(l,o-i);a=Ie(a,Qe(s,!0)),i+=s,((u+=1)-1)%100==0&&(n(i,o),yield Ve())}a.lastProcessedTime=t(),a.warpTimeSecs=0,Le.getAll().forEach((function(e){var t=e.getListener()(o);t&&(a=t(a))})),r(a),n(o,o)}))).apply(this,arguments)}function ze(e){var t;return(null==e||null==(t=e.global)?void 0:t.secondsPlayed)||0}function Ze(e){var t;return(null==e||null==(t=e.thisRun)?void 0:t.secondsPlayed)||0}var Xe=new(function(){function e(){Y()(this,e)}return U()(e,[{key:"getId",value:function(){return"empty"}},{key:"getTitle",value:function(e){return"[Deleted]"}},{key:"getDescription",value:function(e,t){return"This is a deleted game event"}},{key:"getAllowedOptions",value:function(e,t){return[]}},{key:"isTerminal",value:function(){return!0}},{key:"isActionable",value:function(e,t){return!1}}]),e}()),qe=function(e){return e.EARLY_GAME="EARLY_GAME",e.INCONSEQUENTIAL_RANDOM_EVENT="INCONSEQUENTIAL_RANDOM_EVENT",e.LEVEL_UP="LEVEL_UP",e.LEVEL_UP_FIRST_FIFTEEN_MINS="LEVEL_UP_FIRST_FIFTEEN_MINS",e.LEVEL_UP_EMPTY="LEVEL_UP_EMPTY",e.STORYLINE="STORYLINE",e.DO_NOT_AUTO_TRIGGER_IF_ONGOING="DO_NOT_AUTO_TRIGGER_IF_ONGOING",e.DO_NOT_POPUP="DO_NOT_POPUP",e}({}),Ke={};function $e(e){return(null==Ke?void 0:Ke[e])||Xe}var et={};function tt(e){et[e.getId()]=e}function nt(e,t){var n;return null==(n=e.eventOccurrences)?void 0:n[t]}function rt(e,t,n){var r=t.nextMessage;return r&&(null==n.eventOccurrences[e].messageHistory&&(n.eventOccurrences[e].messageHistory=[]),n.eventOccurrences[e].messageHistory.push(n.eventOccurrences[e].currentMessageId),n.eventOccurrences[e].currentMessageId=r.getId(),r.isTerminal()&&(n.eventOccurrences[e].timestamp=Date.now(),n.eventOccurrences[e].timestampSecondsPlayed=Ze(n))),t.transform&&(n=t.transform(n,n.eventOccurrences[e].params)),n}function ot(e,t){return rt.bind(this,e,t)}function it(e,t){return t.eventQueue.push(e),t}function at(e){return it.bind(this,e)}function ut(e,t){var n=t.eventQueue.lastIndexOf(e);return n>=0&&t.eventQueue.splice(n,1),t}function ct(e,t,n,r){var o=[];if((o.push.apply(o,l()(e.getTags())),o.push.apply(o,l()(n)),o.includes(qe.DO_NOT_AUTO_TRIGGER_IF_ONGOING)&&!r.nextEventIsManuallyTriggered)&&Object.values(r.eventOccurrences).find((function(t){return t.eventId==e.getId()&&t.currentMessageId&&!$e(t.currentMessageId).isTerminal()})))return r;var i=e.onTrigger();i&&(r=i(r,t)),o.includes(qe.STORYLINE)&&(r=ye("storyline_event_ever_triggered")(r));var a=e.getId()+Date.now();return(function(e,t){return!e.global.hideEventTags.some((function(e){return t.includes(e)}))&&!t.includes(qe.DO_NOT_POPUP)}(r,o)||r.nextEventIsManuallyTriggered)&&r.eventQueue.unshift(a),r.eventOccurrences[a]={eventOccurrenceId:a,eventId:e.getId(),currentMessageId:e.getMainEventMessage().getId(),timestamp:Date.now(),timestampSecondsPlayed:Ze(r),params:t,messageHistory:[]},r.nextEventIsManuallyTriggered=!1,r}function lt(e,t,n){return ct.bind(this,e,t||{},null!=n?n:[])}var st=n(298),ft=n(140),dt=n.n(ft),ht=n(322),gt=n.n(ht),mt=n(136),At=n(121),yt=n.n(At),pt={};function vt(e){pt[e.getName()]=e}function bt(e){return null==pt?void 0:pt[e]}var jt=yt()((function(e){var t={};return Object.keys(pt).filter((function(t){var n=pt[t].getArea();return Object(mt.isArray)(n)?n.includes(e):n===e})).forEach((function(e){var n=pt[e].getCategory();null!=t&&t[n]||(t[n]={}),t[n][e]=pt[e]})),t})),Ot=yt()((function(e){var t={};return Object.keys(pt).filter((function(t){var n=pt[t].getArea();return Object(mt.isArray)(n)?n.includes(e):n===e})).forEach((function(e){var n,r=null!=(n=pt[e].getSubcategory())?n:"Other";null!=t&&t[r]||(t[r]={}),t[r][e]=pt[e]})),t})),kt=function(e){return e.Fire="Fire",e.Earth="Earth",e.Air="Air",e.Water="Water",e.Nature="Nature",e.Lightning="Lightning",e.Darkness="Darkness",e}({}),xt=function(e){return e.Conjuration="Conjuration",e.Enchantment="Enchantment",e.Illusion="Illusion",e.Alchemy="Alchemy",e.Evocation="Evocation",e.Protection="Protection",e.Breeding="Breeding",e.Summoning="Summoning",e.Divination="Divination",e}({}),wt=new Map;function Ct(e,t){var n;return(null==(n=e.schoolExperience)?void 0:n[t])||0}function St(e){return Se([Ee.MaxSchoolLevel],e,60)}var Et=yt()((function(e,t,n){return e<=1?0:e>n?1/0:Math.floor(1e3*Math.pow(t,e-2))})),Mt=function e(t,n,r){var o;if(t<=1)return 0;if(t>r)return 1/0;var i=null==(o=wt.get(n))?void 0:o.get(t);return null!=i?i:e(t-1,n,r)+Et(t,n,r)};function Rt(e,t){var n,r;if(null==(null==e||null==(n=e.schoolExponents)?void 0:n[t])){var o=e.primarySchool===t,i=Ce([Ee.ExpRequirementScale,t],e,o?1.4:1.5,{school:t});e.schoolExponents[t]=i}return null!=(r=e.schoolExponents[t])?r:1.5}function Bt(e,t,n){var r=Rt(e,n);return Et(t,r,St(e))}function Tt(e,t,n){var r=Rt(e,n);return Mt(t,r,St(e))}function Dt(e,t,n){return function(e,t,n){for(var r=1;Mt(r+1,t,n)<=e;)r+=1;return r}(t,Rt(e,n),St(e))}function Pt(e,t){return I(e,(function(e){return"schoolLevel:"+t}),(function(e){var n;return Dt(e,(null==(n=e.schoolExperience)?void 0:n[t])||0,t)}))}function It(e,t,n){var r=Ct(n,e);return r+=t,r=Math.max(r,0),n.schoolExperience[e]=r,n}function _t(e,t){return It.bind(this,e,t)}function Nt(e){var t=0;for(var n in e.schoolExperience)t+=Ct(e,n);return t}function Ft(e,t){return t.primaryElement=e,t}function Lt(e,t){return t.primarySchool=e,t.schoolExponents={},t.thisRun.startTimestamp=Date.now(),0==t.global.totalTimesResetted&&0==t.global.newGamePlusCount&&(t.global.startTimestamp=Date.now()),t}function Yt(e){return Lt.bind(this,e)}function Vt(e){return Object.keys(((null==e?void 0:e.global)||ee).unlockedElements)}function Ut(e,t){return t.global||(t.global=ee),t.global.unlockedSchools[e]=!0,t}function Qt(e){return Ut.bind(this,e)}function Gt(e){return Object.keys(((null==e?void 0:e.global)||ee).unlockedSchools).filter((function(t){return((null==e?void 0:e.global)||ee).unlockedSchools[t]}))}var Ht=function(e){xe([[e,Ee.Research]],e+"PrimarySchoolMultiplier",Oe.Multiplier,(function(t){return t.primarySchool===e?2:1}))};for(var Wt in xt)Ht(Wt);function Jt(e,t){var n,r;return Math.min((null==e||null==(n=e.global)||null==(r=n.maxPrimarySchoolLevels)?void 0:r[t])||0,St(e))}function zt(e){var t,n=(null==e||null==(t=e.global)?void 0:t.maxPrimarySchoolLevels)||{},r=0;for(var o in n)r=Math.min(Math.max(r,n[o]||0),St(e));return r}function Zt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=Xt(e,t,n,r);return _t(t,o)(e)}function Xt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ce([].concat(l()(r),[t,Ee.SchoolExpByUsage]),e,3*(n||-4)+12,{school:t,level:n})}function qt(e){return I(e,(function(e){return"maximumSchoolLevelResearchMultiplier"}),(function(e){var t=Math.max(zt(e),1),n=function(e){var t,n=(null==e||null==(t=e.global)?void 0:t.maxPrimarySchoolLevels)||{},r=0;for(var o in n)r+=Math.min(n[o]||0,St(e));return r}(e);return(1+(Math.pow(1.12,t-1)-1)/1.8)*(Math.sqrt(16+n)/4)}))}function Kt(e){return I(e,(function(e){return"maximumSchoolLevelProductionMultiplierDx"}),(function(t){var n=qt(e);return 1+(Math.pow(n,.4)-1)/3.2}))}function $t(e,t){return!Object.keys(t).some((function(n){return!((t[n]||0)<=0)&&(Pt(e,n)<(t[n]||0)||!Gt(e).includes(n))}))}xe([[Ee.Research]],"MSLResearch",Oe.Multiplier,qt),xe([[Ee.Production]],"MSLProduction",Oe.Multiplier,Kt),xe([[Ee.Loot]],"MSLLoot",Oe.Multiplier,Kt),Te("MaxMaxSchoolLevels",(function(e){var t=Gt(e),n=e.global.maxSchoolLevels,r=!1;if(t.forEach((function(t){var o,i,a=null!=(o=null==(i=e.global.maxSchoolLevels)?void 0:i[t])?o:0,u=Pt(e,t);u>a&&(n[t]=u,r=!0)})),r)return function(e){return e.global.maxSchoolLevels=n,e}})),Object.keys(kt).forEach((function(e){xe([[Ee.Cost,e,"Area:Campus",Ee.Spell]],e+"SpellCostReducer",Oe.Multiplier,(function(t){return t.primaryElement==e?.5:1}))})),ae("mpl",(function(e){var t=null==e?void 0:e.primarySchool;if(e.global||(e.global=ee),t){var n=Pt(e,t);e.global.maxPrimarySchoolLevels[t]=Math.max(Jt(e,t),n)}return e}));var en=[1.4,1.42,1.435,1.5];en.forEach((function(e){return wt.set(e,new Map)}));for(var tn=function(e){en.forEach((function(t){var n;null==(n=wt.get(t))||n.set(e,Mt(e,t,499))}))},nn=1;nn<500;nn++)tn(nn);var rn={};function on(e){rn[e.getSpellName()]=e}function an(e){return null==rn?void 0:rn[e]}function un(e){var t=Object.fromEntries(Object.values(xt).map((function(e){return[e,[]]})));for(var n in rn){var r=rn[n];if(r.isVisible(e)){var o=r.getSchoolLevelRequirements();for(var i in o)void 0===(null==t?void 0:t[i])&&(t[i]=[]),t[i].push(r)}}var a=function(e){0===t[e].length?delete t[e]:t[e].sort((function(t,n){return(n.getSchoolLevelRequirements()[e]||0)-(t.getSchoolLevelRequirements()[e]||0)}))};for(var u in t)a(u);return t}function cn(e,t,n){var r,o;if(!n)return(null==(o=un(e))?void 0:o[t])||[];var i=G(e);return i.isFake=!0,i.schoolExperience[t]=Tt(i,Pt(e,t)+n,t),(null==(r=un(i))?void 0:r[t])||[]}function ln(e,t){null!=t&&t.recentSpellsCast||(t.recentSpellsCast=[]);var n=e.getSpellName();return t.recentSpellsCast=t.recentSpellsCast.filter((function(e){return e!=n})),t.recentSpellsCast.unshift(e.getSpellName()),t.recentSpellsCast=t.recentSpellsCast.slice(0,3),t}function sn(e,t){null!=t&&t.lastSpellCastTimes||(t.lastSpellCastTimes={});var n=e.getSpellName();return t.lastSpellCastTimes[n]=Ze(t),t}function fn(e){return sn.bind(this,e)}function dn(e){var t,n;return null!=(t=null==e||null==(n=e.favoriteSpells)?void 0:n.map((function(e){return an(e)})))?t:[]}function hn(e,t){var n=e.favoriteSpells.findIndex((function(e){return t.getSpellName()===e}));return n<0||e.favoriteSpells.splice(n,1),e}function gn(e,t){return e.favoriteSpells.findIndex((function(e){return t.getSpellName()===e}))>=0}var mn,An=Object(mt.promisify)(gt.a.gzip),yn=Object(mt.promisify)(gt.a.gunzip);function pn(){return(pn=u()((function*(){var e=yield A.default.getItem("PlayerContextState");return null!==e?On(JSON.parse(e)):G(ne)}))).apply(this,arguments)}function vn(){return(vn=u()((function*(e){var t=Math.max(Number.parseFloat((yield A.default.getItem("LastSaveSecondsPlayed"))||"0"),0);if(!(Math.max(ze(e),0)>=t))throw new Error("Not saving!!");yield bn(e)}))).apply(this,arguments)}function bn(e){return jn.apply(this,arguments)}function jn(){return(jn=u()((function*(e){var t=JSON.stringify(e);yield A.default.setItem("LastSaveSecondsPlayed",Math.max(ze(e),0).toString()),yield A.default.setItem("PlayerContextState",t)}))).apply(this,arguments)}function On(e){for(var t in null==e.global.autocastLoadouts&&(e.global.autocastLoadouts=Object.keys(e.autocast.loadouts).map((function(t){return{name:"",allocation:e.autocast.loadouts[t]}}))),null==e.global.quickbars&&(e.global.quickbars=[G(e.quickbar)]),e.autocast.apprenticeAllocation)null==an(t)&&delete e.autocast.apprenticeAllocation[t];for(var n in e.global.autocastLoadouts){var r,o=null==(r=e.global.autocastLoadouts[n])?void 0:r.allocation;if(null!=o)for(var i in Object.keys(o))null==an(i)&&delete o[i]}for(var a in e.global.quickbars){var u=e.global.quickbars[a];e.global.quickbars[a]=u.filter((function(e){return"action"!==e.type||null!=bt(e.name)}))}for(var c in null==e.global.activeSecondsPlayed&&(e.global.activeSecondsPlayed="untracked"),null==e.thisRun.activeSecondsPlayed&&(e.thisRun.activeSecondsPlayed="untracked"),(e=function(e){var t=[];be(e,"Conjuration_ultimate_event_completed")&&t.push("ultimateMasterConjurer");be(e,"Enchantment_ultimate_event_completed")&&t.push("ultimateMasterEnchanter");be(e,"Illusion_ultimate_event_completed")&&t.push("ultimateMasterIllusionist");be(e,"Alchemy_ultimate_event_completed")&&t.push("ultimateMasterAlchemist");be(e,"Evocation_ultimate_event_completed")&&t.push("ultimateMasterEvoker");be(e,"Protection_ultimate_event_completed")&&t.push("ultimateMasterProtector");be(e,"Breeding_ultimate_event_completed")&&t.push("ultimateMasterBreeder");be(e,"Summoning_ultimate_event_completed")&&t.push("ultimateMasterSummoner");be(e,"Divination_ultimate_event_completed")&&t.push("ultimateMasterDiviner");be(e,"Conjuration_mastery_event_completed")&&t.push("masterConjurer");be(e,"Enchantment_mastery_event_completed")&&t.push("masterEnchanter");be(e,"Illusion_mastery_event_completed")&&t.push("masterIllusionist");be(e,"Alchemy_mastery_event_completed")&&t.push("masterAlchemist");be(e,"Evocation_mastery_event_completed")&&t.push("masterEvoker");be(e,"Protection_mastery_event_completed")&&t.push("masterProtector");be(e,"Breeding_mastery_event_completed")&&t.push("masterBreeder");be(e,"Summoning_mastery_event_completed")&&t.push("masterSummoner");be(e,"Divination_mastery_event_completed")&&t.push("masterDiviner");be(e,"mimic_defeated")&&t.push("mimic");be(e,"dark_wisp_defeated")&&t.push("darkWisp");null==e.global.timesEnemyDefeated&&(e.global.timesEnemyDefeated={});return t.forEach((function(t){e.global.timesEnemyDefeated[t]={player:1,creatures:0}})),e}(e)).flags)e.global.flags["ever_"+c]=!0;return e.global.flags.storyline_event_ever_triggered=!0,Nt(e)>=1e4&&(e.global.flags.ever_retirement_unlocked=!0),dt()(G(ne),e)}function kn(e){return xn.apply(this,arguments)}function xn(){return(xn=u()((function*(e){var t=st.Buffer.from(st.Buffer.from(e,"base64").toString(),"base64"),n=yield yn(t),r=JSON.parse(n.toString());return null!==r?On(r):null}))).apply(this,arguments)}function wn(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=u()((function*(e){var t=yield An(JSON.stringify(e));return st.Buffer.from(t.toString("base64")).toString("base64")}))).apply(this,arguments)}function Sn(e){return(null==e?void 0:e.uiCommands)||[]}function En(e,t){return e.uiCommands||(e.uiCommands=[]),e.uiCommands.push(t),e}function Mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{showDecimals:!1,roundingMethod:mn.DEFAULT};if((e=Number(e))==1/0)return"\u221e";if(e>=1e24)return Mn(e/1e24,{showDecimals:!0,roundingMethod:t.roundingMethod})+"Sp";if(e>=1e21)return Mn(e/1e21,{showDecimals:!0,roundingMethod:t.roundingMethod})+"Sx";if(e>=1e18)return Mn(e/1e18,{showDecimals:!0,roundingMethod:t.roundingMethod})+"Qi";if(e>=1e15)return Mn(e/1e15,{showDecimals:!0,roundingMethod:t.roundingMethod})+"Qa";if(e>=1e12)return Mn(e/1e12,{showDecimals:!0,roundingMethod:t.roundingMethod})+"T";if(e>=1e9)return Mn(e/1e9,{showDecimals:!0,roundingMethod:t.roundingMethod})+"B";if(e>=1e6)return Mn(e/1e6,{showDecimals:!0,roundingMethod:t.roundingMethod})+"M";if(e>=1e4)return Mn(e/1e3,{showDecimals:!0,roundingMethod:t.roundingMethod})+"K";if(t.showDecimals&&Math.abs(e)<10&&!Number.isInteger(e)){var n=t.roundingMethod!=mn.UP?Math.floor(100*e):Math.ceil(100*e);return(n/100).toFixed(2)}if(t.showDecimals&&Math.abs(e)<100&&!Number.isInteger(e)){var r=t.roundingMethod!=mn.UP?Math.floor(10*e):Math.ceil(10*e);return(Math.floor(r)/10).toFixed(1)}var o=t.roundingMethod!=mn.UP?Math.floor(e):Math.ceil(e);return o.toFixed()}function Rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shortForm:!1,showDecimals:!1},n=t.shortForm,r=t.showDecimals,o=n?"sec":"second(s)",i=Mn(e,{showDecimals:r});return e>60&&(o=n?"min":"minute(s)",i=Mn(e/60,{showDecimals:r})),e>3600&&(o=n?"hr":"hour(s)",i=Mn(e/3600,{showDecimals:r})),i+" "+o}function Bn(e){return e.asDays()<1?e.hours().toFixed().padStart(2,"0")+":"+e.minutes().toFixed().padStart(2,"0")+":"+e.seconds().toFixed().padStart(2,"0"):Math.floor(e.asDays()).toFixed()+" days, "+e.hours().toFixed().padStart(2,"0")+":"+e.minutes().toFixed().padStart(2,"0")+":"+e.seconds().toFixed().padStart(2,"0")}!function(e){e.DEFAULT="DEFAULT",e.UP="UP",e.DOWN="DOWN"}(mn||(mn={}));var Tn=function(){function e(t,n,r,o){Y()(this,e),this.id=t,this.message=n,this.tags=r,this.onTriggerTransform=o,tt(this)}return U()(e,[{key:"onTrigger",value:function(){return this.onTriggerTransform}},{key:"getId",value:function(){return this.id}},{key:"getMainEventMessage",value:function(){return this.message}},{key:"getTags",value:function(){return this.tags}}]),e}();function Dn(e,t,n,r){return new Tn(e,t,n,r)}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n={description:"Close"};function Nn(e,t){return t?(Object.keys(t).map((function(e){return["{"+e+"}",isNaN(t[e])||""===t[e]?t[e]:Mn(t[e])]})).forEach((function(t){e=e.replace(t[0],t[1])})),e):e}var Fn=function(){function e(t,n,r,o){var i;Y()(this,e),this.id=t,this.title=n,this.description=r,this.options=o,Ke[(i=this).getId()]=i}return U()(e,[{key:"getId",value:function(){return this.id}},{key:"getTitle",value:function(e){return Nn(this.title,e)}},{key:"getDescription",value:function(e,t){return Nn(this.description(e),t)}},{key:"getAllowedOptions",value:function(e,t){return this.options.filter((function(n){return null==n.isVisible||n.isVisible(e,t)})).map((function(n){return In(In({},n.option),{},{description:Nn(n.option.description,t),isEnabled:null==n.isEnabled||n.isEnabled(e,t)})}))}},{key:"isTerminal",value:function(){return this.options.every((function(e){return!e.option.nextMessage&&!e.option.transform}))}},{key:"isActionable",value:function(e,t){return this.getAllowedOptions(e,t).some((function(e){return(e.nextMessage||e.transform)&&e.isEnabled}))}}]),e}(),Ln=function(){function e(t,n){Y()(this,e),this.id=t,this.title=n,this.description=function(){return""},this.options=[]}return U()(e,[{key:"setDescription",value:function(e){return this.description=e,this}},{key:"setSimpleDescription",value:function(e){return this.setDescription((function(t){return e})),this}},{key:"addOption",value:function(e,t,n,r,o){return this.options.push({option:{description:e,transform:n,nextMessage:t},isVisible:r,isEnabled:o}),this}},{key:"build",value:function(){return new Fn(this.id,this.title,this.description,this.options.length>0?this.options:[{option:_n}])}}]),e}(),Yn=function(){function e(t){Y()(this,e),this.eventBuilder=t,this.description=function(){return""},this.options=[],this.id=this.eventBuilder.newMessageId()}return U()(e,[{key:"setDescription",value:function(e){return this.description=e,this}},{key:"setSimpleDescription",value:function(e){return this.setDescription((function(t){return e})),this}},{key:"addOption",value:function(t){var n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return i instanceof e&&(a=i,i={}),this.options.push({description:t,nextMessage:a,transform:null==(n=i)?void 0:n.transform,isVisible:null==(r=i)?void 0:r.isVisible,isEnabled:null==(o=i)?void 0:o.isEnabled}),this}},{key:"build",value:function(){return this.eventBuilder.build()}}]),e}(),Vn=function(){function e(t,n,r){Y()(this,e),this.id=t,this.title=n,this.tags=r,this.messages={},this.lastMessageId=0}return U()(e,[{key:"createMessage",value:function(){var e=new Yn(this);return this.messages[e.id]=e,e}},{key:"newMessageId",value:function(){return this.id+(this.lastMessageId++).toString()}},{key:"setOnTrigger",value:function(e){return this.onTrigger=e,this}},{key:"build",value:function(){var e=this.buildRecursive(this.messages[this.id+"0"]);return Dn(this.id,e,this.tags,this.onTrigger)}},{key:"buildRecursive",value:function(e){var t=this;if(!(e instanceof Yn))return e;var n=e.options.map((function(e){var n=null==e?void 0:e.nextMessage,r=void 0;return null!=n&&(r=t.buildRecursive(n)),{option:{description:e.description,transform:e.transform,nextMessage:r},isVisible:e.isVisible,isEnabled:e.isEnabled}}));return new Fn(e.id,this.title,e.description,n.length>0?n:[{option:_n}])}}]),e}();function Un(e,t,n){return new Vn(e,t,n)}function Qn(e,t){return new Ln(e,t)}var Gn=Un("demo_finished","Thanks for playing the Demo",[]).createMessage().setSimpleDescription("You have beaten the Ancient Headmaster! This is the end of the Demo of Magic Research. **Thank you for playing!**\n  \nIn the full game, you can expect much more content: many new dungeons, new items and features, and countless new secrets... Your progress from the Demo can be easily transferred to the full game.\n\nAre you talented enough to lead your school to win the Tournament of Magic?\n\n**Get the full game now for Windows on [Steam](https://store.steampowered.com/app/2311680/Magic_Research/?utm_source=demo_end_web), for Android in [the Google Play Store](https://play.google.com/store/apps/details?id=com.mcolotto.magicresearchfull&utm_source=demo_end_web), or for iOS in the [App Store](https://apps.apple.com/app/id1671272877)!**").build(),Hn=n(141),Wn=n(1);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zn=i.a.memo((function(e){var t=e.h1?1:e.h2?2:e.h3?3:e.h4?4:void 0;return Object(Wn.jsx)(R.Text,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({h1Style:Zn.h1,h2Style:Zn.h2,h3Style:Zn.h3,h4Style:Zn.h4,maxFontSizeMultiplier:!0===e.doNotScaleFonts?1:0,accessibilityRole:e.h1||e.h2||e.h3||e.h4?"header":void 0,ariaLevel:t,accessibilityLevel:t,"aria-level":t},e))})),Zn=C.default.create({h1:{fontSize:20},h2:{fontSize:18},h3:{fontSize:16},h4:{fontSize:14}}),Xn=n(30),qn=n.n(Xn),Kn=n(49),$n={};function er(e){$n[e.getId()]=e}function tr(e){return null==$n?void 0:$n[e]}function nr(e){return null==$n?void 0:$n[e]}function rr(e){return ir(e)?Object.values($n).filter((function(t){return t.isCraftable(e)})):[]}function or(e){return ce(e,"new_inventory_unlocked")||ce(e,"inventory_unlocked")}function ir(e){return ce(e,"crafting_unlocked")||ce(e,"inventory_unlocked")}function ar(e){var t=G(e);return t.isFake=!0,Gt(t).forEach((function(n){var r,o;t.schoolExperience[n]=Tt(t,null!=(r=null==(o=e.global.maxSchoolLevels)?void 0:o[n])?r:1,n)})),rr(t)}function ur(e){return null!=(null==e?void 0:e.default)?e.default:e}var cr=["icon","style"];function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var sr={stone:n(787),wood:n(788),coins:n(789),mana:n(790),iron:n(791),water:n(792),boost:n(793),temperature:n(794),attack:n(795),attackDelay:n(796),defense:n(797),hp:n(798),hpRegen:n(799),monstium:n(800),debuff:n(801),generic:n(802),accuracy:n(803),dodge:n(804),timepiece:n(805),critChance:n(806),electricity:n(807),about:n(808),apprentices:n(809),bestiary:n(810),campus:n(811),creation:n(812),creatures:n(813),ending:n(814),exploration:n(815),help:n(816),inventory:n(817),options:n(818),research:n(819),retirement:n(820),stats:n(821),strengthen:n(822),upgrades:n(823)};var fr=i.a.memo((function(e){var t=e.icon,n=e.style,r=qn()(e,cr),o=sr[t],i=t;if(!o){var a=nr(t);a&&(o=a.getPicture(),i=a.getName(a.getDefaultParams()))}if(!o)return null;var u=[{width:32,height:32},n,e.small?{width:16,height:16}:{}];return Object(Wn.jsx)(Kn.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source:ur(o),accessibilityLabel:i,accessibilityRole:"image",style:u},r))})),dr=n(569),hr=n.n(dr)()(/\:([a-zA-Z_-]+)\:/,(function(e,t){return e[1]}));function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ar=Object(Hn.MarkdownIt)({typographer:!1}).use(hr,{containerClassName:"icon-embed"}),yr={paragraph:function(e,t,n,r){return Object(Wn.jsx)(M.default,{style:[e.index>0&&vr.markdownParagraph],children:t},Object(Hn.getUniqueID)())},"regexp-0":function(e,t,n,r){var o=e.sourceMeta.match[1];return k.default.select({default:Object(Wn.jsxs)(zn,{children:[Object(Wn.jsx)(fr,{style:"attack"===o?vr.imageStyleAndroidAttack:vr.imageStyleAndroid,small:!0,resizeMode:"contain",icon:o},Object(Hn.getUniqueID)()),"android"===k.default.OS&&"\u200b"]},Object(Hn.getUniqueID)()),ios:Object(Wn.jsx)(zn,{children:Object(Wn.jsx)(M.default,{style:"attack"===o?vr.imageContainerStyleiOSAttack:vr.imageContainerStyleiOS,children:Object(Wn.jsx)(fr,{style:"attack"===o?vr.imageStyleiOSAttack:vr.imageStyleiOS,small:!0,resizeMode:"contain",icon:o},Object(Hn.getUniqueID)())})},Object(Hn.getUniqueID)())})}};var pr=i.a.memo((function(e){var t,n,r,o,i=(null==e?void 0:e.style)||{},a=(null==e?void 0:e.containerStyle)||{},u=null==(t=e.children)||null==t.replace?void 0:t.replace(/((\d(K|M|B|T)?)|(Max)) :/g,(function(e,t){return t+":"})),c=null!=(n=e.accessibilityLabel)?n:null==(r=e.children)||null==r.replaceAll?void 0:r.replaceAll("*",""),l=null!=(o=null==e?void 0:e.accessibilityLiveRegion)?o:"none",s=Object(R.useTheme)();return Object(Wn.jsx)(M.default,{accessibilityLabel:c,accessibilityLiveRegion:l,accessible:!0,style:[vr.containerView,a],children:Object(Wn.jsx)(Hn.default,mr(mr({},e),{},{markdownit:Ar,rules:yr,style:{body:[{justifyContent:"flex-end",minHeight:21,lineHeight:k.default.select({ios:19,default:void 0}),color:s.theme.colors.black},i],bullet_list_icon:{lineHeight:k.default.select({ios:20,default:16}),marginTop:4},bullet_list:{width:"100%"},list_item:{alignItems:"center",justifyContent:"center"},heading2:{lineHeight:24}},children:u}))})})),vr=C.default.create({markdownParagraph:{marginTop:k.default.select({ios:8,default:4})},markdownTextgroup:{flexDirection:"row",flexWrap:"wrap",alignItems:"center",padding:0,margin:0},text:{lineHeight:16},imageStyleAndroid:{height:16,width:16,justifyContent:"flex-end",alignItems:"center",top:2,marginLeft:2},imageStyleAndroidAttack:{height:16,width:16,justifyContent:"flex-end",alignItems:"center",top:2,marginLeft:2,marginRight:2},imageContainerStyleiOS:{width:18,alignItems:"center",justifyContent:"center"},imageContainerStyleiOSAttack:{width:20,alignItems:"center",justifyContent:"center"},imageStyleiOS:{height:16,width:16,justifyContent:"center",alignItems:"center",alignSelf:"center",top:2},imageStyleiOSAttack:{height:16,width:16,justifyContent:"center",alignItems:"center",alignSelf:"center",top:2,right:2},containerView:k.default.select({default:{},web:{flex:1}})});function br(){var e,t,n=Q.isDemo()?"**Demo Version**":"**Full Version**",r=null!=(e=z())?e:"Unknown",o="## Magic Research\n\n  \n"+n+"\n\n"+("Version "+(null!=(t=Z())?t:"Unknown")+" ("+r+")")+"\n\n\nA game by **@Maticolotto**\n\n\n**Credits**\n\nAssets from:\n  * Pipoya RPG Monster Pack, by Pipoya [(https://pipoya.itch.io/free-rpg-monster-pack)](https://pipoya.itch.io/free-rpg-monster-pack)\n  * Aekashics Librarium, by Aekashics [(http://www.akashics.moe)](http://www.akashics.moe)\n  * 1000+ Fantasy RPG Icons, by finalbossblues [(https://finalbossblues.itch.io/icons)](https://finalbossblues.itch.io/icons)\n\nSpecial thanks to **@jpascua93** for pre-launch feedback and development\n\nCheck out the **[Discord](https://discord.gg/bPhGsaqR9d)** to discuss the game!\n\n[Privacy Policy](https://mcolotto.github.io/magic-research-demo/privacy-policy)\n\n"+(Q.isDemo()?"Get the full version for Windows on [Steam](https://store.steampowered.com/app/2311680/Magic_Research/?utm_source=demo_about_web), for Android in [the Google Play Store](https://play.google.com/store/apps/details?id=com.mcolotto.magicresearchfull&utm_source=demo_about_web) or for iOS in [the App Store](https://apps.apple.com/app/magic-research/id1671272877)!":"");return Object(Wn.jsxs)(M.default,{style:jr.container,children:[Object(Wn.jsx)(zn,{h1:!0,children:"About"}),Object(Wn.jsx)(M.default,{style:jr.explanation,children:Object(Wn.jsx)(pr,{style:jr.explanationText,children:o})})]})}var jr=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},explanation:{marginTop:16,flex:1,alignItems:"stretch",width:"100%"},explanationText:{width:"100%"}}),Or=n(122),kr=n(165);function xr(e,t){if(e.autocast.apprenticesPaused)return e;var n=wr(e),r=Ce([Ee.AutocastDelay],e,60);for(var o in n){var i=n[o]||0;if(i>0){var a=t/r*i+Cr(e,o);if(e.autocast.spellAutocastProgress[o]=a,a>1){var u=an(o);u&&u.isEnabled(e)&&(!_r(e)||u.isCastingRecommended(e))&&(e.autocast.spellAutocastProgress[o]=0,e=u.doAction({isAutomatic:!0},e))}}}return e}function wr(e){var t;return(null==e||null==(t=e.autocast)?void 0:t.apprenticeAllocation)||{}}function Cr(e,t){var n,r;return null!=(n=null==(r=e.autocast.spellAutocastProgress)?void 0:r[t])?n:0}var Sr={};function Er(e){if(null==(null==Sr?void 0:Sr[e.getName()])){var t=e.getSchoolLevelRequirements(),n={Conjuration:0,Enchantment:0,Illusion:0,Alchemy:0,Evocation:0,Protection:0,Breeding:0,Summoning:0,Divination:0};for(var r in t)n[r]=(t[r]||-1)+1;Sr[e.getName()]=n}return Sr[e.getName()]}function Mr(e,t){return $t(e,Er(t))}function Rr(e){return Se([Ee.Apprentice],e,0)}function Br(e){var t=wr(e),n=0;for(var r in t){var o=an(r);o&&o.isVisible(e)&&(n+=t[r])}return Rr(e)-n}function Tr(e,t,n){var r;if(!Mr(n,e))return n;var o=e.getSpellName(),i=(null==(r=wr(n))?void 0:r[o])||0,a=t>0?Math.min(Br(n),t):Math.max(-i,t);return n.autocast.apprenticeAllocation[o]=i+a,n}function Dr(e,t){return Tr.bind(this,e,t)}function Pr(e,t){var n,r,o=JSON.parse(JSON.stringify((null==(n=e.global.autocastLoadouts)||null==(r=n[t])?void 0:r.allocation)||{})),i=Object.values(rn).sort((function(e,t){return Math.max.apply(Math,l()(Object.values(e.getSchoolLevelRequirements())))-Math.max.apply(Math,l()(Object.values(t.getSchoolLevelRequirements())))})),a=Rr(e),u={};for(var c of i){var s;if(Mr(e,c)&&c.isVisible(e)){var f=null!=(s=null==o?void 0:o[c.getSpellName()])?s:0;if(f>0){var d=Math.min(f,a);u[c.getSpellName()]=d,a-=d}}}return e.autocast.apprenticeAllocation=u,e.autocast.lastLoadoutUsed=t,e}function Ir(e){return ve(e,"smarter_apprentices_unlocked")}function _r(e){return Ir(e)&&ve(e,"smarter_apprentices_turned_on")}var Nr=function(e){return e.Mana="Mana",e.Stone="Stone",e.Wood="Wood",e.Water="Water",e.Iron="Iron",e.Temperature="Temperature",e.Monstium="Monstium",e.Electricity="Electricity",e.Coins="Coins",e.TimePieces="Time Pieces",e}({}),Fr={Mana:{baseCap:100,icon:"mana"},Coins:{baseCap:1e3,icon:"coins"},Stone:{baseCap:50,icon:"stone"},Wood:{baseCap:50,icon:"wood"},Water:{baseCap:10,icon:"water"},Iron:{baseCap:20,icon:"iron"},Temperature:{baseCap:500,icon:"temperature"},Monstium:{baseCap:200,icon:"monstium"},Electricity:{baseCap:1e3,icon:"electricity"},"Time Pieces":{baseCap:3e4,icon:"timepiece"}};function Lr(e){return Fr[e]}function Yr(e){return Object.keys(e.resources).sort((function(e,t){return Object.values(Nr).indexOf(e)-Object.values(Nr).indexOf(t)}))}function Vr(e,t){return Ce([t,Ee.Cap],e,Fr[t].baseCap)}function Ur(e,t){var n=e.resources[t];return(null==n?void 0:n.cap)||Fr[t].baseCap}function Qr(e){return Object.keys(e.resources).forEach((function(t){var n=Vr(e,t),r=e.resources[t];r.cap=n,r.current>r.cap&&(r.current=r.cap)})),e}function Gr(e,t){var n,r;return(null==(n=e.resources)||null==(r=n[t])?void 0:r.current)||0}function Hr(e,t,n){var r;null==(null==(r=n.resources)?void 0:r[e])&&(n.resources[e]={current:0,cap:Vr(n,e)});var o=n.resources[e];return o.current+=t,o.current=Math.min(o.current,o.cap),o.current=Math.max(o.current,0),n}function Wr(e,t){return Hr.bind(this,e,t)}var Jr=function(){function e(t,n){Y()(this,e),this.id=t,this.calculator=n}return U()(e,[{key:"getId",value:function(){return this.id}},{key:"getCalculator",value:function(){return this.calculator}}]),e}(),zr=new _e;function Zr(e,t){return I(e,(function(e){return"incomePerSec"}),(function(e){return zr.getAll().map((function(t){return t.getCalculator()(e)}))}),t)}function Xr(e){var t={},n=Zr(e,!0);for(var r in n.forEach((function(n){var r=!0;for(var o in n){var i,a=o,u=.05*(null!=(i=n[a])?i:0);u<0&&Gr(e,a)<-u&&(r=!1)}if(r)for(var c in n){var l,s,f=c,d=null!=(l=null==t?void 0:t[f])?l:0;t[f]=d+(null!=(s=null==n?void 0:n[f])?s:0)}})),t){var o;t[r]=Ce([Ee.FinalIncomePerSec,r],e,null!=(o=t[r])?o:0)}return t}function qr(e){return(null==e?void 0:e.inventory)||[]}function Kr(e,t){var n=JSON.stringify(null==e?void 0:e.params);return qr(t).findIndex((function(t){return t.itemOccurrence.itemId==(null==e?void 0:e.itemId)&&n==JSON.stringify(t.itemOccurrence.params)}))}function $r(e){return I(e,(function(e){return"inventoryCap"}),(function(e){return Ce([Ee.InventorySlot],e,12)}))}function eo(e,t,n){var r=Kr(e,n);return r>=0?(n.inventory||(n.inventory=[]),n.inventory[r]={itemOccurrence:e,amount:n.inventory[r].amount+t},n):(qr(n).length>=$r(n)||(n.inventory||(n.inventory=[]),n.inventory.push({itemOccurrence:e,amount:t})),n)}function to(e,t,n){var r=Kr(e,n);if(r<0)return n;n.inventory||(n.inventory=[]);var o=n.inventory[r].amount-t;return o>0?n.inventory[r]={itemOccurrence:e,amount:o}:n.inventory.splice(r,1),n}function no(e,t){var n=Kr(e,t);return-1===n?0:qr(t)[n].amount}function ro(e,t){return qr(t).filter((function(t){return t.itemOccurrence.itemId==e.getId()})).reduce((function(e,t){return e+t.amount}),0)}function oo(e,t,n){for(var r=G(n);t>0;){var o=qr(r),i=o.findIndex((function(t){return t.itemOccurrence.itemId==e.getId()}));if(i<0)return n;var a=o[i].amount;r=to(o[i].itemOccurrence,Math.min(a,t),r),t-=a}return r}Ue("IncomeOverTime",(function(e,t){if(t<=0)return e;var n=Zr(e,!1),r={};for(var o of n){var i=!0;for(var a in o){var u,c=a,l=(null!=(u=o[c])?u:0)*t;l<0&&Gr(e,c)<-l&&(i=!1)}if(i)for(var s in o){var f,d,h=s,g=(null!=(f=o[h])?f:0)*t;r[h]=(null!=(d=null==r?void 0:r[h])?d:0)+g}}for(var m in r){var A;r[m]=Ce([Ee.FinalIncomePerSec,m],e,(null!=(A=r[m])?A:0)/t)*t}for(var y in r){var p,v;if(0!=(null!=(p=null==r?void 0:r[y])?p:0))e=Wr(y,null!=(v=null==r?void 0:r[y])?v:0)(e)}return e}));var io,ao=["Consumable","Hand","Body","Accessory"],uo=["Material"];function co(e,t,n){return tr(e.itemId).getTags(t,e.params).some((function(e){return e.tag===n}))}function lo(e){return e.inventory.sort((function(t,n){for(var r of ao){var o=co(t.itemOccurrence,e,r),i=co(n.itemOccurrence,e,r);if(o&&!i)return-1;if(i&&!o)return 1}for(var a of uo){var u=co(t.itemOccurrence,e,a),c=co(n.itemOccurrence,e,a);if(u&&!c)return 1;if(c&&!u)return-1}return 0})),e}!function(e){e.Player="Player",e.Enemy="Enemy",e.Summon="Summon"}(io||(io={}));function so(e,t){var n,r;return(null==(n=e.temporaryEffects)||null==(r=n[t])?void 0:r.endTime)||0}function fo(e,t){return so(e,t)>Ze(e)}function ho(e){var t=[];for(var n in e.temporaryEffects)if(fo(e,n)){var r=e.temporaryEffects[n];"number"===typeof r?t.push({id:n,name:n,setTime:e.temporaryEffects[n],endTime:e.temporaryEffects[n],isBeneficial:!0,combatOnly:!1,isEnemyTemporaryEffect:!1,params:{}}):t.push(r)}return t}function go(e,t,n,r,o){var i,a,u,c,l,s,f=r.mode||"replace",d=null==(i=r.isBeneficial)||i,h=null!=(a=r.combatOnly)&&a,g=null!=(u=r.isEnemyTemporaryEffect)&&u,m=null!=(c=r.params)?c:{},A=Ce([Ee.TemporaryEffectDurationPostProcessing,e,g?io.Enemy:io.Player],o,n,{effectExtra:r}),y=so(o,e),p="add"===f?Math.max(y+A,Ze(o)+A):Ze(o)+A;o.temporaryEffects||(o.temporaryEffects={});var v={id:e,name:t,setTime:Ze(o),endTime:p,isBeneficial:d,combatOnly:h,isEnemyTemporaryEffect:g,dispellable:null==(l=r.dispellable)||l,hidden:null!=(s=r.hidden)&&s,params:m};for(var b of Object.values(po))v=b(o,v);return o.temporaryEffects[e]=v,o}function mo(e,t,n,r){return go.bind(this,e,t,n,r)}function Ao(e){return go.bind(this,e,"",-1e10,{})}function yo(e){return ho(e).forEach((function(t){t.combatOnly&&(e=Ao(t.id)(e))})),e}var po={};function vo(e,t){po[e]=t}var bo=function(e){return e.Gather="Gather",e.Mana="Mana",e.Production="Production",e.Storage="Storage",e.Electricity="Electricity",e.Ancient="Ancient",e.Housing="Housing",e["Use Time Pieces"]="Use Time Pieces",e}({}),jo=function(){function e(){Y()(this,e),this.tagsByEffect={}}return U()(e,[{key:"getId",value:function(){return this.getName()}},{key:"getDisplayName",value:function(e){return this.getName()}},{key:"getBaseActionEffects",value:function(){return{}}},{key:"getSubcategory",value:function(){}},{key:"getTagsByEffect",value:function(e,t){var n,r;null==(null==(n=this.tagsByEffect)?void 0:n[e])&&(this.tagsByEffect[e]=[].concat(l()(this.getTags()),l()(null!=(r=t.tags)?r:[]),[Ee.ActionEffect]));return this.tagsByEffect[e]}},{key:"getActionEffects",value:function(e,t){var n=this.getBaseActionEffects(),r={};for(var o in n)if(null==t||o==t){var i=n[o];r[o]=Ce(this.getTagsByEffect(o,i),e,i.value,{action:this})}return r}},{key:"getTags",value:function(){var e=[Ee.Action,this.getCategoryTag(),this.getAreaTag(),this.getId()],t=this.getSubcategoryTag();return null!=t&&e.push(t),e}},{key:"getCategory",value:function(){return"Actions"}},{key:"getCategoryTag",value:function(){return"Category:"+this.getCategory()}},{key:"getSubcategoryTag",value:function(){if(null!=this.getSubcategory())return"Subcategory:"+this.getSubcategory()}},{key:"getAreaTag",value:function(){return"Area:"+this.getArea()}},{key:"canAfford",value:function(e){var t=this.getCost(e);return Object.keys(t.resources).every((function(n){var r;return Gr(e,n)>=(null!=(r=t.resources[n])?r:0)}))&&Object.keys(t.items).every((function(n){return ro(tr(n),e)>=t.items[n]}))}},{key:"isEnabled",value:function(e){return this.canAfford(e)}},{key:"isActive",value:function(e){return fo(e,this.getName())}}]),e}(),Oo=n(532),ko=n(47),xo=n(23),wo=n(137),Co=n.n(wo),So=function(){function e(t){Y()(this,e),this.data=t}return U()(e,[{key:"getItem",value:function(){return tr(this.data.occurrence.itemId)}},{key:"isActive",value:function(e){return this.getItem().isActive(e)}},{key:"getDisplayName",value:function(e){var t=this.getItem(),n=t.getName(this.data.occurrence.params),r=no(this.data.occurrence,e),o=0;t.getTags(e,this.data.occurrence.params).findIndex((function(e){return"Consumable"==e.tag}))>=0&&(o=t.getCooldownLeftSec(e));var i=n;return 1!=r&&(i+=" ("+r+")"),o>0&&(i+=" ("+Mn(o,{showDecimals:!1})+" sec)"),i}},{key:"isEnabled",value:function(e){var t;return(null==(t=this.getItem().getPrimaryAction(e,this.data.occurrence.params))?void 0:t.isEnabled)||!1}},{key:"getTransform",value:function(e){var t;return(null==(t=this.getItem().getPrimaryAction(e,this.data.occurrence.params))?void 0:t.transform)||function(e){return e}}},{key:"toQuickbarData",value:function(){return this.data}}]),e}(),Eo=Co()((function(e){return e.doAction.bind(e,{isAutomatic:!1})})),Mo=function(){function e(t){Y()(this,e),this.data=t}return U()(e,[{key:"getAction",value:function(){return bt(this.data.name)}},{key:"isActive",value:function(e){return this.getAction().isActive(e)}},{key:"getDisplayName",value:function(e){return this.getAction().getDisplayName(e)}},{key:"isEnabled",value:function(e){return this.getAction().isEnabled(e)}},{key:"getTransform",value:function(e){return Eo(this.getAction())}},{key:"toQuickbarData",value:function(){return this.data}}]),e}();function Ro(e){var t,n=null==(t=e.global.quickbars)?void 0:t[e.global.currentQuickbar];return null==n&&(n=[],e.global.quickbars[e.global.currentQuickbar]=n),n}function Bo(e,t){return To(e,{type:"action",name:t.getName()})}function To(e,t){return Io(e,t)||Po(e)||Ro(e).push(t),e}function Do(e,t){var n=JSON.stringify(t),r=Ro(e).findIndex((function(e){return JSON.stringify(e)==n}));return r<0||Ro(e).splice(r,1),e}function Po(e){return Ro(e).length>=10}function Io(e,t){var n=JSON.stringify(t);return Ro(e).findIndex((function(e){return JSON.stringify(e)==n}))>=0}var _o=n(6),No=n.n(_o),Fo=n(7),Lo=n.n(Fo),Yo=n(2),Vo=n.n(Yo),Uo={};function Qo(e){Uo[e.getBuildingName()]=e,vt(e)}function Go(e,t){var n,r;return(null==(n=e.buildings)||null==(r=n[t.getBuildingName()])?void 0:r.current)||0}function Ho(e,t){var n,r;return(null==(n=e.buildings)||null==(r=n[t.getBuildingName()])?void 0:r.turnedOn)||0}function Wo(e,t,n){var r,o=e.getBuildingName();null==(null==(r=n.buildings)?void 0:r[o])&&(n.buildings[o]={current:0,turnedOn:0});var i=Ho(n,e)+t;return i<0||i>Go(n,e)||(n.buildings[o].turnedOn=i),n}function Jo(e,t){return Wo.bind(this,e,t)}function zo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Zo=function(e){No()(n,e);var t=zo(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getName",value:function(){return this.getBuildingName()}},{key:"getDisplayName",value:function(e){return Go(e,this)>0?this.getName()+" ("+Go(e,this)+")":this.getName()}},{key:"getCategory",value:function(){return"Buildings"}},{key:"getCost",value:function(e){return{resources:this.getResourceCost(e),items:{}}}},{key:"getResourceCost",value:function(e){var t=this,n=Go(e,this),r=this.getBaseResourceCost(),o=this.getBaseResourceScale(),i={};return Object.keys(r).forEach((function(a){var u=Ce([].concat(l()(t.getTags()),[Ee.Cost,a]),e,r[a]),c=Ce([].concat(l()(t.getTags()),[Ee.CostScale,a]),e,o[a]-1);i[a]=Math.ceil(u*Math.pow(1+c,n))})),i}},{key:"canTurnOff",value:function(){return!1}},{key:"doAction",value:function(e,t){var n;if(!this.canAfford(t))return t;var r=this.getBuildingName(),o=this.getResourceCost(t);null==(null==(n=t.buildings)?void 0:n[r])&&(t.buildings[r]={current:0,turnedOn:0});var i=t.buildings[r];return i.current+=1,i.turnedOn=Ho(t,this)+(e.isAutomatic&&t.global.automaticallyBuiltBuildingsStartOff&&this.canTurnOff()?0:1),Object.keys(o).forEach((function(e){t=Wr(e,-o[e])(t)})),t}}]),n}(jo),Xo=n(91);function qo(e){console.log("unlocking "+e)}function Ko(e,t){0}function $o(e,t){Ko()}var ei=function(){function e(t,n,r,o,i,a,u){Y()(this,e),this.name=t,this.order=n,this.isCompleted=r,this.isBonusActive=o,this.hintDescription="string"===typeof i?function(e){return i}:i,this.getBonusDescription="string"===typeof a?function(e){return a}:a,this.isHintUnlockable=u}return U()(e,[{key:"getId",value:function(){return this.name}}]),e}(),ti=new _e;var ni=yt()((function(){return ti.getAll().sort((function(e,t){return e.order-t.order}))})),ri={};function oi(e){return e.thisRun.endingTriggered}function ii(e,t){return e.global.endingsTriggered.includes(t)}var ai=yt()((function(e,t){return"dark"===e?Object(xo.color)(t).lighten(1.2).string():Object(xo.color)(t).darken(.3).string()}));function ui(e){var t;return ai(e.mode,null==e||null==(t=e.colors)?void 0:t.disabled)}var ci={Fire:"#c30",Earth:"#740",Water:"#08f",Air:"#0b4",Nature:"#5b0",Lightning:"#80f",Darkness:"#444"},li={Fire:"#820",Earth:"#630",Water:"#048",Air:"#063",Nature:"#360",Lightning:"#529",Darkness:"#444"};function si(e,t){return"dark"===e?li[t]:ci[t]}function fi(e,t){return t?ui(e):"white"}function di(e){var t=Object(R.useTheme)();return Object(Wn.jsx)(pr,{style:[{color:t.theme.colors.grey1},e.style||{}],children:e.children})}function hi(e){var t=Object(R.useTheme)();return Object(Wn.jsx)(pr,{style:[pi.effectText,{color:t.theme.colors.grey1},e.style||{}],children:e.children})}function gi(e){var t=ce(e,"research_unlocked"),n=ce(e,"autocast_unlocked"),r=or(e),o=ce(e,"exploration_unlocked"),i=Nt(e)>=1e4,a=ve(e,"newgameplus_unlocked"),u=ce(e,"upgrades_unlocked");return["Campus",t?"Research":null,n?"Apprentices":null,r?"Inventory":null,o?"Exploration":null,ce(e,"creatures_unlocked")?"Creatures":null,u?"Upgrades":null,ve(e,"strengthening_unlocked")&&o?"Strengthen":null,null!=oi(e)?"Ending":null,a?"Creation":null,i?"Retirement":null,"Stats",ve(e,"bestiary_unlocked")?"Bestiary":null,"Help","Options","About"].filter((function(e){return null!=e}))}function mi(e,t){return Object(o.useMemo)((function(){if("web"===k.default.OS){var n=B.Gesture.Fling().direction(B.Directions.LEFT).onEnd(function(){var t=function(t,n){n&&t.translationX<0&&e()};return t._closure={swipeLeftHandler:e},t.asString="function _f(e,success){const{swipeLeftHandler}=jsThis._closure;{if(success&&e.translationX<0){swipeLeftHandler();}}}",t.__workletHash=1714604776936,t.__location="C:\\Users\\mcolo\\magic-research\\MagicResearch\\components\\utility\\Miscellaneous.tsx (266:15)",t}()),r=B.Gesture.Fling().direction(B.Directions.RIGHT).onEnd(function(){var e=function(e,n){n&&e.translationX>0&&t()};return e._closure={swipeRightHandler:t},e.asString="function _f(e,success){const{swipeRightHandler}=jsThis._closure;{if(success&&e.translationX>0){swipeRightHandler();}}}",e.__workletHash=8889445257066,e.__location="C:\\Users\\mcolo\\magic-research\\MagicResearch\\components\\utility\\Miscellaneous.tsx (273:15)",e}());return B.Gesture.Race(n,r)}var o={x:0,y:0,initialX:0,initialY:0,initialTimestamp:0,lastTimestamp:0,status:"end"};return B.Gesture.Manual().runOnJS(!0).onTouchesDown(function(){var e=function(e,t){"begin"!=o.status&&(o.initialX=e.allTouches[0].x,o.initialY=e.allTouches[0].y,o.x=e.allTouches[0].x,o.y=e.allTouches[0].y,o.initialTimestamp=Date.now(),o.lastTimestamp=Date.now(),o.status="begin")};return e._closure={sharedTouchPosition:o},e.asString='function _f(e,manager){const{sharedTouchPosition}=jsThis._closure;{if(sharedTouchPosition.status=="begin"){return;}sharedTouchPosition.initialX=e.allTouches[0].x;sharedTouchPosition.initialY=e.allTouches[0].y;sharedTouchPosition.x=e.allTouches[0].x;sharedTouchPosition.y=e.allTouches[0].y;sharedTouchPosition.initialTimestamp=Date.now();sharedTouchPosition.lastTimestamp=Date.now();sharedTouchPosition.status="begin";}}',e.__workletHash=1471786190243,e.__location="C:\\Users\\mcolo\\magic-research\\MagicResearch\\components\\utility\\Miscellaneous.tsx (297:21)",e}()).onTouchesMove(function(){var n=function(n,r){if("begin"==o.status){var i=Date.now(),a=Math.max(i-o.initialTimestamp,1)/1e3,u=n.allTouches[0].x-o.initialX,c=n.allTouches[0].y-o.initialY,l=u/a;Math.abs(c)>65||2.5*Math.abs(c)>Math.abs(u)&&Math.abs(u)>80||(l<-300&&n.allTouches[0].x-o.initialX<-80?(e(),o.status="end"):l>300&&n.allTouches[0].x-o.initialX>80&&(t(),o.status="end"),o.x=n.allTouches[0].x,o.y=n.allTouches[0].y,o.lastTimestamp=i)}};return n._closure={sharedTouchPosition:o,Y_POSITION_THRESHOLD:65,POSITION_THRESHOLD:80,VELOCITY_THRESHOLD:300,swipeLeftHandler:e,swipeRightHandler:t},n.asString='function _f(e,manager){const{sharedTouchPosition,Y_POSITION_THRESHOLD,POSITION_THRESHOLD,VELOCITY_THRESHOLD,swipeLeftHandler,swipeRightHandler}=jsThis._closure;{if(sharedTouchPosition.status!="begin"){return;}const currentTimestamp=Date.now();const timestampDeltaSec=Math.max(currentTimestamp-sharedTouchPosition.initialTimestamp,1)/1000.0;const deltaX=e.allTouches[0].x-sharedTouchPosition.initialX;const deltaY=e.allTouches[0].y-sharedTouchPosition.initialY;const velocityX=deltaX/timestampDeltaSec;const velocityY=deltaY/timestampDeltaSec;const tooVertical=Math.abs(deltaY)>Y_POSITION_THRESHOLD;if(tooVertical){return;}if(Math.abs(deltaY)*2.5>Math.abs(deltaX)&&Math.abs(deltaX)>POSITION_THRESHOLD){return;}if(velocityX<-VELOCITY_THRESHOLD&&e.allTouches[0].x-sharedTouchPosition.initialX<-POSITION_THRESHOLD){swipeLeftHandler();sharedTouchPosition.status="end";}else if(velocityX>VELOCITY_THRESHOLD&&e.allTouches[0].x-sharedTouchPosition.initialX>POSITION_THRESHOLD){swipeRightHandler();sharedTouchPosition.status="end";}sharedTouchPosition.x=e.allTouches[0].x;sharedTouchPosition.y=e.allTouches[0].y;sharedTouchPosition.lastTimestamp=currentTimestamp;}}',n.__workletHash=0xc2b6f3d7626,n.__location="C:\\Users\\mcolo\\magic-research\\MagicResearch\\components\\utility\\Miscellaneous.tsx (313:21)",n}()).onTouchesUp(function(){var e=function(e,t){if(0===e.numberOfTouches){var n=Date.now(),r=Math.max(n-o.initialTimestamp,1)/1e3;e.allTouches[0].x,o.initialX,e.allTouches[0].y,o.initialY,e.allTouches[0].x,o.initialX;o.status="end"}};return e._closure={sharedTouchPosition:o},e.asString='function _f(e,manager){const{sharedTouchPosition}=jsThis._closure;{if(e.numberOfTouches===0){const currentTimestamp=Date.now();const timestampDeltaSec=Math.max(currentTimestamp-sharedTouchPosition.initialTimestamp,1)/1000.0;const velocityX=(e.allTouches[0].x-sharedTouchPosition.initialX)/timestampDeltaSec;const velocityY=(e.allTouches[0].y-sharedTouchPosition.initialY)/timestampDeltaSec;const deltaX=e.allTouches[0].x-sharedTouchPosition.initialX;sharedTouchPosition.status="end";}}}',e.__workletHash=4466138280156,e.__location="C:\\Users\\mcolo\\magic-research\\MagicResearch\\components\\utility\\Miscellaneous.tsx (354:19)",e}()).onTouchesCancelled(function(){var e=function(e,t){o.status="end"};return e._closure={sharedTouchPosition:o},e.asString='function _f(e,manager){const{sharedTouchPosition}=jsThis._closure;{sharedTouchPosition.status="end";}}',e.__workletHash=2875476599822,e.__location="C:\\Users\\mcolo\\magic-research\\MagicResearch\\components\\utility\\Miscellaneous.tsx (372:26)",e}())}),[e,t])}function Ai(){var e=Object(E.default)(),t=e.width;return yi(e.height,t)}function yi(e,t){return t<700?{wideLayout:!1,showMenu:!1,showSpellMenu:!1,showEventsMenu:!1,activeContentTabs:1}:t<960?{wideLayout:!0,showMenu:!0,showSpellMenu:!1,showEventsMenu:!1,activeContentTabs:1}:t<1250?{wideLayout:!0,showMenu:!0,showSpellMenu:!0,showEventsMenu:!1,activeContentTabs:1}:{wideLayout:!0,showMenu:!0,showSpellMenu:!0,showEventsMenu:!0,activeContentTabs:Math.min(5,Math.max(1,Math.floor((t-900)/480)))}}var pi=C.default.create({effectText:{fontWeight:"bold"}}),vi=["disabled","disabledTitleStyle","titleStyle","containerStyle","autoRepressConfig","enableAutoRepress"];function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){var t=Object(R.useTheme)(),n=e.disabled,r=e.disabledTitleStyle,i=e.titleStyle,a=e.containerStyle,u=e.autoRepressConfig,c=e.enableAutoRepress,l=qn()(e,vi),s=Object(o.useMemo)((function(){return{color:fi(t.theme,!0)}}),[t]),d=Object(o.useRef)(!1),g=Object(o.useRef)(n);g.current=n;var m=Object(o.useRef)(300),A=Object(o.useRef)(null),y=Object(o.useState)(!1),p=f()(y,2),v=p[0],b=p[1];Object(o.useEffect)((function(){if(v){var e,t=setTimeout((function(){return b(!1)}),(null!=(e=null==u?void 0:u.minTimeMs)?e:100)/3);return function(){return clearTimeout(t)}}}),[v]);var j=Object(o.useCallback)((function(){var t,n;d.current&&(g.current||e.onPress&&e.onPress(),b(!0),m.current=Math.max(null!=(t=null==u?void 0:u.minTimeMs)?t:100,m.current*(null!=(n=null==u?void 0:u.dropoffMultiplier)?n:.94)),A.current=setTimeout(j,m.current))}),[e.onPress]),O=Object(o.useCallback)((function(){var e;d.current=!0,A.current=setTimeout((function(){var e;d.current&&!g.current&&(m.current=null!=(e=null==u?void 0:u.startingRepressTime)?e:300,j())}),null!=(e=null==u?void 0:u.startingThreshold)?e:600)}),[j]),x=Object(o.useCallback)((function(){d.current=!1,null!=A.current&&(clearTimeout(A.current),A.current=null)}),[j]);Object(o.useEffect)((function(){return function(){x()}}),[x]);var w=Object(o.useMemo)((function(){return C.default.flatten([{color:fi(t.theme,!1)},i])}),[i,t]),S=Object(o.useMemo)((function(){var e;return"android"===k.default.OS&&k.default.Version>=21&&!v?Xo.default.Ripple(Object(Or.color)(null==w||null==(e=w.color)?void 0:e.toString()).alpha("dark"===t.theme.mode?.1:.2).rgb().string(),!0):void 0}),[w,v,t]),E=Object(o.useMemo)((function(){return C.default.flatten([a,v&&"android"!=k.default.OS&&{opacity:.9}])}),[a,t,v]),M=Object(o.useMemo)((function(){return[s,r]}),[s,r]);return Object(o.useMemo)((function(){return Object(Wn.jsx)(R.Button,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({disabledTitleStyle:M,onPressIn:c?O:void 0,onPressOut:c?x:void 0,disabled:n,titleStyle:w,background:S,containerStyle:E},l))}),[M,c,O,x,S,l.onPress,l.title,l.icon,E,w,n,v])}var Oi=i.a.memo((function(e){var t=Object(R.useTheme)();return Object(Wn.jsxs)(M.default,{style:xi.row,accessible:!0,children:[Object(Wn.jsxs)(M.default,{style:xi.inlineRow,children:[Object(Wn.jsx)(fr,{icon:e.icon,style:xi.icon,small:!0,accessibilityLabel:""}),Object(Wn.jsxs)(zn,{children:[e.name,": "]})]}),Object(Wn.jsxs)(M.default,{style:xi.costValue,children:[Object(Wn.jsx)(zn,{style:e.current<e.cost&&{color:t.theme.colors.error},children:Mn(e.current,{showDecimals:!0,roundingMethod:e.current>=e.cost?mn.UP:mn.DEFAULT})}),Object(Wn.jsx)(zn,{children:"/"}),Object(Wn.jsx)(zn,{style:e.cap<e.cost&&{color:t.theme.colors.error},children:Mn(e.cost,{showDecimals:!1,roundingMethod:mn.UP})})]})]})}));function ki(e){var t=Object(o.useContext)(re),n=Object.keys(e.resources).map((function(n){var r=e.resources[n],o=Ur(t,n),i=Gr(t,n),a=Lr(n);return Object(Wn.jsx)(Oi,{name:n,icon:a.icon,current:i,cost:r,cap:o},n)})),r=e.items?Object.keys(e.items).map((function(n){var r,o=null==e||null==(r=e.items)?void 0:r[n],i=tr(n),a=ro(i,t);return Object(Wn.jsx)(Oi,{name:i.getName(i.getDefaultParams()),icon:i.getId(),current:a,cost:o,cap:1e10},n)})):[];return Object(Wn.jsxs)(M.default,{style:xi.container,children:[n,r]})}var xi=C.default.create({container:{justifyContent:"center",alignItems:"stretch"},inlineRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},icon:{marginRight:2},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},costValue:{minWidth:80,flexDirection:"row",justifyContent:"flex-end"},notMet:{color:"red"}});function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{disableMinus:!1,disablePlus:!1,onPressMinus:function(){},onPressPlus:function(){}},t=Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{enableAutoRepress:!0,containerStyle:Ci.plusMinusAllocatorButton,style:Ci.plusMinusAllocatorButtonInner,iconContainerStyle:Ci.plusMinusAllocatorButtonInner,buttonStyle:Ci.plusMinusAllocatorButtonInner,title:"-",onPress:e.onPressMinus,disabled:e.disableMinus,autoRepressConfig:{dropoffMultiplier:.8,startingThreshold:300,startingRepressTime:200,minTimeMs:50}})}),[e.onPressMinus,e.disableMinus]),n=Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{enableAutoRepress:!0,containerStyle:Ci.plusMinusAllocatorButton,style:Ci.plusMinusAllocatorButtonInner,iconContainerStyle:Ci.plusMinusAllocatorButtonInner,buttonStyle:Ci.plusMinusAllocatorButtonInner,title:"+",onPress:e.onPressPlus,disabled:e.disablePlus,autoRepressConfig:{dropoffMultiplier:.7,startingThreshold:300,startingRepressTime:150,minTimeMs:50}})}),[e.onPressPlus,e.disablePlus]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Ci.row,children:[t,n]})}),[t,n])}var Ci=C.default.create({plusMinusAllocatorButton:{height:32,width:32,borderRadius:16,marginHorizontal:4},plusMinusAllocatorButtonInner:{paddingHorizontal:0,paddingVertical:0,height:32},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}}),Si=i.a.createContext({tooltip:void 0,position:{containerWidth:1}}),Ei=i.a.createContext({setTooltip:function(e,t,n){},clearTooltip:function(e){},onMouseLeave:function(e){},onMouseEnter:function(e,t){},onUnmountTooltip:function(e){}}),Mi=i.a.createContext(!0),Ri=function(){var e=Object(o.useContext)(Si),t=Object(R.useTheme)(),n=Object(E.default)(),r=Ai();return Object(o.useMemo)((function(){var o,i,a,u,c,l,s,f;return Object(Wn.jsx)(M.default,{style:{zIndex:800,display:null!=e.tooltip&&r.showSpellMenu?void 0:"none",position:"absolute",left:null==(o=e.position)?void 0:o.left,top:null==(i=e.position)?void 0:i.top,bottom:null==(a=e.position)?void 0:a.bottom,right:null==(u=e.position)?void 0:u.right,minWidth:e.position.containerWidth,alignItems:"center"},pointerEvents:"none",children:Object(Wn.jsx)(M.default,{style:{padding:8,alignSelf:"center",backgroundColor:t.theme.colors.background,borderRadius:4,borderWidth:1,borderColor:t.theme.colors.grey3,maxWidth:Math.min(n.width-(null!=(c=null==(l=e.position)?void 0:l.left)?c:0),null!=(s=null==(f=e.position)?void 0:f.right)?s:n.width,n.width/3,480)},pointerEvents:"none",children:e.tooltip})})}),[e.tooltip,JSON.stringify(e.position),t,n.width,r.showSpellMenu])},Bi=function(e){return e.DEFAULT="DEFAULT",e.LEFT_OF_ELEMENT="LEFT_OF_ELEMENT",e.RIGHT_OF_ELEMENT="RIGHT_OF_ELEMENT",e}({}),Ti=function(e){var t,n=null!=(t=e.tooltipPosition)?t:Bi.DEFAULT,r=Object(o.useContext)(Ei),i=Object(o.useContext)(Mi),a=Object(E.default)(),u=Object(o.useRef)(null),c=Object(o.useCallback)((function(t){var o;null==(o=u.current)||o.measure((function(o,i,u,c,l,s){switch(n){case Bi.DEFAULT:s>a.height/2?r.setTooltip(e.tooltipId,e.tooltip,{left:l,containerWidth:u,bottom:a.height-s+4},t):r.setTooltip(e.tooltipId,e.tooltip,{top:s+c+4,left:l,containerWidth:u},t);break;case Bi.RIGHT_OF_ELEMENT:s>a.height/2?r.setTooltip(e.tooltipId,e.tooltip,{left:Math.min(l+u+4,a.width-480),containerWidth:30,bottom:Math.max(0,a.height-s-c)},t):r.setTooltip(e.tooltipId,e.tooltip,{top:s,left:Math.min(l+u+4,a.width-480),containerWidth:30},t);break;case Bi.LEFT_OF_ELEMENT:s>a.height/2?r.setTooltip(e.tooltipId,e.tooltip,{right:a.width-l+4,containerWidth:30,bottom:Math.max(0,a.height-s-c)},t):r.setTooltip(e.tooltipId,e.tooltip,{top:s,right:a.width-l+4,containerWidth:30},t)}}))}),[r.setTooltip,e.tooltip,e.tooltipId,u,a.height,n]),l=Object(o.useCallback)((function(){var t=Math.random();r.onMouseEnter(e.tooltipId,t),c(t)}),[e.tooltipId,c]),s=Object(o.useCallback)((function(){r.onMouseLeave(e.tooltipId)}),[e.tooltipId]);return Object(o.useEffect)((function(){c()}),[c]),Object(o.useEffect)((function(){i||r.onUnmountTooltip(e.tooltipId)}),[i,r.clearTooltip,e.tooltipId]),Object(o.useEffect)((function(){null==e.tooltip&&r.clearTooltip(e.tooltipId)}),[e.tooltip,e.tooltipId,r.clearTooltip]),Object(o.useEffect)((function(){return c(),function(){return r.onUnmountTooltip(e.tooltipId)}}),[e.tooltipId]),Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{ref:u,style:[Di.tooltipWrapper,e.containerStyle],onMouseEnter:l,onMouseLeave:s,children:e.children})}),[u,e.children,e.containerStyle,l,s])},Di=C.default.create({tooltipWrapper:{alignSelf:"stretch",flex:1}});function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ii(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=e.action,i=e.showAddToQuickbar||!1,a=r.getCost(t),u=0===Object.keys(a.resources).length&&0===Object.keys(a.items).length,c=Object.keys(a.resources).every((function(e){var n;return(null!=(n=a.resources[e])?n:0)<=Ur(t,e)})),l=r instanceof Zo&&r.canTurnOff(),s=r instanceof Zo&&Go(t,r),f=r instanceof Zo&&Ho(t,r),d=Object(o.useMemo)((function(){var e=r.getDisplayDescription(t)+" **"+r.getDisplayEffect(t)+"**";return Object(Wn.jsx)(M.default,{style:_i.descriptionTextContainer,children:Object(Wn.jsx)(di,{style:{flex:1},children:e})})}),[(!e.collapsed||"web"===k.default.OS)&&r.getDisplayDescription(t),(!e.collapsed||"web"===k.default.OS)&&r.getDisplayEffect(t)]),h=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:_i.costContainer,children:[Object(Wn.jsx)(pr,{children:"Cost:"}),Object(Wn.jsx)(ki,{resources:r.getCost(t).resources,items:r.getCost(t).items})]})}),[(!e.collapsed||"web"===k.default.OS)&&JSON.stringify(r.getCost(t))]),g=Object(o.useCallback)((function(){return n.current.apply(Jo(r,-1))}),[r]),m=Object(o.useCallback)((function(){return n.current.apply(Jo(r,1))}),[r]),A=Object(o.useMemo)((function(){if(!l)return null;var e=f+"/"+s;return Object(Wn.jsxs)(M.default,{style:_i.turnOnRow,children:[Object(Wn.jsx)(pr,{children:"Amount active:"}),Object(Wn.jsxs)(M.default,{style:_i.turnOnQuantityContainer,children:[Object(Wn.jsx)(pr,{children:e}),Object(Wn.jsx)(M.default,{style:_i.plusMinusContainer,children:Object(Wn.jsx)(wi,{disableMinus:0===f,disablePlus:f===s,onPressMinus:g,onPressPlus:m})})]})]})}),[l,s,f,g,m]),y=Object(R.useTheme)(),p=!r.isEnabled(t),v=Object(o.useMemo)((function(){var e=Object(xo.color)(ui(y.theme)).hsl().hue(0);return"dark"===y.theme.mode?e.saturationl(32).lighten(.3).string():e.saturationl(48).lighten(.05).string()}),[y]),b=Object(o.useMemo)((function(){var e=Object(xo.color)(y.theme.colors.disabled).hsl().hue(0);return"dark"===y.theme.mode?e.darken(.2).string():e.darken(.1).string()}),[y]),j=Object(o.useCallback)((function(){return n.current.apply(r.doAction.bind(r,{isAutomatic:!1}))}),[]),O=Object(o.useMemo)((function(){return Object(Wn.jsx)(Ti,{tooltip:e.collapsed?Object(Wn.jsxs)(M.default,{children:[d,!u&&h]}):void 0,tooltipId:r.getName(),tooltipPosition:Bi.RIGHT_OF_ELEMENT,children:Object(Wn.jsx)(ji,{onPress:j,enableAutoRepress:!0,title:r.getDisplayName(t),titleStyle:_i.buttonTitle,containerStyle:[_i.buttonContainer],disabledStyle:!c&&{backgroundColor:b},disabledTitleStyle:!c&&{color:v},disabled:p},r.getName())})}),[r.getName(),r.getDisplayName(t),c,b,v,p,j,d,u,h,e.collapsed]);return Object(o.useMemo)((function(){var n=Object(Wn.jsx)(ji,{onPress:function(){return t.apply((function(e){return Bo(e,r)}))},title:"Add to Quickbar",titleStyle:_i.smallButtonTitle,containerStyle:[_i.quickbarButtonContainer],disabled:Io(t,{type:"action",name:r.getName()})||Po(t)});return Object(Wn.jsxs)(M.default,{style:_i.actionContainer,children:[Object(Wn.jsxs)(M.default,{style:_i.buttonRowContainer,children:[Object(Wn.jsxs)(M.default,{style:_i.buttonContainerView,children:[e.showCompact&&e.collapsed&&Object(Wn.jsx)(zn,{h3:!0,onPress:e.onPressExpand,style:[_i.buttonContainer,p&&{color:ui(y.theme)},!c&&{color:v}],children:r.getDisplayName(t)},r.getName()),(!e.collapsed||!e.showCompact)&&O,i&&n]}),Object(Wn.jsx)(ko.default,{onPress:e.onPressExpand,accessibilityLabel:e.collapsed?"Expand":"Collapse",children:Object(Wn.jsx)(M.default,{style:_i.expandContainer,children:Object(Wn.jsx)(Oo.default,{name:e.collapsed?"chevron-right":"chevron-down",size:24,color:y.theme.colors.black})})})]}),!e.collapsed&&Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{style:_i.marginTop,children:d}),!u&&h,l&&A]})]},r.getName())}),[O,r.getName(),r.getDisplayName(t),p,l,A,!e.collapsed&&h,!e.collapsed&&d,c,i,i&&JSON.stringify(t.quickbar),e.collapsed,e.onPressExpand,y])}var _i=C.default.create({actionContainer:{marginVertical:8},buttonRowContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},quickbarButtonContainer:{marginLeft:8},expandContainer:{width:64,flexDirection:"row",justifyContent:"center",alignSelf:"stretch",alignItems:"center",cursor:"pointer"},costContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginTop:4},descriptionTextContainer:{flex:1,flexDirection:"row",flexWrap:"wrap"},buttonTitle:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fontSize:16,textAlign:"center",paddingVertical:1},k.default.select({android:{fontFamily:"sans-serif-medium"},default:{fontSize:18}})),smallButtonTitle:{fontSize:12},buttonContainerView:{flexDirection:"row",flex:1},buttonContainer:{flex:1},buttonContainerSmall:{marginRight:0},capTooLowText:{color:"#d99"},turnOnRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8},turnOnQuantityContainer:{flexDirection:"row",alignItems:"center"},plusMinusContainer:{marginLeft:8},spellButtonTitleContainer:{flex:1,flexDirection:"row"},spellButtonTitleOnlyContainer:{flex:1},spellButtonCostContainer:{flexDirection:"row",width:40,justifyContent:"flex-end"},spellManaIcon:{height:16,width:16,justifyContent:"flex-end",alignItems:"center",top:1,marginLeft:2},marginTop:{marginTop:8}});function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){var t=Object(R.useTheme)();return Object(Wn.jsx)(R.Divider,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({color:t.theme.colors.divider},e))}function Li(e){return Object(Wn.jsxs)(M.default,{style:[Vi.category,e.containerStyle],children:[Object(Wn.jsx)(zn,{style:[Vi.categoryTitle,e.titleStyle],h4:!0,children:e.title}),Object(Wn.jsx)(Fi,{style:Vi.categoryDivider})]})}function Yi(e){return Object(Wn.jsxs)(M.default,{style:[Vi.category,e.containerStyle],children:[Object(Wn.jsx)(zn,{style:[Vi.categoryTitle,e.titleStyle],h4:!0,children:e.title}),Object(Wn.jsx)(Fi,{style:Vi.categoryDivider}),e.children]})}var Vi=C.default.create({category:{paddingTop:16},categoryTitle:{marginBottom:4,fontWeight:"bold"},categoryDivider:{height:2*C.default.hairlineWidth}}),Ui=i.a.createContext({getUIState:function(e){return null},setUIState:function(e,t){}});function Qi(e,t,n){var r,i=null!=(r=e.getUIState(t))?r:n,a=Object(o.useState)(i),u=f()(a,2),c=u[0],l=u[1];return[c,Object(o.useCallback)((function(n){l(n),e.setUIState(t,n)}),[e,t,l])]}function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wi(e){var t=e.useSubcategories?Ot(e.area):jt(e.area),n=e.category,r=Object(o.useContext)(re),i=Object.keys(t[n]||{}).filter((function(e){return t[n][e].isVisible(r)})),a=i.join(","),u=Object(o.useMemo)((function(){return i.map((function(r){var o,i=t[n][r];return Object(Wn.jsx)(Ii,{action:i,collapsed:!(null!=(o=e.expandedActions)&&o[r]),onPressExpand:e.setActionCallback.bind(null,r),showAddToQuickbar:e.showAddToQuickbar,showCompact:!e.useButtonsWhenCollapsed},r)}))}),[a,n,JSON.stringify(e.expandedActions),e.setActionCallback,e.showAddToQuickbar]);return Object(o.useMemo)((function(){return 0===i.length?null:Object(Wn.jsxs)(Yi,{title:n,children:[e.useButtonsWhenCollapsed&&Object(Wn.jsx)(M.default,{style:zi.underCategoryPadding}),Object(Wn.jsx)(M.default,{children:u[0]},i[0]),u.slice(1).map((function(t,n){return Object(Wn.jsxs)(M.default,{children:[!e.useButtonsWhenCollapsed&&Object(Wn.jsx)(Fi,{}),t]},i[n])}))]},n)}),[a,u,n])}function Ji(e){var t=Qi(Object(o.useContext)(Ui),"ActionsContainer."+e.area+".ExpandedActions",{}),n=f()(t,2),r=n[0],i=n[1],a=Object(o.useCallback)((function(e){r[e]=!(null!=r&&r[e]),i(G(r))}),[r,!1]),u=[];return u=e.useSubcategories?Object.keys(bo).map((function(t){return Object(o.createElement)(Wi,Hi(Hi({},e),{},{category:t,expandedActions:r,key:t,useSubcategories:!0,useButtonsWhenCollapsed:!0,setActionCallback:a}))})):["Actions","Buildings"].map((function(t){return Object(o.createElement)(Wi,Hi(Hi({},e),{},{category:t,expandedActions:r,key:t,useSubcategories:!1,useButtonsWhenCollapsed:!0,setActionCallback:a}))})),Object(Wn.jsx)(M.default,{children:u})}var zi=C.default.create({underCategoryPadding:{height:8}});function Zi(e){var t,n=Object(o.useContext)(re),r=Object(o.useRef)(n);r.current=n;var i=null!=(t=n.global.autocastLoadouts)?t:[],a=Object(o.useCallback)((function(e){r.current.apply((function(t){return Pr(t,e)}))}),[]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Xi.loadoutsLoadRow,children:[Object(Wn.jsx)(M.default,{style:Xi.loadTextContainer,children:Object(Wn.jsx)(zn,{children:"Load:"})}),i.length>0?i.map((function(e,t){if(null==e)return null;var n=""!=(null==e?void 0:e.name)?null==e?void 0:e.name:"Slot "+(t+1);return Object(Wn.jsx)(ji,{title:n,containerStyle:Xi.loadButton,titleStyle:Xi.smallButtonTitle,onPress:a.bind(null,t)},t)})):Object(Wn.jsx)(zn,{style:Xi.noLoadoutsText,children:"No loadouts have been saved yet!"})]})}),[JSON.stringify(i),a])}var Xi=C.default.create({loadoutsLoadRow:{flexDirection:"row",flexWrap:"wrap",alignItems:"center"},loadButton:{marginLeft:8},loadTextContainer:{marginRight:8},noLoadoutsText:{fontStyle:"italic"},smallButtonTitle:{fontSize:12}}),qi=n(42);function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e){var t=Object(o.useRef)();return Object(o.useEffect)((function(){var n;null==(n=t.current)||null==n.setNativeProps||n.setNativeProps({"aria-checked":e.accessibilityState.checked,"aria-disabled":e.accessibilityState.disabled})}),[e.accessibilityState.checked,e.accessibilityState.disabled,t.current]),Object(Wn.jsx)(qi.default,$i({ref:t},e))}function ta(e){return Object(Wn.jsx)(R.CheckBox,$i({Component:ea},e))}var na=n(22),ra=n(573),oa=["style","selectedValue"];function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ua(){return Object(Wn.jsx)(g.default,{name:"arrow-drop-down",size:24,color:"#fff"})}function ca(e){var t=e.style,n=e.selectedValue,r=qn()(e,oa),o=Object(R.useTheme)();return Object(Wn.jsx)(ra.default,aa(aa({},r),{},{style:{inputAndroidContainer:{backgroundColor:o.theme.colors.primary,padding:8,paddingRight:32,borderRadius:4},inputAndroid:C.default.flatten([{color:"#fff"},t]),iconContainer:{top:10,right:4,width:"web"===na.Platform.OS?0:24,display:"web"===na.Platform.OS?"none":"flex"}},placeholder:{},fixAndroidTouchableBug:!0,Icon:ua,value:n,useNativeAndroidPickerStyle:!1,dropdownIconColor:o.theme.colors.black,dropdownIconRippleColor:o.theme.colors.black,items:e.data}))}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){var t=e.spell,n=Object(o.useContext)(re),r=Object(o.useRef)(n);r.current=n;var i=t.getSpellName(),a=wr(n),u=(null==a?void 0:a[i])||0,c=Se([Ee.AutocastDelay],n,60),l=_r(n),s=u>0?t.getCooldown(n):0,f=Object(o.useMemo)((function(){var e=t.getEstimatedMinAutocastDelay(n);return u>0?l?Math.max(c/u,e,s):Math.max(c/u,s):0}),[u>0&&t.getEstimatedMinAutocastDelay(n),u>0&&l,u>0&&c,u>0&&u,u>0&&s]),d=Object(o.useMemo)((function(){return u>0?"("+Mn(f,{showDecimals:!0})+"s/cast)":""}),[u,f]),h=Mr(n,t),g=I(n,(function(e){return"freeApprentices"}),Br)>0,m=Object(o.useCallback)((function(){return r.current.apply(Dr(t,e.applyAll?-1/0:-1))}),[t,e.applyAll]),A=Object(o.useCallback)((function(){return r.current.apply(Dr(t,e.applyAll?1/0:1))}),[t,e.applyAll]),y=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:ha.plusMinusAllocatorContainer,children:Object(Wn.jsx)(wi,{disableMinus:0===u,disablePlus:!g,onPressMinus:m,onPressPlus:A})})}),[u,g,m,A]),p=Object(o.useMemo)((function(){return Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsx)(M.default,{style:ha.frequencyTextContainer,children:Object(Wn.jsx)(zn,{children:d})}),Object(Wn.jsx)(zn,{children:u})]})}),[d,u]),v=Object(o.useMemo)((function(){var e=Object(Wn.jsxs)(M.default,{style:ha.row,children:[p,y]});if(!h){var r=Er(t),o=[];for(var i in r)Pt(n,i)<r[i]&&o.push(i+" Lv"+r[i]);e=Object(Wn.jsxs)(zn,{style:ha.allocatorText,children:["Requires: ",o.join(", ")]})}return e}),[p,h,t,y]),b=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:ha.spellNameContainer,children:Object(Wn.jsxs)(zn,{numberOfLines:3,children:[i,":"]})})}),[i]),j=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[ha.row,ha.spellRowContainer,e.isOdd&&{backgroundColor:Object(Or.color)(j.theme.colors.grey5).alpha(.5)}],children:[b,v]})}),[i,v,e.isOdd,j])}function fa(e){var t,n,r,i,a,u=Object(o.useContext)(re),c=Object(o.useRef)(u);c.current=u;var l=Object(o.useState)(null!=(t=null==u||null==(n=u.autocast)||null==(r=n.lastLoadoutUsed)?void 0:r.toString())?t:"0"),s=f()(l,2),d=s[0],h=s[1],g=un(u),m=Br(u),A=Object(o.useCallback)((function(){c.current.apply((function(e){return e.autocast.apprenticesPaused=!e.autocast.apprenticesPaused,e}))}),[]),y=Object(o.useMemo)((function(){for(var e=[],t=0;t<8;t++)e.push({key:t.toString(),value:t.toString(),label:"Slot "+(t+1)});return Object(Wn.jsx)(ca,{onValueChange:h,selectedValue:d,data:e})}),[8,h,d]),p=function(e){if(e.autocast.apprenticesPaused)return 0;var t=Se([Ee.AutocastDelay],e,60),n=0,r=wr(e);for(var o in r){var i=r[o]||0;if(i>0){var a,u,c=an(o);n+=((null==(a=c.getCost(e))||null==(u=a.resources)?void 0:u.Mana)||0)/Math.max(t/i,c.getEstimatedMinAutocastDelay(e))}}return n}(u),v=null!=(i=null==(a=Xr(u))?void 0:a.Mana)?i:0,b=Rr(u),j=Object(R.useTheme)(),O=Qi(Object(o.useContext)(Ui),"autocast_applyall",!1),k=f()(O,2),x=k[0],w=k[1],C=Object(o.useCallback)((function(){w(!x)}),[x,w]),S=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[ha.apprenticeDataContainer,{borderTopColor:j.theme.colors.divider}],children:[Object(Wn.jsx)(M.default,{style:ha.assignAllContainer,children:Object(Wn.jsx)(ta,{title:"Assign / unassign all at once",checked:x,textStyle:ha.checkboxText,containerStyle:ha.checkboxContainer,onPress:C})}),Object(Wn.jsxs)(M.default,{style:[ha.row,ha.totalApprenticesContainer],children:[Object(Wn.jsx)(zn,{children:"Apprentices Available: "}),Object(Wn.jsxs)(zn,{children:[Mn(m),"/",Mn(b)]})]}),Object(Wn.jsxs)(M.default,{style:[ha.row,ha.manaCostContainer],children:[Object(Wn.jsx)(zn,{children:"Estimated Mana consumption: "}),Object(Wn.jsxs)(zn,{children:[Mn(p,{showDecimals:!0}),"/sec"]})]}),Object(Wn.jsx)(M.default,{style:[ha.apprenticeWarningContainer],children:p>v&&Object(Wn.jsx)(zn,{style:{color:j.theme.colors.warning},children:"Warning: Your Mana income may not be enough to sustain the Apprentices!"})})]})}),[p,v,m,b,C,x,j]),E=u.global.autocastLoadouts,T=Object(o.useState)(""),D=f()(T,2),P=D[0],I=D[1];Object(o.useEffect)((function(){var e,t;return I(null!=d&&null!=(e=null==E||null==(t=E[Number.parseInt(d)])?void 0:t.name)?e:"")}),[d]);var _=Object(o.useCallback)((function(e){return h(e.toString())}),[h]);Object(o.useEffect)((function(){h(u.autocast.lastLoadoutUsed.toString())}),[u.autocast.lastLoadoutUsed]);var N=Ir(u),F=_r(u),L=Object(o.useCallback)((function(){c.current.apply((function(e){return _r(e)?function(e){return pe.bind(this,e)}("smarter_apprentices_turned_on")(e):ye("smarter_apprentices_turned_on")(e)}))}),[]),Y=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{style:[ha.marginBottom,ha.marginTop],children:u.autocast.apprenticesPaused?Object(Wn.jsx)(R.Button,{title:"Unpause Apprentices",onPress:A}):Object(Wn.jsx)(R.Button,{title:"Pause Apprentices",onPress:A})}),N&&Object(Wn.jsx)(M.default,{style:ha.marginBottom,children:Object(Wn.jsx)(ta,{title:"Enable smarter apprentices",checked:F,textStyle:ha.checkboxText,containerStyle:ha.checkboxContainer,onPress:L})}),Object(Wn.jsxs)(Yi,{title:"Loadouts",children:[Object(Wn.jsxs)(M.default,{style:[ha.loadoutsRow,ha.marginBottom],children:[Object(Wn.jsx)(zn,{children:"Save:"}),Object(Wn.jsxs)(M.default,{style:ha.loadoutRest,children:[Object(Wn.jsx)(M.default,{style:ha.pickerContainer,children:y}),Object(Wn.jsx)(R.Input,{placeholder:"Name...",value:P,onChangeText:I,containerStyle:ha.loadoutNameContainer,inputContainerStyle:ha.loadoutNameInput,inputStyle:ha.loadoutNameActualInput,maxLength:20,renderErrorMessage:!1})]})]}),Object(Wn.jsxs)(M.default,{style:[ha.loadoutsActions,ha.marginBottom],children:[Object(Wn.jsx)(M.default,{style:ha.loadoutAction,children:Object(Wn.jsx)(R.Button,{title:"Save",onPress:function(){c.current.apply((function(e){return function(e,t,n){var r=JSON.parse(JSON.stringify(wr(e)));return e.global.autocastLoadouts[t]={name:n,allocation:r},e.autocast.lastLoadoutUsed=t,e}(e,Number.parseInt(d),P)}))}})}),Object(Wn.jsx)(M.default,{style:ha.loadoutAction,children:Object(Wn.jsx)(R.Button,{title:"Clear",onPress:function(){I(""),c.current.apply((function(e){return function(e,t){return e.global.autocastLoadouts[t]=null,e}(e,Number.parseInt(d))}))}})})]}),Object(Wn.jsx)(Zi,{})]}),Object(Wn.jsx)(Ji,{area:"Autocast"})]})}),[d,y,P,I,u.autocast.apprenticesPaused,A,m,b,p,v,x,C,_,F,L,N]),V=JSON.stringify(Object.values(g).map((function(e){return e.map((function(e){return e.getName()}))}))),U=Object(o.useMemo)((function(){return Object.entries(g).map((function(e){return{title:e[0],data:e[1]}}))}),[V]),Q=Object(o.useCallback)((function(e){return Object(Wn.jsx)(sa,{isOdd:e.index%2!=0,spell:e.item,applyAll:x},e.item.getName())}),[x]),G=Object(o.useCallback)((function(e){return null==e||null==e.getName?void 0:e.getName()}),[]),H=Object(o.useMemo)((function(){return{backgroundColor:j.theme.colors.background}}),[j]),W=Object(o.useCallback)((function(e){return Object(Wn.jsx)(Li,{title:e.section.title,containerStyle:H})}),[H]),J=Object(o.useMemo)((function(){return Object(Wn.jsx)(kr.default,{sections:U,initialNumToRender:30,renderItem:Q,keyExtractor:G,renderSectionHeader:W,ListFooterComponent:Y,style:ha.sectionListStyle,contentContainerStyle:ha.sectionListInnerStyle})}),[U,Q,G,W,Y]),z=mi(e.onSwipeLeft,e.onSwipeRight),Z=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),X=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(z,Z)}),[z,Z]),q=mi(e.onSwipeLeft,e.onSwipeRight),K=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),$=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(q,K)}),[q,K]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:ha.fullContainer,children:[Object(Wn.jsx)(B.GestureDetector,{gesture:X,children:J},"autocastGesture"),Object(Wn.jsx)(B.GestureDetector,{gesture:$,children:S},"dataGesture")]})}),[J,S,X,$])}var da,ha=C.default.create({fullContainer:{flex:1,paddingHorizontal:8},sectionListStyle:{flex:1},sectionListInnerStyle:{paddingBottom:16},marginBottom:{marginBottom:20},marginTop:{marginTop:40},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},plusMinusAllocatorContainer:{marginLeft:16},totalApprenticesContainer:{marginBottom:8,paddingRight:8},manaCostContainer:{marginBottom:4,paddingRight:8},spellRowContainer:{padding:4,minHeight:32},allocatorText:{marginLeft:0,flex:1,textAlign:"right"},spellNameContainer:{flex:1,marginRight:8},loadoutsRow:{marginTop:16,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},loadoutsActions:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},loadoutAction:{marginLeft:8},loadoutRest:{flexDirection:"row",alignItems:"center"},topPickerContainer:{marginTop:8},emptySpaceHeader:{height:40},pickerContainer:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:80,marginLeft:8},k.default.select({android:{backgroundColor:"#eee",borderRadius:10,default:{}}})),frequencyTextContainer:{marginRight:8},apprenticeWarningContainer:{height:40,marginBottom:8},spellContainersContainer:{marginTop:16},emptyCategoryTitle:{opacity:0},betweenSpellsDivider:{opacity:.4},checkboxContainer:{marginLeft:0,marginTop:8,padding:0},checkboxText:{fontWeight:"normal"},assignAllContainer:{marginBottom:8},apprenticeDataContainer:{borderTopWidth:1},loadoutNameContainer:{width:148,alignItems:"center",justifyContent:"center",marginLeft:8,flexDirection:"row",paddingHorizontal:0},loadoutNameInput:{width:148,paddingHorizontal:4,borderWidth:1},loadoutNameActualInput:{width:140}});function ga(e){return Ce([io.Player,da.MaxHP],e,100)}function ma(e){return Math.max(Ce([io.Player,da.Attack],e,5),1)}function Aa(e){return Ce([io.Player,da.AttackDelay],e,2.5)}function ya(e){return Math.max(Ce([io.Player,da.Defense],e,0),0)}function pa(e){return Ce([io.Player,da.HPRegen],e,.2)}function va(e){return Ce([io.Player,da.Dodge],e,0)}function ba(e){return Ce([io.Player,da.Accuracy],e,1)}function ja(e){return Ce([io.Player,da.CritChance],e,0)}!function(e){e.MaxHP="MaxHP",e.Attack="Attack",e.AttackDelay="AttackDelay",e.Defense="Defense",e.HPRegen="HPRegen",e.Dodge="Dodge",e.Accuracy="Accuracy",e.CritChance="CritChance"}(da||(da={})),xe([[io.Player,da.MaxHP],[io.Player,da.HPRegen]],"DebugInvincibility",Oe.Addition,(function(e){return ce(e,"debug_invincibility")?99999999:0})),xe([[io.Player,da.Attack]],"DebugInsvincibility",Oe.Addition,(function(e){return ce(e,"debug_invincibility")?9999:0}));var Oa=new _e,ka=new _e;function xa(e){return Oa.getAll().filter((function(t){return t.isUnlocked(e)}))}function wa(e,t){return ce(e,("string"===typeof t?t:t.getId())+"_dungeon_floor_completed")}function Ca(e,t){return(e=fe(t+"_dungeon_floor_completed")(e)).thisRun.lastDungeonFloorCompleted=t,ye(t+"_dungeon_floor_completed")(e)}function Sa(e){var t=function(e){var t=xa(e).map((function(t){return t.getDungeonFloors().filter((function(t){return t.isUnlocked(e)&&t.isMainStoryDungeonFloor()}))})).flat();return Math.max.apply(Math,l()(t.map((function(e){var t;return null!=(t=e.getMinimumMPLRecommendation())?t:0}))))}(e);return zt(e)<t}function Ea(e){var t=function(e){var t=xa(e).map((function(t){return t.getDungeonFloors().filter((function(t){return t.isUnlocked(e)&&t.isMainStoryDungeonFloor()}))})).flat();return Math.max.apply(Math,l()(t.map((function(e){var t;return null!=(t=e.getMaximumMPLRecommendation())?t:1/0}))))}(e);return zt(e)>t}ae("lastDungeonFloorCompleted",(function(e,t){return t||(e.global.lastDungeonFloorCompletedLastRun=e.thisRun.lastDungeonFloorCompleted),e})),F("FloorCacheClearer",(function(){ka.getAll().forEach((function(e){return e.invalidateFightBossCache()}))}));var Ma=0,Ra=0;function Ba(e,t){e.creatureMessageLog||(e.creatureMessageLog=[]);var n=Date.now(),r=Math.floor(n/1e3);return Ma==r?Ra++:(Ma=r,Ra=1),40==Ra?(e.creatureMessageLog.unshift({id:Math.random().toString(),timestamp:Ze(e),realTimestamp:n,message:"(More loot omitted)"}),e.creatureMessageLog=e.creatureMessageLog.slice(0,40)):Ra<40&&(e.creatureMessageLog.unshift({id:Math.random().toString(),timestamp:Ze(e),realTimestamp:n,message:t}),e.creatureMessageLog=e.creatureMessageLog.slice(0,40)),e}function Ta(e,t){var n=Pt(e,xt.Breeding),r=ka.getById(t);return!(n<r.getBreedingLevel())&&(!!r.isUnlocked(e)&&!(!r.canFightBoss(e)&&void 0!==r.getBoss(e)))}function Da(e){var t=e.creatures.creatureAllocation,n=0;for(var r in t)n+=t[r]||0;return e.creatures.totalCreatures-n}function Pa(e,t,n){var r,o=(null==(r=n.creatures.creatureAllocation)?void 0:r[e])||0,i=t>0?Math.min(Da(n),t):Math.max(-o,t);return n.creatures.creatureAllocation[e]=o+i,n}function Ia(e,t){return Pa.bind(this,e,t)}function _a(e){return Ce([Ee.Creature,Ee.Cap],e,0)}function Na(e){return ce(e,"creatures_unlocked")?xa(e).map((function(t){return t.getDungeonFloors().filter((function(t){return Ta(e,t.getId())}))})).flat():[]}var Fa=n(15),La=n.n(Fa),Ya=new _e,Va=new _e,Ua=new _e,Qa=new _e;function Ga(e){return null!=e.exploration.currentSummon&&e.exploration.currentSummon.currentHP>0}var Ha=new _e;function Wa(e){var t,n;return Ha.getById((null==(t=e.exploration)||null==(n=t.currentEnemy)?void 0:n.id)||"")}var Ja=new _e;function za(e){var t,n;return Ja.getById((null==(t=e.exploration)||null==(n=t.currentSummon)?void 0:n.id)||"")}var Za=void 0,Xa=void 0;function qa(e,t){return e.exploration||(e.exploration=K),e.exploration.currentDungeonFloorId=t.getId(),Ka(e)}function Ka(e){return e.exploration||(e.exploration=K),e.exploration.explorationStartTime=Ze(e),e.exploration.explorationStatus=H.Exploring,e}function $a(e){return e.exploration||(e.exploration=K),e.exploration.explorationStartTime=Ze(e),e.exploration.explorationStatus=H.ExploringBoss,e}function eu(e){var t;return(null==(t=e.exploration)?void 0:t.explorationStartTime)||0}function tu(e){var t;return ka.getById((null==(t=e.exploration)?void 0:t.currentDungeonFloorId)||"")}function nu(e){var t;return(null==(t=e.exploration)?void 0:t.explorationStatus)||H.None}function ru(e,t){if(t.exploration||(t.exploration=K),(t=yo(t)).exploration.explorationStatus=H.Combat,t.exploration.currentEnemy={id:e.getId(),currentHP:e.getMaxHP(t)},t.exploration.currentEnemy.currentHP=e.getMaxHP(t),Za=e.getNextAction(t),Xa=void 0,Ga(t)){var n=za(t);Xa=n.getNextAction(t),t.exploration.summonActionProgress=0}return t.exploration.playerActionProgress=0,t.exploration.enemyActionProgress=0,t}function ou(e){return ru.bind(this,e)}function iu(e){var t;return(null==(t=e.exploration)?void 0:t.currentHP)||0}function au(e){var t,n;return(null==(t=e.exploration)||null==(n=t.currentSummon)?void 0:n.currentHP)||0}function uu(e){var t,n;return(null==(t=e.exploration)||null==(n=t.currentEnemy)?void 0:n.currentHP)||0}function cu(e,t){return Math.max(e-t/2,1)}function lu(e,t){var n=e-t;return Math.random()<n}function su(e,t,n){var r,o;(e.exploration||(e.exploration=K),e.exploration.currentHP=Math.min(ga(e),Math.max(e.exploration.currentHP+t,0)),t<0)&&(n=null!=(r=n)?r:null==(o=Za)?void 0:o.name,e.exploration.lastPlayerHitCause=n);return e}function fu(e,t){if(e.exploration||(e.exploration=K),null==e.exploration.currentSummon)return e;var n=za(e);return e.exploration.currentSummon.currentHP=Math.min(n.getMaxHP(e),Math.max(e.exploration.currentSummon.currentHP+t,0)),e}function du(e,t){e.exploration||(e.exploration=K);var n=Wa(e);return e.exploration.currentEnemy.currentHP=Math.min(n.getMaxHP(e),e.exploration.currentEnemy.currentHP+t),e}function hu(e){return e=yu(e,ma(e),1,1),Ya.getAll().forEach((function(t){e=t(e)})),e}function gu(e){return Ga(e)?io.Summon:io.Player}function mu(e,t,n){var r=Ce([io.Enemy,da.Accuracy],e,t),o=0;if((null!=n?n:gu(e))===io.Summon){var i=za(e);null!=i&&(o=i.getDodgeChance(e))}else o=va(e);return lu(r,o)}function Au(e,t,n,r,o,i){var a=mu(e,t,o),u=0,c=!1,l=null!=o?o:gu(e);if(a){c=Math.random()<(null!=r?r:0);if(l===io.Player)u=cu(c?1.5*n:n,c?0:ya(e)),e=su(e,-(u=Ce([Ee.AttackDamageReceived,l],e,u)),i);else{var s=za(e);null!=s&&(u=cu(c?1.5*n:n,c?0:s.getDefense(e)),e=fu(e,-(u=Ce([Ee.AttackDamageReceived,l],e,u))))}}var f={id:Math.random().toString(),damage:u,isHit:a,isCrit:c,time:Ze(e),target:l,tags:[]};return e.exploration.lastEnemyActionResult=f,e.exploration.actionResultQueue.push(f),e}function yu(e,t,n,r,o){var i=lu(ba(e)*(null!=n?n:1),Wa(e).getDodgeChance(e)),a=0,u=!1;if(i){var c=ja(e);a=cu((u=Math.random()<c*(null!=r?r:0))?1.5*t:t,u?0:Wa(e).getDefense(e)),e=du(e,-(a=Ce([Ee.AttackDamageReceived,io.Enemy],e,a)))}var l={id:Math.random().toString(),damage:a,isHit:i,isCrit:u,time:Ze(e),target:io.Enemy,tags:null!=o?o:[]};return e.exploration.lastPlayerActionResult=l,e.exploration.actionResultQueue.push(l),e.exploration.actionResultQueue.length>20&&(e.exploration.actionResultQueue=e.exploration.actionResultQueue.slice(-10)),e}function pu(e){return e.exploration.lastPlayerActionResult}function vu(e,t){var n,r;return(null==e||null==(n=e.exploration)||null==(r=n.successfulExplorationsPerFloor)?void 0:r[t])||0}function bu(e,t){return e.explorationMessageLog||(e.explorationMessageLog=[]),e.explorationMessageLog.unshift({id:Math.random().toString(),timestamp:Ze(e),message:"["+La()(Date.now()).format("h:mm:ss A")+"] "+t,accessibleMessage:t}),e.explorationMessageLog=e.explorationMessageLog.slice(0,40),e}function ju(e){return e.exploration||(e.exploration=K),e.exploration.explorationStatus=H.None,e=bu(e,"You stop exploring.")}function Ou(e){var t=nu(e);if(t!=H.Exploring&&t!=H.ExploringBoss)return 0;var n=tu(e);return Ce([Ee.ExplorationDelay],e,n.getExplorationRequiredTimeSec())}function ku(e){var t,n=za(e);if(n&&(null==(t=e.exploration)?void 0:t.explorationStatus)==H.Combat)return Xa||(Xa=n.getNextAction(e)),Ce([io.Summon,da.AttackDelay],e,Xa.delay)}function xu(e){var t=Wa(e);return Za||(Za=t.getNextAction(e)),Ce([io.Enemy,da.AttackDelay],e,Za.delay)}xe([[Ee.ExplorationDelay]],"PauseExplorationHandler",Oe.Override,(function(e){return ce(e,"exploration_paused")?1/0:void 0}));var wu=[];function Cu(){Ue("Exploration",(function(e,t){var n=nu(e);if(n!=H.Exploring&&n!=H.ExploringBoss)return e;var r=tu(e),o=Ou(e),i=eu(e)+o;if(Ze(e)>i){if(e.exploration||(e.exploration=K),e.exploration.explorationStartTime=i,n!=H.Exploring){var a=r.doFightBoss(e);return a?a(e):e}var u=r.doExplore(e);if(null!=u)return u.normal(e)}return e})),Ue("Combat",(function(e,t){if(nu(e)!=H.Combat)return e;e.exploration||(e.exploration=K);var n=Wa(e),r=za(e),o=Aa(e),i=xu(e),a=ku(e);for(e.exploration.playerActionProgress+=t/o,e.exploration.enemyActionProgress+=t/i,null!=a&&(e.exploration.summonActionProgress+=t/a);e.exploration.playerActionProgress>1;){e.exploration.playerActionProgress-=1;var u=e.exploration.playerActionProgress*o;u==1/0&&(u=0),(e=hu(e)).exploration||(e.exploration=K);var c=Aa(e);e.exploration.playerActionProgress=u/c}if(null!=Xa&&null!=a&&e.exploration.summonActionProgress>1){e.exploration.summonActionProgress-=1;var l=e.exploration.summonActionProgress*a;e=function(e){return Xa&&null!=e.exploration.currentSummon&&e.exploration.currentSummon.currentHP>0&&(e=Xa.transform(e),Ua.getAll().forEach((function(t){e=t(e)}))),e}(e),Xa=null==r?void 0:r.getNextAction(e),e.exploration||(e.exploration=K);var s=ku(e);null!=s&&(e.exploration.summonActionProgress=l/s)}if(e.exploration.enemyActionProgress>1){e.exploration.enemyActionProgress-=1;var f=e.exploration.enemyActionProgress*i;f==1/0&&(f=0),e=function(e){return Za&&(e=Za.transform(e),Va.getAll().forEach((function(t){e=t(e)}))),e}(e),Za=n.getNextAction(e),e.exploration||(e.exploration=K);var d=xu(e);e.exploration.enemyActionProgress=f/d}return e})),Te("CombatSummonDeathListener",(function(e){if(nu(e)==H.Combat)return au(e)<=0?function(e){e.exploration||(e.exploration=K);var t=za(e);return(e=bu(e,"Your summoned "+(null==t?void 0:t.getName())+" has died!")).exploration.currentSummon=void 0,Xa=void 0,e}:void 0}),(function(e){return au(e)})),Te("CombatCleaningCrew",(function(e){if(nu(e)!==H.Combat)return function(e){return e=je(e=yo(e)),Xa=void 0,e}}),(function(e){return nu(e)})),Te("CombatDeathListener",(function(e){if(nu(e)==H.Combat){if(iu(e)<=0)if(!Qa.getAll().map((function(t){return t(e)})).some((function(e){return e})))return function(e){var t,n=Wa(e);e=je(e=yo(e)),Xa=void 0,e.exploration||(e.exploration=K),e.exploration.explorationStatus=H.Reviving;var r=null==n?void 0:n.getName(),o="";return r&&(o=" from "+r),e=bu(e,"You run away"+o+" to recover from your injuries caused by "+(null!=(t=e.exploration.lastPlayerHitCause)?t:"something unknown")+"...")};return uu(e)<=0?function(e){var t=Wa(e);e=bu(e,"You defeated "+t.getName()+"!"),e=t.onDeath(e,!1),wu.forEach((function(n){e=n(e,t)})),e.exploration||(e.exploration=K);var n=e.exploration.currentDungeonFloorId;return e.exploration.successfulExplorationsPerFloor[n]=vu(e,n)+1,Ka(e)}:void 0}})),Ue("PlayerHPRegen",(function(e,t){var n=nu(e);if(n==H.Combat&&iu(e)<=0)return e;var r=pa(e),o=1;return n!=H.Combat&&(o=10),e=su(e,r*o*t,"HP Regeneration")})),Te("ContinueExplorationAfterReviving",(function(e){if(nu(e)==H.Reviving&&iu(e)==ga(e))return Ka}))}var Su=function(e){return e.Hidden="Hidden",e.Basic="Basic",e.Expanded="Expanded",e.Loot="Loot",e}({});function Eu(e,t){var n,r,o;return Mu(e,t)+(null!=(n=null==(r=e.global.timesEnemyDefeated)||null==(o=r[t])?void 0:o.player)?n:0)}function Mu(e,t){var n,r,o;return null!=(n=null==(r=e.global.timesEnemyDefeated)||null==(o=r[t])?void 0:o.creatures)?n:0}var Ru=function(){function e(){Y()(this,e)}return U()(e,[{key:"getMaxHP",value:function(e){return Ce([io.Enemy,da.MaxHP],e,this.getBaseStats().maxHP)}},{key:"getAttack",value:function(e){return Ce([io.Enemy,da.Attack],e,this.getBaseStats().attack)}},{key:"getAttackDelay",value:function(e){return this.getBaseStats().attackDelay}},{key:"getCriticalChance",value:function(e){return Ce([io.Enemy,da.CritChance],e,this.getBaseStats().critChance)}},{key:"getDefense",value:function(e){return Ce([io.Enemy,da.Defense],e,this.getBaseStats().defense)}},{key:"getDodgeChance",value:function(e){return Ce([io.Enemy,da.Dodge],e,this.getBaseStats().dodgeChance)}},{key:"getNextAction",value:function(e){var t=this;return{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e),t.getCriticalChance(e))}}}},{key:"getItemsAwarded",value:function(e){return[]}},{key:"isBoss",value:function(){return!1}},{key:"getBackdropColor",value:function(){}},{key:"getBestiaryState",value:function(e){var t=Eu(e,this.getId());return t>(this.isBoss()?0:50)?Su.Loot:t>(this.isBoss()?0:10)?Su.Expanded:t>0?Su.Basic:Su.Hidden}},{key:"onDeath",value:function(e,t){var n,r,o=null!=(n=null==(r=e.global.timesEnemyDefeated)?void 0:r[this.getId()])?n:{player:0,creatures:0};t?o.creatures++:o.player++,e.global.timesEnemyDefeated[this.getId()]=o;var i=this.getCoinsAwarded(e),a=this.getMonstiumAwarded(e),u=Se([Ee.Loot,Nr.Coins,t?Ee.FromCreatures:Ee.FromExploration],e,i),c=Se([Ee.Loot,Nr.Monstium,t?Ee.FromCreatures:Ee.FromExploration],e,a);return e=Wr(Nr.Coins,u)(e),e=Wr(Nr.Monstium,c)(e),t?function(e){var t=Date.now();return Math.floor(t/1e3)==Ma&&Ra>=40}()||(e=Ba(e,"A creature found "+Mn(u)+" :coins: and "+Mn(c)+" :monstium:!")):e=bu(e,"You found "+Mn(u)+" :coins: and "+Mn(c)+" :monstium:!"),this.getItemsAwarded(e).forEach((function(n){var r=n.chance;if(t||(r=Ce([Ee.LootChance],e,r)),Math.random()<r){var o=tr(n.itemId),i=n.params||{},a={itemId:n.itemId,params:i},u=o.fitsInInventory(e,i,!0)?"":", but your inventory is full!";e=eo(a,n.amount,e),e=t?Ba(e,"A creature found "+n.amount+" "+o.getName(i)+u+"!"):bu(e,"You found "+n.amount+" "+o.getName(i)+u+"!")}})),e}}]),e}(),Bu=n(574);function Tu(e){var t=Bu.LinearGradient,n=Object(R.useTheme)(),r=ur(e.sprite);return Object(Wn.jsxs)(M.default,{style:[Du.tile,{borderColor:n.theme.colors.grey5}],children:[e.backdropColor&&Object(Wn.jsx)(t,{colors:[""+e.backdropColor,e.backdropColor+"0"],style:Du.gradient}),r&&Object(Wn.jsx)(R.Image,{resizeMode:"contain",source:r,style:Du.image,placeholderStyle:{backgroundColor:n.theme.colors.background}})]})}var Du=C.default.create({tile:{borderWidth:1,height:144,width:144,justifyContent:"center",alignItems:"stretch",margin:8},image:{height:144,width:144},gradient:{height:144,width:144,position:"absolute",left:0,top:0,opacity:.2}});function Pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _u=i.a.memo((function(e){return Object(Wn.jsxs)(M.default,{style:Yu.inlineRow,children:[Object(Wn.jsxs)(M.default,{style:Yu.inlineRow,children:[Object(Wn.jsx)(fr,{icon:e.icon,style:Yu.icon,small:!0}),!e.hideText&&Object(Wn.jsxs)(zn,{doNotScaleFonts:!0,children:[e.stat,": "]})]}),Object(Wn.jsx)(zn,{doNotScaleFonts:!0,children:e.value})]})}));function Nu(e){var t=Object(o.useContext)(re),n={currentHP:iu(t),maxHP:ga(t),attack:ma(t),attackDelay:Aa(t),defense:ya(t),hpRegen:pa(t),accuracy:ba(t),dodge:va(t),critChance:ja(t)};return Object(o.useMemo)((function(){return Object(Wn.jsx)(Lu,Iu(Iu({},e),{},{showCurrentHP:!0,combatStats:n}))}),[e.hideText,e.isVisible,JSON.stringify(n)])}function Fu(e){var t=e.enemy,n={currentHP:0,maxHP:t.getBaseStats().maxHP,attack:t.getBaseStats().attack,attackDelay:t.getBaseStats().attackDelay,defense:t.getBaseStats().defense,hpRegen:0,accuracy:1,dodge:t.getBaseStats().dodgeChance,critChance:t.getBaseStats().critChance};return Object(o.useMemo)((function(){return Object(Wn.jsx)(Lu,Iu(Iu({},e),{},{showCurrentHP:!1,combatStats:n}))}),[e.hideText,e.isVisible,JSON.stringify(n)])}function Lu(e){var t=e.combatStats;return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Yu.container,children:[Object(Wn.jsx)(_u,{stat:"HP",icon:"hp",hideText:e.hideText,value:e.showCurrentHP?Mn(Math.ceil(t.currentHP))+"/"+Mn(Math.ceil(t.maxHP)):Mn(Math.ceil(t.maxHP))}),Object(Wn.jsx)(_u,{stat:"Attack",icon:"attack",hideText:e.hideText,value:Mn(t.attack)}),Object(Wn.jsx)(_u,{stat:"Attack Delay",icon:"attackDelay",hideText:e.hideText,value:Mn(t.attackDelay,{showDecimals:!0})+" sec"}),Object(Wn.jsx)(_u,{stat:"Defense",icon:"defense",hideText:e.hideText,value:Mn(t.defense)}),0!=t.hpRegen&&Object(Wn.jsx)(_u,{stat:"HP Regen",icon:"hpRegen",hideText:e.hideText,value:Mn(t.hpRegen,{showDecimals:!0})+"/sec"}),1!=t.accuracy&&Object(Wn.jsx)(_u,{stat:"Accuracy",icon:"accuracy",hideText:e.hideText,value:Mn(100*t.accuracy,{showDecimals:!1})+"%"}),t.dodge>0&&Object(Wn.jsx)(_u,{stat:"Dodge Chance",icon:"dodge",hideText:e.hideText,value:Mn(100*t.dodge,{showDecimals:!1})+"%"}),t.critChance>0&&Object(Wn.jsx)(_u,{stat:"Critical Chance",icon:"critChance",hideText:e.hideText,value:Mn(100*t.critChance,{showDecimals:!1})+"%"})]})}),[!1!==e.isVisible&&JSON.stringify(t),e.hideText,e.showCurrentHP])}var Yu=C.default.create({container:{justifyContent:"center",alignItems:"stretch"},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},inlineRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},icon:{marginRight:2}});function Vu(e){var t=e.enemy,n=t.getId(),r=t.getName(),i=Object(o.useContext)(re),a=xa(i).map((function(e){return e.getDungeonFloors().filter((function(e){return e.isUnlocked(i)}))})).flat(),u=t.getBestiaryState(i),c=a.filter((function(e){return e.getExplorationPossibilities(i).find((function(e){var n;return(null==(n=e.transforms)?void 0:n.enemy)==t}))})).map((function(e){var n,r,o=e.getExplorationPossibilities(i),a=null!=(n=null==(r=o.find((function(e){var n;return(null==(n=e.transforms)?void 0:n.enemy)==t})))?void 0:r.weight)?n:0,u=o.reduce((function(e,t){return e+t.weight}),0);return"*"+e.getFloorName()+"*: "+Mn(100*a/u)+"%"})).concat(a.filter((function(e){return e.getBoss(i)==t})).map((function(e){return"*"+e.getFloorName()+"* (Boss)"}))).join(", "),l=u==Su.Loot,s=[t.getCoinsAwarded(i)>0?Mn(t.getCoinsAwarded(i))+":coins:":null,t.getMonstiumAwarded(i)>0?Mn(t.getMonstiumAwarded(i))+":monstium:":null].concat(t.getItemsAwarded(i).map((function(e){var t;if(0==e.chance)return null;var n=tr(e.itemId);return e.amount+"x:"+e.itemId+":*"+n.getName(null!=(t=e.params)?t:n.getDefaultParams())+"* ("+Mn(100*e.chance,{showDecimals:!0,roundingMethod:mn.UP})+"%)"}))).filter((function(e){return null!=e})).join(", "),f=Eu(i,t.getId()),d=Mu(i,t.getId()),h="Times defeated: *"+Mn(f)+(d>0?" ("+Mn(d)+" from creatures)":"")+"*",g=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Uu.contentContainer,children:[Object(Wn.jsxs)(M.default,{style:Uu.row,children:[Object(Wn.jsx)(M.default,{style:Uu.column,children:Object(Wn.jsx)(Tu,{sprite:t.getPicture(i)})}),Object(Wn.jsxs)(M.default,{style:Uu.column,children:[Object(Wn.jsx)(Yi,{title:"Base stats",children:Object(Wn.jsx)(M.default,{style:Uu.categoryContents,children:Object(Wn.jsx)(Fu,{enemy:t})})}),Object(Wn.jsx)(Yi,{title:"General",children:Object(Wn.jsx)(M.default,{style:Uu.categoryContents,children:Object(Wn.jsx)(pr,{children:h})})})]})]}),Object(Wn.jsxs)(M.default,{style:Uu.row,children:[Object(Wn.jsx)(M.default,{style:Uu.column,children:Object(Wn.jsx)(Yi,{title:"Found in",children:Object(Wn.jsx)(M.default,{style:Uu.categoryContents,children:Object(Wn.jsx)(pr,{children:""!=c?c:"???"})})})}),Object(Wn.jsx)(M.default,{style:Uu.column,children:Object(Wn.jsx)(Yi,{title:"Base loot",children:Object(Wn.jsx)(M.default,{style:Uu.categoryContents,children:Object(Wn.jsx)(pr,{children:l?""!=s?s:"No loot":"You must defeat this enemy more times to see loot information!"})})})})]})]})}),[t,c,s,h]),m=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Uu.helpContainer,children:[Object(Wn.jsx)(ko.default,{accessibilityRole:"button",accessibilityHint:"Expand",onPress:e.onPressExpand,children:Object(Wn.jsxs)(M.default,{style:Uu.topRowContainer,children:[Object(Wn.jsx)(zn,{h3:!0,style:[Uu.topContainer],children:r+(t.isBoss()?" (Boss)":"")},n),Object(Wn.jsx)(M.default,{style:Uu.expandContainer,children:Object(Wn.jsx)(Oo.default,{name:e.collapsed?"chevron-right":"chevron-down",size:24,color:m.theme.colors.black})})]})}),!e.collapsed&&Object(Wn.jsx)(M.default,{children:g})]},n)}),[m,r,n,!e.collapsed&&g,e.collapsed,e.onPressExpand])}var Uu=C.default.create({helpContainer:{marginVertical:8},topRowContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},expandContainer:{width:40},descriptionTextContainer:{marginBottom:8,marginTop:8,marginHorizontal:8,flex:1,flexDirection:"row",flexWrap:"wrap"},descriptionViewer:{flex:1,justifyContent:"center"},topContainer:{flex:1,marginLeft:8},disabledStorylineText:{color:"#aaa"},contentContainer:{paddingVertical:8},row:{flexDirection:"row"},categoryContents:{marginTop:8},column:{flex:1,marginHorizontal:4}});function Qu(){var e,t=Object(o.useState)(""),n=f()(t,2),r=n[0],i=n[1],a=Object(o.useCallback)((function(e){i(r==e?"":e)}),[r]),u=Object(o.useContext)(re),c=(e=u,Ha.getAll().filter((function(t){return t.getBestiaryState(e)!=Su.Hidden}))),l=c.map((function(e){return e.getId()})).join(","),s=Object(o.useMemo)((function(){return c.map((function(e){return Object(Wn.jsx)(Vu,{enemy:e,collapsed:r!=e.getId(),onPressExpand:a.bind(null,e.getId())},e.getId())}))}),[l,r,i]);return Object(o.useMemo)((function(){return 0===c.length?null:Object(Wn.jsxs)(M.default,{children:[s.map((function(e,t){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(Fi,{}),e]},c[t].getId())})),Object(Wn.jsx)(Fi,{})]})}),[l,s])}function Gu(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{style:Hu.headerContainer,children:Object(Wn.jsx)(zn,{h1:!0,children:"Bestiary"})}),Object(Wn.jsx)(M.default,{style:Hu.bestiaryContainer,children:Object(Wn.jsx)(Qu,{})})]})}var Hu=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},headerContainer:{marginBottom:16},valueText:{minWidth:60,textAlign:"right",marginLeft:8},valueTextLong:{minWidth:112},bestiaryContainer:{marginTop:16},captionText:{flex:1}}),Wu=[];function Ju(e){Wu.push(e)}function zu(e){for(var t in Wu){var n=Wu[t];if(!n.isCompleted(e))return n}}function Zu(e){for(var t in Wu){if(!Wu[t].isCompleted(e))return t}}var Xu=n(291);function qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ku(e){var t=Object(R.useTheme)();return Object(Wn.jsx)(Xu.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({color:t.theme.colors.progressBar},e))}function $u(e){var t=Object(o.useContext)(re),n=zu(t),r=null==n||null==n.progress?void 0:n.progress(t),i=mi(e.onSwipeLeft,e.onSwipeRight),a=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),u=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(i,a)}),[i,a]),c=mi(e.onSwipeLeft,e.onSwipeRight),l=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),s=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(c,l)}),[c,l]),f=!Object.values(jt("Campus")).map((function(e){return Object.values(e)})).flat().some((function(e){if(!(e instanceof Zo)||!e.isVisible(t))return!1;var n=e.getCost(t);0===Object.keys(n.resources).length&&Object.keys(n.items).length;return!!Object.keys(n.resources).every((function(e){var r;return(null!=(r=n.resources[e])?r:0)<=Ur(t,e)}))||void 0}))&&("Explore the School Basement"==(null==n?void 0:n.description)||"Explore the Thunder Tower"==(null==n?void 0:n.description)||"Purchase the elemental upgrades and explore the new dungeons"==(null==n?void 0:n.description))&&(!ce(t,"upgrades_unlocked")||!Object.values(jt("Upgrades")).map((function(e){return Object.values(e)})).flat().some((function(e){return e.isVisible(t)}))),d=Object(R.useTheme)(),h=Object(o.useMemo)((function(){return f?Object(Wn.jsx)(M.default,{style:ec.campusHintWarning,children:Object(Wn.jsx)(zn,{style:{color:d.theme.colors.warning},children:"It looks like you have built everything you can for the time being. Make progress in Exploration to find ways to build more!"})}):null}),[f,d]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:ec.campusContainer,children:[Object(Wn.jsx)(B.GestureDetector,{gesture:u,children:Object(Wn.jsxs)(w.default,{contentContainerStyle:ec.contentContainer,style:ec.container,children:[h,Object(Wn.jsx)(Ji,{area:"Campus",useSubcategories:!0})]})},"campusGesture"),Object(Wn.jsx)(B.GestureDetector,{gesture:s,children:Object(Wn.jsx)(M.default,{style:[ec.hintContainer,{borderColor:d.theme.colors.divider}],children:Object(Wn.jsx)(Yi,{titleStyle:ec.categoryTitle,title:"Current Goal",containerStyle:ec.categoryContainer,children:Object(Wn.jsxs)(M.default,{style:ec.hintContents,children:[Object(Wn.jsxs)(zn,{style:ec.hintContentsText,children:[null==n?void 0:n.description,"!"]}),(null==n?void 0:n.progress)&&Object(Wn.jsx)(Ku,{progress:r,width:null,useNativeDriver:!0,style:ec.hintProgress})]})})})},"hintGesture")]})}),[n,h,r,u,s,d])}var ec=C.default.create({container:{flex:1,width:"100%"},contentContainer:{alignItems:"stretch",justifyContent:"flex-start",width:"100%",paddingHorizontal:8},hintContents:{marginLeft:16,marginTop:8,paddingRight:32},hintContentsText:{fontStyle:"italic"},hintProgress:{marginTop:4},hintContainer:{borderTopWidth:1},categoryTitle:{marginLeft:8},categoryContainer:{paddingTop:4,marginBottom:8},campusContainer:{height:"100%",alignItems:"stretch",justifyContent:"flex-start",width:"100%"},campusHintWarning:{marginTop:16}}),tc={flags:{},maxPrimarySchoolLevels:{},maxSchoolLevels:{},unlockedElements:{Fire:!0,Earth:!0,Water:!0,Air:!0},unlockedSchools:{Conjuration:!0,Enchantment:!0,Illusion:!0,Alchemy:!1,Evocation:!1,Protection:!1,Breeding:!1,Summoning:!1,Divination:!1},researchersHiredLastRun:0,timeCapsulesLastRun:0,lastDungeonFloorCompletedLastRun:"none",totalTimesResetted:0,endingsTriggered:[],autocastLoadouts:[],quickbars:[],currentQuickbar:0,timesEnemyDefeated:{},thisWorldSecondsPlayed:0,thisWorldActiveSecondsPlayed:0,overrideElementDisplay:"no",notifications:[]};function nc(e){(e=ue(e,!1)).global.tickCount++,N();var t=G(e.global);for(var n in tc)t[n]=G(tc[n]);return t.thisWorldStartTimestamp=Date.now(),t.hideEventTags.filter((function(e){return e!=qe.EARLY_GAME})),e.global=t,e}function rc(e){return Math.min(e.global.newGamePlusMax+(ii(e,"standard_ending")?5:0),100)}function oc(e,t,n){return e.global.newGamePlusCount++,e.global.newGamePlusMax=rc(e),t=Math.min(t,e.global.newGamePlusMax),n=Math.min(n,e.global.newGamePlusMax),e.global.newGamePlusBuffLevel=t,e.global.newGamePlusDifficultyLevel=n,e=nc(nc(e))}function ic(e){return e.global.newGamePlusCount}function ac(e){return e.global.newGamePlusBuffLevel}function uc(e){return e.global.newGamePlusDifficultyLevel}function cc(e){return 2*e}function lc(e){return Math.pow(1.12,e)}function sc(e){return Math.pow(1.03,e)}function fc(e){return Math.pow(.99,e)}function dc(e){return Math.pow(1.12,e)}function hc(e){return Math.pow(1.075,e)}function gc(e){return Math.pow(.985,e)}function mc(e){return Math.pow(1.02,e)}function Ac(e){return Math.pow(1.035,e)}var yc=n(292);function pc(){return(pc=u()((function*(){return{result:"error",error:"Not implemented"}}))).apply(this,arguments)}function vc(e){return bc.apply(this,arguments)}function bc(){return(bc=u()((function*(e){var t=yield wn(e);return yield Object(yc.openURL)("data:application/octet-stream;utf8,"+t),{result:"success"}}))).apply(this,arguments)}function jc(){var e=Object(o.useContext)(re),t=Object(o.useRef)(e);t.current=e;var n=Object(R.useTheme)(),r=rc(e),i=Object(o.useState)(r),a=f()(i,2),c=a[0],l=a[1],s=Object(o.useRef)(c);s.current=c;var d=Object(o.useState)(r),h=f()(d,2),g=h[0],m=h[1],A=Object(o.useRef)(g);A.current=g;var p=Object(o.useCallback)((function(){l(Math.min(s.current+1,r))}),[r,l]),v=c+1<=r,b=Object(o.useCallback)((function(){l(Math.max(s.current-1,0))}),[l]),j=c-1>=0,O=Object(o.useCallback)((function(){m(Math.min(A.current+1,r))}),[r,m]),k=g+1<=r,x=Object(o.useCallback)((function(){m(Math.max(A.current-1,0))}),[m]),w=g-1>=0,C=e.global.newGamePlusBuffLevel,S=Mn(100*(lc(C)-1),{showDecimals:!0,roundingMethod:mn.UP}),E=Mn(100*(sc(C)-1),{showDecimals:!0}),B=Mn(100*(dc(C)-1),{showDecimals:!0,roundingMethod:mn.UP}),T=Mn(-100*(fc(C)-1),{showDecimals:!0}),D=Mn(60+cc(C)),P=C>0?"\n  \nThe current world has a boon level of **"+C+"**, which is giving the following boons: **+"+S+"% to all Research, +"+E+"% to all Production and Loot, +"+B+"% to all resource maximums (except :mana: and :timepiece:), building costs scale "+T+"% slower, and the maximum School level is "+D+"**":"",I=e.global.newGamePlusDifficultyLevel,_=Mn(100*(hc(I)-1),{showDecimals:!0,roundingMethod:mn.UP}),N=Mn(100*(Ac(I)-1),{showDecimals:!0,roundingMethod:mn.UP}),F=Mn(100*(mc(I)-1),{showDecimals:!0}),L=Mn(-100*(gc(I)-1),{showDecimals:!0}),Y=I>0||C>0?"You are currently playing on a **modified world**."+P+(I>0?"\n  \nThe current world has a difficulty level of **"+I+"**, which is giving the following extra difficulty: **+"+_+"% enemy :hp:; +"+N+"% enemy :attack:, :defense:, :dodge:; +"+F+"% enemy :accuracy:; -"+L+"% enemy :attackDelay:**":""):null,V=null!=Y?Object(Wn.jsx)(pr,{children:Y}):null,U=Mn(100*(lc(c)-1),{showDecimals:!0}),Q=Mn(100*(sc(c)-1),{showDecimals:!0}),G=Mn(100*(dc(c)-1),{showDecimals:!0}),H=Mn(-100*(fc(c)-1),{showDecimals:!0}),W=Mn(60+cc(c)),J=c>0?"The new world will have the following boons: **+"+U+"% to all Research, +"+Q+"% to all Production and Loot, +"+G+"% to all resource maximums (except :mana:), building costs scale "+H+"% slower, and the maximum School level will become "+W+"**":"The new world will **not have any boons!**",z=Mn(100*(hc(g)-1),{showDecimals:!0,roundingMethod:mn.UP}),Z=Mn(100*(Ac(g)-1),{showDecimals:!0,roundingMethod:mn.UP}),X=Mn(100*(mc(g)-1),{showDecimals:!0}),q=Mn(-100*(gc(g)-1),{showDecimals:!0}),K=g>0?"The new world will have the following extra difficulty: **+"+z+"% enemy :hp:; +"+Z+"% enemy :attack:, :defense:, :dodge:; +"+X+"% enemy :accuracy:; -"+q+"% enemy :attackDelay:**":"The new world will **not have any extra difficulty!**",$=Object(Wn.jsx)(zn,{style:[Oc.error,{color:n.theme.colors.error}],children:"Using the Spell of Creation does not unlock any new content! It is only meant as a way to experience the game again."}),ee=Object(Wn.jsx)(zn,{style:[Oc.error,{color:n.theme.colors.warning}],children:"The new world's difficulty level is higher than the boon level. Are you sure you want to do this?"}),te=Object(Wn.jsx)(zn,{style:[Oc.error,{color:n.theme.colors.warning}],children:"The new world's difficulty level is very high! Are you sure you want to do this?"}),ne=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Oc.boonDiffBigContainer,children:[Object(Wn.jsxs)(M.default,{style:Oc.row,children:[Object(Wn.jsx)(M.default,{style:Oc.boonDiffContainer,children:Object(Wn.jsx)(zn,{children:"New world's boon level:"})}),Object(Wn.jsxs)(M.default,{style:[Oc.row,Oc.rightHandSide],children:[Object(Wn.jsx)(zn,{children:c}),Object(Wn.jsx)(M.default,{style:Oc.plusMinusAllocatorContainer,children:Object(Wn.jsx)(wi,{disableMinus:!j,disablePlus:!v,onPressMinus:b,onPressPlus:p})})]})]}),Object(Wn.jsx)(M.default,{style:Oc.boonDiffExplanation,children:Object(Wn.jsx)(pr,{children:J})})]})}),[c,J,j,v,b,p]),oe=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Oc.boonDiffBigContainer,children:[Object(Wn.jsxs)(M.default,{style:Oc.row,children:[Object(Wn.jsx)(M.default,{style:Oc.boonDiffContainer,children:Object(Wn.jsx)(zn,{children:"New world's difficulty level:"})}),Object(Wn.jsxs)(M.default,{style:[Oc.row,Oc.rightHandSide],children:[Object(Wn.jsx)(zn,{children:g}),Object(Wn.jsx)(M.default,{style:Oc.plusMinusAllocatorContainer,children:Object(Wn.jsx)(wi,{disableMinus:!w,disablePlus:!k,onPressMinus:x,onPressPlus:O})})]})]}),Object(Wn.jsx)(M.default,{style:Oc.boonDiffExplanation,children:Object(Wn.jsx)(pr,{children:K})})]})}),[g,K,w,k,x,O]),ie="You may change the boon and difficulty level of the new world to a maximum of **"+Mn(r)+"**."+(r<100?" To increase this number, you must win the Tournament of Magic"+(ii(e,"standard_ending")?" on a new world":"")+".":""),ae=Object(o.useState)(!1),ue=f()(ae,2),ce=ue[0],le=ue[1],se=Object(o.useContext)(Mi);Object(o.useEffect)((function(){se||le(!1)}),[se]);var fe=Object(o.useCallback)(u()((function*(){var e=yield wn(t.current);yield y.setStringAsync(e),le(!0)})),[le]),de=Object(o.useCallback)(u()((function*(){yield vc(t.current);le(!0)})),[le]),he=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Oc.saveFileCategory,children:[Object(Wn.jsx)(M.default,{style:Oc.saveFileExplanation,children:Object(Wn.jsx)(zn,{children:"Since creating a new world is irreversible, you will need to export your save data first before being able to cast the Spell of Creation."})}),Object(Wn.jsx)(ji,{onPress:fe,title:"Copy savefile to clipboard",containerStyle:Oc.saveButton}),Object(Wn.jsx)(ji,{onPress:de,title:"Save to file",containerStyle:Oc.saveButton})]})}),[fe,!0,de]);return Object(Wn.jsxs)(M.default,{style:Oc.container,children:[Object(Wn.jsx)(zn,{h1:!0,children:"Creation"}),Object(Wn.jsxs)(M.default,{style:Oc.explanation,children:[Object(Wn.jsx)(pr,{children:"You are ready to cast the Spell of Creation! However, you feel like you might not have had enough of this world. You contemplate using the Spell of Creation to bring into existence a new world, but at the same time, you think it might be best if things were just a *little* different...\n\nBy creating a new world, **you will start over the game from the very beginning, and will forfeit everything:**\n\n* Unlocked schools, elements, and Storylines will **not** carry over;\n* Your MPL values, as well as your global Research and Production multipliers, will **not** carry over.\n\nThe Creation screen will persist through new worlds - you will not need to unlock it again."}),Object(Wn.jsx)(M.default,{style:Oc.warning,children:$})]}),null!=V&&Object(Wn.jsx)(M.default,{style:Oc.worldSettings,children:V}),Object(Wn.jsxs)(M.default,{style:Oc.worldSettings,children:[Object(Wn.jsx)(pr,{children:ie}),ne,oe]}),g>c&&ee,g>30&&te,he,Object(Wn.jsx)(M.default,{style:Oc.buttonContainer,children:Object(Wn.jsx)(ji,{title:"Cast the Spell of Creation",color:"error",onPress:function(){t.current.apply((function(e){return oc(e,c,g)}))},disabled:!ce})})]})}var Oc=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},explanation:{marginTop:16},buttonContainer:{marginTop:16},warning:{marginTop:8},error:{fontWeight:"bold"},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},worldSettings:{marginTop:16},saveFileCategory:{marginTop:16},rightHandSide:{marginLeft:16},plusMinusAllocatorContainer:{marginLeft:16},boonDiffBigContainer:{marginTop:8},boonDiffExplanation:{marginTop:8},boonDiffContainer:{flex:1},saveButton:{marginTop:8},saveFileExplanation:{marginBottom:8}});function kc(){var e,t=Object(o.useContext)(re),n=(null==(e=t)?void 0:e.creatureMessageLog)||[];return Object(o.useMemo)((function(){return Object(Wn.jsx)(w.default,{nestedScrollEnabled:!0,children:n.map((function(e){var t,n,r,o=null!=(null==e?void 0:e.realTimestamp)?"["+La()(Date.now()).format("h:mm:ss A")+"] "+(null!=(t=null==e?void 0:e.message)?t:e):null!=(n=null==e?void 0:e.message)?n:e;return Object(Wn.jsx)(pr,{children:o},null!=(r=null==e?void 0:e.id)?r:e)}))})}),[n.map((function(e){var t;return null!=(t=null==e?void 0:e.id)?t:e})).join()])}function xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cc(e){var t=Object(R.useTheme)();return Object(Wn.jsx)(R.Card,wc(wc({},e),{},{containerStyle:[{backgroundColor:t.theme.colors.background},null==e?void 0:e.containerStyle],children:e.children}))}function Sc(e){var t,n,r,i=Object(o.useContext)(re),a=Object(o.useRef)(i);a.current=i;var u=Da(i)>0,c=e.floor,l=null!=(t=null==(n=i.creatures)||null==(r=n.creatureAllocation)?void 0:r[c.getId()])?t:0,s=Object(o.useCallback)((function(){return a.current.apply(Ia(c.getId(),e.applyAll?-1/0:-1))}),[c,e.applyAll]),f=Object(o.useCallback)((function(){return a.current.apply(Ia(c.getId(),e.applyAll?1/0:1))}),[c,e.applyAll]),d=Object(o.useMemo)((function(){return Object(Wn.jsxs)(zn,{numberOfLines:2,style:Rc.floorNameText,children:[c.getFloorName()," (Lv.",c.getBreedingLevel(),")"]})}),[c]),h=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Rc.row,children:[Object(Wn.jsx)(zn,{children:l}),Object(Wn.jsx)(M.default,{style:Rc.plusMinusAllocatorContainer,children:Object(Wn.jsx)(wi,{disableMinus:0===l,disablePlus:!u,onPressMinus:s,onPressPlus:f})})]})}),[l,u,s,f]),g=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Rc.row,Rc.singleFloorContainer,e.isOdd&&{backgroundColor:Object(Or.color)(g.theme.colors.grey5).alpha(.5)}],children:[d,h]},c.getId())}),[d,h,c.getId(),e.isOdd,g])}function Ec(e){var t=e.dungeon,n=Object(o.useContext)(re),r=t.getDungeonFloors().filter((function(e){return Ta(n,e.getId())}));return Object(o.useMemo)((function(){return 0===r.length?null:Object(Wn.jsx)(Yi,{title:t.getName(),children:Object(Wn.jsx)(M.default,{style:Rc.dungeonContentsContainer,children:r.map((function(t,n){return Object(Wn.jsx)(Sc,{floor:t,isOdd:n%2!=0,applyAll:e.applyAll},t.getId())}))})},t.getId())}),[t,r.map((function(e){return e.getId()})).join(),e.applyAll])}function Mc(){var e=Object(o.useContext)(re);Object(o.useRef)(e).current=e;var t=Qi(Object(o.useContext)(Ui),"creatures_applyall",!1),n=f()(t,2),r=n[0],i=n[1],a=Object(o.useCallback)((function(){i(!r)}),[r,i]),u=xa(e),c=Object(o.useMemo)((function(){return Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Dungeons"}),u.map((function(e){return Object(Wn.jsx)(Ec,{dungeon:e,applyAll:r},e.getId())}))]})}),[u.map((function(e){return e.getId()})).join(),r]),l=Rn(so(e,"Monster Candy")-Ze(e),{shortForm:!1,showDecimals:!1}),s=Object(o.useMemo)((function(){return fo(e,"Monster Candy")?Object(Wn.jsxs)(M.default,{style:[Rc.row,Rc.creatureCapacityContainer],children:[Object(Wn.jsx)(zn,{children:"Monster Candy time left: "}),Object(Wn.jsx)(zn,{children:l})]}):null}),[l,fo(e,"Monster Candy")]),d=Da(e),h=_a(e),g=Object(o.useMemo)((function(){return Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsx)(M.default,{style:Rc.assignAllContainer,children:Object(Wn.jsx)(ta,{title:"Assign / unassign all at once",checked:r,textStyle:Rc.checkboxText,containerStyle:Rc.checkboxContainer,onPress:a})}),Object(Wn.jsxs)(M.default,{style:[Rc.row,Rc.totalCreaturesContainer],children:[Object(Wn.jsx)(zn,{children:"Creatures available: "}),Object(Wn.jsxs)(zn,{children:[Mn(d),"/",Mn(e.creatures.totalCreatures)]})]}),Object(Wn.jsxs)(M.default,{style:[Rc.row,Rc.creatureCapacityContainer],children:[Object(Wn.jsx)(zn,{children:"Creature capacity: "}),Object(Wn.jsxs)(zn,{children:[Mn(e.creatures.totalCreatures),"/",Mn(h)]})]})]})}),[r,a,d,e.creatures.totalCreatures,h]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[c,g,s,Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(Ji,{area:"Creatures"})}),Object(Wn.jsx)(M.default,{style:Rc.messageContainer,children:Object(Wn.jsx)(kc,{})})]})}),[c,g,s])}var Rc=C.default.create({row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},plusMinusAllocatorContainer:{marginLeft:16},totalCreaturesContainer:{marginTop:16,paddingHorizontal:16},creatureCapacityContainer:{marginTop:4,paddingHorizontal:16},singleFloorContainer:{padding:4},messageContainer:{height:300,padding:8,borderColor:"#444",borderWidth:1,marginTop:8},floorNameText:{flex:1,marginRight:16},assignAllContainer:{marginTop:8,paddingHorizontal:16},checkboxContainer:{marginLeft:0,marginTop:8,padding:0},dungeonContentsContainer:{marginTop:4},checkboxText:{fontWeight:"normal"}}),Bc=n(578),Tc=n(930),Dc=n(579),Pc=n(87),Ic=function(e){return e.UNLOCK_EXPLORATION="unlock_exploration",e.SCHOOL_BASEMENT_CLEAR="school_basement_clear",e.LIVING_FOREST_CLEAR="living_forest_clear",e.THUNDER_TOWER_CLEAR="thunder_tower_clear",e.ELEMENTAL_DUNGEONS_CLEAR="elemental_dungeons_clear",e.DARK_OVERLORD_DEFEATED="dark_overlord_defeated",e.TEMPLE_OF_DARKNESS_CLEAR="temple_of_darkness_clear",e.STANDARD_ENDING="standard_ending",e.CREATION_ENDING="creation_ending",e.SECRET_ENDING="secret_ending",e.ALCHEMY_UNLOCKED="alchemy_unlocked",e.EVOCATION_UNLOCKED="evocation_unlocked",e.PROTECTION_UNLOCKED="protection_unlocked",e.BREEDING_UNLOCKED="breeding_unlocked",e.SUMMONING_UNLOCKED="summoning_unlocked",e.DIVINATION_UNLOCKED="divination_unlocked",e.MASTER_OF_CONJURATION="master_of_conjuration",e.MASTER_OF_ENCHANTMENT="master_of_enchantment",e.MASTER_OF_ILLUSION="master_of_illusion",e.MASTER_OF_ALCHEMY="master_of_alchemy",e.MASTER_OF_EVOCATION="master_of_evocation",e.MASTER_OF_PROTECTION="master_of_protection",e.MASTER_OF_BREEDING="master_of_breeding",e.MASTER_OF_SUMMONING="master_of_summoning",e.MASTER_OF_DIVINATION="master_of_divination",e.ULTIMATE_CONJURATION="ultimate_conjuration",e.ULTIMATE_ENCHANTMENT="ultimate_enchantment",e.ULTIMATE_ILLUSION="ultimate_illusion",e.ULTIMATE_ALCHEMY="ultimate_alchemy",e.ULTIMATE_EVOCATION="ultimate_evocation",e.ULTIMATE_PROTECTION="ultimate_protection",e.ULTIMATE_BREEDING="ultimate_breeding",e.ULTIMATE_SUMMONING="ultimate_summoning",e.ULTIMATE_DIVINATION="ultimate_divination",e.MIMIC="mimic",e.FAIRY_CIRCLE="fairy_circle",e.PURPLE_CHAMBER="purple_chamber",e.REVENGE_ON_THE_BANDITS="revenge_on_the_bandits",e.SWIFT_START="swift_start",e.STRENGTHENING_UNLOCKED="strengthening_unlocked",e.ALL_CHALLENGES_CLEARED="all_challenges_cleared",e.ALL_STORYLINES_COMPLETED="all_storylines_completed",e}({});function _c(e){var t=Object.values(e.eventOccurrences).sort((function(e,t){return t.timestamp-e.timestamp})).filter((function(e){return e.currentMessageId&&$e(e.currentMessageId).isTerminal()})).slice(20).map((function(e){return e.eventOccurrenceId}));for(var n in t.forEach((function(t){delete e.eventOccurrences[t]})),e.temporaryEffects)fo(e,n)||delete e.temporaryEffects[n];return e.exploration.actionResultQueue=e.exploration.actionResultQueue.slice(-10),e}var Nc={};function Fc(e){var t;return e.pityCounter<2&&Ze(e)>(null!=(t=e.pityEnabledAtSeconds)?t:1/0)}function Lc(e){e.pityCounter+=1;var t=21600+6480*(Math.random()-.5);return e.pityEnabledAtSeconds=Ze(e)+t,e}function Yc(e,t,n,r,o){Nc[e.getId()]={event:e,weight:t,isStorylineEvent:n,eligible:r,getParams:o}}function Vc(e){var t=Object.values(Nc).filter((function(t){return!t.eligible||t.eligible(e)})),n=t.reduce((function(t,n){return t+Ce([Ee.RandomEventWeight],e,n.weight,{randomEvent:n})}),0),r={};return t.forEach((function(t){var o=Ce([Ee.RandomEventWeight],e,t.weight,{randomEvent:t});r[t.event.getId()]=o/n})),r}function Uc(){Ue("RandomEventTriggers",(function(e,t){var n;if(Ze(e)>((null==(n=e)?void 0:n.nextRandomEvent)||0)){e=function(e){var t=Object.values(Nc).filter((function(t){return!t.eligible||t.eligible(e)}));if(0===t.length)return e;var n=t.reduce((function(t,n){return t+Ce([Ee.RandomEventWeight],e,n.weight,{randomEvent:n})}),0),r=Math.random()*n;for(var o in t){var i=t[o];if((r-=Ce([Ee.RandomEventWeight],e,i.weight,{randomEvent:i}))<0){var a=i.getParams?i.getParams(e):{};return i.isStorylineEvent&&Fc(e)&&(e=Lc(e)),lt(i.event,a)(e)}}return e}(e);var r=Math.max(1+Math.min(Ze(e),86400)/21600,1);e.nextRandomEvent=60*(8+8*Math.random())*r+Ze(e)}return e}))}Te("PityCounterInitialTrigger",(function(e){if(void 0===e.pityEnabledAtSeconds)return function(e){var t=10800+3240*(Math.random()-.5);return e.pityEnabledAtSeconds=Ze(e)+t,e}})),xe([[Ee.RandomEventWeight]],"PityEventChance",Oe.Multiplier,(function(e,t){return t.randomEvent.isStorylineEvent&&Fc(e)?40:1}));var Qc=n(13),Gc=n.n(Qc),Hc=n(19),Wc=n.n(Hc);function Jc(e,t){var n=e+t;return Mn(e-t)+"~"+Mn(n)}function zc(e,t){return Jc(e,t)+":attack:"}function Zc(e,t){var n=t.getActionEffects(e);return yu(e,n.average+(Math.random()-.5)*n.variance*2,ve(e,"advanced_evocation_unlocked")?4:1,1,t.getTags())}function Xc(e,t){var n=t.getActionEffects(e);return ve(e=yu(e,n.average+(Math.random()-.5)*n.variance*2,void 0,1,t.getTags()),"advanced_evocation_unlocked")&&(e=mo("Chilled","WaterChill",n.slowDuration,{isEnemyTemporaryEffect:!0,combatOnly:!0,isBeneficial:!1,params:{commonBuff:{Enemy:{AttackDelayMultiplier:1.2}}}})(e)),e}function qc(e,t){var n=t.getActionEffects(e);return ve(e=yu(e,n.average+(Math.random()-.5)*n.variance*2,void 0,1,t.getTags()),"advanced_evocation_unlocked")&&(e=mo(t.getSpellName()+"_dot",t.getSpellName(),n.dotDuration,{mode:"add",isBeneficial:!1,combatOnly:!0,isEnemyTemporaryEffect:!0,params:{commonDoTAmount:n.dotStrength}})(e)),e}function Kc(e,t){var n=t.getActionEffects(e);return e=yu(e,n.average+(Math.random()-.5)*n.variance*2,void 0,1,t.getTags())}function $c(e,t){return!fo(e,t)||so(e,t)-Ze(e)<2}function el(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var tl=function(e){No()(n,e);var t=el(n);function n(){var e;return Y()(this,n),(e=t.call(this))._tagArray=null,e._manaCostTags=null,e._cooldownTagArray=null,e.wasVisibleSecondsPlayed=void 0,on(Wc()(e)),vt(Wc()(e)),e}return U()(n,[{key:"getElement",value:function(){}},{key:"getTags",value:function(){if(null==this._tagArray){var e=[].concat(l()(Gc()(Vo()(n.prototype),"getTags",this).call(this)),[Ee.Spell],l()(Object.keys(this.getSchoolLevelRequirements()))),t=this.getElement();t&&e.push(t),this._tagArray=e}return this._tagArray}},{key:"getName",value:function(){return this.getSpellName()}},{key:"getCost",value:function(e){return null==this._manaCostTags&&(this._manaCostTags=[].concat(l()(this.getTags()),[Ee.Cost,Nr.Mana])),{resources:{Mana:Ce(this._manaCostTags,e,this.getManaCost(e))},items:{}}}},{key:"getDisplayName",value:function(e){var t,r=(null==e||null==(t=e.lastSpellCastTimes)?void 0:t[this.getSpellName()])||0;if(r>0){var o=r+this.getCooldown(e)-Ze(e);if(o>0)return this.getName()+" ("+Mn(o,{showDecimals:!0})+" sec)"}return Gc()(Vo()(n.prototype),"getDisplayName",this).call(this,e)}},{key:"getCategory",value:function(){return"Spells"}},{key:"getBaseCooldown",value:function(){return 0}},{key:"getCooldown",value:function(e){return null==this._cooldownTagArray&&(this._cooldownTagArray=[].concat(l()(this.getTags()),[Ee.SpellCooldown])),0===this.getBaseCooldown()?0:Ce(this._cooldownTagArray,e,this.getBaseCooldown())}},{key:"invalidateVisibilityCache",value:function(){this.wasVisibleSecondsPlayed=void 0}},{key:"isVisible",value:function(e){var t=Ze(e);if(null!=this.wasVisibleSecondsPlayed&&!e.isFake){if(t>this.wasVisibleSecondsPlayed)return!0;this.wasVisibleSecondsPlayed=void 0}var n=$t(e,this.getSchoolLevelRequirements());return n&&!e.isFake&&(this.wasVisibleSecondsPlayed=t),n}},{key:"isEnabled",value:function(e){var t;if(!this.isVisible(e))return!1;var r=(null==e||null==(t=e.lastSpellCastTimes)?void 0:t[this.getSpellName()])||0;return!(r>0&&Ze(e)<r+this.getCooldown(e))&&(!fo(e,"SilencePlayer")&&!fo(e,"PlayerStun")&&(!(Ce([].concat(l()(this.getTags()),[Ee.CanCastSpell]),e,1)<=0)&&Gc()(Vo()(n.prototype),"isEnabled",this).call(this,e)))}},{key:"doAction",value:function(e,t){var n=this;if(!this.canAfford(t))return t;var r=this.getCost(t);Object.keys(r.resources).forEach((function(e){var n,o;t=Wr(e,-(null!=(n=null==r||null==(o=r.resources)?void 0:o[e])?n:0))(t)}));var o=this.getSchoolLevelRequirements();return Object.keys(o).forEach((function(e){var r;t=Zt(t,e,null!=(r=o[e])?r:0,n.getTags())})),e.isAutomatic||(t=function(e){return ln.bind(this,e)}(this)(t)),t=fn(this)(t),this.doSpellAction(t,e)}},{key:"isCastingRecommended",value:function(e){return!!$c(e,this.getId())}},{key:"getEstimatedMinAutocastDelay",value:function(e){if(!_r(e))return Math.max(0,this.getCooldown(e));var t=0,n=this.getActionEffects(e,"duration");return null!=n&&n.duration&&(t=n.duration),Math.max(0,Math.floor(t-2),this.getCooldown(e))}}]),n}(jo);function nl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}F("SpellCacheClearer",(function(){Object.values(Object.values(rn)).forEach((function(e){return e instanceof tl&&e.invalidateVisibilityCache()}))}));var rl,ol=new(function(e){No()(n,e);var t=nl(n);function n(){var e;return Y()(this,n),(e=t.call(this)).cached=void 0,e}return U()(n,[{key:"getSpellName",value:function(){return"Conjure Building"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Use magic to apply your current materials towards building a random building."}},{key:"getBaseActionEffects",value:function(){return{}}},{key:"getDisplayEffect",value:function(e){return"Builds a random building among the ones that can be built"}},{key:"getManaCost",value:function(){return 300}},{key:"getValidActions",value:function(e){var t,n,r=null!=(t=null==(n=jt("Campus"))?void 0:n.Buildings)?t:[];return Object.values(r).filter((function(t){var n,r;return t.canAfford(e)&&t.isVisible(e)&&t.isEnabled(e)&&0==(null!=(n=null==(r=t.getResourceCost(e))?void 0:r[Nr.TimePieces])?n:0)}))}},{key:"isEnabled",value:function(e){var t,r;if(!Gc()(Vo()(n.prototype),"isEnabled",this).call(this,e))return!1;if(void 0!==this.cached){var o=Ze(e);if(o-this.cached[1]<3&&o>this.cached[1])return this.cached[0]}var i=this.getCost(e);e=Wr(Nr.Mana,-(null!=(t=i.resources.Mana)?t:0))(e);var a=this.getValidActions(e);e=Wr(Nr.Mana,null!=(r=i.resources.Mana)?r:0)(e);var u=a.length>0;return this.cached=[u,Ze(e)],u}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:8}}},{key:"doSpellAction",value:function(e,t){var n=this.getValidActions(e);return 0===n.length?e:n[Math.floor(Math.random()*n.length)].doAction(t,e)}}]),n}(tl));rl=function(e,t){return t||(ol.cached=void 0),e},ie["ConjureBuildingCacheClearer"]=rl;var il,al=ol,ul=n(571),cl=n.n(ul);function ll(e,t){var n=dl(e,t);return!!n&&!(qr(e).length>=$r(e)&&no(n,e)<=0)}function sl(e,t,n){return!(no(n,e)<=0)&&!(no(n,e)>1&&dl(e,t)&&!ll(e,t))}function fl(e,t,n,r){return sl(e,t,n)?(e=to(n,1,e),(e=gl(t,r)(e)).equipment||(e.equipment=$),e.equipment[t]=n,r||(e=ml(e,e.lastEquipmentLoadoutModified)),e):e}function dl(e,t){var n;return null==(n=e.equipment)?void 0:n[t]}function hl(e,t,n){if(!ll(n,e))return n;var r=dl(n,e);return r?((n=eo(r,1,n)).equipment||(n.equipment=$),n.equipment[e]=void 0,t||(n=ml(n,n.lastEquipmentLoadoutModified)),n):n}function gl(e,t){return cl()(hl,this,e,t)}function ml(e,t,n){var r=JSON.parse(JSON.stringify(e.equipment));return e.equipmentLoadouts[t]={name:null!=n?n:"Slot "+(t+1),equipment:r},e.lastEquipmentLoadoutModified=t,e}function Al(e,t){return yl.apply(this,arguments)}function yl(){return(yl=u()((function*(e,t){}))).apply(this,arguments)}function pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bl(e){return{primaryElement:e.primaryElement,primarySchool:e.primarySchool,secondsPlayed:Ze(e),totalSecondsPlayed:ze(e),currentPrimaryLevel:null!=e.primarySchool?Pt(e,e.primarySchool):0,totalRetirements:e.global.totalTimesResetted,currentHint:Zu(e),isDemo:Q.isDemo()}}function jl(e,t,n){return Ol.apply(this,arguments)}function Ol(){return(Ol=u()((function*(e,t,n){if(e.global.allowAnalytics){var r=bl(e);return yield Al(t,vl(vl({},r),n))}}))).apply(this,arguments)}function kl(){var e=et,t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=Object(o.useMemo)((function(){return Object(Wn.jsxs)(Yi,{title:"Trigger events",children:[Object(Wn.jsx)(R.Button,{title:"Trigger random event",onPress:function(){return n.current.apply((function(e){return e.nextRandomEvent=0,e}))}}),Object(Wn.jsx)(Pc.default,{data:Object.values(e),renderItem:function(e){var t=e.item;return Object(Wn.jsx)(R.Button,{title:t.getId(),onPress:function(){return n.current.apply(lt(t))}},t.getId())},keyExtractor:function(e){return e.getId()}})]})}),[JSON.stringify(Object.keys(e))]),i=(JSON.stringify(t.exploration,null,"\t"),Object(o.useState)(JSON.stringify(t,null,"  "))),a=f()(i,2),c=a[0],s=a[1],d=Object(o.useState)(""),h=f()(d,2),g=h[0],m=h[1],y=Object(o.useCallback)(u()((function*(){var e=JSON.parse(c);n.current.overwrite((function(t){return On(e)})),yield bn(e)})),[c]),p=Object(o.useState)(""),v=f()(p,2),b=v[0],j=v[1],x=Object(o.useState)(""),w=f()(x,2),C=w[0],S=w[1],E=Object(o.useCallback)((function(){var e=function(e,t,n,r){var o=null!=r?r:{},i={Power:[],Addition:[],Multiplier:[],Override:[]},a=e.map((function(e){var t;return null!=(t=null==ke?void 0:ke[e])?t:[]})).flat().filter((function(t){return t.tags.some((function(t){return t.every((function(t){return e.includes(t)}))}))})),u=l()(new Set(a)),c=u.filter((function(e){return e.type===Oe.Power})).map((function(e){var r=e.transformation(t,o,n);return i.Power.push({id:e.id,value:r}),r})).reduce((function(e,t){return Math.pow(null!=e?e:1,null!=t?t:1)}),n),s=u.filter((function(e){return e.type===Oe.Addition})).map((function(e){var n=e.transformation(t,o,null!=c?c:0);return i.Addition.push({id:e.id,value:n}),n})).reduce((function(e,t){return(null!=e?e:0)+(null!=t?t:0)}),c),f=u.filter((function(e){return e.type===Oe.Multiplier})).map((function(e){var n=e.transformation(t,o,null!=s?s:0);return i.Multiplier.push({id:e.id,value:n}),n})).reduce((function(e,t){return(null!=e?e:1)*(null!=t?t:1)}),s);return u.filter((function(e){return e.type===Oe.Override})).map((function(e){var n=e.transformation(t,o,null!=f?f:0);return i.Override.push({id:e.id,value:n}),n})).reduce((function(e,t){return null!=t?t:e}),f),i}(b.split(","),n.current,1),t=Object.keys(e).map((function(t){return t+": "+e[t].map((function(e){var t=e.id,n=e.value;return t+": "+(null!=n?Mn(n,{showDecimals:!0}):"undefined")})).join(", ")})).join("\n");S(t)}),[b,S]),B=(Object(R.useThemeMode)(),Object(o.useState)(!1)),T=f()(B,2);T[0],T[1];return Object(Wn.jsxs)(M.default,{style:xl.container,children:[Object(Wn.jsxs)(Yi,{title:"Other actions",children:[Object(Wn.jsx)(R.Button,{title:"Clear Quickbar",onPress:function(){return n.current.apply((function(e){return e.quickbar=[],e}))}}),Object(Wn.jsx)(R.Button,{title:"Open Document Picker",onPress:u()((function*(){var e=yield Object(Bc.getDocumentAsync)();if("success"==e.type){var t=yield Tc.readAsStringAsync(e.uri),n=yield kn(t);console.warn(n)}console.warn(e)}))}),Object(Wn.jsx)(R.Button,{title:"Save To Local Storage (Web Only)",onPress:u()((function*(){var e=yield wn(t);yield Object(yc.openURL)("data:application/octet-stream;utf8,"+e)}))}),Object(Wn.jsx)(R.Button,{title:"Save To Local Storage (iOS Only)",onPress:u()((function*(){var e,t=(null!=(e=Tc.documentDirectory)?e:"")+"/MagicResearch/",r=yield Tc.getInfoAsync(t);if(console.warn(t),!r.exists){var o=yield Tc.makeDirectoryAsync(t,{intermediates:!0});console.warn("directoryCreated",o)}var i=t+"magic-research-save-"+Date.now()+".sav",a=yield wn(n.current),u=yield Tc.writeAsStringAsync(i,a),c=yield Object(Dc.shareAsync)(i,{dialogTitle:"Send Magic Research Save to...",UTI:"UTTypePlainText"});console.warn(u,c)}))}),Object(Wn.jsx)(R.Button,{title:"Save To Local Storage (Android Only)",onPress:u()((function*(){var e=Tc.StorageAccessFramework.getUriForDirectoryInRoot("MagicResearch"),t=yield Tc.StorageAccessFramework.requestDirectoryPermissionsAsync(e);if(t.granted){var r=t.directoryUri,o="magic-research-save-"+Date.now()+".sav",i=yield Tc.StorageAccessFramework.createFileAsync(r,o,"text/text"),a=yield wn(n.current);yield Tc.writeAsStringAsync(i,a)}else console.warn(t)}))}),Object(Wn.jsx)(R.Button,{title:"Max All Storages",onPress:function(){return n.current.apply((function(e){for(var t in n.current.resources)"TimePieces"!=t&&(e=Wr(t,9999999)(e));return e}))}}),Object(Wn.jsx)(R.Button,{title:"Toggle Machinegun Mode",onPress:function(){return n.current.apply((function(e){return e=ce(e,"machinegun_mode")?he("machinegun_mode")(e):fe("machinegun_mode")(e)}))}}),Object(Wn.jsx)(R.Button,{title:"Run 100 Conjure Building Maxed Out",onPress:function(){return n.current.apply((function(e){for(var t=0;t<100;t++){for(var r in n.current.resources)"TimePieces"!=r&&(e=Wr(r,1/0)(e));e=al.doAction({isAutomatic:!1},e)}return e}))}}),Object(Wn.jsx)(R.Button,{title:"Grant Dummy Temp Effects",onPress:function(){return n.current.apply((function(e){for(var t=0;t<10;t++)e=mo("dummy"+t,"Dummy effect "+t,60,{isEnemyTemporaryEffect:!0,combatOnly:!0})(e);return e}))}}),Object(Wn.jsx)(R.Button,{title:"Trigger unlock_exploration achievement",onPress:function(){return qo(Ic.UNLOCK_EXPLORATION)}}),Object(Wn.jsx)(R.Button,{title:"Force RTL",onPress:function(){return O.default.forceRTL(!0)}}),Object(Wn.jsx)(R.Button,{title:"Grant 10k School Exp",onPress:function(){return n.current.apply((function(e){return e=_t(xt.Conjuration,1e4)(e),e=_t(xt.Enchantment,1e4)(e),e=_t(xt.Illusion,1e4)(e)}))}}),Object(Wn.jsx)(R.Button,{title:"Warp 10 minutes",onPress:function(){return n.current.apply((function(e){return e.warpTimeSecs=600,e}))}}),Object(Wn.jsx)(R.Button,{title:"Artifically pass 10 minutes",onPress:function(){n.current.apply((function(e){return e.skipAheadTime=600,e}))}}),Object(Wn.jsx)(R.Button,{title:"Toggle 2x speed",onPress:function(){return n.current.apply((function(e){return e=ce(e,"debug_2x_speed")?he("debug_2x_speed")(e):fe("debug_2x_speed")(e)}))}}),Object(Wn.jsx)(R.Button,{title:"Toggle 0x speed",onPress:function(){return n.current.apply((function(e){return e=ce(e,"debug_0x_speed")?he("debug_0x_speed")(e):fe("debug_0x_speed")(e)}))}}),Object(Wn.jsx)(R.Button,{title:"Toggle invincibility",onPress:function(){return n.current.apply((function(e){return e=ce(e,"debug_invincibility")?he("debug_invincibility")(e):fe("debug_invincibility")(e)}))}}),Object(Wn.jsx)(R.Button,{title:"Send Test Analytics Event",onPress:function(){return jl(n.current,"test_analytics_event",{testParam:Math.random()})}}),Object(Wn.jsx)(R.Button,{onPress:function(){A.default.removeItem("PlayerContextState"),A.default.removeItem("LastSaveSecondsPlayed")},title:"Clear storage"},"clearstorage"),Object(Wn.jsx)(R.Button,{onPress:function(){t.apply((function(e){return e.global=ee,e}))},title:"Reset global state"},"resetglobal"),Object(Wn.jsx)(R.Button,{onPress:function(){t.apply(_c)},title:"Clean up playercontext"},"cleanupplayercontext"),Object(Wn.jsx)(R.Button,{onPress:function(){t.apply((function(e){return function(e,t){var n,r,o;if(null!=e.thisRun.endingTriggered&&e.thisRun.endingTriggered.endingId===t)return e;var i=ti.getAll().filter((function(t){return t.isCompleted(e)})),a=function(e){var t;return(null==e||null==(t=e.global)?void 0:t.activeSecondsPlayed)||0}(e);e.thisRun.endingTriggered={endingId:t,challengeId:e.currentChallengeId,totalTimePlayed:ze(e),totalTimePlayedThisRun:Ze(e),totalTimePlayedThisWorld:e.global.thisWorldSecondsPlayed,totalActiveTimePlayed:"untracked"!=a?a:void 0,totalActivePlayedThisWorld:e.global.thisWorldActiveSecondsPlayed,totalRealWorldTimePlayed:(null!=(n=Date.now()-(null==(r=e.global)?void 0:r.startTimestamp))?n:0)/1e3,totalRealWorldTimePlayedThisWorld:(null!=(o=Date.now()-e.global.thisWorldStartTimestamp)?o:0)/1e3,primarySchool:e.primarySchool,primaryElement:e.primaryElement,primarySchoolLevelOnEnding:Pt(e,e.primarySchool),mpl:zt(e),researchMultiplier:qt(e),productionMultiplier:Kt(e),completedStorylines:i.length};var u=e.global.endingsTriggered;return u.push(t),e.global.endingsTriggered=l()(new Set(u)),e=En(e,"goToEnding"),e=En(e,"closeAllMenus"),e=En(e,"closeEventOverlay")}(e,"standard_ending")}))},title:"Trigger standard ending"},"triggerending"),Object(Wn.jsx)(R.Button,{onPress:function(){t.apply((function(e){return oc(e,ic(e)+1,ic(e)+1)}))},title:"Trigger NG+"},"triggerngplus"),Object(Wn.jsx)(R.Button,{onPress:function(){t.apply((function(e){return G(ne)})),A.default.removeItem("PlayerContextState"),A.default.removeItem("LastSaveSecondsPlayed")},title:"Restart game (WARNING: ALSO DELETES SAVED DATA)"},"restartgame")]}),Object(Wn.jsxs)(R.Card,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Multiplier Debugging"}),Object(Wn.jsx)(zn,{children:"Separate tags by commas"}),Object(Wn.jsx)(R.Input,{onChangeText:j,value:b,onSubmitEditing:E}),Object(Wn.jsx)(R.Button,{onPress:E,title:"Debug multipliers"}),Object(Wn.jsx)(zn,{children:C})]}),Object(Wn.jsxs)(R.Card,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Random Event Debugging"}),Object(Wn.jsxs)(zn,{children:["Next event in"," ",Mn(t.nextRandomEvent-Ze(t))," ","sec"]}),Object(Wn.jsx)(zn,{children:JSON.stringify(Vc(t),null,"\t")})]}),Object(Wn.jsxs)(R.Card,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Player Context Editing"}),Object(Wn.jsx)(R.Input,{multiline:!0,onChangeText:s,value:c,style:{height:400,fontFamily:k.default.select({android:"monospace",default:"Courier New"})}}),Object(Wn.jsx)(R.Button,{onPress:y,title:"Set player context"},"setPlayerContext")]}),Object(Wn.jsxs)(R.Card,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Player Context Fixing"}),Object(Wn.jsx)(R.Input,{multiline:!0,onChangeText:m,value:g,style:{height:400,fontFamily:k.default.select({android:"monospace",default:"Courier New"})}}),Object(Wn.jsx)(R.Button,{onPress:u()((function*(){var e=yield kn(g);m(JSON.stringify(e,null,"  "))})),title:"Load"},"fixPlayerContext"),Object(Wn.jsx)(R.Button,{onPress:function(){vc(JSON.parse(g))},title:"Save to File"},"getAsFile")]}),Object(Wn.jsxs)(R.Card,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Trigger Events"}),r]})]})}!function(e){e.Hand="Hand",e.Body="Body",e.Accessory="Accessory"}(il||(il={})),xe([[io.Player,da.AttackDelay]],"machinegun_delay",Oe.Override,(function(e){return ce(e,"machinegun_mode")?.01:void 0})),xe([[io.Player,da.Attack]],"machinegun_attack",Oe.Override,(function(e){return ce(e,"machinegun_mode")?1:void 0}));var xl=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"}}),wl=new _e;function Cl(e){return Object(Wn.jsxs)(M.default,{style:El.row,children:[Object(Wn.jsx)(M.default,{style:El.rowCaption,children:Object(Wn.jsx)(zn,{numberOfLines:2,children:e.caption})}),Object(Wn.jsx)(zn,{style:El.valueText,children:e.value})]})}function Sl(){var e=Object(o.useContext)(re);Object(o.useRef)(e).current=e;var t=oi(e);if(null==t)return Object(Wn.jsx)(M.default,{});var n=function(e){var t;return null==(t=ri)?void 0:t[e]}(t.endingId),r=La.a.duration(t.totalTimePlayed,"seconds"),i=La.a.duration(t.totalTimePlayedThisWorld,"seconds"),a=La.a.duration(t.totalTimePlayedThisRun,"seconds"),u=null!=t.totalActiveTimePlayed?La.a.duration(t.totalActiveTimePlayed,"seconds"):null,c=null!=t.totalActivePlayedThisWorld?La.a.duration(t.totalActivePlayedThisWorld,"seconds"):null,l=null!=t.totalRealWorldTimePlayed?La.a.duration(t.totalRealWorldTimePlayed,"seconds"):null,s=null!=t.totalRealWorldTimePlayedThisWorld?La.a.duration(t.totalRealWorldTimePlayedThisWorld,"seconds"):null,f=ic(e),d=ac(e),h=uc(e),g=ti.getAll();return Object(Wn.jsxs)(M.default,{style:El.container,children:[Object(Wn.jsx)(zn,{h1:!0,children:null==n?void 0:n.title}),Object(Wn.jsx)(M.default,{style:El.explanation,children:Object(Wn.jsx)(pr,{style:El.explanationText,children:null==n?void 0:n.description})}),Object(Wn.jsx)(M.default,{style:El.dividerContainer,children:Object(Wn.jsx)(Fi,{})}),Object(Wn.jsxs)(M.default,{style:El.congratsContainer,children:[Object(Wn.jsx)(zn,{h1:!0,children:"Congratulations!"}),Object(Wn.jsx)(zn,{h2:!0,children:"You have cleared Magic Research!"})]}),Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(Cl,{caption:"Primary School and Element:",value:t.primarySchool+" - "+t.primaryElement}),t.challengeId&&Object(Wn.jsx)(Cl,{caption:"Challenge:",value:wl.getById(t.challengeId).getName()}),f>0&&Object(Wn.jsx)(Cl,{caption:"World Modifiers:",value:"Boon "+Mn(d)+" / Diff "+Mn(h)}),Object(Wn.jsx)(Cl,{caption:"Total In-Game Time Played:",value:Bn(r)}),f>0&&Object(Wn.jsx)(Cl,{caption:"In-Game Time Played (This World):",value:Bn(i)}),Object(Wn.jsx)(Cl,{caption:"In-Game Time Played (This Run):",value:Bn(a)}),null!=u&&Object(Wn.jsx)(Cl,{caption:"Total Real World Time Played:",value:Bn(u)}),null!=c&&f>0&&Object(Wn.jsx)(Cl,{caption:"Real World Time Played (This World):",value:Bn(c)}),null!=l&&Object(Wn.jsx)(Cl,{caption:"Total Time Since Starting Game:",value:Bn(l)}),null!=s&&f>0&&Object(Wn.jsx)(Cl,{caption:"Total Time Since Starting This World:",value:Bn(s)}),f>0&&Object(Wn.jsx)(Cl,{caption:"Worlds Created:",value:f.toString()}),Object(Wn.jsx)(Cl,{caption:"Total Retirements:",value:e.global.totalTimesResetted.toString()}),Object(Wn.jsx)(Cl,{caption:"Maximum Primary Level Obtained:",value:t.mpl.toString()}),Object(Wn.jsx)(Cl,{caption:"Primary School Level on Game Beaten:",value:t.primarySchoolLevelOnEnding.toString()}),Object(Wn.jsx)(Cl,{caption:"Global Research Multiplier:",value:Mn(t.researchMultiplier,{showDecimals:!0})+"x"}),Object(Wn.jsx)(Cl,{caption:"Global Production Multiplier:",value:Mn(t.productionMultiplier,{showDecimals:!0})+"x"}),Object(Wn.jsx)(Cl,{caption:"Total Completed Storylines:",value:t.completedStorylines+" / "+g.length}),Object(Wn.jsx)(Cl,{caption:"Storyline Completion Percentage:",value:Mn(100*t.completedStorylines/g.length)+"%"})]})]})}var El=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},explanation:{marginTop:16,flex:1,alignItems:"stretch",width:"100%"},explanationText:{width:"100%"},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4},valueText:{minWidth:100,textAlign:"right",fontWeight:"bold",marginLeft:8},dividerContainer:{marginTop:32,marginBottom:24},congratsContainer:{alignItems:"center",marginBottom:16},rowCaption:{flex:1}}),Ml=n(529);function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tl=G(ne);var Dl=i.a.memo((function(e){var t,n;if(!e.item.currentMessageId)return null;var r=$e(e.item.currentMessageId);if(!r)return null;var i=r.getTitle(null==(t=e.item)?void 0:t.params),a=Object(o.useContext)(re),u=Object(o.useMemo)((function(){var t;return La()(e.item.timestamp).format("h:mm A")+" - "+r.getDescription(Tl,null==(t=e.item)?void 0:t.params)}),[e.item.timestamp]),c=Object(R.useTheme)();return Object(o.useMemo)((function(){var t;return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(R.ListItem,{onPress:e.onPress,Component:k.default.select({android:Xo.default,default:S.default}),accessible:!0,accessibilityLabel:i,accessibilityRole:"button",children:[Object(Wn.jsxs)(R.ListItem.Content,{accessibilityHidden:!0,focusable:!1,children:[Object(Wn.jsxs)(M.default,{style:Il.eventTitleContainer,children:[r.isActionable(a,null==(t=e.item)?void 0:t.params)&&Object(Wn.jsx)(M.default,{style:Il.actionableIcon,children:Object(Wn.jsx)(Ml.default,{name:"exclamation",type:"evilicon",size:24,color:c.theme.colors.black})}),Object(Wn.jsx)(R.ListItem.Title,{style:Il.titleText,children:i})]}),Object(Wn.jsx)(zn,{numberOfLines:1,children:u})]}),Object(Wn.jsx)(R.ListItem.Chevron,{name:r.isTerminal()?"check":"chevron-right",type:"material",accessibilityHidden:!0})]}),Object(Wn.jsx)(Fi,{})]})}),[i,u,r.isTerminal(),r.isActionable(a,null==(n=e.item)?void 0:n.params),c])}),(function(e,t){return e.item.currentMessageId===t.item.currentMessageId}));function Pl(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=Object(o.useCallback)((function(e,t){return e.eventOccurrenceId}),[]),i=Object(o.useCallback)((function(e){return Object(Wn.jsx)(Dl,Bl(Bl({},e),{},{onPress:function(){n.current.apply(at(e.item.eventOccurrenceId))}}))}),[]),a=Object.values(t.eventOccurrences).sort((function(e,t){return t.timestamp-e.timestamp})),u=Object(o.useMemo)((function(){return JSON.stringify(t.eventOccurrences)}),[a]),c=Object(o.useMemo)((function(){return a.filter((function(e){return e.currentMessageId&&$e(e.currentMessageId).isTerminal()})).slice(0,20)}),[u]),l=Object(o.useMemo)((function(){return a.filter((function(e){return e.currentMessageId&&!$e(e.currentMessageId).isTerminal()}))}),[u]),s=Object(o.useMemo)((function(){var e=[];return l.length>0&&e.push({title:"Ongoing",data:l}),c.length>0&&e.push({title:"Finished",data:c}),e}),[l,c]),f=Object(o.useCallback)((function(e,t){return e.title}),[]),d=Object(o.useCallback)((function(e){return Object(Wn.jsx)(Yi,{titleStyle:Il.categoryTitle,title:e.item.title,children:Object(Wn.jsx)(Pc.default,{keyExtractor:r,data:e.item.data,renderItem:i})})}),[r,i]),h=mi(e.onSwipeLeft,e.onSwipeRight),m=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),A=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(h,m)}),[h,m]),y=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:e.style,children:[Object(Wn.jsxs)(M.default,{accessible:!0,accessibilityLabel:"Events",accessibilityRole:"header",style:Il.emptyTitleContainer,children:[Object(Wn.jsx)(g.default,{size:24,name:"notifications",style:Il.titleIcon,color:y.theme.colors.black}),Object(Wn.jsx)(zn,{h2:!0,children:"Events"})]}),Object(Wn.jsx)(B.GestureDetector,{gesture:A,children:Object(Wn.jsx)(Pc.default,{keyExtractor:f,data:s,renderItem:d})},"eventGesture")]})}),[y,f,d,s,A])}var Il=C.default.create({categoryTitle:{marginLeft:8},emptyTitleContainer:{flexDirection:"row",justifyContent:"center",marginTop:8},titleIcon:{paddingRight:8,height:28},eventTitleContainer:{flexDirection:"row",alignItems:"center"},titleText:{flex:1},actionableIcon:{marginRight:4}});function _l(e){var t=Object(o.useRef)(new b.default.Value(e.visible?0:300)).current,n=Object(o.useRef)(new b.default.Value(e.visible?.5:0)).current;Object(o.useEffect)((function(){e.visible?(b.default.timing(t,{toValue:0,duration:150,useNativeDriver:!0}).start(),b.default.timing(n,{toValue:.5,duration:150,useNativeDriver:!0}).start()):(b.default.timing(t,{toValue:300,duration:150,useNativeDriver:!0}).start(),b.default.timing(n,{toValue:0,duration:150,useNativeDriver:!0}).start())}),[e.visible]);var r=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsx)(ko.default,{accessibilityLabel:"Close Event Menu",accessibilityRole:"button",onPress:e.onBackgroundPress,accessibilityElementsHidden:!0,importantForAccessibility:"no-hide-descendants",children:Object(Wn.jsx)(b.default.View,{style:[Nl.backdrop,{opacity:n}],pointerEvents:e.visible?"auto":"none"})}),Object(Wn.jsx)(b.default.View,{style:[Nl.container,{transform:[{translateX:t}],backgroundColor:r.theme.colors.background}],accessibilityElementsHidden:!e.visible,importantForAccessibility:e.visible?"auto":"no-hide-descendants",children:Object(Wn.jsx)(Pl,{style:Nl.eventList,onSwipeLeft:e.onSwipeLeft,onSwipeRight:e.onSwipeRight})})]})}),[n,t,e.visible,r,e.onSwipeLeft,e.onSwipeRight])}var Nl=C.default.create({backdrop:{position:"absolute",height:"100%",width:"100%",backgroundColor:"#000"},backdropTouchable:{position:"absolute",height:"100%",width:"100%"},container:{justifyContent:"flex-start",alignItems:"stretch",position:"absolute",height:"100%",width:300,right:0,top:0},eventList:{flex:1}});function Fl(){var e,t,n=Object(o.useContext)(re),r=Object(o.useContext)(Ui),i=r.getUIState("picker_open"),a=null==(e=r.getUIState("active_sections"))?void 0:e.includes("Ending"),u=Qi(r,"current_event_occurrence_id",void 0),c=f()(u,2),l=c[0],s=c[1],d=Object(o.useCallback)((function(e){"closeEventOverlay"==e&&(s(void 0),v(""))}),[]),h=Object(o.useCallback)((function(e){var t=Sn(e);return t.forEach(d),e.uiCommands=t.filter((function(e){return"closeEventOverlay"!=e})),e}),[]);Object(o.useEffect)((function(){return Te("eventOverlayUiCommand",(function(e){if(Sn(e).filter((function(e){return"closeEventOverlay"===e})).length>0)return function(e){return h(e)}})),function(){return De("eventOverlayUiCommand")}}),[]);var m=Object(o.useRef)(l);m.current=l;var A=Object(o.useState)(""),y=f()(A,2),p=y[0],v=y[1];Object(o.useEffect)((function(){Te("event_overlay",(function(e){if(!i&&!a&&e.eventQueue.length>0&&(!m.current||null==nt(e,m.current))){var t=null,n=[];do{if(null!=(t=e.eventQueue.pop())){n.push(t);var r,o,u=nt(e,t),c=null==u?void 0:u.currentMessageId;if(null!=u&&null!=c)(null!=(r=null==u?void 0:u.timestampSecondsPlayed)?r:0)<=.1&&null!=(o=$e(c))&&o.isTerminal()&&(t=null)}}while(e.eventQueue.length>0&&null==t);return t&&(s(t),v(""),m.current=t),function(e){return n.reduce((function(e,t){return function(e){return ut.bind(this,e)}(t)(e)}),e)}}}));return function(){return De("event_overlay")}}),[i,a]);var b=null,j=null,O=null,x=null,w=-1,C=0,S=-1;if(null!=l){var B,T,D,P,I,_,N,F;if(b=nt(n,l),(w=null!=(B=null==(T=b)||null==(D=T.messageHistory)?void 0:D.findIndex((function(e){return e===p})))?B:-1)<0)j=(null==(N=b)?void 0:N.currentMessageId)&&$e(b.currentMessageId);else j=$e(p);if(j)O=j.getAllowedOptions(n,null==(F=b)?void 0:F.params).map((function(e){return e.description+e.isEnabled}));if((C=null!=(P=null==(I=b)||null==(_=I.messageHistory)?void 0:_.length)?P:0)>0){S=C+1;var L=w>=0?w+1:S;L<S&&(x="("+L+"/"+S+")")}}var Y=Object(E.default)(),V=(Y.height,Y.width),U=Object(R.useTheme)(),Q=ui(U.theme),G=Object(o.useCallback)((function(){s(void 0),v("")}),[v,s]);return Object(o.useMemo)((function(){if(l&&j){var e,t,r,o=0===w||0===C,i=w<0||w>S-2;return Object(Wn.jsx)(R.Overlay,{onRequestClose:G,isVisible:!0,overlayStyle:[Ll.overlay,{maxWidth:Math.min(V-16,640),backgroundColor:U.theme.colors.background}],backdropStyle:k.default.select({default:{},web:{backgroundColor:"#000",opacity:k.default.select({default:1,web:.5})}}),children:Object(Wn.jsxs)(M.default,{style:Ll.overlayContainer,children:[Object(Wn.jsx)(ji,{icon:Object(Wn.jsx)(g.default,{name:"close",size:24,color:"white"}),accessibilityLabel:"Close",containerStyle:Ll.overlayCloseButton,style:Ll.overlayCloseButtonInner,iconContainerStyle:Ll.overlayCloseButtonInner,buttonStyle:Ll.overlayCloseButtonInner,onPress:function(){s(void 0),v("")}}),Object(Wn.jsxs)(M.default,{style:Ll.titleContainer,children:[Object(Wn.jsx)(M.default,{style:[Ll.titleTextContainer,{maxWidth:C>0?V-164:V-68}],children:Object(Wn.jsxs)(zn,{h1:!0,children:[j.getTitle(null==(e=b)?void 0:e.params)," ",x," "]})}),C>0&&Object(Wn.jsxs)(M.default,{style:Ll.historyContainer,children:[Object(Wn.jsx)(ji,{disabled:o,accessibilityLabel:"Previous Message",containerStyle:Ll.historyButton,style:Ll.overlayCloseButtonInner,iconContainerStyle:Ll.overlayCloseButtonInner,buttonStyle:Ll.overlayCloseButtonInner,icon:Object(Wn.jsx)(g.default,{name:"arrow-back",size:24,color:o?Q:"white"}),onPress:function(){var e,t,n,r,o,i;return v(w>0?null!=(e=null==(t=b)||null==(n=t.messageHistory)?void 0:n[w-1])?e:"":null!=(r=null==(o=b)||null==(i=o.messageHistory)?void 0:i[S-2])?r:"")}}),Object(Wn.jsx)(ji,{disabled:i,accessibilityLabel:"Next Message",containerStyle:Ll.historyButton,style:Ll.overlayCloseButtonInner,iconContainerStyle:Ll.overlayCloseButtonInner,buttonStyle:Ll.overlayCloseButtonInner,icon:Object(Wn.jsx)(g.default,{name:"arrow-forward",size:24,color:i?Q:"white"}),onPress:function(){var e,t,n;return v(w<S-2&&null!=(e=null==(t=b)||null==(n=t.messageHistory)?void 0:n[w+1])?e:"")}})]})]}),Object(Wn.jsx)(M.default,{style:Ll.description,children:Object(Wn.jsx)(pr,{children:j.getDescription(n,null==(t=b)?void 0:t.params)})}),w<0&&Object(Wn.jsx)(M.default,{style:Ll.optionRow,children:j.getAllowedOptions(n,null==(r=b)?void 0:r.params).map((function(e){return Object(Wn.jsx)(ji,{onPress:function(){if(!e.nextMessage&&!e.transform)return s(void 0),void v("");n.apply(ot(l,e))},title:e.description,containerStyle:[Ll.optionButton,{maxWidth:Math.min(V-70,586)}],disabled:!e.isEnabled},e.description)}))})]})})}return null}),[JSON.stringify(b),null==(t=O)?void 0:t.join(","),w,p,V,U,Q])}var Ll=C.default.create({overlay:{alignSelf:"center",marginHorizontal:16,maxWidth:640},overlayContainer:{padding:8},historyButton:{height:32,width:32,borderRadius:16,marginLeft:8},overlayCloseButton:{height:32,width:32,borderRadius:16,position:"absolute",right:-16,top:-16},overlayCloseButtonInner:{paddingHorizontal:0,paddingVertical:0,height:32},titleContainer:{flexDirection:"row",justifyContent:"space-between"},titleTextContainer:{},historyContainer:{marginHorizontal:8,flexDirection:"row",width:80},description:{marginVertical:8},optionRow:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},optionButton:{marginTop:8,marginHorizontal:4,maxWidth:600}}),Yl=i.a.createContext({announceForAccessibility:function(){}});function Vl(){var e=Object(o.useContext)(re),t=Object(o.useContext)(Ui).getUIState("current_event_occurrence_id"),n=Za,r=function(e){var t;return(null==(t=e.exploration)?void 0:t.enemyActionProgress)||0}(e),i=Object(o.useContext)(Yl),a=Object(o.useContext)(Mi);return Object(o.useEffect)((function(){null!=(null==n?void 0:n.name)&&null==t&&a&&setTimeout((function(){return i.announceForAccessibility(null==n?void 0:n.name)}),0)}),[n,t,i,a]),Object(o.useMemo)((function(){return n?Object(Wn.jsxs)(M.default,{style:Ul.row,children:[Object(Wn.jsx)(fr,{icon:"attack",style:Ul.icon}),Object(Wn.jsxs)(M.default,{style:Ul.progressBarContainer,children:[Object(Wn.jsx)(pr,{children:n.name}),Object(Wn.jsx)(Ku,{progress:r,useNativeDriver:!e.global.doNotUseNativeDriver,width:null},e.global.doNotUseNativeDriver?"yes":"no")]})]}):Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(zn,{h3:!0,children:"-"}),Object(Wn.jsx)(Ku,{progress:0,useNativeDriver:!e.global.doNotUseNativeDriver},e.global.doNotUseNativeDriver?"yes":"no")]})}),[null==n?void 0:n.name,r,e.global.doNotUseNativeDriver])}var Ul=C.default.create({row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},icon:{marginRight:4},progressBarContainer:{flex:1,minHeight:32}});function Ql(e){var t,n,r=Object(o.useMemo)((function(){var t=null,n=null;return void 0!=e.action&&(e.action.isHit?(t=(e.action.damage>0?"-":"")+Mn(Math.abs(e.action.damage),{showDecimals:!1})+(e.action.isCrit?"!":""),n=e.action.isCrit?Hl.auxTextCritical:e.action.damage>0?Hl.auxTextDamage:Hl.auxTextHealing):t="Miss!"),[t,n]}),[e.action]),i=f()(r,2),a=i[0],u=i[1],c=Object(o.useRef)(new b.default.Value(0)).current,l=Object(o.useRef)(new b.default.Value(0)).current;Object(o.useEffect)((function(){c.setValue(0),b.default.sequence([b.default.delay(e.delay),b.default.spring(c,{toValue:-16,useNativeDriver:!0,bounciness:0})]).start()}),[null==(t=e.action)?void 0:t.id]),Object(o.useEffect)((function(){b.default.sequence([b.default.delay(e.delay),b.default.timing(l,{toValue:1,useNativeDriver:!0,duration:0}),b.default.timing(l,{toValue:0,useNativeDriver:!0,duration:800})]).start()}),[null==(n=e.action)?void 0:n.id]);var s=Object(R.useTheme)();return Object(o.useMemo)((function(){return a?Object(Wn.jsx)(b.default.View,{style:[Hl.auxTextContainer,{transform:[{translateY:c}],opacity:l}],children:Object(Wn.jsx)(zn,{style:[Hl.auxText,{color:s.theme.colors.black},u],children:a})}):Object(Wn.jsx)(M.default,{})}),[c,l,s,a,u])}var Gl=i.a.memo((function(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=Object(o.useContext)(Mi),i=Object(o.useRef)(Ze(t));Object(o.useEffect)((function(){i.current=Ze(n.current)}),[r]);var a=t.global.hideDamageEffects?[]:t.exploration.actionResultQueue.filter((function(t){return null!=t&&t.target===e.actionTarget&&t.time>i.current})),u=a.map((function(e){return e.id})).join(),c=Object(o.useMemo)((function(){var e=0,t=0,n=[];for(var r in a){var o=a[r];1e3*o.time<e+300?t+=e+300-1e3*o.time:t=0,n.push(Object(Wn.jsx)(Ql,{action:o,delay:t},o.id)),e=1e3*o.time}return n}),[u]),l=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Hl.row,Hl.container],accessibilityLabel:e.actionTarget+" HP: "+Mn(Math.ceil(e.current),{showDecimals:!1})+"/"+Mn(Math.ceil(e.max),{showDecimals:!1})+("web"===k.default.OS?" (Control + Shift + Z)":""),accessible:!0,accessibilityRole:"web"!==k.default.OS?"header":void 0,children:[Object(Wn.jsx)(fr,{icon:"hp",style:Hl.icon,accessibilityHidden:!0}),Object(Wn.jsxs)(M.default,{style:Hl.progressBarContainer,accessibilityHidden:!0,children:[Object(Wn.jsx)(Xu.default,{progress:e.current/e.max,width:null,useNativeDriver:!t.global.doNotUseNativeDriver,color:l.theme.colors.hpBarForeground,unfilledColor:l.theme.colors.hpBarBackground,height:20},t.global.doNotUseNativeDriver?"yes":"no"),!e.empty&&Object(Wn.jsxs)(zn,{style:Hl.overlaidText,children:[Mn(Math.ceil(e.current)),"/",Mn(Math.ceil(e.max))]}),c]})]})}),[e.current,e.max,l,e.empty,e.actionTarget,c,t.global.doNotUseNativeDriver])})),Hl=C.default.create({row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},icon:{marginTop:-4,marginRight:4},overlaidText:{color:"#fff",fontWeight:"bold",position:"absolute",top:k.default.select({default:0,ios:2}),width:"100%",textAlign:"center"},auxTextContainer:{left:48,position:"absolute",width:"100%"},auxText:{width:"100%",textAlign:"center",fontWeight:"bold"},auxTextCritical:{color:"#dd0"},auxTextDamage:{color:"#f00"},auxTextHealing:{color:"#0f0"},progressBarContainer:{flex:1},container:{height:32}});function Wl(){var e=Object(o.useContext)(re),t=nu(e)==H.Combat,n=0,r=1;return t&&(n=uu(e),r=Wa(e).getMaxHP(e)),Object(Wn.jsx)(Gl,{empty:!t,current:n,max:r,actionTarget:io.Enemy})}function Jl(e){var t=fi(Object(R.useTheme)().theme,e.disabled);return Object(Wn.jsx)(M.default,{style:[zl.activeMark,{backgroundColor:t},null==e?void 0:e.style]})}var zl=C.default.create({activeMark:{width:8,height:8,alignSelf:"center",marginRight:8,borderRadius:4}});function Zl(e){var t=Object(R.useTheme)();return Object(Wn.jsx)(M.default,{style:Xl.tagRow,children:e.tags.map((function(e){return Object(Wn.jsx)(M.default,{style:[Xl.tagStyle,{backgroundColor:t.theme.colors.grey0,borderColor:t.theme.colors.grey0}],children:Object(Wn.jsx)(zn,{doNotScaleFonts:!0,style:[Xl.tagTextStyle,{color:t.theme.colors.white}],children:e.tag})},e.tag)}))})}var Xl=C.default.create({tagRow:{flexDirection:"row",flexWrap:"wrap"},tagStyle:{textAlign:"center",paddingHorizontal:6,borderRadius:8,height:18,marginRight:4},tagTextStyle:{fontSize:11,lineHeight:16}});function ql(e){var t=Object(R.useTheme)(),n=Object(o.useState)(0),r=f()(n,2),i=r[0],a=r[1],u=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Kl.tile,{borderColor:t.theme.colors.grey4}],children:[e.icon&&Object(Wn.jsx)(fr,{style:e.disabled&&{opacity:.2},icon:e.icon}),null!=e.amount&&e.amount>1&&Object(Wn.jsx)(R.Badge,{status:"primary",value:e.amount,containerStyle:{position:"absolute",top:-8,right:-8},badgeStyle:{borderColor:t.theme.colors.background}})]})}),[t,e.icon,e.amount,e.disabled]);return Object(o.useMemo)((function(){return e.onPress?Object(Wn.jsx)(Ti,{containerStyle:[Kl.tile,{flex:null,borderColor:t.theme.colors.grey4}],tooltip:e.tooltip,tooltipId:e.title+e.tooltipIdSuffix,children:Object(Wn.jsx)(S.default,{accessibilityLabel:e.title+(e.amount&&e.amount>1?" ("+e.amount+")":""),accessibilityRole:"button",onPress:function(){var t=Date.now();t-i<500?(a(0),e.onDoublePress&&e.onDoublePress()):(a(t),e.onPress&&e.onPress())},children:u})}):Object(Wn.jsx)(Ti,{containerStyle:[Kl.tile,{flex:null,borderColor:t.theme.colors.grey4}],tooltip:e.tooltip,tooltipId:e.title+e.tooltipIdSuffix,children:u})}),[e.title,e.tooltip,e.onPress,e.onDoublePress,i,a,u,e.tooltipIdSuffix])}var Kl=C.default.create({tile:{borderWidth:.5,height:48,width:48,justifyContent:"center",alignItems:"center",margin:8}});function $l(e){var t=Object(o.useContext)(re),n=e.itemStack.itemOccurrence,r=n.itemId,i=n.params,a=tr(r),u=a.getName(i),c=a.getDescription(t,i),l=a.getEffect(t,i),s=a.getTags(t,i);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:es.itemDetailsContainer,children:[Object(Wn.jsxs)(M.default,{style:es.main,children:[Object(Wn.jsxs)(zn,{h3:!0,children:[u,e.itemStack.amount>1&&" ("+e.itemStack.amount+")"]}),Object(Wn.jsx)(M.default,{style:es.tagRow,children:Object(Wn.jsx)(Zl,{tags:s})}),c&&Object(Wn.jsx)(di,{children:c}),l&&Object(Wn.jsx)(hi,{children:l})]}),e.showTile&&Object(Wn.jsx)(ql,{title:u,icon:a.getId(),tooltipIdSuffix:"itemInfo"})]})}),[u,e.itemStack.amount,JSON.stringify(s),c,l,a.getId()])}var es=C.default.create({itemDetailsContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},main:{flex:1},tagRow:{marginVertical:4}});function ts(e){var t=e.action,n=Object(o.useContext)(re),r=Object(o.useRef)(n);r.current=n;var i=Object(o.useState)(!1),a=f()(i,2),u=a[0],c=a[1],l=Object(o.useCallback)((function(){!e.requireConfirm||u?t.transform&&r.current.apply(t.transform):c(!0)}),[e.requireConfirm,e.requireConfirm&&c,e.requireConfirm&&u,t.transform]);return Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{icon:t.isActive?Object(Wn.jsx)(Jl,{disabled:!t.isEnabled}):void 0,title:e.requireConfirm&&u?"Press again to confirm":t.description,disabled:!t.isEnabled,containerStyle:rs.actionButtonContainer,enableAutoRepress:!0,autoRepressConfig:{dropoffMultiplier:.8,startingThreshold:300,startingRepressTime:200,minTimeMs:50},onPress:l},t.description)}),[t.description,t.isEnabled,t.isActive,e.requireConfirm,e.requireConfirm&&u,l])}function ns(e){var t=Object(o.useContext)(re);Object(o.useRef)(t).current=t;var n=e.itemStack.itemOccurrence,r=n.itemId,i=n.params,a=tr(r),u=(a.getName(i),a.getDescription(t,i),a.getEffect(t,i),[{action:a.getPrimaryAction(t,i)},{action:e.disableSelling?void 0:a.getSaleAction(t,i),requireConfirm:!0},{action:e.showQuickbar?a.getQuickbarAction(t,i):void 0}].filter((function(e){return void 0!=e.action}))),c=Object(o.useMemo)((function(){return Object(Wn.jsx)($l,{itemStack:e.itemStack,showTile:!0})}),[JSON.stringify(e.itemStack)]);return Object(Wn.jsxs)(M.default,{style:rs.itemDetailsContainer,children:[c,Object(Wn.jsx)(M.default,{style:rs.actionRow,children:u.map((function(e){return Object(Wn.jsx)(ts,{action:e.action,requireConfirm:null==e?void 0:e.requireConfirm},e.action.description)}))})]})}var rs=C.default.create({itemDetailsContainer:{marginBottom:16},tagRow:{marginVertical:4},actionRow:{flexDirection:"row",flexWrap:"wrap",marginTop:8},actionButtonContainer:{marginRight:8}});function os(e,t){var n=[],r=t.getCraftingSchoolLevelRequirements(e);for(var o in r)n.push(o+" Lv"+r[o]);return n.join(", ")}function is(e){return"*"+e.getSpellName()+"* ("+function(e){var t=[],n=e.getSchoolLevelRequirements();for(var r in n)t.push(r+" Lv"+n[r]);return t.join(", ")}(e)+")"}function as(e,t){return":"+t.getId()+": *"+t.getName({})+"* ("+os(e,t)+")"}function us(){var e=function(e){var t=Qn("Level_Up_"+e,e+" Level Up!").setSimpleDescription("Congratulations!\n      \nYour "+e+" level is now {level}!\n\n{levelUpLearnedSpells}\n\n{levelUpLearnedCrafts}\n\n{levelUpLearnedFloors}").build(),n=Dn("Level_Up_"+e,t,[qe.LEVEL_UP]);Te("Level_Up_"+e,(function(t){var r=G(t);r.isFake=!0;var o=function(e,t){var n=t.filter((function(t){return!e.includes(t)})),r="",o="";if(n.length>3&&(o="and "+(n.length-3)+" more!",n=n.slice(0,3)),n.length>0){var i=n.map(is).join(", ");""!==o&&(i=[i,o].join(". ")),r="**New spells learned:** "+i}return r}(cn(r=_t(e,-Bt(r,Pt(t,e)-1,e))(r),e),cn(t,e)),i=rr(r),a=rr(t),u=function(e,t,n,r){var o=r.filter((function(r){var o,i;return!n.includes(r)&&(null!=(o=null==(i=r.getCraftingSchoolLevelRequirements(e))?void 0:i[t])?o:0)>0})),i="";if(ir(e)&&o.length>0){var a="";if(o.length>3)a="and "+(o.length-3)+" more!",o=o.slice(0,3);var u=o.map(as.bind(null,e)).join(", ");""!==a&&(u=[u,a].join(", ")),i="**New craftable items:**\n"+u}return i}(t,e,i,a),c="";e===xt.Breeding&&(c=function(e,t,n){var r=n.filter((function(e){return!t.includes(e)})),o="";if(ce(e,"creatures_unlocked")&&r.length>0){var i="";if(r.length>3)i="and "+(r.length-3)+" more!",r=r.slice(0,3);var a=r.map((function(e){return"*"+e.getFloorName()+"*"})).join(", ");""!==i&&(a=[a,i].join(", ")),o="**You can now send creatures to:**\n"+a}return o}(t,Na(r),Na(t)));var l=[];return o||u||c||l.push(qe.LEVEL_UP_EMPTY),Ze(t)<900&&l.push(qe.LEVEL_UP_FIRST_FIFTEEN_MINS),lt(n,{level:Pt(t,e),levelUpLearnedSpells:o,levelUpLearnedCrafts:u,levelUpLearnedFloors:c},l)}),(function(t){return Pt(t,e)}))};for(var t in xt)e(t)}function cs(e){var t=Object(o.useContext)(re),n=e.item,r=n.generateCraftedParams(t),i="Total owned: "+ro(n,t),a=n.getCraftingMaterials(t),u=n.isCraftable(t),c=Object(R.useTheme)(),l="You do not meet the requirements to craft this item. You need: "+os(t,n);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)($l,{itemStack:{itemOccurrence:{itemId:n.getId(),params:r},amount:1},showTile:!1}),Object(Wn.jsx)(pr,{children:i}),Object(Wn.jsxs)(M.default,{style:ss.costContainer,children:[Object(Wn.jsx)(M.default,{style:ss.costTextContainer,children:Object(Wn.jsx)(pr,{children:"Cost:"})}),Object(Wn.jsx)(ki,{resources:a.resources,items:a.items})]}),!u&&Object(Wn.jsx)(M.default,{style:ss.actionRow,children:Object(Wn.jsx)(zn,{style:[ss.cannotCraftText,{color:c.theme.colors.warning}],children:l})})]})}),[n.getId(),JSON.stringify(r),i,JSON.stringify(a),u,l,c])}function ls(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=e.item,i=r.generateCraftedParams(t),a="Total owned: "+ro(r,t),u=r.getCraftingMaterials(t),c=r.canCraft(t),l=r.isCraftable(t),s=r.hasCraftingMaterials(t),f=qr(t).length===$r(t),d=Object(R.useTheme)(),h="You do not meet the requirements to craft this item. You need: "+os(t,r),g=Object(o.useCallback)((function(){n.current.apply(r.craft.bind(r))}),[r]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:ss.craftingDetailsContainer,children:[Object(Wn.jsx)($l,{itemStack:{itemOccurrence:{itemId:r.getId(),params:i},amount:1},showTile:!0}),Object(Wn.jsx)(pr,{children:a}),Object(Wn.jsxs)(M.default,{style:ss.costContainer,children:[Object(Wn.jsx)(pr,{children:"Cost:"}),Object(Wn.jsx)(ki,{resources:u.resources,items:u.items})]}),Object(Wn.jsx)(M.default,{style:ss.actionRow,children:l?[Object(Wn.jsx)(ji,{enableAutoRepress:!0,autoRepressConfig:{dropoffMultiplier:.8,startingThreshold:300,startingRepressTime:200,minTimeMs:50},title:"Craft",disabled:!c,onPress:g},"craft_button"),!c&&s&&f&&Object(Wn.jsx)(M.default,{style:ss.inventoryFullContainer,children:Object(Wn.jsx)(zn,{style:{color:d.theme.colors.error},children:"You cannot craft this item as your inventory is full!"})},"inventory_full")]:Object(Wn.jsx)(zn,{style:[ss.cannotCraftText,{color:d.theme.colors.warning}],children:h})})]})}),[r.getId(),JSON.stringify(i),a,JSON.stringify(u.resources),JSON.stringify(u.items),c,f,n,d,l])}var ss=C.default.create({craftingDetailsContainer:{marginBottom:16},tagRow:{marginVertical:4},actionRow:{flexDirection:"row",flexWrap:"wrap",marginTop:8},actionButtonContainer:{marginRight:8},costContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginTop:4},costTextContainer:{marginRight:8},inventoryFullContainer:{flex:1,marginHorizontal:8},cannotCraftText:{fontStyle:"italic"}});var fs=i.a.memo((function(e){if(null==e.item)return null;var t=e.item,n=tr(t.itemId);return Object(o.useMemo)((function(){return e.crafting?Object(Wn.jsx)(cs,{item:n}):Object(Wn.jsx)($l,{itemStack:{itemOccurrence:{itemId:n.getId(),params:t.params},amount:t.amount},showTile:!1})}),[JSON.stringify(t),e.crafting])}),(function(e,t){return JSON.stringify(e)==JSON.stringify(t)}));function ds(e){var t=Object(R.useTheme)(),n=Object(o.useContext)(re),r=Object(E.default)(),i=r.height,a=(r.width,Math.max(220,i-80-300-300));Object(o.useRef)(n).current=n;var u=Object(o.useMemo)((function(){return e.items.map((function(t,n){return function(){var r=tr(t.itemId);e.onPressItem&&e.onPressItem(r,n)}}))}),[e.items.map((function(e){return e.itemId})).join(),e.onPressItem]),c=Object(o.useMemo)((function(){return e.items.map((function(t,n){return function(){var r=tr(t.itemId);e.onDoublePressItem&&e.onDoublePressItem(r,n)}}))}),[e.items.map((function(e){return e.itemId})).join(),e.onDoublePressItem]);return Object(o.useMemo)((function(){for(var n=[],r=0;r<(e.dummySlotAmount||0);r++)n.push(Object(Wn.jsx)(ql,{title:"Empty"},"dummySlot"+r));return Object(Wn.jsx)(M.default,{style:[hs.container,{borderColor:t.theme.colors.grey5}],children:Object(Wn.jsx)(w.default,{style:[null!=e.overrideMaxHeight?{maxHeight:e.overrideMaxHeight}:{maxHeight:a}],nestedScrollEnabled:!0,children:Object(Wn.jsxs)(M.default,{style:[hs.gridContainer,{backgroundColor:t.theme.colors.background}],children:[e.items.map((function(t,n){var r=tr(t.itemId),o=null;return n%10==0&&(o=Object(Wn.jsx)(M.default,{style:hs.accessibilityHidden,accessible:!0,accessibilityLabel:"Item list position "+(n+1),accessibilityRole:"header",accessibilityLevel:5,accessibilityElementsHidden:!1})),Object(Wn.jsxs)(M.default,{children:[o,Object(Wn.jsx)(ql,{title:r.getName(t.params),onPress:u[n],onDoublePress:c[n],icon:r.getId(),disabled:t.disabled,amount:t.amount,tooltipIdSuffix:e.crafting?"crafting":"inventory",tooltip:t.disableTooltip||"web"!=k.default.OS?null:Object(Wn.jsx)(fs,{item:t,crafting:e.crafting})})]},n)})),n]})})})}),[JSON.stringify(e.items),e.onPressItem,e.onDoublePressItem,e.dummySlotAmount,e.crafting,a,u,c,t])}var hs=C.default.create({container:{borderWidth:2},scrollView:{maxHeight:220},gridContainer:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",flex:1},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0}});function gs(e){var t,n=Object(o.useContext)(re),r=Object(o.useRef)(n);r.current=n;var a=Object(o.useState)(null),u=f()(a,2),c=u[0],l=u[1],s=qr(n),d=s.map((function(e,t){return{itemId:e.itemOccurrence.itemId,amount:e.amount,params:e.itemOccurrence.params,disableTooltip:t===c}})),h=null!=c?null==(t=s[c])?void 0:t.itemOccurrence:void 0,g=$r(n)-s.length;Object(o.useEffect)((function(){return Te("InventoryComponent",(function(e){l(null)}),(function(e,t){var n,r=qr(e),o=null!=c?null==(n=r[c])?void 0:n.itemOccurrence:void 0;return JSON.stringify(o)})),function(){return De("InventoryComponent")}}),[c]);var m=Object(o.useContext)(Mi);Object(o.useEffect)((function(){m||l(null)}),[m]);var A=null!=c&&h&&Object(Wn.jsx)(ns,{disableSelling:e.disableSelling,showQuickbar:e.showQuickbar,itemStack:s[c]}),y=i.a.useCallback((function(e,t){l(t)}),[l]),p=i.a.useCallback((function(e,t){r.current.apply((function(e){if(null!=(null==h?void 0:h.itemId)){var t=nr(null==h?void 0:h.itemId),n=null==t?void 0:t.getPrimaryAction(e,h.params);if(null!=n&&null!=n&&n.isEnabled){var r=n.transform;return null!=r?r(e):e}}return e}))}),[JSON.stringify(h)]);return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(ds,{items:d,onPressItem:y,onDoublePressItem:p,dummySlotAmount:g,overrideMaxHeight:e.overrideMaxHeight}),Object(Wn.jsx)(M.default,{style:[ms.detailsContainer,e.isFullBleed&&ms.detailsContainerPadding],children:A})]})}var ms=C.default.create({detailsContainer:{marginTop:18},detailsContainerPadding:{paddingHorizontal:8,paddingBottom:8}});function As(e){var t=Object(o.useContext)(re);return Object(o.useMemo)((function(){return Object(Wn.jsx)(Mi.Provider,{value:e.isVisible,children:Object(Wn.jsx)(re.Provider,{value:t,children:e.children})})}),[!!e.isVisible&&t])}var ys=n(523);function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bs(e){var t,n,r,i,a,u=e.playerContext,c=Object(o.useRef)(e.playerContext),l=e.spell,s=e.showAddToQuickbar||!1,f=Object(o.useMemo)((function(){var e=l.getDisplayDescription(u)+" **"+l.getDisplayEffect(u)+"**";return Object(Wn.jsx)(M.default,{style:Os.descriptionTextContainer,children:Object(Wn.jsx)(di,{style:{flex:1},children:e})})}),[(!e.collapsed||"web"===k.default.OS)&&l.getDisplayDescription(u),(!e.collapsed||"web"===k.default.OS)&&l.getDisplayEffect(u)]),d=Object(R.useTheme)(),h=l.getElement();h&&!Vt(u).includes(h)&&(h=void 0);var g=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{children:null!=h&&Object(Wn.jsxs)(M.default,{style:Os.elementContainer,children:[Object(Wn.jsx)(pr,{children:"Element:"}),Object(Wn.jsx)(M.default,{style:[Os.elementTextContainer,{backgroundColor:si(d.theme.mode,h)}],children:Object(Wn.jsx)(zn,{style:[h===u.primaryElement&&Os.primaryElementText,Os.spellElementBadgeText],children:h})})]})})}),[h,d]),m=Object(o.useMemo)((function(){var e=l.getCooldown(u),t=Mn(e,{showDecimals:!0})+" sec";return Object(Wn.jsx)(M.default,{children:e>0&&Object(Wn.jsxs)(M.default,{style:Os.costContainer,children:[Object(Wn.jsx)(pr,{children:"Cooldown:"}),Object(Wn.jsx)(pr,{containerStyle:{flex:null},children:t})]})})}),[(!e.collapsed||"web"===k.default.OS)&&l.getCooldown(u)]),A=Object(o.useCallback)((function(){c.current.apply((function(e){return gn(e,l)?hn(e,l):function(e,t){return gn(e,t)||e.favoriteSpells.push(t.getName()),e}(e,l)}))}),[]),y=Object(o.useMemo)((function(){return Object(Wn.jsx)(ys.default,{accessibilityLabel:gn(u,l)?"Remove from Favorites":"Add to Favorites",onPress:A,name:gn(u,l)?"heart":"heart-outline",style:[Os.expandContainer],color:d.theme.colors.black,size:32})}),[!e.showAddToQuickbar&&gn(u,l),A,d]),p=!l.isEnabled(u),v=Object(o.useMemo)((function(){return[{color:"white"},Os.buttonTitle,p&&{color:ui(d.theme)},Os.smallButtonTitle]}),[null==d||null==(t=d.theme)||null==(n=t.colors)?void 0:n.disabled,p]),b=l.getDisplayName(u),j=null!=(r=null==(i=l.getCost(u))||null==(a=i.resources)?void 0:a.Mana)?r:0,O=l.isActive(u),x=Object(o.useCallback)((function(){return c.current.apply(l.doAction.bind(l,{isAutomatic:!1}))}),[]),w=Object(o.useMemo)((function(){return Object(Wn.jsx)(Ti,{tooltip:e.collapsed?Object(Wn.jsxs)(M.default,{children:[f,g,m]}):void 0,tooltipPosition:s?Bi.RIGHT_OF_ELEMENT:Bi.LEFT_OF_ELEMENT,tooltipId:l.getName(),children:Object(Wn.jsx)(ji,{enableAutoRepress:!0,onPress:x,title:Object(Wn.jsxs)(M.default,{style:Os.spellButtonTitleContainer,children:[Object(Wn.jsxs)(M.default,{style:Os.spellButtonTitleOnlyContainer,children:[O&&Object(Wn.jsx)(Jl,{disabled:p}),Object(Wn.jsx)(M.default,{style:Os.spellButtonTitleTitleOnlyContainer,children:Object(Wn.jsx)(zn,{style:v,numberOfLines:e.isMinimal?1:void 0,children:b})})]}),Object(Wn.jsxs)(M.default,{style:Os.spellButtonCostContainer,children:[Object(Wn.jsx)(zn,{style:v,doNotScaleFonts:!0,children:Mn(j,{showDecimals:!1})}),Object(Wn.jsx)(fr,{icon:"mana",style:Os.spellManaIcon})]})]}),titleStyle:Os.smallButtonTitle,containerStyle:[Os.buttonContainer,Os.buttonContainerSmall],disabled:p},l.getName())})}),[l.getDisplayName(u),x,v,b,j,p,O,f,g,m,e.collapsed,e.isMinimal,s]),C=Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{onPress:function(){return c.current.apply((function(e){return Bo(e,l)}))},title:"Add to Quickbar",titleStyle:Os.smallButtonTitle,containerStyle:[Os.quickbarButtonContainer],disabled:Io(u,{type:"action",name:l.getName()})||Po(u)})}),[Io(u,{type:"action",name:l.getName()}),Po(u)]);return Object(o.useMemo)((function(){return e.isMinimal?Object(Wn.jsx)(M.default,{style:Os.buttonContainerView,children:w}):Object(Wn.jsxs)(M.default,{style:Os.actionContainer,children:[Object(Wn.jsxs)(M.default,{style:Os.buttonRowContainer,children:[Object(Wn.jsx)(M.default,{style:Os.buttonContainerView,children:w}),Object(Wn.jsx)(ko.default,{accessibilityLabel:e.collapsed?"Expand":"Collapse",onPress:e.toggleCollapsed,children:Object(Wn.jsx)(M.default,{style:Os.expandContainer,children:Object(Wn.jsx)(Oo.default,{name:e.collapsed?"chevron-right":"chevron-down",size:24,color:d.theme.colors.black})})})]}),(!e.collapsed||!e.showAddToQuickbar)&&Object(Wn.jsxs)(M.default,{style:e.collapsed&&{display:"none"},children:[Object(Wn.jsxs)(M.default,{style:Os.descriptionRow,children:[f,!s&&y,s&&C]}),g,m]})]},l.getName())}),[l.getName(),!e.collapsed&&m,!e.collapsed&&f,s,s&&C,s&&JSON.stringify(u.quickbar),e.collapsed,d,A,e.isMinimal,e.toggleCollapsed,y,w])}function js(e){var t=Object(o.useContext)(re);return Object(o.useMemo)((function(){return Object(Wn.jsx)(bs,vs({playerContext:t},e))}),[e.spell.getName(),e.collapsed,e.showAddToQuickbar,e.toggleCollapsed,!1!==e.isVisible&&t])}var Os=C.default.create({actionContainer:{marginVertical:8},buttonRowContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},quickbarButtonContainer:{marginTop:4,marginLeft:8},expandContainer:{width:40,alignSelf:"stretch",alignItems:"center",justifyContent:"center",cursor:"pointer"},costContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginTop:4},elementContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",marginTop:4},descriptionTextContainer:{flex:1,flexDirection:"row",flexWrap:"wrap",paddingRight:4},buttonTitle:vs({fontSize:16,textAlign:"center",paddingVertical:1},k.default.select({android:{fontFamily:"sans-serif-medium"},default:{fontSize:18}})),smallButtonTitle:{fontSize:12},buttonContainerView:{flexDirection:"row",flex:1},buttonContainer:{flex:1},buttonContainerSmall:{marginRight:0},disabledActionText:{color:"#aaa"},capTooLowText:{color:"#d99"},turnOnRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8},turnOnQuantityContainer:{flexDirection:"row",alignItems:"center"},plusMinusContainer:{marginLeft:8},spellButtonTitleContainer:{flex:1,flexDirection:"row",alignItems:"center"},spellButtonTitleOnlyContainer:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},spellButtonTitleTitleOnlyContainer:{flex:1},spellButtonCostContainer:{flexDirection:"row",width:50,justifyContent:"flex-end"},spellManaIcon:{height:16,width:16,justifyContent:"flex-end",alignItems:"center",top:1,marginLeft:2},descriptionRow:{flexDirection:"row",alignItems:"flex-start",marginTop:8},elementTextContainer:{paddingHorizontal:8,borderRadius:8},primaryElementText:{fontWeight:"bold"},spellElementBadgeText:{color:"white"}}),ks=n(151),xs=n.n(ks);function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e){var t=dn(e.playerContext).filter((function(e){return null!=e}));if(0===t.length)return null;var n=Object(o.useRef)(e.playerContext);n.current=e.playerContext;var r=Object(R.useTheme)(),i=Object(o.useCallback)((function(e){var t=e.item,o=e.drag,i=(e.isActive,t);return Object(Wn.jsx)(ks.ScaleDecorator,{children:Object(Wn.jsxs)(M.default,{style:Es.spellViewContainer,children:[Object(Wn.jsx)(M.default,{importantForAccessibility:"no-hide-descendants",accessibilityElementsHidden:!0,style:Es.dragHandle,children:Object(Wn.jsx)(ko.default,{onPressIn:o,hitSlop:{top:8,bottom:8,left:8,right:8},children:Object(Wn.jsx)(g.default,{name:"drag-indicator",size:24,color:r.theme.colors.grey3})})}),Object(Wn.jsx)(js,{spell:i,isMinimal:!0},i.getName()),Object(Wn.jsx)(R.Button,{icon:Object(Wn.jsx)(g.default,{name:"close",size:24,color:"white"}),accessibilityLabel:"Remove from Favorites",containerStyle:Es.deleteButton,style:Es.deleteButtonInner,iconContainerStyle:Es.deleteButtonInner,buttonStyle:Es.deleteButtonInner,hitSlop:{top:8,bottom:8,left:8,right:8},onPress:function(){return n.current.apply((function(e){return hn(e,i)}))}})]},i.getName())})}),[hn,r]),a=Object(o.useCallback)((function(e){return e.getName()}),[]);return Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:{flex:1},children:Object(Wn.jsx)(Yi,{title:"Favorites",containerStyle:Es.categoryContainer,children:Object(Wn.jsx)(xs.a,{data:t,renderItem:i,containerStyle:{flex:1},keyExtractor:a,onDragEnd:function(e){n.current.apply((function(t){return t.favoriteSpells=e.data.map((function(e){return e.getName()})),t}))}})})})}),[t.map((function(e){return e.getName()})).join()])}function Ss(e){var t=Object(o.useContext)(re);return Object(o.useMemo)((function(){return Object(Wn.jsx)(Cs,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({playerContext:t},e))}),[!1!==e.isVisible&&t])}var Es=C.default.create({spellViewContainer:{paddingTop:8,flexDirection:"row",alignItems:"center"},deleteButton:{marginLeft:8},deleteButtonInner:{paddingHorizontal:0,paddingVertical:0,height:32,width:32,borderRadius:16},categoryContainer:{paddingTop:8,flex:1},dragHandle:{cursor:"grab",marginRight:8}});function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bs(e){var t,n=e.playerContext,r=Object(o.useRef)(n),i=e.uiContext,a=e.uiKey+".currentSchool",u=un(n);for(var c in u)u[c]=u[c].filter((function(t){return!e.area||t.getArea()==e.area})),0==u[c].length&&delete u[c];var l=Object.keys(u),s=Qi(i,a,null!=(t=null==l?void 0:l[0])?t:"Conjuration"),d=f()(s,2),h=d[0],g=d[1];Object(o.useEffect)((function(){l.includes(h)||g(null==l?void 0:l[0])}),[l.join(",")]);var A=Object(o.useState)({}),y=f()(A,2),p=y[0],v=y[1],b=Object(o.useRef)(p);b.current=p;var j=Object(o.useCallback)((function(e){g(e),ve(r.current,"has_completed_spell_menu_picker_nux")||r.current.apply(ye("has_completed_spell_menu_picker_nux"))}),[g]),O=l.map((function(e){return Object.values(u[e]).map((function(e){return e.getName()})).join(",")})).join(";"),x=((null==u?void 0:u[h])||[]).map((function(e){return e.getName()})).join(","),w=Object(o.useMemo)((function(){return(null==u?void 0:u[h])||[]}),[x]),C=Object(o.useCallback)((function(e){var t,n=e.getName();b.current[n]=!(null!=b&&null!=(t=b.current)&&t[n]),v(G(b.current))}),[]),S=Object(o.useMemo)((function(){return Object.fromEntries(l.map((function(e){return[e,Object.fromEntries(u[e].map((function(e){return[e.getName(),C.bind(null,e)]})))]})))}),[O]),E=Object(o.useMemo)((function(){return e.showAddToQuickbar?w.map((function(t,n){return Object(Wn.jsx)(js,{spell:t,showAddToQuickbar:e.showAddToQuickbar,collapsed:!(null!=p&&p[t.getSpellName()]),toggleCollapsed:S[h][t.getName()],isVisible:e.isVisible},t.getSpellName())})):l.map((function(t){var n=u[t];return Object(Wn.jsx)(As,{isVisible:!!e.isVisible&&h===t,children:Object(Wn.jsx)(M.default,{style:h!==t&&{display:"none"},children:n.map((function(n,r){return Object(Wn.jsx)(js,{spell:n,showAddToQuickbar:e.showAddToQuickbar,collapsed:!(null!=p&&p[n.getSpellName()]),toggleCollapsed:S[t][n.getName()],isVisible:e.isVisible&&h===t},n.getSpellName())}))})},t)}))}),[e.showAddToQuickbar?w:O,JSON.stringify(p),S,h,e.isVisible]),B=l,T=Object(o.useMemo)((function(){return Object(Wn.jsx)(ca,{onValueChange:j,style:Ds.picker,selectedValue:h,data:B.map((function(e,t){return{label:e,value:e,key:e}}))})}),[j,h,JSON.stringify(B)]),D=w.map((function(e){return e.getName()})).join(","),P=Object(o.useMemo)((function(){return!w.some((function(e){var t;return!(null!=(t=null==p?void 0:p[e.getName()])&&t)}))}),[p,D]),I=Object(o.useCallback)((function(){var e=!1;w.forEach((function(t){var n=t.getName();null!=p&&p[n]||(e=!0,p[n]=!0)})),e||w.forEach((function(e){delete p[e.getName()]})),v(G(p))}),[p,D]),_=Object(R.useTheme)(),N=!ve(n,"has_completed_spell_menu_picker_nux");return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[!e.hideTitle&&Object(Wn.jsxs)(M.default,{accessible:!0,accessibilityRole:"header",style:Ds.emptyTitleContainer,children:[Object(Wn.jsx)(m.default,{name:"magic-wand",size:24,style:Ds.magicWand,color:_.theme.colors.black}),Object(Wn.jsx)(zn,{h2:!0,accessibilityRole:"none",children:"Cast Spell"})]}),!e.onlyBySchool&&Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(Ss,{isVisible:e.isVisible})}),l.length>0?Object(Wn.jsxs)(Yi,{title:"By School",children:[Object(Wn.jsxs)(M.default,{style:Ds.schoolRowContainer,children:[Object(Wn.jsx)(M.default,{style:[Ds.tagPickerContainer,k.default.select({android:{backgroundColor:"#eee",borderRadius:10},default:null})],children:T}),Object(Wn.jsx)(R.Button,{titleStyle:Ds.buttonTitle,title:P?"Collapse all":"Expand all",onPress:I})]}),N&&Object(Wn.jsxs)(zn,{style:Ds.nuxText,children:["Tip: You can find more spells by"," ","ios"==k.default.OS?"pressing the "+h+" button":"changing the dropdown"," ","above to switch to a different school!"]}),Object(Wn.jsx)(M.default,{style:Ds.schoolContainer,children:E})]}):Object(Wn.jsx)(M.default,{style:Ds.noSpellsContainer,children:Object(Wn.jsx)(zn,{style:Ds.noSpellsText,children:"No spells yet!"})})]})}),[e.hideTitle,h,g,E,e.isVisible,T,I,e.onlyBySchool,N,l.length,P,_])}function Ts(e){var t=Object(o.useContext)(re),n=Object(o.useContext)(Ui);return Object(o.useMemo)((function(){return Object(Wn.jsx)(Bs,Rs({playerContext:t,uiContext:n},e))}),[e.area,e.hideRecent,e.showAddToQuickbar,e.onlyBySchool,!1!==e.isVisible&&t,!1!==e.isVisible&&n])}var Ds=C.default.create({schoolContainer:{marginTop:8},spellsContainer:{marginTop:8},schoolButton:{marginVertical:4},magicWand:{marginRight:8},schoolTitleContainer:{flexDirection:"row",alignItems:"center",flex:1,justifyContent:"center"},emptyTitleContainer:{flexDirection:"row",justifyContent:"center"},titleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},schoolTitleTextContainer:{},picker:{flex:1},schoolRowContainer:{marginTop:8,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},tagPickerContainer:{width:180},buttonTitle:Rs(Rs({textAlign:"center",paddingVertical:1},k.default.select({android:{fontFamily:"sans-serif-medium"},default:{fontSize:18}})),{},{fontSize:12}),noSpellsText:{fontStyle:"italic"},noSpellsContainer:{marginTop:16},nuxText:{fontStyle:"italic"}});function Ps(e){var t=e.callback;return Object(o.useEffect)((function(){return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[t]),null}function Is(){var e=Object(o.useContext)(re),t=Object(o.useRef)(e);t.current=e;var n=e.lastEquipmentLoadoutModified+1,r=Object(o.useCallback)((function(e){t.current.apply((function(t){return function(e,t){var n,r,o=JSON.parse(JSON.stringify((null==(n=e.equipmentLoadouts)||null==(r=n[t])?void 0:r.equipment)||{Hand:void 0,Body:void 0,Accessory:void 0}));for(var i of Object.values(il)){var a=null==o?void 0:o[i],u=dl(e,i);if(null==a&&null!=u){if(!ll(e,i))continue;e=hl(i,!0,e)}else e=fl(e,i,a,!0)}return e.lastEquipmentLoadoutModified=t,e}(t,e)}))}),[]),i=Object(R.useTheme)(),a=Object(o.useMemo)((function(){return[0,1,2,3].map((function(t){var o,a=null==(o=e.equipmentLoadouts)?void 0:o[t],u=[];for(var c of Object.values(il)){var l,s=null==a||null==(l=a.equipment)?void 0:l[c];if(null!=s){var f=Object(Wn.jsx)(fr,{icon:s.itemId,small:!0},c);u.push(f)}else u.push(Object(Wn.jsx)(M.default,{style:_s.emptyIcon},c))}return Object(Wn.jsxs)(M.default,{style:_s.buttonContainer,children:[Object(Wn.jsx)(ji,{containerStyle:_s.setButton,title:Object(Wn.jsx)(zn,{style:[_s.smallButtonTitle,{color:fi(i.theme,n==t+1)}],doNotScaleFonts:!0,children:"Set "+(t+1)}),disabled:n==t+1,onPress:r.bind(null,t)}),Object(Wn.jsx)(M.default,{style:_s.iconsContainer,children:u})]},t)}))}),[JSON.stringify(e.equipmentLoadouts),r,n,i]);return Object(Wn.jsxs)(M.default,{style:_s.equipmentSetButtonsRow,children:[Object(Wn.jsx)(M.default,{style:_s.setText,children:Object(Wn.jsxs)(zn,{children:["Equip set: ",n]})}),a]})}var _s=C.default.create({equipmentSetButtonsRow:{flexDirection:"row",alignItems:"center",flexWrap:"wrap"},setButton:{width:52},setText:{marginRight:8},smallButtonTitle:{fontSize:12},iconsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",height:16,width:48,marginTop:2},emptyIcon:{width:16},buttonContainer:{marginLeft:8,alignItems:"center",width:52}});function Ns(){var e,t,n,r=i.a.useContext(re),a=null!=(e=null==(t=r.global.autocastLoadouts)||null==(n=t[r.autocast.lastLoadoutUsed])?void 0:n.name)?e:null;return Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:Fs.mainContainer,children:Object(Wn.jsxs)(M.default,{style:Fs.actionsContainer,children:[Object(Wn.jsx)(Yi,{title:"Equipment Sets",containerStyle:Fs.equipmentContainer,children:Object(Wn.jsx)(M.default,{style:Fs.categoryContents,children:Object(Wn.jsx)(Is,{})})}),Object(Wn.jsx)(Yi,{title:"Apprentice Loadouts",containerStyle:Fs.autocastContainer,children:Object(Wn.jsxs)(M.default,{style:Fs.categoryContents,children:[Object(Wn.jsx)(Zi,{}),null!=a&&Object(Wn.jsx)(M.default,{style:Fs.lastLoadedContainer,children:Object(Wn.jsxs)(zn,{children:["Last loaded: ",a]})})]})})]})})}),[a])}var Fs=C.default.create({mainContainer:{height:"100%"},actionsContainer:{flex:1.5,marginRight:8},equipmentContainer:{paddingTop:0,marginBottom:8},autocastContainer:{paddingTop:0},categoryContents:{marginTop:8},lastLoadedContainer:{marginTop:8}});var Ls=i.a.memo((function(e){return Object(Wn.jsxs)(M.default,{style:Vs.row,children:[Object(Wn.jsx)(fr,{icon:e.isBeneficial?"boost":"debuff",style:Vs.icon}),Object(Wn.jsx)(zn,{doNotScaleFonts:!0,style:Vs.boostText,children:e.text})]})}));function Ys(e){var t=Object(o.useContext)(re),n=ho(t).sort((function(t,n){return(e.isEnemy?-1:1)*((t.isBeneficial?1:0)-(n.isBeneficial?1:0))})).filter((function(t){return!t.hidden&&(e.isEnemy?t.isEnemyTemporaryEffect:!t.isEnemyTemporaryEffect)}));return Object(o.useMemo)((function(){var r=n.map((function(e){var n=e.name,r=e.endTime,o=e.isBeneficial,i=n+" ("+Mn(r-Ze(t))+" sec)";return Object(Wn.jsx)(Ls,{isBeneficial:o,text:i},n)}));return Object(Wn.jsxs)(M.default,{style:Vs.container,children:[n.length>0&&null!=e.accessibilityHeader&&Object(Wn.jsx)(M.default,{style:Vs.accessibilityHidden,accessible:!0,accessibilityLabel:e.accessibilityHeader,accessibilityRole:"header",accessibilityElementsHidden:!1}),r]})}),[!1!==e.isVisible&&t,!1!==e.isVisible&&n])}var Vs=C.default.create({container:{justifyContent:"center",alignItems:"stretch"},icon:{height:20,width:20,marginTop:2},row:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginTop:4},boostText:{marginLeft:8,flex:1},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0}});function Us(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=t.global.currentQuickbar,i=r<=0,a=r>=3,u=r+1,c=Object(o.useCallback)((function(){n.current.apply((function(e){return e.global.currentQuickbar=e.global.currentQuickbar-1,e}))}),[]),l=Object(o.useCallback)((function(){n.current.apply((function(e){return e.global.currentQuickbar=e.global.currentQuickbar+1,e}))}),[]),s=Object(R.useTheme)(),f=ui(s.theme),d=Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{disabled:i,accessibilityLabel:"Previous Quickbar",containerStyle:Hs.quickbarSelectorButton,style:Hs.quickbarSelectorButtonInner,iconContainerStyle:Hs.quickbarSelectorButtonInner,buttonStyle:Hs.quickbarSelectorButtonInner,icon:Object(Wn.jsx)(g.default,{name:"arrow-back",size:24,color:i?f:"white"}),onPress:c})}),[i,f,c]),h=Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{disabled:a,accessibilityLabel:"Next Quickbar",containerStyle:Hs.quickbarSelectorButton,style:Hs.quickbarSelectorButtonInner,iconContainerStyle:Hs.quickbarSelectorButtonInner,buttonStyle:Hs.quickbarSelectorButtonInner,icon:Object(Wn.jsx)(g.default,{name:"arrow-forward",size:24,color:a?f:"white"}),onPress:l})}),[a,f,l]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Hs.row,{alignSelf:"stretch",justifyContent:"center"}],children:[d,Object(Wn.jsxs)(M.default,{style:Hs.barText,children:[Object(Wn.jsx)(M.default,{children:Object(Wn.jsxs)(zn,{children:["Bar ",u]})}),"web"===k.default.OS&&Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(zn,{style:[Hs.hotkeyText,"light"==s.theme.mode&&{color:"#088"}],numberOfLines:1,children:"[Ctrl+1~4]"})})]}),h]})}),[d,u,h])}function Qs(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=e.quickbarAction,i=r.getDisplayName(t),a=r.getTransform(t),u=r.toQuickbarData(),c=r.isEnabled(t),l=r.isActive(t),s=Object(R.useTheme)(),f=Object(o.useMemo)((function(){return e.hotkey?Object(Wn.jsxs)(zn,{style:[Hs.smallButtonTitle,{color:fi(s.theme,!c)}],numberOfLines:1,children:[Object(Wn.jsxs)(zn,{style:c?Hs.hotkeyText:{color:fi(s.theme,!c)},children:["[",e.hotkey,"]"]})," ",i]}):i}),[e.hotkey,i,s,c]),d=Object(o.useCallback)((function(){return n.current.apply(a)}),[a]);return Object(o.useMemo)((function(){return Object(Wn.jsx)(ks.ScaleDecorator,{children:Object(Wn.jsxs)(M.default,{style:Hs.row,children:[Object(Wn.jsx)(M.default,{importantForAccessibility:"no-hide-descendants",accessibilityElementsHidden:!0,style:Hs.dragHandle,children:Object(Wn.jsx)(ko.default,{onPressIn:e.drag,hitSlop:{top:8,bottom:8,left:8,right:8},importantForAccessibility:"no-hide-descendants",accessibilityElementsHidden:!0,children:Object(Wn.jsx)(g.default,{name:"drag-indicator",size:24,color:s.theme.colors.grey3})})}),Object(Wn.jsx)(ji,{title:f,titleProps:{numberOfLines:1},icon:l?Object(Wn.jsx)(Jl,{disabled:!c}):void 0,containerStyle:Hs.mainButton,titleStyle:Hs.smallButtonTitle,onPress:d,disabled:!c,enableAutoRepress:!0}),Object(Wn.jsx)(ji,{icon:Object(Wn.jsx)(g.default,{name:"close",size:24,color:"white"}),accessibilityLabel:"Remove from Quickbar",containerStyle:Hs.deleteButton,style:Hs.deleteButtonInner,iconContainerStyle:Hs.deleteButtonInner,buttonStyle:Hs.deleteButtonInner,hitSlop:{top:8,bottom:8,left:8,right:8},onPress:function(){return n.current.apply((function(e){return Do(e,u)}))}})]})})}),[i,n,a,c,l,Do,e.hotkey,s,e.drag])}function Gs(){var e=Object(o.useContext)(re),t=Object(o.useRef)(e);t.current=e;var n=Ro(e).map((function(e){return"item"==e.type?new So(e):new Mo(e)})),r=Object(o.useCallback)((function(e){var t=e.item,n=e.index,r=e.drag;e.isActive;return Object(Wn.jsx)(Qs,{hotkey:"web"===k.default.OS?(((null!=n?n:0)+1)%10).toString():void 0,drag:r,quickbarAction:t})}),[]),i=Object(o.useCallback)((function(e){return JSON.stringify(e.toQuickbarData())}),[]),a=Object(o.useCallback)((function(e){if(e.ctrlKey){var r=-1;switch(e.key){case"1":r=0;break;case"2":r=1;break;case"3":r=2;break;case"4":r=3}r>-1&&t.current.apply((function(e){return e.global.currentQuickbar=r,e}))}else{var o=-1;switch(e.key){case"1":o=0;break;case"2":o=1;break;case"3":o=2;break;case"4":o=3;break;case"5":o=4;break;case"6":o=5;break;case"7":o=6;break;case"8":o=7;break;case"9":o=8;break;case"0":o=9}if(o>=0){var i=null==n?void 0:n[o];if(null!=i){var a=i.getTransform(t.current);i.isEnabled(t.current)&&t.current.apply(a)}}}}),[JSON.stringify(n)]),u=Object(o.useCallback)((function(e){t.current.apply((function(t){return t.global.quickbars[t.global.currentQuickbar]=e.data.map((function(e){return e.toQuickbarData()})),t}))}),[]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Hs.mainContainer,children:[Object(Wn.jsx)(Ps,{callback:a}),Object(Wn.jsx)(M.default,{style:Hs.actionsContainer,children:k.default.select({web:Object(Wn.jsx)(w.default,{style:Hs.actionsScroll,nestedScrollEnabled:!0,children:n.length>0?Object(Wn.jsx)(xs.a,{renderItem:r,data:n,keyExtractor:i,onDragEnd:u,nestedScrollEnabled:!0}):Object(Wn.jsx)(zn,{style:Hs.emptyText,children:'Your Quickbar is empty. Add actions to the Quickbar through the "Inventory" and "Spells" menus at the bottom!'})}),default:n.length>0?Object(Wn.jsx)(xs.a,{renderItem:r,data:n,keyExtractor:i,onDragEnd:u,nestedScrollEnabled:!0}):Object(Wn.jsx)(zn,{style:Hs.emptyText,children:'Your Quickbar is empty. Add actions to the Quickbar through the "Inventory" and "Spells" menus at the bottom!'})})}),Object(Wn.jsxs)(M.default,{style:Hs.infoContainer,children:[Object(Wn.jsx)(M.default,{style:Hs.accessibilityHidden,accessible:!0,accessibilityLabel:"Select Quickbar slot",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(Us,{}),Object(Wn.jsx)(w.default,{style:Hs.infoContainer,nestedScrollEnabled:!0,children:Object(Wn.jsx)(Ys,{accessibilityHeader:"Player Buffs"})})]})]})}),[r,i,u,JSON.stringify(n),a])}var Hs=C.default.create({emptyText:{fontWeight:"bold",fontStyle:"italic"},row:{flexDirection:"row",alignItems:"center",marginVertical:4},mainContainer:{flexDirection:"row",alignItems:"stretch",height:"100%"},actionsContainer:{flex:1.5,marginRight:8},infoContainer:{flex:1},actionsScroll:{flex:1},mainButton:{flex:1},smallButtonTitle:{fontSize:12},deleteButton:{marginLeft:8},deleteButtonInner:{paddingHorizontal:0,paddingVertical:0,height:24,width:24,borderRadius:16},hotkeyText:{color:"#8ff"},quickbarSelectorButton:{height:32,width:32,borderRadius:16,marginHorizontal:4},quickbarSelectorButtonInner:{paddingHorizontal:0,paddingVertical:0,height:32},barText:{marginHorizontal:8,alignItems:"center"},dragHandle:{cursor:"grab",marginRight:8},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0}});function Ws(){var e=Qi(Object(o.useContext)(Ui),"exploration_bottom_component_tab",""),t=f()(e,2),n=t[0],r=t[1],i=Object(R.useTheme)(),a=Object(o.useContext)(Mi),u=Object(E.default)(),c=u.height,l=u.width,s=Object(o.useContext)(re),d=Object(o.useRef)(s);d.current=s;var h=s.global.enableBottomMenu,g=Object(T.useSafeAreaInsets)(),m=c-g.top-g.bottom-(h&&l<640?48:0),A=Object(o.useContext)(Yl),y=ce(s,"combat_paused_magic_tap"),p=Object(o.useCallback)((function(){d.current.apply((function(e){return y?he("combat_paused_magic_tap")(e):fe("combat_paused_magic_tap")(e)})),A.announceForAccessibility(y?"Resuming Exploration":"Pausing Exploration")}),[A,y]),v=Object(o.useCallback)((function(e){a&&e.shiftKey&&e.ctrlKey&&"X"==e.key&&p()}),[p,a]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(M.default,{style:[Js.mainComponent,{backgroundColor:i.theme.colors.grey5},!n&&{display:"none"}],children:["Inventory"==n&&Object(Wn.jsxs)(w.default,{style:[Js.mainScrollView,{height:Math.max(Math.min(m-492,350),168)}],nestedScrollEnabled:!0,children:[Object(Wn.jsx)(M.default,{style:Js.accessibilityHidden,accessible:!0,accessibilityLabel:"Inventory Tab",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(gs,{disableSelling:!0,showQuickbar:!0,overrideMaxHeight:138})]}),Object(Wn.jsxs)(w.default,{style:[Js.mainScrollView,{height:Math.max(Math.min(m-492,350),168)},"Spells"!=n&&{display:"none"}],children:[Object(Wn.jsx)(M.default,{style:Js.accessibilityHidden,accessible:!0,accessibilityLabel:"Spells Tab",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(Ts,{uiKey:"ExplorationBottomContainer",area:"Exploration",hideRecent:!0,showAddToQuickbar:!0,onlyBySchool:!0,hideTitle:!0,isVisible:"Spells"==n})]}),"Quickbar"==n&&Object(Wn.jsxs)(M.default,{style:[Js.quickbarScrollView,{height:Math.max(Math.min(m-492,350),150)}],children:[Object(Wn.jsx)(M.default,{style:Js.accessibilityHidden,accessible:!0,accessibilityLabel:"Quickbar Tab",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(Gs,{})]}),"Loadouts"==n&&Object(Wn.jsxs)(w.default,{style:[Js.mainScrollView,{height:Math.max(Math.min(m-492,350),150)},"Loadouts"!=n&&{display:"none"}],children:[Object(Wn.jsx)(M.default,{style:Js.accessibilityHidden,accessible:!0,accessibilityLabel:"Loadouts Tab",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(Ns,{})]})]}),Object(Wn.jsxs)(M.default,{style:Js.tabsContainer,children:[Object(Wn.jsx)(M.default,{style:Js.accessibilityHidden,accessible:!0,accessibilityLabel:"Exploration Tabs",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(ko.default,{onPress:p,accessibilityElementsHidden:!1,children:Object(Wn.jsx)(M.default,{accessibilityLabel:y?"Resume Exploration "+("web"===k.default.OS?"(Shortcut Control + Shift + X)":""):"Pause Exploration "+("web"===k.default.OS?"(Shortcut Control + Shift + X)":""),accessibilityRole:"button",style:[Js.accessibilityHidden,{left:1}]})}),Object(Wn.jsx)(ko.default,{onPress:function(){r("")},accessibilityElementsHidden:!1,children:Object(Wn.jsx)(M.default,{accessibilityLabel:"Exploration Log - Exploration",accessibilityRole:"tab",style:[Js.accessibilityHidden,{left:2}]})}),Object(Wn.jsx)(Ps,{callback:v}),Object(Wn.jsx)(ko.default,{onPress:function(){r("Inventory"!=n?"Inventory":"")},accessibilityLabel:"Items - Exploration",accessibilityRole:"tab",children:Object(Wn.jsx)(M.default,{style:[Js.tab,{backgroundColor:i.theme.colors.grey5},"Inventory"==n&&Js.selectedTab],children:Object(Wn.jsx)(zn,{h3:!0,children:"Items"})})}),Object(Wn.jsx)(ko.default,{onPress:function(){r("Spells"!=n?"Spells":"")},accessibilityLabel:"Spells - Exploration",accessibilityRole:"tab",children:Object(Wn.jsx)(M.default,{style:[Js.tab,{backgroundColor:i.theme.colors.grey5},"Spells"==n&&Js.selectedTab],children:Object(Wn.jsx)(zn,{h3:!0,children:"Spells"})})}),Object(Wn.jsx)(ko.default,{onPress:function(){r("Loadouts"!=n?"Loadouts":"")},accessibilityLabel:"Loadouts - Exploration",accessibilityRole:"tab",children:Object(Wn.jsx)(M.default,{style:[Js.tab,{backgroundColor:i.theme.colors.grey5},"Loadouts"==n&&Js.selectedTab],children:Object(Wn.jsx)(zn,{h3:!0,children:"Loadouts"})})}),Object(Wn.jsx)(ko.default,{onPress:function(){r("Quickbar"!=n?"Quickbar":"")},accessibilityLabel:"Quickbar - Exploration",accessibilityRole:"tab",children:Object(Wn.jsx)(M.default,{style:[Js.tab,{backgroundColor:i.theme.colors.grey5},"Quickbar"==n&&Js.selectedTab],children:Object(Wn.jsx)(zn,{h3:!0,children:"Quickbar"})})})]})]})}),[n,r,i,a,m,p,y])}var Js=C.default.create({mainComponent:{padding:8,marginHorizontal:2,borderWidth:.5},mainScrollView:{height:296},quickbarScrollView:{height:226,overflow:"hidden"},tabsContainer:{marginHorizontal:8,marginBottom:8,flexDirection:"row",alignItems:"flex-end",justifyContent:"space-evenly"},tab:{borderWidth:.5,borderRadius:8,padding:8,top:-1,cursor:"pointer"},selectedTab:{borderTopLeftRadius:0,borderTopRightRadius:0,borderTopWidth:0,paddingTop:16,position:"relative"},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0}});function zs(){var e=Object(o.useContext)(re),t=(Ze(e)-eu(e))/Ou(e);return Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(Ku,{progress:t,useNativeDriver:!0})})}function Zs(){var e=Object(o.useContext)(re),t=nu(e)==H.Combat,n=0;return t&&(n=function(e){var t;return(null==(t=e.exploration)?void 0:t.playerActionProgress)||0}(e)),Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Xs.row,children:[Object(Wn.jsx)(fr,{icon:"attack",style:Xs.icon}),Object(Wn.jsx)(Ku,{progress:n,useNativeDriver:!e.global.doNotUseNativeDriver,width:120},e.global.doNotUseNativeDriver?"yes":"no")]})}),[n,e.global.doNotUseNativeDriver])}var Xs=C.default.create({icon:{marginRight:4},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}});function qs(){var e=Object(o.useContext)(re),t=iu(e),n=ga(e);return Object(Wn.jsx)(Gl,{empty:!1,current:t,max:n,actionTarget:io.Player})}function Ks(){var e,t=Object(o.useContext)(re),n=(null==(e=t)?void 0:e.explorationMessageLog)||[];return Object(o.useMemo)((function(){return Object(Wn.jsx)(w.default,{children:n.map((function(e){var t,n,r,o=null!=(t=null==e?void 0:e.id)?t:e;return Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(pr,{accessibilityLabel:null!=(n=null==e?void 0:e.accessibleMessage)?n:null==e?void 0:e.message,children:null!=(r=null==e?void 0:e.message)?r:e})},o)}))})}),[n.map((function(e){var t;return null!=(t=null==e?void 0:e.id)?t:e})).join()])}function $s(){var e=Object(o.useContext)(re),t=Xa,n=function(e){var t;return(null==(t=e.exploration)?void 0:t.summonActionProgress)||0}(e);return Object(o.useMemo)((function(){return t?Object(Wn.jsxs)(M.default,{style:ef.row,children:[Object(Wn.jsx)(fr,{icon:"attack",style:ef.icon}),Object(Wn.jsxs)(M.default,{style:ef.progressBarContainer,children:[Object(Wn.jsx)(R.Text,{numberOfLines:1,style:ef.markdownContainer,children:t.name}),Object(Wn.jsx)(Ku,{progress:n,useNativeDriver:!e.global.doNotUseNativeDriver,width:120},e.global.doNotUseNativeDriver?"yes":"no")]})]}):Object(Wn.jsxs)(M.default,{style:ef.row,children:[Object(Wn.jsx)(fr,{icon:"attack",style:ef.icon}),Object(Wn.jsxs)(M.default,{style:ef.progressBarContainer,children:[Object(Wn.jsx)(R.Text,{style:ef.idleTextContainer,children:"-"}),Object(Wn.jsx)(Ku,{progress:0,useNativeDriver:!e.global.doNotUseNativeDriver,width:120},e.global.doNotUseNativeDriver?"yes":"no")]})]})}),[null==t?void 0:t.name,n,e.global.doNotUseNativeDriver])}var ef=C.default.create({row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:156},icon:{marginRight:4},progressBarContainer:{flex:1,height:32},idleTextContainer:{height:18},markdownContainer:{minHeight:18}});function tf(){var e,t,n,r=Object(o.useContext)(re),i=(null==(e=r.exploration)||null==(t=e.currentSummon)?void 0:t.currentHP)||0,a=(null==(n=za(r))?void 0:n.getMaxHP(r))||1;return Object(Wn.jsx)(Gl,{empty:!1,current:i,max:a,actionTarget:io.Summon})}function nf(e){var t=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:[rf.tile,{borderColor:t.theme.colors.grey5}],children:e.sprite&&Object(Wn.jsx)(R.Image,{resizeMode:"contain",source:ur(e.sprite),style:rf.image})})}),[e.sprite,t])}var rf=C.default.create({tile:{borderWidth:1,height:48,width:48,justifyContent:"center",alignItems:"stretch"},image:{height:46,width:46}});var of=i.a.memo((function(e){var t=Lr(e.resource),n=e.current>=e.cap-1e-6,r=Object(R.useTheme)();return Object(Wn.jsxs)(M.default,{style:uf.item,accessible:!0,children:[Object(Wn.jsx)(fr,{icon:t.icon,style:uf.icon,small:!0}),Object(Wn.jsxs)(zn,{style:n&&{color:r.theme.colors.cappedResource},doNotScaleFonts:!0,children:[Mn(e.current,{showDecimals:!0}),"/",Mn(e.cap)]})]})}));function af(e){var t=Object(o.useContext)(re),n=Yr(t).filter((function(e){return e!==Nr.Mana})),r=Object(o.useMemo)((function(){return n.map((function(e){var n=t.resources[e];return Object(Wn.jsx)(of,{resource:e,current:n.current,cap:n.cap},e)}))}),[!1!==e.isVisible&&t]);return Object(Wn.jsx)(M.default,{style:uf.container,children:r})}var uf=C.default.create({container:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},item:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",width:106},inlineRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},icon:{marginRight:2}});function cf(e){var t=e.floor,n=Object(o.useContext)(re),r=t.canFightBoss(n)&&null!=t.getBoss(n),i=wa(n,t),a=Object(R.useTheme)();return Object(Wn.jsx)(M.default,{children:Object(Wn.jsxs)(M.default,{style:hf.noneRow,children:[Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(zn,{style:hf.noneFloorText,children:t.getFloorName()}),Object(Wn.jsxs)(M.default,{style:hf.noneStatusRow,children:[Object(Wn.jsx)(zn,{children:"Status: "}),r?Object(Wn.jsx)(g.default,{name:"check",size:24,style:hf.noneIcon,color:i?a.theme.colors.primary:a.theme.colors.black}):Object(Wn.jsx)(g.default,{name:"lock-open",size:24,style:hf.noneIcon,color:a.theme.colors.grey0}),Object(Wn.jsx)(zn,{children:i?"Completed":r?"Boss Unlocked":"Open for Exploration"})]})]}),Object(Wn.jsx)(ji,{title:"Explore",onPress:function(){return n.apply((function(e){return qa(e,t)}))}})]})})}function lf(e){var t=Object(o.useContext)(re);return Object(Wn.jsx)(Yi,{title:e.dungeon.getName(),children:Object(Wn.jsx)(M.default,{style:hf.noneDungeonContentsContainer,children:e.dungeon.getDungeonFloors().filter((function(e){return e.isUnlocked(t)})).map((function(e){return Object(Wn.jsx)(cf,{floor:e},e.getId())}))})})}function sf(){var e=xa(Object(o.useContext)(re));return Object(Wn.jsxs)(w.default,{style:hf.container,contentContainerStyle:hf.noneContent,children:[Object(Wn.jsx)(M.default,{style:hf.topRow,children:Object(Wn.jsx)(zn,{h2:!0,children:"Exploration"})}),Object(Wn.jsx)(zn,{children:"Select a destination."}),e.map((function(e){return Object(Wn.jsx)(lf,{dungeon:e},e.getId())}))]})}function ff(){var e,t,n=Object(o.useContext)(re),r=Object(o.useRef)(n);r.current=n;var i=nu(n),a=tu(n),u=a.getFloorName(),c=i==H.Combat&&Wa(n).getPicture(n),l=a.getExplorationSuccessesForBoss(n)-vu(n,a.getId()),s=i==H.Combat&&Wa(n).getName(),d=vu(n,a.getId())>=a.getExplorationSuccessesForBoss(n),h=null!=a.getBoss(n),m=a.canFightBoss(n),A=null==(e=a.getNextFloor())?void 0:e.isUnlocked(n),y=i==H.Combat&&Wa(n).isBoss(),p=ce(n,"exploration_paused"),b=Object(o.useCallback)((function(){r.current.apply((function(e){return ce(e,"exploration_paused")?function(e){return(e=he("exploration_paused")(e)).exploration.explorationStartTime=Ze(e),e}(e):function(e){return e=fe("exploration_paused")(e)}(e)}))}),[]),j=Object(o.useMemo)((function(){return Object(Wn.jsx)(ji,{containerStyle:hf.pauseExplorationButton,titleStyle:hf.smallButtonTitle,title:p?"Resume Exploration":"Pause Exploration",onPress:b})}),[p,b]),O=Object(o.useMemo)((function(){var e=null;return i==H.Combat?e=Object(Wn.jsxs)(w.default,{centerContent:!1,style:hf.explorationStatusContainer,children:[Object(Wn.jsx)(zn,{h3:!0,children:s}),Object(Wn.jsx)(Wl,{}),Object(Wn.jsx)(Vl,{}),Object(Wn.jsx)(Ys,{isEnemy:!0,accessibilityHeader:"Enemy Buffs"})]}):i==H.Exploring?e=Object(Wn.jsxs)(M.default,{style:hf.explorationStatusContainer,children:[Object(Wn.jsx)(zn,{h3:!0,children:"Exploring..."}),Object(Wn.jsx)(zs,{}),j]}):i==H.ExploringBoss?e=Object(Wn.jsxs)(M.default,{style:hf.explorationStatusContainer,children:[Object(Wn.jsx)(zn,{h3:!0,children:"Preparing for Boss..."}),Object(Wn.jsx)(zs,{}),j]}):i==H.Reviving&&(e=Object(Wn.jsxs)(M.default,{style:hf.explorationStatusContainer,children:[Object(Wn.jsx)(zn,{h3:!0,children:"Recovering..."}),Object(Wn.jsx)(v.default,{})]})),e}),[i,s,j]),k=Ga(n),x=k&&(null==(t=za(n))?void 0:t.getPicture()),C=wa(n,a),S=Object(R.useTheme)().theme,B=i==H.Combat&&Wa(n).getBackdropColor(),T=Object(o.useContext)(Yl),D=Object(o.useContext)(Mi);Object(o.useEffect)((function(){return r.current.apply(he("combat_paused_magic_tap")),function(){return r.current.apply(he("combat_paused_magic_tap"))}}),[D]);var P=Object(o.useContext)(Ui),I=P.getUIState("current_event_occurrence_id"),_=P.getUIState("exploration_bottom_component_tab");Object(o.useEffect)((function(){D&&null==I&&(i===H.Exploring&&T.announceForAccessibility("Exploring"),i===H.ExploringBoss&&T.announceForAccessibility("Preparing for boss"),i===H.Combat&&T.announceForAccessibility("Fighting "+s),i===H.Reviving&&T.announceForAccessibility("You were defeated. Recovering from injuries..."))}),[i,T,D,I]);var N=Object(o.useState)(""),F=f()(N,2),L=F[0],Y=F[1],V=Object(o.useCallback)((function(e){if(D){var t=r.current;if(e.shiftKey&&e.ctrlKey&&"Z"==e.key){var n=nu(t)==H.Combat,o=Ga(t);if("player"===L&&o){var i,a,u=au(t),c=null!=(i=null==(a=za(t))?void 0:a.getMaxHP(t))?i:0;T.announceForAccessibility("Summon HP: "+Mn(Math.ceil(u),{showDecimals:!1})+"/"+Mn(Math.ceil(c),{showDecimals:!1})),Y("summon")}else if(("player"===L||o&&"summon"===L)&&n){var l=uu(t),s=Wa(t).getMaxHP(t);T.announceForAccessibility("Enemy HP: "+Mn(Math.ceil(l),{showDecimals:!1})+"/"+Mn(Math.ceil(s),{showDecimals:!1})),Y("enemy")}else T.announceForAccessibility("Player HP: "+Mn(Math.ceil(iu(t)),{showDecimals:!1})+"/"+Mn(Math.ceil(ga(t)),{showDecimals:!1})),Y("player")}}}),[D,L]),U=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(M.default,{style:[hf.row,hf.enemyContainer],children:[Object(Wn.jsx)(Tu,{sprite:c,backdropColor:B}),O]}),Object(Wn.jsx)(Fi,{}),Object(Wn.jsxs)(M.default,{style:[hf.row,hf.playerContainer],children:[Object(Wn.jsx)(M.default,{style:{flex:1,marginRight:4},children:Object(Wn.jsx)(qs,{})}),Object(Wn.jsx)(Zs,{})]}),k&&Object(Wn.jsxs)(M.default,{style:[hf.row,hf.summonContainer],children:[Object(Wn.jsx)(nf,{sprite:x}),Object(Wn.jsx)(M.default,{style:{flex:1,marginLeft:4,marginRight:4},children:Object(Wn.jsx)(tf,{})}),Object(Wn.jsx)($s,{})]}),Object(Wn.jsxs)(M.default,{style:[hf.row,hf.runAway],children:[Object(Wn.jsxs)(M.default,{style:[hf.row,hf.unlockBossContainer],children:[d&&Object(Wn.jsx)(g.default,{name:"check",size:24,style:hf.checkmark,color:C?S.colors.primary:S.colors.black}),Object(Wn.jsx)(M.default,{style:hf.unlockBossTextContainer,children:Object(Wn.jsx)(zn,{doNotScaleFonts:!0,umberOfLines:2,children:C?"Floor complete!":m?"Boss unlocked":h?"To unlock boss: "+l:""})})]}),Object(Wn.jsxs)(M.default,{style:hf.row,children:[Object(Wn.jsx)(ji,{containerStyle:hf.exitButtonContainer,title:"Exit",titleStyle:hf.smallButtonTitle,onPress:function(){return r.current.apply(ju)}}),Object(Wn.jsx)(ji,{containerStyle:hf.exitButtonContainer,title:"Next Floor",titleStyle:hf.smallButtonTitle,onPress:function(){return r.current.apply((function(e){return qa(e,tu(e).getNextFloor())}))},disabled:!A}),Object(Wn.jsx)(ji,{title:"Fight Boss",titleStyle:hf.smallButtonTitle,onPress:function(){return r.current.apply($a)},disabled:!m||y})]})]})]})}),[c,O,l,d,m,y,h,r,$a,ju,A,k,x,C,B,S]),Q=Object(E.default)(),G=Q.height,W=Q.width;return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:hf.wholeContainer,children:[Object(Wn.jsxs)(M.default,{style:hf.container,children:[Object(Wn.jsx)(M.default,{style:[hf.topRow],children:Object(Wn.jsxs)(zn,{h2:!0,children:["Exploration - ",u]})}),Object(Wn.jsxs)(M.default,{style:hf.restOfScreen,children:[U,Object(Wn.jsxs)(M.default,{style:hf.playerMessageLogContainer,children:[""==_&&Object(Wn.jsx)(M.default,{style:hf.accessibilityHidden,accessible:!0,accessibilityLabel:"Exploration Log Tab",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(Ks,{})]}),W<640&&G>640&&Object(Wn.jsx)(af,{})]})]}),Object(Wn.jsx)(M.default,{style:hf.bottomComponentContainer,children:Object(Wn.jsx)(Ws,{})}),Object(Wn.jsx)(Ps,{callback:V})]})}),[r,_,ju,u,U,S,V,W,G])}function df(){return nu(Object(o.useContext)(re))==H.None?Object(Wn.jsx)(sf,{}):Object(Wn.jsx)(ff,{})}var hf=C.default.create({wholeContainer:{flex:1},container:{flex:1,padding:8},topRow:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginBottom:16,height:40},arrowBack:{marginRight:8},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},checkmark:{marginRight:8},enemyContainer:{marginBottom:8},playerContainer:{marginTop:8},summonContainer:{marginTop:8},playerMessageLogContainer:{flex:1,padding:8,borderColor:"#444",borderWidth:1,marginTop:8},moveRow:{marginTop:8},exitButtonContainer:{marginRight:4},explorationStatusContainer:{flex:1,maxHeight:210},restOfScreen:{flex:1,justifyContent:"space-between",marginBottom:48},bottomComponentContainer:{position:"absolute",left:0,bottom:0,width:"100%"},dungeonButton:{marginTop:8},gradient:{left:0,top:0,width:"100%",height:"60%",position:"absolute",opacity:.3},noneContent:{paddingBottom:32},noneDungeonContentsContainer:{marginTop:8},noneRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:4},noneStatusRow:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},noneFloorText:{fontWeight:"bold"},noneIcon:{marginHorizontal:4},smallButtonTitle:{fontSize:12},runAway:{marginTop:4},unlockBossContainer:{flex:1,justifyContent:"flex-start"},unlockBossTextContainer:{flex:1},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0},pauseExplorationButton:{marginTop:16,alignSelf:"flex-start"}});function gf(e){var t;return(null!=(t=null==e?void 0:e.globalTimestampRead)?t:0)>e.globalTimestampTriggered}function mf(e,t,n){return e.global.notifications.find((function(e){return e.group==t&&e.item==n}))}function Af(e,t){return function(e,t){return e.global.notifications.filter((function(e){return e.group==t}))}(e,t).filter((function(e){return!gf(e)}))}var yf=new _e;function pf(e){return yf.getAll().filter((function(t){return t.isVisible(e)})).sort((function(e,t){return e.order-t.order}))}var vf=void 0;function bf(e){var t=e.help,n=t.title,r=t.description,i=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:jf.descriptionTextContainer,children:Object(Wn.jsx)(pr,{style:jf.descriptionViewer,children:r})})}),[r]),a=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:jf.helpContainer,children:[Object(Wn.jsx)(ko.default,{accessibilityRole:"button",accessibilityHint:"Expand",onPress:e.onPressExpand,children:Object(Wn.jsxs)(M.default,{style:jf.topRowContainer,children:[Object(Wn.jsxs)(M.default,{style:jf.topContainer,children:[Object(Wn.jsx)(zn,{h3:!0,children:n},n),e.showBadge&&Object(Wn.jsx)(M.default,{style:jf.badgeContainer,children:Object(Wn.jsx)(R.Badge,{status:"error"})})]}),Object(Wn.jsx)(M.default,{style:jf.expandContainer,children:Object(Wn.jsx)(Oo.default,{name:e.collapsed?"chevron-right":"chevron-down",size:24,color:a.theme.colors.black})})]})}),!e.collapsed&&Object(Wn.jsx)(M.default,{children:i})]},n)}),[a,n,!e.collapsed&&i,e.collapsed,e.onPressExpand,e.showBadge])}Te("HelpNotifier",(function(e){var t,n;if(null!=vf){var r=null!=(t=null==(n=vf)?void 0:n.split(","))?t:[],o=pf(e),i=function(e){if(!r.includes(e.order.toString()))return{v:function(t){return function(e,t,n){var r=mf(e,t,n);return r?(r.globalTimestampTriggered=ze(e),e):(e.global.notifications.push({id:Math.random().toString(),group:t,item:n,globalTimestampTriggered:ze(e),globalTimestampRead:void 0}),e)}(t,"Help",e.title)}}};for(var a of o){var u=i(a);if("object"===typeof u)return u.v}}}),(function(e,t){return vf=t,pf(e).map((function(e){return e.order.toString()})).join(",")}));var jf=C.default.create({helpContainer:{marginVertical:8},topRowContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},expandContainer:{width:40},descriptionTextContainer:{marginBottom:8,marginTop:8,marginHorizontal:8,flex:1,flexDirection:"row",flexWrap:"wrap"},descriptionViewer:{flex:1,justifyContent:"center"},topContainer:{flex:1,marginLeft:8,flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},disabledStorylineText:{color:"#aaa"},badgeContainer:{marginLeft:8}});function Of(){var e=Object(o.useState)(""),t=f()(e,2),n=t[0],r=t[1],a=Object(o.useCallback)((function(e){r(n==e?"":e)}),[n]),u=Object(o.useContext)(re),c=i.a.useRef(u);c.current=u,Object(o.useEffect)((function(){""!=n&&c.current.apply((function(e){return function(e,t,n){var r=mf(e,t,n);return r&&(gf(r)||(r.globalTimestampRead=ze(e))),e}(e,"Help",n)}))}),[n]);var l=pf(u),s=l.map((function(e){return e.title})).join(","),d=Af(u,"Help").map((function(e){return e.item})),h=Object(o.useMemo)((function(){return l.map((function(e){return Object(Wn.jsx)(bf,{help:e,showBadge:d.includes(e.title),collapsed:n!=e.title,onPressExpand:a.bind(null,e.title)},e.title)}))}),[s,n,r,d.join()]);return Object(o.useMemo)((function(){return 0===l.length?null:Object(Wn.jsxs)(M.default,{children:[h.map((function(e,t){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(Fi,{}),e]},l[t].title)})),Object(Wn.jsx)(Fi,{})]})}),[s,h])}function kf(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{style:xf.headerContainer,children:Object(Wn.jsx)(zn,{h1:!0,children:"Help"})}),Object(Wn.jsx)(zn,{children:"Learn how to play the game!"}),Object(Wn.jsx)(M.default,{style:xf.helpContainer,children:Object(Wn.jsx)(Of,{})})]})}var xf=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},headerContainer:{marginBottom:16},valueText:{minWidth:60,textAlign:"right",marginLeft:8},valueTextLong:{minWidth:112},helpContainer:{marginTop:16},captionText:{flex:1}});function wf(){var e=Object(o.useContext)(re),t=Object(o.useRef)(e),n=Object(o.useState)(""),r=f()(n,2),i=r[0],a=r[1],c=Object(o.useState)(""),l=f()(c,2),s=l[0],d=l[1],h=Object(o.useCallback)(function(){var e=u()((function*(e){try{var n,r=Q.isDemo();if(r&&e.global.isFullVersionSave)return void a("Failed to load save. This save data belongs to the full version of the game, and cannot be used in the demo version.");var o=z()||1/0,i=function(e,t,n){var r=e.split("."),o=t.split(".");try{for(var i in r){var a,u;if(null!=n&&Number.parseInt(i)>=n)break;var c=Number.parseInt(null!=(a=null==r?void 0:r[i])?a:"0"),l=Number.parseInt(null!=(u=null==o?void 0:o[i])?u:"0");if(c-l!=0)return c-l}}catch(s){return 0}return 0}(null!=(n=Z())?n:"99.99.99",e.global.appVersionString,2);if(!r&&e.global.isFullVersionSave&&(o<e.global.appVersionTimestamp-2592e6||i<0))return void a("Failed to load save. This save data was made with a more recent version of the game. Please update your game and try again. If no update is available, please try restarting the game or your device several times and loading the save again.");var u=On(e),c=Math.max(Math.min(172800,(Date.now()-u.lastProcessedTime)/1e3),0);u.skipAheadTime=c,t.current.overwrite((function(e){return u})),yield bn(u),a("Load successful!")}catch(l){a("Failed to load save because of an unexpected error! Is the data valid?")}}));return function(t){return e.apply(this,arguments)}}(),[]),g=Object(o.useCallback)(u()((function*(){if(""!==s)try{var e=yield kn(s);null!=e?yield h(e):a("Failed to load save. Make sure you have copied the full text!")}catch(t){a("Failed to load save. Make sure you have copied the full text!")}else a("Please paste your save in the text field above this message first!")})),[s,h]);Object(o.useEffect)((function(){return a("")}),[s]);var m=Object(R.useTheme)();Object(o.useCallback)(u()((function*(){try{var e=yield function(){return pc.apply(this,arguments)}();"error"===e.result&&a("There was an error reading from the file. Is it a valid Magic Research save?"+e.error),"success"===e.result&&(yield h(e.data))}catch(t){a("There was an error reading from the file. Is it a valid Magic Research save?")}})),[h]);return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(R.Input,{multiline:!0,onChangeText:d,value:s,inputContainerStyle:Cf.inputContainer,containerStyle:Cf.loadInputContainer}),""!=i&&Object(Wn.jsx)(M.default,{style:Cf.loadMessageContainer,children:Object(Wn.jsx)(zn,{style:{color:m.theme.colors.error},children:i})}),Object(Wn.jsx)(R.Button,{onPress:g,title:"Import savefile"})]})}var Cf=C.default.create({inputContainer:{borderWidth:1,marginTop:16,maxHeight:48},loadInputContainer:{maxHeight:80},loadMessageContainer:{marginBottom:8},importByFileContainer:{marginTop:8}});function Sf(){var e,t,n,r,i,a=Object(o.useContext)(re),u=Object(o.useState)(null),c=f()(u,2),s=c[0],d=c[1],h=Object(o.useState)(null),g=f()(h,2),m=g[0],A=g[1],y=Object(o.useState)(null),p=f()(y,2),v=p[0],b=p[1],j=Gt(a),O=Vt(a),x=null!=s?Jt(a,j[s]):0,w=0===(null!=(e=null==a||null==(t=a.global)?void 0:t.totalTimesResetted)?e:0)&&0===(null!=(n=null==a||null==(r=a.global)?void 0:r.newGamePlusCount)?n:0),S=!Q.isDemo()&&w,E="Please choose a primary school of magic. "+(w?"**If it's your first time playing, choosing Conjuration is recommended.**":""),B=Object(R.useTheme)(),T=ve(a,"challenges_unlocked"),D=ve(i=a,"challenges_unlocked")?wl.getAll().filter((function(e){return e.isVisible(i)})):[],P=null!=v&&v>0?D[v-1]:null,I=null!=P?P.getDescription(a)+"\n  \nEffect: **"+P.getEffect(a)+"**"+(P.isDarknessAllowed(a)?"":"; *You may not select Darkness as your primary element!*")+"\n\nGoal: "+P.getObjective(a)+"\n\nReward: "+(P.isCompleted(a)?P.getReward(a):"???")+(P.isCompleted(a)?"\n        \n**You have already completed this Challenge!**":""):"You are not selecting any Challenge. Your next run will not have any special effects.",_=null!=P&&!P.isDarknessAllowed(a)&&[O.indexOf(kt.Darkness)];return Object(o.useEffect)((function(){null==P||P.isDarknessAllowed(a)||m!=O.indexOf(kt.Darkness)||A(null)}),[P]),Object(Wn.jsx)(M.default,{style:Ef.container,children:Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(M.default,{style:Ef.topView,children:[Object(Wn.jsx)(zn,{h1:!0,children:"Welcome to Magic Research!"}),Object(Wn.jsx)(zn,{style:Ef.topViewText,children:"In Magic Research, you are the headmaster of a magical institution. What sort of adventures await you?"}),Object(Wn.jsx)(zn,{style:Ef.topViewText,children:"Before you begin, you will need to choose a primary school of magic and a primary element. While you may cast spells from any schools, it will be easier to learn new spells in your primary school. Your primary element selection may affect availability and effects of various spells, among other things. You will be able to change these (via retirement) later in the game."})]}),Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{accessibilityRole:"header",children:"Schools"}),Object(Wn.jsx)(pr,{children:E}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(R.ButtonGroup,{pressableProps:{accessibilityRole:"button"},buttonStyle:"dark"===B.theme.mode&&{borderColor:B.theme.colors.grey5,borderBottomWidth:C.default.hairlineWidth},containerStyle:[Ef.buttonGroupContainer,"dark"===B.theme.mode&&{backgroundColor:B.theme.colors.grey4,borderColor:B.theme.colors.grey5,borderBottomWidth:0}],textStyle:[Ef.buttonGroupText,"dark"===B.theme.mode&&{color:"#fff"}],vertical:!0,onPress:d,selectedIndex:s,buttons:j})}),Object(Wn.jsx)(M.default,{children:void 0!=s&&Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(pr,{children:{Conjuration:"You have selected **Conjuration**! Conjuration is the school that studies creating permanent or semi-permanent physical objects out of nothing. An example spell is *Create Pebble*. **This school is recommended for beginners.**",Enchantment:"You have selected **Enchantment**! Enchantment is the school that studies temporarily altering the physical properties of existing objects or creatures. An example spell is *Enchant Mana Spouts*.",Illusion:"You have selected **Illusion**! Illusion is the school that studies altering people's perception of reality. It's often one of the best ways to make money. An example spell is *Wind Show*.",Alchemy:"You have selected **Alchemy**! Alchemy is the school that studies transforming objects or materials into powerful potions, with various effects. There are also legends that it might be possible to create gold using alchemy.",Evocation:"You have selected **Evocation**! Evocation is the school that studies damaging combat spells, with the intention to cause harm or destroy. An example spell is *Mana Spike*.",Protection:"You have selected **Protection**! Protection is the school that studies spells that provide shielding from adverse effects, as well as mend them. An example spell is *Heal*.",Breeding:"You have selected **Breeding**! Breeding is the school that studies the ability to raise monsters to do your will, exploring and obtaining materials for you.",Summoning:"You have selected **Summoning**! Summoning is the school that studies invoking monsters out of thin air, to aid you in combat by enduring blows and attacking en enemy. An example spell is *Summon Mouse*.",Divination:"You have selected **Divination**! Divination is the school that studies learning the unknown by using magic, which can make you more effective. An example spell is *Minor Divination*."}[j[s]]}),x>0&&Object(Wn.jsxs)(zn,{style:Ef.mplText,children:["Your Maximum Primary Level (MPL) for this school is"," ",x,"."]})]})})]}),Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Elements"}),Object(Wn.jsx)(zn,{children:"Please choose a primary element."}),Object(Wn.jsx)(R.ButtonGroup,{pressableProps:{accessibilityRole:"button"},buttonStyle:"dark"===B.theme.mode&&{borderColor:B.theme.colors.grey5,borderBottomWidth:C.default.hairlineWidth},containerStyle:[Ef.buttonGroupContainer,"dark"===B.theme.mode&&{backgroundColor:B.theme.colors.grey4,borderColor:B.theme.colors.grey5,borderBottomWidth:0}],textStyle:[Ef.buttonGroupText,"dark"===B.theme.mode&&{color:"#fff"}],vertical:!0,onPress:A,selectedIndex:m,buttons:O,disabled:_}),Object(Wn.jsx)(M.default,{children:void 0!=m&&Object(Wn.jsx)(pr,{children:{Fire:"You have selected **Fire**! A basic element, it is often quite dangerous but powerful. Fire is key to creating higher temperatures.",Earth:"You have selected **Earth**! A basic element, one that we often deal with. Includes spells related to metals.",Water:"You have selected **Water**! A basic element, represents water in its various forms, including ice and snow.",Air:"You have selected **Air**! A basic element, it's all around us. It can be very useful when we want to move quicker.",Nature:"You have selected **Nature**! An element composed of plant life. Great for poisoning effects and gathering wood.",Lightning:"You have selected **Lightning**! An element that embodies a unique type of energy. Good for fast, high damage.",Darkness:"You have selected **Darkness**! A forbidden element, with extreme strength. **Warning: You are not sure if using this is a good idea, you have heard it is banned from the Tournament of Magic...**"}[O[m]]})})]}),T&&Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Challenges"}),Object(Wn.jsx)(zn,{children:"You can optionally select a challenge to make the game more difficult. Complete the challenge's objective for a permanent reward!"}),Object(Wn.jsx)(R.ButtonGroup,{pressableProps:{accessibilityRole:"button"},buttonStyle:"dark"===B.theme.mode&&{borderColor:B.theme.colors.grey5,borderBottomWidth:C.default.hairlineWidth},containerStyle:[Ef.buttonGroupContainer,"dark"===B.theme.mode&&{backgroundColor:B.theme.colors.grey4,borderColor:B.theme.colors.grey5,borderBottomWidth:0}],textStyle:[Ef.buttonGroupText,"dark"===B.theme.mode&&{color:"#fff"}],vertical:!0,onPress:b,selectedIndex:v,buttons:["No challenge"].concat(l()(D.map((function(e){return e.getName()+(e.isCompleted(a)?" (Completed)":"")}))))}),Object(Wn.jsx)(M.default,{children:null!=v&&Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(pr,{children:I})})})]}),Object(Wn.jsx)(ji,{containerStyle:Ef.startButton,title:"Start the Game!",disabled:void 0==s||void 0==m,onPress:function(){var e=j[s],t=O[m];a.apply((function(n){return n=Yt(e)(n),n=function(e){return Ft.bind(this,e)}(t)(n),null!=P&&(n.currentChallengeId=P.getId()),n.lastProcessedTime=Date.now(),n}))}}),S&&Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(pr,{children:"If you have save data from the demo version of the game, you may load it by pasting it here."}),"web"==k.default.OS&&Object(Wn.jsx)(zn,{style:{color:B.theme.colors.warning,fontWeight:"bold"},children:"If you played the Steam version of the Demo: your progress should be transferred automatically. If you have, and are seeing this message, close this window *first*, then close the Demo version, and then open the full game again, or your progress may not be saved."}),Object(Wn.jsx)(wf,{})]})]})})}var Ef=C.default.create({container:{flex:1,alignItems:"center",justifyContent:"flex-start",maxWidth:600},topView:{paddingHorizontal:16},topViewText:{marginTop:8},buttonGroupContainer:{marginVertical:16},buttonGroupText:{fontSize:14},startButton:{marginVertical:24},mplText:{marginTop:8}});function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bf=["Quest Item","Consumable","Hand","Body","Accessory","Equipment","Material"];function Tf(){var e,t=Object(o.useContext)(re),n=Object(o.useContext)(Ui),r=Object(o.useState)(null),a=f()(r,2),u=a[0],c=a[1],s=Qi(n,"CraftingTag","All"),d=f()(s,2),h=d[0],g=d[1],m=t.global.maxSchoolLevels,A=Object(o.useMemo)((function(){return ar(t)}),[JSON.stringify(m)]),y=new Set;A.forEach((function(e){e.getTags(t,e.getDefaultParams()).forEach((function(e){return y.add(e.tag)}))}));var p=Array.from(y).sort((function(e,t){return Bf.findIndex((function(t){return t==e}))-Bf.findIndex((function(e){return e==t}))}));Object(o.useEffect)((function(){p.includes(h)||g("All")}),[p.join(),h]),Object(o.useEffect)((function(){return c(null)}),[h]),Object(o.useRef)(u).current=u,Object(o.useEffect)((function(){return Te("CraftingComponent",(function(e){c(null)}),(function(e){return ar(e).map((function(e){return e.getId()})).join()})),function(){return De("CraftingComponent")}}),[]);var v=i.a.useCallback((function(e,t){c(t)}),[c]),b=Object(o.useMemo)((function(){return Object(Wn.jsx)(ca,{onValueChange:g,style:Df.picker,selectedValue:h,data:["All"].concat(l()(p)).map((function(e){return{label:e,value:e,key:e}}))})}),[g,h,JSON.stringify(p)]);A=A.filter((function(e){return"All"===h||e.getTags(t,e.getDefaultParams()).find((function(e){return e.tag==h}))})).sort((function(e,n){var r=p.findIndex((function(n){return e.getTags(t,e.getDefaultParams()).find((function(e){return e.tag==n}))})),o=p.findIndex((function(e){return n.getTags(t,n.getDefaultParams()).find((function(t){return t.tag==e}))}));return r!=o?r-o:Math.max.apply(Math,l()(Object.values(e.getCraftingSchoolLevelRequirements(t)).filter((function(e){return void 0!=e}))))-Math.max.apply(Math,l()(Object.values(n.getCraftingSchoolLevelRequirements(t)).filter((function(e){return void 0!=e}))))}));var j=Qi(n,"crafting_hide_locked",!1),O=f()(j,2),k=O[0],x=O[1],w=Object(o.useCallback)((function(){x(!k)}),[k,x]);Object(o.useEffect)((function(){return c(null)}),[k]);var C=A.map((function(e){return{itemId:e.getId(),amount:1,params:e.getDefaultParams(),disabled:!e.isCraftable(t)}})),S=JSON.stringify(C),E=Object(o.useMemo)((function(){return C.some((function(e){return e.disabled}))}),[S]),R=Object(o.useMemo)((function(){return k?C.filter((function(e){return!e.disabled})).map((function(e,t){return Rf(Rf({},e),{},{disableTooltip:t===u})})):C.map((function(e,t){return Rf(Rf({},e),{},{disableTooltip:t===u})}))}),[S,k,u]),B=JSON.stringify(R),T=null!=u?nr(null==(e=R[u])?void 0:e.itemId):void 0,D=Object(o.useMemo)((function(){return Object(Wn.jsx)(ds,{items:R,crafting:!0,onPressItem:v})}),[B,v]),P=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:Df.detailsContainer,children:T&&Object(Wn.jsx)(ls,{item:T})})}),[null==T?void 0:T.getId()]);return Object(Wn.jsxs)(M.default,{style:Df.container,children:[Object(Wn.jsxs)(M.default,{style:Df.row,children:[Object(Wn.jsx)(M.default,{style:Df.tagPickerContainer,children:b}),E&&Object(Wn.jsx)(ta,{title:"Hide locked",checked:k,onPress:w,textStyle:Df.checkboxText,containerStyle:Df.checkboxContainer})]}),D,P]})}var Df=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},detailsContainer:{marginTop:16,paddingHorizontal:8,paddingBottom:8},buttonGroupContainer:{flexDirection:"row",alignItems:"flex-start",height:void 0,flexWrap:"wrap",justifyContent:"flex-start",borderWidth:0},buttonGroupButtonContainer:{flex:1,height:40,borderWidth:1,borderColor:"#eee",margin:4},picker:{flex:1},tagPickerContainer:Rf({width:180,marginHorizontal:8},k.default.select({android:{backgroundColor:"#eee",borderRadius:10,default:{}}})),row:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",marginBottom:16},checkboxContainer:{marginLeft:0,padding:0},checkboxText:{fontWeight:"normal"}}),Pf=Co()((function(e,t,n,r,o){if(e){var i=r*o;return{description:"Sell all for "+Mn(i)+" Coins",isEnabled:!0,isActive:!1,transform:function(e){return e=to({itemId:t,params:n},1e10,e),Wr(Nr.Coins,i)(e)}}}return{description:"Discard all",isEnabled:!0,isActive:!1,transform:function(e){return to({itemId:t,params:n},1e10,e)}}}),{cacheKey:JSON.stringify}),If=function(){function e(){Y()(this,e),er(this)}return U()(e,[{key:"getTags",value:function(e,t){return[]}},{key:"getName",value:function(e){var t=this.getBaseName(e);return null!=(null==e?void 0:e.itemQuality)&&(null==e?void 0:e.itemQuality)>0?t+" +"+Mn(null==e?void 0:e.itemQuality):""+t}},{key:"getBaseItemEffects",value:function(){return{}}},{key:"isActive",value:function(e){return!1}},{key:"getItemEffects",value:function(e,t){var n=this.getBaseItemEffects(),r={};for(var o in n){var i,a=n[o];r[o]=Ce([this.getId()].concat(l()(this.getTags(e,t).map((function(e){return e.tag}))),l()(Object.keys(this.getCraftingSchoolLevelRequirements(e))),l()(null!=(i=a.tags)?i:[]),[Ee.ItemEffect]),e,a.value,{item:this,params:t})}return r}},{key:"getPrimaryAction",value:function(e,t){}},{key:"getSaleAction",value:function(e,t){return Pf(ce(e,"selling_unlocked"),this.getId(),t,this.getSalePrice(e,t),no({itemId:this.getId(),params:t},e))}},{key:"getQuickbarAction",value:function(e,t){var n=this;if(this.getPrimaryAction(e,t))return{description:"Add to Quickbar",isActive:!1,isEnabled:!Io(e,{type:"item",occurrence:{itemId:this.getId(),params:t}})&&!Po(e),transform:function(e){return function(e,t){return To(e,{type:"item",occurrence:t})}(e,{itemId:n.getId(),params:t})}}}},{key:"isCraftable",value:function(e){var t=this.getCraftingSchoolLevelRequirements(e);return 0!=Object.keys(t).length&&$t(e,t)}},{key:"hasCraftingMaterials",value:function(e){var t=this.getCraftingMaterials(e);for(var n in t.resources){var r,o=(null==(r=t.resources)?void 0:r[n])||0;if(Gr(e,n)<o)return!1}for(var i in t.items){var a=t.items[i];if(ro(tr(i),e)<a)return!1}return!0}},{key:"canCraft",value:function(e){return!!this.isCraftable(e)&&(!!this.hasCraftingMaterials(e)&&!!this.fitsInInventory(e))}},{key:"fitsInInventory",value:function(e,t,n){var r=qr(e).length,o=$r(e);if(r>o)return!1;if(!n){var i=this.getCraftingMaterials(e);for(var a in i.items){if(ro(tr(a),e)===i.items[a])return!0}}return r!==o||0!==no({itemId:this.getId(),params:null!=t?t:this.generateCraftedParams(e)},e)}},{key:"getCraftingSchoolLevelRequirements",value:function(e){return{}}},{key:"getCraftingMaterialsBase",value:function(e){return{resources:{},items:{}}}},{key:"getCraftingMaterials",value:function(e){var t=this.getCraftingMaterialsBase(e),n={},r={};for(var o in t.resources){var i,a=null!=(i=t.resources[o])?i:0;n[o]=Math.ceil(Ce([].concat(l()(this.getTags(e,{}).map((function(e){return e.tag}))),l()(Object.keys(this.getCraftingSchoolLevelRequirements(e))),[Ee.ItemCost]),e,a))}for(var u in t.items){var c,s=null!=(c=t.items[u])?c:0;r[u]=Math.ceil(Ce([].concat(l()(this.getTags(e,{}).map((function(e){return e.tag}))),l()(Object.keys(this.getCraftingSchoolLevelRequirements(e))),[Ee.ItemCost]),e,s))}return{resources:n,items:r}}},{key:"generateCraftedParams",value:function(e){var t=Ce([this.getId(),Ee.ItemQuality].concat(l()(this.getTags(e,{}).map((function(e){return e.tag}))),l()(Object.keys(this.getCraftingSchoolLevelRequirements(e)))),e,0,{item:this});return 0==t?{}:{itemQuality:t}}},{key:"getDefaultParams",value:function(){return{}}},{key:"craft",value:function(e){var t=this;if(!this.canCraft(e))return e;var n=this.getCraftingMaterials(e),r=this.generateCraftedParams(e),o=this.getCraftingSchoolLevelRequirements(e);for(var i in n.resources){var a,u=(null==(a=n.resources)?void 0:a[i])||0;e=Wr(i,-u)(e)}for(var c in n.items){var l=n.items[c];e=oo(tr(c),l,e)}return e=eo({itemId:this.getId(),params:r},1,e),Object.keys(o).forEach((function(n){var r;e=Zt(e,n,null!=(r=o[n])?r:0,t.getTags(e,{}).map((function(e){return e.tag})))})),e}}]),e}();function _f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ff=Co()((function(e,t,n,r){return{description:"Equip",isEnabled:e,transform:function(e){return e=fl(e,t,{itemId:n,params:r})}}}),{cacheKey:JSON.stringify}),Lf=function(e){No()(n,e);var t=Nf(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getTags",value:function(e,t){return[{tag:"Equipment"},{tag:this.getSlot()}]}},{key:"getPrimaryAction",value:function(e,t){return Ff(sl(e,this.getSlot(),{itemId:this.getId(),params:t}),this.getSlot(),this.getId(),t)}},{key:"generateCraftedParams",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_f(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({randomId:Math.random()},this.generateEquipmentCraftedParams())}},{key:"generateEquipmentCraftedParams",value:function(){return{}}},{key:"getAttackBonus",value:function(e,t){return 0}},{key:"getDefenseBonus",value:function(e,t){return 0}},{key:"getMaxHPBonus",value:function(e,t){return 0}},{key:"getHPRegenBonus",value:function(e,t){return 0}},{key:"getManaRegenBonus",value:function(e,t){return 0}},{key:"getMaxManaBonus",value:function(e,t){return 0}},{key:"getAttackDelayBonusPct",value:function(e,t){return 0}},{key:"getPlayerAccuracyBonusPct",value:function(e,t){return 0}},{key:"getPlayerDodgeBonusPct",value:function(e,t){return 0}},{key:"getPlayerCritChanceBonusPct",value:function(e,t){return 0}},{key:"getEffect",value:function(e,t){return this.getEffectBase(e,t)}},{key:"getEffectExtra",value:function(e,t){}},{key:"getEffectBase",value:function(e,t){var n={attack:this.getAttackBonus(e,t),defense:this.getDefenseBonus(e,t),maxHP:this.getMaxHPBonus(e,t),hpRegen:this.getHPRegenBonus(e,t),manaRegen:this.getManaRegenBonus(e,t),maxMana:this.getMaxManaBonus(e,t),attackDelay:this.getAttackDelayBonusPct(e,t),accuracy:this.getPlayerAccuracyBonusPct(e,t),dodge:this.getPlayerDodgeBonusPct(e,t),critChance:this.getPlayerCritChanceBonusPct(e,t)},r=Object.keys(n).map((function(e){var t=null==n?void 0:n[e];if(0==t)return null;var r="+";switch(t<0&&(r="-",t=Math.abs(t)),e){case"attack":case"defense":case"hpRegen":return r+Mn(t,{showDecimals:!0})+":"+e+":";case"manaRegen":return r+Mn(t)+":mana:/sec";case"maxHP":return r+Mn(t)+" Max:hp:";case"maxMana":return r+Mn(t)+" Max:mana:";case"attackDelay":case"accuracy":case"dodge":case"critChance":return r+Mn(t)+"%:"+e+":"}})),o=this.getEffectExtra(e,t);return r.push(o),r.filter((function(e){return null!=e})).join(", ")}}]),n}(If),Yf=function(e,t){[dl(e,il.Hand),dl(e,il.Body),dl(e,il.Accessory)].forEach((function(e){null!=e&&t(e)}))},Vf=function(e){return function(t){var n=0;return Yf(t,(function(r){var o=tr(r.itemId),i=e(t,o,r.params);0!=i&&(n+=i)})),n}},Uf=function(e){return function(t){var n=1;return Yf(t,(function(r){var o=tr(r.itemId),i=e(t,o,r.params);0!=i&&(n*=(100+i)/100)})),n}};function Qf(e){var t=Object(o.useContext)(re),n=e.slot,r=dl(t,n),i=function(e,t){return{description:"Unequip",isEnabled:ll(e,t),transform:gl(t)}}(t,n),a=Object(o.useRef)(t);a.current=t;var u=r&&tr(r.itemId);if(u&&!(u instanceof Lf))throw new Error("Only equippable items should be equipped");return Object(o.useMemo)((function(){return r?Object(Wn.jsxs)(M.default,{style:Hf.equipmentRow,children:[Object(Wn.jsxs)(M.default,{style:Hf.row,children:[Object(Wn.jsx)(ql,{icon:u.getId(),title:u.getName(r.params),onPress:e.onPressEquippedItem&&function(){return e.onPressEquippedItem&&e.onPressEquippedItem(n)},tooltip:Object(Wn.jsx)($l,{showTile:!1,itemStack:{itemOccurrence:r,amount:1}}),tooltipIdSuffix:"equip"}),Object(Wn.jsxs)(zn,{numberOfLines:2,style:Hf.labelStyle,h4:!0,children:[n,": ",u.getName(r.params)]})]}),Object(Wn.jsx)(ji,{title:i.description,disabled:!i.isEnabled,onPress:function(){return i.transform&&t.apply(i.transform)}})]},n):Object(Wn.jsxs)(M.default,{style:Hf.equipmentRow,children:[Object(Wn.jsxs)(M.default,{style:Hf.row,children:[Object(Wn.jsx)(ql,{title:"Empty"}),Object(Wn.jsxs)(zn,{numberOfLines:2,style:Hf.labelStyle,h4:!0,children:[n,": Empty"]})]}),Object(Wn.jsx)(ji,{title:i.description,disabled:!i.isEnabled,onPress:function(){return i.transform&&a.current.apply(i.transform)}})]},n)}),[JSON.stringify(r),n,i.description,i.isEnabled,i.transform,a,null==u?void 0:u.getName((null==r?void 0:r.params)||{}),e.onPressEquippedItem])}function Gf(e){var t=Object.keys(il).map((function(t){return Object(Wn.jsx)(Qf,{slot:t,onPressEquippedItem:e.onPressEquippedItem},t)}));return Object(Wn.jsx)(M.default,{children:t})}zr.register(new Jr("EquippableItem",(function(e){var t={};return Yf(e,(function(n){var r,o=tr(n.itemId).getManaRegenBonus(e,n.params);0!=o&&(t[Nr.Mana]=(null!=(r=null==t?void 0:t[Nr.Mana])?r:0)+o)})),t}))),xe([[io.Player,da.Attack]],"EquippableItemAttack",Oe.Addition,Vf((function(e,t,n){return t.getAttackBonus(e,n)}))),xe([[io.Player,da.Defense]],"EquippableItemDefense",Oe.Addition,Vf((function(e,t,n){return t.getDefenseBonus(e,n)}))),xe([[io.Player,da.MaxHP]],"EquippableItemMaxHP",Oe.Addition,Vf((function(e,t,n){return t.getMaxHPBonus(e,n)}))),xe([[io.Player,da.HPRegen]],"EquippableItemHPRegen",Oe.Addition,Vf((function(e,t,n){return t.getHPRegenBonus(e,n)}))),xe([[io.Player,da.AttackDelay]],"EquippableItemAttackDelay",Oe.Multiplier,Uf((function(e,t,n){return t.getAttackDelayBonusPct(e,n)}))),xe([[io.Player,da.Accuracy]],"EquippableItemAccuracy",Oe.Multiplier,Uf((function(e,t,n){return t.getPlayerAccuracyBonusPct(e,n)}))),xe([[io.Player,da.Dodge]],"EquippableItemDodge",Oe.Addition,Vf((function(e,t,n){return t.getPlayerDodgeBonusPct(e,n)/100}))),xe([[io.Player,da.CritChance]],"EquippableItemCritChance",Oe.Addition,Vf((function(e,t,n){return t.getPlayerCritChanceBonusPct(e,n)/100}))),xe([[Nr.Mana,Ee.Cap]],"EquippableItemManaCap",Oe.Addition,(function(e){var t=0;return Yf(e,(function(n){var r=tr(n.itemId).getMaxManaBonus(e,n.params);0!=r&&(t+=r)})),t})),Te("equippableItem_cap_listener",(function(e){return function(e){return Qr(e)}}),(function(e){return[il.Hand,il.Body,il.Accessory].map((function(t){var n,r;return null!=(n=null==(r=dl(e,t))?void 0:r.itemId)?n:"none"})).join()}));var Hf=C.default.create({equipmentRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},row:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flex:1},labelStyle:{marginHorizontal:8,flex:1}});function Wf(){var e=Object(o.useState)(!1),t=f()(e,2),n=t[0],r=t[1],i=Object(R.useTheme)(),a=Object(o.useContext)(re),u=Object(o.useRef)(a);u.current=a;var c=Object(o.useCallback)((function(){u.current.apply(lo)}),[]),l=Object(o.useCallback)((function(){return!!n&&(r(!1),!0)}),[n,r]);Object(o.useEffect)((function(){var e=j.default.addEventListener("hardwareBackPress",l);return function(){return e.remove()}}),[l]);var s=Object(o.useContext)(Mi);return Object(o.useEffect)((function(){s||r(!1)}),[s]),n?Object(Wn.jsxs)(M.default,{style:Jf.container,onAccessibilityEscape:l,children:[Object(Wn.jsxs)(M.default,{style:[Jf.topRow,Jf.row,Jf.fullBleedPadding],children:[Object(Wn.jsx)(g.default,{name:"arrow-back",accessibilityLabel:"Back to Inventory",color:i.theme.colors.black,size:24,style:Jf.arrowBack,onPress:function(){return r(!1)},hitSlop:{top:30,left:30,bottom:30,right:30}}),Object(Wn.jsx)(zn,{h2:!0,children:"Crafting"})]}),Object(Wn.jsx)(Tf,{})]}):Object(Wn.jsxs)(M.default,{style:Jf.container,children:[Object(Wn.jsxs)(M.default,{style:Jf.fullBleedPadding,children:[Object(Wn.jsxs)(M.default,{style:Jf.topRow,children:[Object(Wn.jsx)(zn,{h2:!0,children:"Inventory"}),Object(Wn.jsxs)(M.default,{style:Jf.topButtons,children:[Object(Wn.jsx)(ji,{title:"Sort Inventory",onPress:c,titleStyle:Jf.smallButtonTitle}),ir(a)&&Object(Wn.jsx)(ji,{title:"Craft Items",containerStyle:Jf.craftButton,onPress:function(){return r(!0)}})]})]}),Object(Wn.jsx)(M.default,{style:Jf.equippedItemsContainer,children:Object(Wn.jsx)(Gf,{})}),Object(Wn.jsx)(M.default,{style:Jf.equipmentSetButtonsRow,children:Object(Wn.jsx)(Is,{})})]}),Object(Wn.jsx)(gs,{isFullBleed:!0})]})}var Jf=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},topRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16,height:48},arrowBack:{marginRight:8},equippedItemsContainer:{marginBottom:8},row:{justifyContent:"flex-start"},topButtons:{flexDirection:"row",alignItems:"center"},craftButton:{marginLeft:16},fullBleedPadding:{paddingHorizontal:8,marginTop:8},equipmentSetButtonsRow:{marginBottom:16},smallButtonTitle:{fontSize:12}}),zf=n(70),Zf=n(104);function Xf(){return null}function qf(e){var t,n,r,i,a,u,c,l,s=e.theme,f=Object(o.useRef)(new b.default.Value(0)).current;return Object(o.useEffect)((function(){b.default.timing(f,{useNativeDriver:!0,toValue:400,duration:4e4,easing:zf.default.out(zf.default.poly(5))}).start()}),[]),Object(Wn.jsx)(T.SafeAreaProvider,{initialMetrics:D.initialWindowMetrics,children:Object(Wn.jsxs)(R.ThemeProvider,{theme:s,children:[Object(Wn.jsx)(Xf,{}),Object(Wn.jsx)(Zf.default,{translucent:!0,backgroundColor:"transparent",barStyle:"dark"===(null==s?void 0:s.mode)?"light-content":"dark-content"}),Object(Wn.jsx)(x.default,{style:[Kf.safeAreaContainer,{backgroundColor:"dark"===(null==s?void 0:s.mode)?null==s||null==(t=s.darkColors)?void 0:t.background:null==s||null==(n=s.lightColors)?void 0:n.background}],children:Object(Wn.jsxs)(M.default,{style:{alignItems:"center",width:"100%"},children:[Object(Wn.jsx)(v.default,{size:"large"}),"web"!=k.default.OS&&Object(Wn.jsx)(M.default,{style:{width:200,marginVertical:8,borderWidth:1,borderRadius:3,height:6,overflow:"hidden",borderColor:"dark"===(null==s?void 0:s.mode)?null==s||null==(r=s.darkColors)?void 0:r.primary:null==s||null==(i=s.lightColors)?void 0:i.primary},children:Object(Wn.jsx)(b.default.View,{style:{height:4,width:1,transform:[{scaleX:f}],backgroundColor:"dark"===(null==s?void 0:s.mode)?null==s||null==(a=s.darkColors)?void 0:a.primary:null==s||null==(u=s.lightColors)?void 0:u.primary}})}),Object(Wn.jsx)(R.Text,{style:{color:"dark"===(null==s?void 0:s.mode)?null==s||null==(c=s.darkColors)?void 0:c.black:null==s||null==(l=s.lightColors)?void 0:l.black},children:"Loading game. Please wait a moment..."})]})})]})})}var Kf=C.default.create({safeAreaContainer:{flex:1,justifyContent:"center"}});function $f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ed=i.a.createContext("Campus");function td(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$f(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),n=t.title,r=t.onPress,i=Object(R.useTheme)(),a=Object(o.useContext)(ed)==n;return Object(o.useMemo)((function(){return Object(Wn.jsx)(S.default,{onPress:r,accessible:!0,accessibilityLabel:n,accessibilityRole:"tab",children:Object(Wn.jsxs)(M.default,{style:[rd.itemContainerStyle,a?{backgroundColor:i.theme.colors.grey5}:null],children:[Object(Wn.jsxs)(M.default,{children:[e.showBadge&&Object(Wn.jsx)(R.Badge,{containerStyle:rd.notificationBadge,status:"error"}),Object(Wn.jsx)(fr,{icon:n.toLowerCase()})]}),Object(Wn.jsx)(zn,{doNotScaleFonts:!0,style:rd.itemStyle,children:n})]})})}),[n,r,a,i,e.showBadge])}function nd(e){var t=Object(o.useContext)(re),n=gi(t).filter((function(e){return!t.global.hiddenFromBottomMenu.includes(e)})),r=Object(o.useCallback)((function(t){e.onNavigationPress(t)}),[e.onNavigationPress]),i=Object(o.useMemo)((function(){return n}),[n.join()]),a=Object(o.useMemo)((function(){return i.map((function(e){return function(){return r(e)}}))}),[i,r]),u=i.filter((function(e){return Af(t,e).length>0})),c=Object(o.useCallback)((function(e){return Object(Wn.jsxs)(M.default,{style:{flexDirection:"row"},children:[0===e.index&&Object(Wn.jsx)(Fi,{orientation:"vertical"}),Object(Wn.jsx)(td,{title:e.item,showBadge:u.includes(e.item),onPress:a[e.index]}),Object(Wn.jsx)(Fi,{orientation:"vertical"})]})}),[a,r,u.join()]),l=Object(o.useCallback)((function(e){return e}),[]),s=Object(R.useTheme)(),d=Object(o.useState)(!1),h=f()(d,2),m=h[0],A=h[1],y=Object(o.useState)(!0),p=f()(y,2),v=p[0],b=p[1],j=Object(o.useCallback)((function(e){var t=e.nativeEvent.contentOffset.x,n=t<10,r=e.nativeEvent.contentSize.width-e.nativeEvent.layoutMeasurement.width-t<10;n!=v&&b(n),r!=m&&A(r)}),[m,v,A,b]),O=Object(o.useMemo)((function(){return[rd.scrollContentContainer,{backgroundColor:s.theme.colors.background}]}),[s]),x="web"===k.default.OS?function(){var e=Object(o.useRef)();return Object(o.useEffect)((function(){if("web"===k.default.OS){var t=e.current;if(t){var n=function(e){if(0!==e.deltaY){var n=t.getScrollableNode();0===n.scrollLeft&&e.deltaY<0||n.scrollWidth-n.clientWidth-Math.round(n.scrollLeft)===0&&e.deltaY>0||(e.preventDefault(),e.stopPropagation()),n.scrollBy({left:e.deltaY,behavior:"smooth"})}};return t.getScrollableNode().addEventListener("wheel",n),function(){var e;return null==(e=t.getScrollableNode())||null==e.removeEventListener?void 0:e.removeEventListener("wheel",n)}}}}),[]),e}():Object(o.useRef)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[rd.bottomMenuContainer,{backgroundColor:s.theme.colors.grey5}],children:[e.leftHanded&&e.showCastSpellButton&&Object(Wn.jsx)(M.default,{style:rd.spellButtonPlaceholder}),Object(Wn.jsx)(M.default,{style:[rd.chevron,v&&{opacity:0}],children:Object(Wn.jsx)(g.default,{name:"chevron-left",size:24,color:s.theme.colors.black})}),Object(Wn.jsx)(ed.Provider,{value:e.selected,children:Object(Wn.jsx)(Pc.default,{ref:x,data:i,renderItem:c,keyExtractor:l,horizontal:!0,snapToInterval:71,style:rd.scrollContainer,contentContainerStyle:O,scrollEventThrottle:100,onScroll:j,overScrollMode:"never",showsHorizontalScrollIndicator:!1,nestedScrollEnabled:!0})}),Object(Wn.jsx)(M.default,{style:[rd.chevron,m&&{opacity:0}],children:Object(Wn.jsx)(g.default,{name:"chevron-right",size:24,color:s.theme.colors.black})}),!e.leftHanded&&e.showCastSpellButton&&Object(Wn.jsx)(M.default,{style:rd.spellButtonPlaceholder})]})}),[i,c,s,v,m,O,j,e.selected,e.leftHanded,e.showCastSpellButton])}var rd=C.default.create({scrollContainer:{flex:1,height:48},scrollContentContainer:{paddingVertical:0,justifyContent:"center"},navigationBlock:{flexDirection:"row",alignItems:"stretch"},itemContainerStyle:{width:70,alignItems:"center",flex:1,justifyContent:"center"},itemStyle:{fontSize:10},gradient:{flex:1},spellButtonPlaceholder:{width:84,height:48},bottomMenuContainer:{flexDirection:"row",alignItems:"center"},spellMenuButtonPlaceholder:{height:48,justifyContent:"flex-end",alignItems:"flex-end",overflow:"visible"},chevron:{width:24,height:48,justifyContent:"center"},notificationBadge:{position:"absolute",top:4,right:4}}),od=["apply"],id=["apply"];function ad(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=Object(o.useState)(null),i=f()(r,2),a=i[0],c=i[1],l=Object(o.useState)(t.lastProcessedTime),s=f()(l,2),d=s[0],h=s[1],g=Object(o.useState)(Math.random()),m=f()(g,2),A=m[0],y=m[1],p=Object(o.useState)(!1),v=f()(p,2),b=v[0],j=v[1];if(null!=a)throw a;var O=Object(o.useCallback)(u()((function*(){var r=Date.now(),o=d;if(!b){if(n.current.warpTimeSecs>0){var i=n.current,a=(i.apply,qn()(i,od));j(!0),yield function(e,t,n,r){return Je.apply(this,arguments)}(a,(function(){return Date.now()}),e.onLoadingProgress,e.setPlayerState),r=Date.now(),j(!1),o=r}var u=(r-o)/1e3+n.current.skipAheadTime;if(u<0)y(Math.random());else{if(u>5){var c=Math.floor(Math.min(172800,u)),l=n.current,s=(l.apply,qn()(l,id));yield function(e,t,n,r){return We.apply(this,arguments)}(s,c,r,e.setPlayerState)}else n.current.apply((function(e){var n=u;do{var o,i,a=Math.min(1/(null!=(o=null==(i=t.global)?void 0:i.targetFps)?o:20),n);(e=Qe(a,!1)(e)).lastProcessedTime=r,n-=a}while(n>0);return e}));n.current.skipAheadTime>0&&n.current.apply((function(e){return e.skipAheadTime=0,e})),h(r)}}})),[d,b,A]),k=Object(o.useCallback)(u()((function*(){n.current.apply(_c)})),[]);return Object(o.useEffect)((function(){var e,n,r=setTimeout(u()((function*(){try{yield O()}catch(e){c(e)}})),1e3/(null!=(e=null==(n=t.global)?void 0:n.targetFps)?e:20));return function(){return clearTimeout(r)}}),[O]),Object(o.useEffect)((function(){var e=setInterval(u()((function*(){try{yield k()}catch(e){c(e)}})),3e3);return function(){return clearTimeout(e)}}),[k]),null}function ud(){var e,t,n=Object(o.useContext)(re),r=Gr(n,Nr.Mana),i=Ur(n,Nr.Mana),a=r/i,u=Object(o.useRef)(new b.default.Value(a)).current,c=Object(o.useRef)(new b.default.Value(a)).current,l=null!=(e=null==(t=Xr(n))?void 0:t.Mana)?e:0,s=0!=l?" ("+(l>0?"+":"")+Mn(l,{showDecimals:!0})+"/s)":"";return Object(o.useEffect)((function(){n.global.doNotUseNativeDriver?b.default.timing(c,{toValue:Math.max(a,1e-5),duration:100,useNativeDriver:!1}).start():b.default.timing(u,{toValue:Math.max(a,1e-5),duration:100,useNativeDriver:!0}).start()}),[a]),Object(Wn.jsxs)(M.default,{style:cd.container,children:[Object(Wn.jsx)(b.default.View,{style:[cd.filled,{transform:[{scaleX:n.global.doNotUseNativeDriver?c:u}]}]},n.global.doNotUseNativeDriver?"yes":"no"),Object(Wn.jsxs)(M.default,{style:cd.row,accessible:!0,accessibilityRole:"web"!==k.default.OS?"header":void 0,accessibilityLabel:"Mana: "+Mn(r)+"/"+Mn(i)+" "+s,children:[Object(Wn.jsx)(fr,{icon:"mana",style:cd.icon}),Object(Wn.jsxs)(zn,{style:cd.textOverlay,children:[Mn(r),"/",Mn(i),Object(Wn.jsx)(zn,{style:cd.income,children:s})]})]})]})}xe([[Ee.GameSpeed]],"CombatPausedMagicTap",Oe.Multiplier,(function(e){return ce(e,"combat_paused_magic_tap")?0:1}));var cd=C.default.create({container:{alignItems:"center",flexDirection:"row",justifyContent:"center",width:"100%",backgroundColor:"#014",height:29},filled:{backgroundColor:"#04c",position:"absolute",left:"-100%",top:0,height:"100%",width:"200%"},textOverlay:{color:"#fff",fontWeight:"bold"},income:{color:"#fff",fontWeight:"normal"},row:{flexDirection:"row",alignItems:"center"},icon:{height:16,width:16,marginRight:4},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0}}),ld=Dn("TimePieceEvent",Qn("TimePieceEvent","Offline Progress").setSimpleDescription("Welcome back to Magic Research!\n      \n**You obtained {amount}:timepiece: Time Pieces!**").build(),[],(function(e,t){return e})),sd=Dn("TimePieceEventFirstTime",Qn("TimePieceEventFirstTime","Offline Progress").setSimpleDescription("Welcome back to Magic Research!\n      \n**You obtained {amount}:timepiece: Time Pieces! Time Pieces allow you to make time pass faster for a duration. You can do so from the left side menu!**").build(),[],ye("has_seen_offline_progress")),fd=new Ne("TimePieceGranter",(function(e){return function(t){var n=Ce([Ee.OfflineTimePieceGain,Nr.TimePieces],t,e),r=Gr(t,Nr.TimePieces),o=Gr(t=Wr(Nr.TimePieces,n)(t),Nr.TimePieces)-r;if(o>0)if(ve(t,"has_seen_offline_progress")){var i=t.eventQueue.find((function(e){var n;return(null==(n=nt(t,e))?void 0:n.eventId)===ld.getId()}));if(null!=i){var a,u,c=nt(t,i),l=o+(null!=(a=null==c||null==(u=c.params)?void 0:u.rawAmount)?a:0);c.params.amount=Mn(l),c.params.rawAmount=l,t.eventOccurrences[i]=c}else o>60&&(t=lt(ld,{amount:Mn(o),rawAmount:o})(t))}else t=lt(sd,{amount:Mn(o),rawAmount:o})(t);return t}}));function dd(e){return ce(e,"time_piece_8x_speedup_enabled")?8:ce(e,"time_piece_speedup_enabled")?2:1}function hd(e){return ce(e,"time_piece_8x_speedup_enabled")?Ce([Ee.TimePiecePerFasterSpeedup],e,4):ce(e,"time_piece_speedup_enabled")?Ce([Ee.TimePiecePerFastSpeedup],e,3):0}xe([[Ee.GameSpeed]],"TimePieceGameSpeed",Oe.Multiplier,(function(e,t){return t.isWarp?1:dd(e)})),xe([[Ee.GameSpeed]],"Debug2xGameSpeed",Oe.Multiplier,(function(e,t){return!ce(e,"debug_2x_speed")||null!=t&&t.isWarp?1:2})),xe([[Ee.GameSpeed]],"Debug0xGameSpeed",Oe.Multiplier,(function(e,t){return!ce(e,"debug_0x_speed")||null!=t&&t.isWarp?1:0})),Ue("TimePieceConsumer",(function(e,t,n){if(!n){var r=function(e){var t=dd(e);return t>1?(t-1)*hd(e)/t:0}(e);r>0&&(e=Wr(Nr.TimePieces,-r*t)(e)),Gr(e,Nr.TimePieces)<=0&&(e=he("time_piece_8x_speedup_enabled")(e),e=he("time_piece_speedup_enabled")(e))}return e}));var gd=i.a.memo((function(e){return Object(Wn.jsxs)(M.default,{style:Ad.row,accessible:!0,children:[Object(Wn.jsxs)(zn,{doNotScaleFonts:!0,style:e.isPrimary&&Ad.primaryText,children:[e.name,": Lv",e.level]}),Object(Wn.jsxs)(zn,{doNotScaleFonts:!0,style:e.isPrimary&&Ad.primaryText,children:["Exp ",e.currentExp,"/",e.toNextLevel]})]})}));function md(e){var t=Object(o.useContext)(re),n=Gt(t),r=Object(o.useMemo)((function(){return n.map((function(e){var n=Pt(t,e),r=Ct(t,e),o=Tt(t,n+1,e);return Object(Wn.jsx)(gd,{name:e,level:n,isPrimary:t.primarySchool==e,currentExp:Mn(r),toNextLevel:Mn(o)},e)}))}),[!1!==e.isVisible&&JSON.stringify(t.schoolExperience),t.primarySchool]);return Object(Wn.jsx)(M.default,{style:Ad.container,children:r})}var Ad=C.default.create({container:{justifyContent:"center",alignItems:"stretch"},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},primaryText:{fontWeight:"bold"}});var yd=i.a.memo((function(e){var t=Lr(e.resource),n=e.current>=e.cap-1e-6,r=Object(R.useTheme)(),i=Object(o.useMemo)((function(){return!e.hideIncome&&Object(Wn.jsx)(M.default,{style:vd.income,children:0!=e.income&&Object(Wn.jsxs)(zn,{style:e.income<0&&{color:r.theme.colors.error},doNotScaleFonts:!0,children:[(e.income>0?"+":"-")+Mn(Math.abs(e.income),{showDecimals:!0}),"/s"]})})}),[e.income,e.hideIncome]),a=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:vd.inlineRow,children:[Object(Wn.jsx)(fr,{icon:t.icon,style:vd.icon,small:!0,accessibilityLabel:""}),Object(Wn.jsxs)(zn,{doNotScaleFonts:!0,children:[e.resource,": "]})]})}),[e.resource,t.icon]);return Object(Wn.jsxs)(M.default,{style:vd.row,accessible:!0,children:[a,Object(Wn.jsxs)(M.default,{style:vd.inlineRow,children:[Object(Wn.jsxs)(zn,{style:n&&{color:r.theme.colors.cappedResource},doNotScaleFonts:!0,children:[Mn(e.current,{showDecimals:!0}),"/",Mn(e.cap)]}),i]})]})}));function pd(e){var t=Object(o.useContext)(re),n=Yr(t),r=Xr(t),i=Object.keys(r).some((function(e){return 0!=r[e]})),a=Object(o.useMemo)((function(){return n.map((function(e){var n,o=t.resources[e];return Object(Wn.jsx)(yd,{resource:e,current:o.current,cap:o.cap,income:null!=(n=null==r?void 0:r[e])?n:0,hideIncome:!i},e)}))}),[!1!==e.isVisible&&t]);return Object(Wn.jsx)(M.default,{style:vd.container,children:a})}var vd=C.default.create({container:{justifyContent:"center",alignItems:"stretch"},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},inlineRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},icon:{marginRight:2},income:{width:65,marginLeft:8}}),bd=["title","onPress","topDivider","showBadge"];function jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kd=function(e){var t=e.title,n=e.onPress,r=e.topDivider,i=e.showBadge,a=qn()(e,bd),u=Object(R.useTheme)(),c=Object(o.useContext)(Mi),l=Object(o.useCallback)((function(t){c&&null!=e.hotkey&&(t.shiftKey||t.ctrlKey||t.key!=e.hotkey.toLowerCase()||n())}),[c,n]),s=Object(o.useMemo)((function(){return Object(Wn.jsx)(S.default,{accessibilityLabel:e.favorited?"Unpin Section":"Pin Section",onPress:e.onPressFavorite,children:Object(Wn.jsx)(ys.default,{name:e.favorited?"heart":"heart-outline",style:[Cd.expandContainer],color:u.theme.colors.black,size:24})})}),[e.favorited,e.onPressFavorite,u]);return Object(Wn.jsxs)(M.default,{children:[r&&Object(Wn.jsx)(Fi,{}),Object(Wn.jsx)(Ps,{callback:l}),Object(Wn.jsxs)(R.ListItem,Od(Od({containerStyle:Cd.navigationRowTitle,onPress:n,Component:k.default.select({android:Xo.default,default:S.default}),accessibilityLabel:t,accessibilityRole:"button",accessible:!0,focusable:!0},a),{},{children:[Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(fr,{focusable:!1,accessibilityHidden:!0,icon:t.toLowerCase()}),i&&Object(Wn.jsx)(R.Badge,{containerStyle:Cd.notificationBadge,status:"error"})]}),Object(Wn.jsx)(R.ListItem.Content,{focusable:!1,accessibilityHidden:!0,children:Object(Wn.jsxs)(R.ListItem.Title,{focusable:!1,accessibilityHidden:!0,children:[Object(Wn.jsx)(zn,{children:t}),"web"===k.default.OS&&e.hotkey&&Object(Wn.jsxs)(zn,{style:[Cd.hotkeyText,"light"==u.theme.mode&&{color:"#088"}],children:["  ","[",e.hotkey,"]"]})]})}),e.showFavoriteIcon&&s]})),Object(Wn.jsx)(Fi,{})]})};function xd(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t),r=ce(t,"research_unlocked"),i=ce(t,"autocast_unlocked"),a=or(t),u=ce(t,"exploration_unlocked"),c=Nt(t)>=1e4,l=ve(t,"newgameplus_unlocked"),s=ce(t,"upgrades_unlocked"),f=ce(t,"creatures_unlocked"),d=ve(t,"strengthening_unlocked")&&u,h=null!=oi(t),g=ve(t,"bestiary_unlocked"),m=mi(e.onSwipeLeft,e.onSwipeRight),A=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),y=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(m,A)}),[m,A]),p=Ai(),v=e.pinnedSections.length>=p.activeContentTabs-1,b=Object(o.useCallback)((function(t,n){return Object(Wn.jsx)(kd,Od({title:t,onPress:function(){return e.onNavigationPress(t)},onPressFavorite:function(){return e.onPressFavorite(t)},favorited:e.pinnedSections.includes(t),showFavoriteIcon:e.pinnedSections.includes(t)||!v},null!=n?n:{}),t)}),[e.onNavigationPress,e.onPressFavorite,e.pinnedSections.join(),v]),j=Af(t,"Help").length,O=Object(o.useMemo)((function(){var e,t;return Object(Wn.jsxs)(M.default,{style:Cd.navigationBlock,children:[b("Campus",{topDivider:!0,hotkey:"C"}),r&&b("Research",{hotkey:"R"}),i&&b("Apprentices",{hotkey:"A"}),a&&b("Inventory",{hotkey:"I"}),u&&b("Exploration",{hotkey:"E"}),s&&b("Upgrades",{hotkey:"U"}),f&&b("Creatures",{hotkey:"T"}),d&&b("Strengthen",{hotkey:"S"}),h&&b("Ending"),l&&b("Creation"),c&&b("Retirement"),b("Stats"),g&&b("Bestiary"),b("Help",{showBadge:j>0}),b("Options"),b("About"),(null==J.default||null==(e=J.default.expoConfig)||null==(t=e.extra)?void 0:t.showDebug)&&b("Debug")]})}),[r,i,a,u,s,f,h,l,c,g,e.onNavigationPress,e.onPressFavorite,j,b]),k=ho(t).length>0,x=dd(t),C=Gr(t,Nr.TimePieces)>0,S=Mn(hd(t))+":timepiece:/extra sec";return Object(o.useMemo)((function(){return Object(Wn.jsx)(B.GestureDetector,{gesture:y,children:Object(Wn.jsxs)(w.default,{style:Cd.scrollContainer,contentContainerStyle:Cd.scrollContentContainer,children:[Object(Wn.jsx)(M.default,{style:Cd.titleContainer,children:Object(Wn.jsx)(zn,{h1:!0,children:"Magic Research"})}),O,C&&Object(Wn.jsxs)(Yi,{title:"Speed up time",children:[Object(Wn.jsxs)(M.default,{style:Cd.timePieceButtonsContainer,children:[Object(Wn.jsx)(zn,{children:"Set game speed:"}),Object(Wn.jsx)(R.Button,{title:"Normal",onPress:function(){return n.current.apply((function(e){return e=he("time_piece_8x_speedup_enabled")(e),e=he("time_piece_speedup_enabled")(e)}))},titleStyle:Cd.timePieceButtonTitle,containerStyle:[Cd.timePieceButtonContainer]}),Object(Wn.jsx)(R.Button,{title:"2x",onPress:function(){return n.current.apply((function(e){return e=he("time_piece_8x_speedup_enabled")(e),e=fe("time_piece_speedup_enabled")(e)}))},titleStyle:Cd.timePieceButtonTitle,containerStyle:[Cd.timePieceButtonContainer]}),Object(Wn.jsx)(R.Button,{title:"8x",onPress:function(){return n.current.apply((function(e){return e=fe("time_piece_8x_speedup_enabled")(e),e=he("time_piece_speedup_enabled")(e)}))},titleStyle:Cd.timePieceButtonTitle,containerStyle:[Cd.timePieceButtonContainer]})]}),Object(Wn.jsxs)(M.default,{style:Cd.timePieceTextRows,children:[Object(Wn.jsx)(zn,{children:"Current speed:"}),Object(Wn.jsxs)(zn,{children:[x,"x"]})]}),x>1&&Object(Wn.jsxs)(M.default,{style:Cd.timePieceTextRows,children:[Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(zn,{children:"Time Piece cost:"})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(pr,{children:S})})]})]}),Object(Wn.jsx)(Yi,{title:"Resources",children:Object(Wn.jsx)(M.default,{style:Cd.statViewer,children:Object(Wn.jsx)(pd,{isVisible:e.visible})})}),Object(Wn.jsx)(Yi,{title:"Schools",children:Object(Wn.jsx)(M.default,{style:Cd.statViewer,children:Object(Wn.jsx)(md,{isVisible:e.visible})})}),u&&Object(Wn.jsx)(Yi,{title:"Combat",children:Object(Wn.jsx)(M.default,{style:Cd.statViewer,children:Object(Wn.jsx)(Nu,{isVisible:e.visible})})}),k&&Object(Wn.jsx)(Yi,{title:"Buffs",children:Object(Wn.jsx)(Ys,{isVisible:e.visible})})]})},"menuGesture")}),[O,u,k,C,x,e.visible,y])}function wd(e){var t=Object(o.useRef)(new b.default.Value(e.visible?0:-300)).current,n=Object(o.useRef)(new b.default.Value(e.visible?.5:0)).current;Object(o.useEffect)((function(){e.visible?(b.default.timing(t,{toValue:0,duration:150,useNativeDriver:!0}).start(),b.default.timing(n,{toValue:.5,duration:150,useNativeDriver:!0}).start()):(b.default.timing(t,{toValue:-300,duration:150,useNativeDriver:!0}).start(),b.default.timing(n,{toValue:0,duration:150,useNativeDriver:!0}).start())}),[e.visible]);var r=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsx)(ko.default,{accessibilityLabel:"Close Menu",accessibilityRole:"button",onPress:e.onBackgroundPress,accessibilityElementsHidden:!0,importantForAccessibility:"no-hide-descendants",children:Object(Wn.jsx)(b.default.View,{style:[Cd.backdrop,{opacity:n}],pointerEvents:e.visible?"auto":"none"})}),Object(Wn.jsx)(b.default.View,{style:[Cd.container,{transform:[{translateX:t}],backgroundColor:r.theme.colors.background}],accessibilityElementsHidden:!e.visible,importantForAccessibility:e.visible?"auto":"no-hide-descendants",children:Object(Wn.jsx)(xd,Od({},e))})]})}),[t,n,e.onBackgroundPress,e.visible,r])}var Cd=C.default.create({backdrop:{position:"absolute",height:"100%",width:"100%",backgroundColor:"#000",zIndex:130},container:{justifyContent:"flex-start",alignItems:"stretch",position:"absolute",height:"100%",width:300,left:0,top:0,zIndex:140},scrollContainer:{padding:8},scrollContentContainer:{paddingBottom:16},titleContainer:{marginBottom:8},navigationBlock:{marginTop:16},navigationRowTitle:{paddingVertical:4},timePieceButtonContainer:{marginLeft:4},timePieceButtonTitle:{fontSize:12},statViewer:{marginTop:4},timePieceButtonsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:8},timePieceTextRows:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:4},expandContainer:{width:32,alignSelf:"center",alignItems:"center",justifyContent:"center",cursor:"pointer"},notificationBadge:{position:"absolute",top:4,right:4},hotkeyText:{color:"#8ff"}});function Sd(){return null}function Ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rd=["10","12","15","20","24","30","40","50","60"].map((function(e){return{label:e,key:e,value:e}})),Bd=[.5,.6,.7,.8,.85,.9,.95,.98,1,1.02,1.05,1.1,1.151,1.2,1.25,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2,2.25,2.5,2.75,3].map((function(e){return{label:Mn(e,{showDecimals:!0})+"x",key:e.toString(),value:e.toString()}}));function Td(e,t){return Object(o.useCallback)((function(){var n;null==(n=e.current)||n.apply((function(e){return e.global.hideEventTags.includes(t)?e.global.hideEventTags.splice(e.global.hideEventTags.findIndex((function(e){return e===t})),1):e.global.hideEventTags.push(t),e}))}),[])}function Dd(e){var t=Object(o.useContext)(re),n=Object(o.useRef)(t);n.current=t;var r=function(e,t){return Object(o.useCallback)((function(){var n;null==(n=e.current)||n.apply((function(e){return e.global.hiddenFromBottomMenu.includes(t)?e.global.hiddenFromBottomMenu.splice(e.global.hiddenFromBottomMenu.findIndex((function(e){return e===t})),1):e.global.hiddenFromBottomMenu.push(t),e}))}),[])}(n,e.section),i=Object(R.useTheme)(),a=Object(Wn.jsxs)(M.default,{style:Id.toggleMenuRow,children:[Object(Wn.jsx)(fr,{icon:e.section.toLowerCase(),small:!0}),Object(Wn.jsx)(M.default,{style:Id.toggleMenuTextContainer,children:Object(Wn.jsx)(zn,{style:{color:i.theme.colors.grey1},children:e.section})})]});return Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:a,checked:!t.global.hiddenFromBottomMenu.includes(e.section),onPress:r,containerStyle:Id.toggleMenuCheckboxContainer})})}function Pd(){var e=Object(o.useContext)(re),t=Object(o.useRef)(e);t.current=e;var n=Object(o.useCallback)(u()((function*(){var e=yield wn(t.current);yield y.setStringAsync(e)})),[]),r=Object(o.useCallback)((function(e){t.current.apply((function(t){return t.global.targetFps=Number.parseInt(e),t}))}),[]),i=Object(o.useCallback)((function(e){t.current.apply((function(t){return t.global.zoomLevel=Number.parseFloat(e),t}))}),[]),a=Object(o.useCallback)((function(e){t.current.apply((function(t){return t.global.overrideElementDisplay=e,t}))}),[]),c=[{label:"Primary Element",key:"no",value:"no"}].concat(l()(Vt(e).map((function(e){return{label:e,key:e,value:e}})))),s=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.hideDamageEffects=!e.global.hideDamageEffects,e}))}),[]),d=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.doNotUseNativeDriver=!e.global.doNotUseNativeDriver,e}))}),[]),h=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.enableSwiping=!e.global.enableSwiping,e}))}),[]),g=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.themeMode="dark"===e.global.themeMode?"light":"dark",e}))}),[]),m=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.hideTooltips=!e.global.hideTooltips,e}))}),[]),p=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.automaticallyBuiltBuildingsStartOff=!e.global.automaticallyBuiltBuildingsStartOff,e}))}),[]),v=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.wakeLock=!e.global.wakeLock,e}))}),[]),b=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.enableBottomMenu=!e.global.enableBottomMenu,e}))}),[]),j=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.leftHandedMode=!e.global.leftHandedMode,e}))}),[]),O=Object(o.useCallback)((function(){t.current.apply((function(e){return e.global.putCastSpellOnBottomMenu=!e.global.putCastSpellOnBottomMenu,e}))}),[]),x=Td(t,qe.LEVEL_UP_FIRST_FIFTEEN_MINS),w=Td(t,qe.LEVEL_UP_EMPTY),C=Td(t,qe.LEVEL_UP),S=Td(t,qe.INCONSEQUENTIAL_RANDOM_EVENT),B=Td(t,qe.EARLY_GAME),T=Object(o.useState)(""),D=f()(T,2),P=D[0],I=D[1],_=Object(o.useCallback)((function(){t.current.apply((function(e){return G(ne)})),A.default.removeItem("PlayerContextState"),A.default.removeItem("LastSaveSecondsPlayed")}),[]),N=Object(R.useTheme)(),F="You may import save data by pasting it here.",L=Object(o.useCallback)(u()((function*(){yield vc(t.current)})),[]),Y=Object(E.default)(),V=Y.width,U=(Y.height,Object(o.useMemo)((function(){return gi(e).map((function(e){return Object(Wn.jsx)(Dd,{section:e},e)}))}),[gi(e).join()])),Q=Object(o.useMemo)((function(){return{color:N.theme.colors.grey1}}),[N]),H=Object(o.useMemo)((function(){return Object(Wn.jsx)(Yi,{title:"Performance",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"You may set your target UI updates per second (UUPS) here. Higher UUPS will make the game elements refresh quicker but it could affect battery power and CPU usage."}),Object(Wn.jsxs)(M.default,{style:Id.targetFpsContainer,children:[Object(Wn.jsx)(zn,{style:Q,children:"Target UUPS:"}),Object(Wn.jsx)(M.default,{style:Id.targetFpsDropdownContainer,children:Object(Wn.jsx)(ca,{onValueChange:r,selectedValue:e.global.targetFps.toString(),style:Id.targetFpsPicker,data:Rd})})]}),ce(e,"exploration_unlocked")&&Object(Wn.jsxs)(M.default,{style:Id.hideDamageEffectsContainer,children:[Object(Wn.jsx)(zn,{children:"If you are seeing performance problems specifically in the Exploration screen, you may turn off damage effects here, which should improve performance somewhat. The alternate animation code for the bars is less smooth, and may or may not improve performance; you may want to try both."}),Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Hide damage effects",checked:e.global.hideDamageEffects,onPress:s,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Use alternate animation code for the bars",checked:e.global.doNotUseNativeDriver,onPress:d,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})})]})]})]})})}),[d,e.global.doNotUseNativeDriver,s,e.global.hideDamageEffects,ce(e,"exploration_unlocked"),r,e.global.targetFps.toString(),Rd,Q]),W=Object(o.useMemo)((function(){return Object(Wn.jsx)(Yi,{title:"Keep Awake",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"By default, devices go to sleep after a period of inactivity, to save battery. You can disable this behavior while you are playing Magic Research actively in the foreground."}),Object(Wn.jsx)(M.default,{style:Id.targetFpsContainer,children:Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Prevent device from sleeping",checked:e.global.wakeLock,onPress:v,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})})})]})})}),[e.global.wakeLock,v]),J=Object(o.useMemo)((function(){return Object(Wn.jsx)(Yi,{title:"Hide Event Popups",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"Hide certain kinds of events, so that they don't disrupt gameplay. Hidden events will not show a popup, but will still be accessible through the Event Menu."}),Object(Wn.jsxs)(M.default,{style:Id.eventPopupsContainer,children:[e.global.totalTimesResetted>0&&Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Hide game progression events that require no action, up to unlocking Exploration",checked:e.global.hideEventTags.includes(qe.EARLY_GAME),onPress:B,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Hide school level up events during the first 15 minutes of a run",checked:e.global.hideEventTags.includes(qe.LEVEL_UP_FIRST_FIFTEEN_MINS),onPress:x,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Hide school level up events if nothing new is unlocked",checked:e.global.hideEventTags.includes(qe.LEVEL_UP_EMPTY),onPress:w,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Hide all school level up events",checked:e.global.hideEventTags.includes(qe.LEVEL_UP),onPress:C,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Hide common random events (random events which are not Storylines and which appear more than once)",checked:e.global.hideEventTags.includes(qe.INCONSEQUENTIAL_RANDOM_EVENT),onPress:S,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})})]})]})})}),[e.global.hideEventTags.join(),S,C,w,x,B,e.global.totalTimesResetted]),z=Object(o.useMemo)((function(){return V<960&&Object(Wn.jsx)(Yi,{title:"Swipe to Open Menus",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"In smaller screens, you can swipe the screen left or right in order to open menus. You can disable this behavior here."}),Object(Wn.jsx)(M.default,{style:Id.targetFpsContainer,children:Object(Wn.jsx)(ta,{title:"Enable swiping",checked:e.global.enableSwiping,onPress:h,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})})]})})}),[e.global.enableSwiping,V,h]),Z=Object(o.useMemo)((function(){return V<700&&Object(Wn.jsx)(Yi,{title:"Bottom Menu",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"In smaller screens, there is a menu at the bottom to quickly switch between screens. You can customize the menu in this section. If you are left handed, you can swap the position of the Cast Spell button to be able to use it more easily. If you prefer to have the extra screen space instead, you can also disable this menu here."}),Object(Wn.jsx)(M.default,{style:Id.targetFpsContainer,children:Object(Wn.jsx)(ta,{title:"Enable bottom menu",checked:e.global.enableBottomMenu,onPress:b,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Show Cast Spell button in bottom menu",checked:e.global.putCastSpellOnBottomMenu,onPress:O,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(ta,{title:"Left handed mode",checked:e.global.leftHandedMode,onPress:j,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),Object(Wn.jsxs)(M.default,{style:Id.bottomMenuCustomizationContainer,children:[Object(Wn.jsx)(zn,{children:"You can also customize which screens will show up on the bottom menu. You will always be able to navigate to these screens by using the main menu on the left hand side. The bottom menu will show the following screens:"}),Object(Wn.jsx)(M.default,{style:Id.hideBottomMenuContainer,children:U})]})]})})}),[V,e.global.enableBottomMenu,e.global.putCastSpellOnBottomMenu,e.global.leftHandedMode,b,O,j,U]),X=Object(o.useMemo)((function(){return al.isVisible(e)&&Object(Wn.jsx)(Yi,{title:"Conjure Building",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"When the spell Conjure Building is cast automatically, buildings that consume resources to operate (such as Furnaces) can be turned off by default to prevent extra resource consumption."}),Object(Wn.jsx)(M.default,{style:Id.eventPopupsContainer,children:Object(Wn.jsx)(ta,{title:"Turn off buildings when automatically created by Conjure Building",checked:e.global.automaticallyBuiltBuildingsStartOff,onPress:p,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})})]})})}),[e.global.automaticallyBuiltBuildingsStartOff,al.isVisible(e),p]),q=Object(o.useMemo)((function(){return Object(Wn.jsx)(Yi,{title:"Theming and UI",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"Change the colors to be easier on the eyes."}),Object(Wn.jsx)(M.default,{style:Id.targetFpsContainer,children:Object(Wn.jsx)(ta,{title:"Enable dark mode",checked:"dark"===e.global.themeMode,onPress:g,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})}),"web"===k.default.OS&&Object(Wn.jsxs)(M.default,{style:Id.elementOverrideContainer,children:[Object(Wn.jsx)(zn,{children:"You can disable tooltips if they get in the way."}),Object(Wn.jsx)(M.default,{style:Id.targetFpsContainer,children:Object(Wn.jsx)(ta,{title:"Disable tooltips",checked:e.global.hideTooltips,onPress:m,textStyle:Id.checkboxText,containerStyle:Id.checkboxContainer})})]}),Object(Wn.jsxs)(M.default,{style:Id.elementOverrideContainer,children:[Object(Wn.jsx)(zn,{children:"By default, the game changes the colors of the buttons and interface depending on the chosen element. If you'd like, you can instead choose to always show buttons with the looks of the element of your choice."}),Object(Wn.jsxs)(M.default,{style:Id.targetFpsContainer,children:[Object(Wn.jsx)(zn,{style:Q,children:"Game UI color:"}),Object(Wn.jsx)(M.default,{style:Id.targetFpsDropdownContainer,children:Object(Wn.jsx)(ca,{onValueChange:a,selectedValue:e.global.overrideElementDisplay,style:Id.uiColorPicker,data:c})})]})]}),!1]})})}),[e.global.themeMode,g,Q,e.global.overrideElementDisplay,a,!1,e.global.zoomLevel,i,Bd,e.global.hideTooltips,m]),K=Object(o.useMemo)((function(){return Object(Wn.jsxs)(Yi,{title:"Save File",children:[Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"You may persist your save data by copying it to the clipboard and storing it anywhere you'd like."}),Object(Wn.jsx)(ji,{onPress:n,title:"Copy savefile to clipboard",containerStyle:Id.saveButton})]}),Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"You can also save your data directly to a file or elsewhere."}),Object(Wn.jsx)(ji,{onPress:L,title:"Save to file",containerStyle:Id.saveButton})]})]})}),[n,!0,L]),$=Object(o.useMemo)((function(){return Object(Wn.jsx)(Yi,{title:"Load File",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:F}),Object(Wn.jsx)(zn,{style:{fontWeight:"bold",color:N.theme.colors.error},children:"WARNING: This will erase your current save! Make sure you have backed up your data!"}),Object(Wn.jsx)(wf,{})]})})}),[N.theme.colors.error,F]),ee=Object(o.useMemo)((function(){return Object(Wn.jsx)(Yi,{title:"Erase Saved Data",children:Object(Wn.jsxs)(M.default,{style:Id.categoryContainer,children:[Object(Wn.jsx)(zn,{children:"If you want to start all over again and retirement isn't enough, you can delete your save data entirely."}),Object(Wn.jsx)(zn,{style:{fontWeight:"bold",color:N.theme.colors.error},children:'WARNING: This will erase your current save, including all your progress with Storylines and retirement! Make sure you have backed up your data! Once you have done this, there is no going back! If you are sure you want to do this, write "erase" in the text field below.'}),Object(Wn.jsx)(R.Input,{inputContainerStyle:Id.inputContainer,value:P,onChangeText:I}),Object(Wn.jsx)(ji,{disabled:"erase"!=P.toLowerCase(),onPress:_,color:"error",title:"Permanently erase all saved data"})]})})}),[P,_,I,P,N.theme.colors.error]);return Object(Wn.jsxs)(M.default,{style:Id.container,children:[Object(Wn.jsx)(M.default,{style:Id.headerContainer,children:Object(Wn.jsx)(zn,{h2:!0,children:"Options"})}),H,W,J,z,Z,X,q,K,$,ee]})}var Id=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},headerContainer:{marginBottom:16},categoryContainer:{marginTop:8,paddingHorizontal:8},targetFpsContainer:{flexDirection:"row",alignItems:"center",marginTop:8},eventPopupsContainer:{marginTop:8},targetFpsDropdownContainer:Md(Md({},k.default.select({android:{backgroundColor:"#eee",borderRadius:10,default:{}}})),{},{marginLeft:16}),targetFpsPicker:{width:100},uiColorPicker:{width:160},sliderContainer:{width:200,marginLeft:16},sliderTextContainer:{width:120},checkboxContainer:{marginLeft:0,marginTop:8,padding:0},checkboxText:{fontWeight:"normal"},saveButton:{marginTop:8},loadMessageContainer:{marginBottom:8},inputContainer:{borderWidth:1,marginTop:16,maxHeight:48},toggleMenuCheckboxContainer:{padding:0,marginLeft:0},toggleMenuRow:{marginTop:8,flexDirection:"row",alignItems:"center"},hideBottomMenuContainer:{flexDirection:"row",flexWrap:"wrap"},toggleMenuTextContainer:{paddingLeft:4},bottomMenuCustomizationContainer:{marginTop:8},hideDamageEffectsContainer:{marginTop:8},elementOverrideContainer:{marginTop:8}});function _d(e,t){var n=Nd(e);for(var r in n){var o;e=_t(r,(null!=(o=null==n?void 0:n[r])?o:0)*t)(e)}return e}function Nd(e){var t=e.research.researcherAllocation,n={};for(var r in t.schools){var o,i=(null==(o=t.schools)?void 0:o[r])||0;if(i>0){var a=Ce([r,Ee.Research],e,1,{fromResearch:!0});n[r]=a*i}}return n}function Fd(e){return Ce([Ee.Research],e,1)}function Ld(e){var t=e.research.researcherAllocation,n=0;for(var r in t.schools)n+=t.schools[r]||0;return e.research.totalResearchers-n}function Yd(e,t,n){var r,o=(null==(r=n.research.researcherAllocation.schools)?void 0:r[e])||0,i=t>0?Math.min(Ld(n),t):Math.max(-o,t);return n.research.researcherAllocation.schools[e]=o+i,n}function Vd(e,t){return Yd.bind(this,e,t)}function Ud(e,t){return t.research.totalResearchers=Math.max(0,t.research.totalResearchers+e),t}function Qd(e){return Ud.bind(this,e)}function Gd(e){return Ce([Ee.Researcher,Ee.Cap],e,1)}function Hd(e){var t,n=e.school,r=Object(o.useContext)(re),i=Object(o.useRef)(r);i.current=r;var a=Ld(r)>0,u=(null==(t=r.research.researcherAllocation.schools)?void 0:t[n])||0,c=Object(o.useCallback)((function(){return i.current.apply(Vd(n,e.applyAll?-1/0:-1))}),[n,e.applyAll]),l=Object(o.useCallback)((function(){return i.current.apply(Vd(n,e.applyAll?1/0:1))}),[n,e.applyAll]),s=Pt(r,n),f=Object(R.useTheme)(),d=Object(o.useMemo)((function(){return Object(Wn.jsxs)(zn,{numberOfLines:3,children:[n,r.primarySchool==n?" (Primary)":"",":"," ","Lv"+s]})}),[n,r.primarySchool,s]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Jd.row,Jd.singleSchoolElementContainer,e.isOdd&&{backgroundColor:Object(Or.color)(f.theme.colors.grey5).alpha(.5)}],children:[Object(Wn.jsx)(M.default,{style:Jd.schoolTextContainer,children:d}),Object(Wn.jsxs)(M.default,{style:[Jd.row,Jd.rightHandSide],children:[Object(Wn.jsx)(zn,{children:u}),Object(Wn.jsx)(M.default,{style:Jd.plusMinusAllocatorContainer,children:Object(Wn.jsx)(wi,{disableMinus:0===u,disablePlus:!a,onPressMinus:c,onPressPlus:l})})]})]},n)}),[d,u,a,c,l,f,e.isOdd])}function Wd(){var e=Object(o.useContext)(re),t=Object(o.useContext)(Ui),n=Object(o.useRef)(e);n.current=e;var r=Ld(e),i=Qi(t,"research_applyall",!1),a=f()(i,2),u=a[0],c=a[1],l=Object(o.useCallback)((function(){c(!u)}),[u,c]),s=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{style:Jd.assignAllContainer,children:Object(Wn.jsx)(ta,{title:"Assign / unassign all at once",checked:u,textStyle:Jd.checkboxText,containerStyle:Jd.checkboxContainer,onPress:l})}),Object(Wn.jsxs)(M.default,{style:[Jd.row,Jd.researcherCapacityContainer],children:[Object(Wn.jsx)(zn,{children:"Researchers available: "}),Object(Wn.jsxs)(zn,{children:[Mn(r),"/",Mn(e.research.totalResearchers)]})]}),Object(Wn.jsxs)(M.default,{style:[Jd.row,Jd.researcherCapacityContainer],children:[Object(Wn.jsx)(zn,{children:"Researcher capacity: "}),Object(Wn.jsxs)(zn,{children:[Mn(e.research.totalResearchers),"/",Mn(Gd(e))]})]}),Object(Wn.jsxs)(M.default,{style:[Jd.row,Jd.researcherCapacityContainer],children:[Object(Wn.jsx)(zn,{children:"Exp per researcher: "}),Object(Wn.jsxs)(zn,{children:[Mn(Fd(e),{showDecimals:!0})," ","/ sec"]})]}),Object(Wn.jsx)(M.default,{children:Object(Wn.jsx)(Ji,{area:"Research"})})]})}),[Gd(e),Fd(e),e.research.totalResearchers,r,u,l]),d=Gt(e),h=r===e.research.totalResearchers,g=r<=0,m=Object(o.useCallback)((function(){n.current.apply((function(e){for(var t in e.research.researcherAllocation.schools)Vd(t,u?-1/0:-1)(e);return e}))}),[u]),A=Object(o.useCallback)((function(){n.current.apply((function(e){do{for(var t of Gt(e))Vd(t,1)(e)}while(u&&Ld(e)>0);return e}))}),[u]),y=Object(R.useTheme)();return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{children:"Schools"}),d.map((function(e,t){return Object(Wn.jsx)(Hd,{school:e,applyAll:u,isOdd:t%2!=0},e)})),Object(Wn.jsxs)(M.default,{style:[Jd.row,Jd.singleSchoolElementContainer,d.length%2!=0&&{backgroundColor:Object(Or.color)(y.theme.colors.grey5).alpha(.5)}],children:[Object(Wn.jsx)(M.default,{style:Jd.schoolTextContainer,children:Object(Wn.jsx)(zn,{numberOfLines:3,children:"Assign to every School"})}),Object(Wn.jsx)(M.default,{style:[Jd.row,Jd.rightHandSide],children:Object(Wn.jsx)(M.default,{style:Jd.plusMinusAllocatorContainer,children:Object(Wn.jsx)(wi,{disableMinus:h,disablePlus:g,onPressMinus:m,onPressPlus:A})})})]},"All")]}),s]})}),[d.length,s,u,h,g,m,A,y])}var Jd=C.default.create({row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},plusMinusAllocatorContainer:{marginLeft:16},assignAllContainer:{marginTop:8,paddingHorizontal:16},researcherCapacityContainer:{marginTop:4,paddingHorizontal:16},singleSchoolElementContainer:{padding:4},checkboxContainer:{marginLeft:0,marginTop:8,padding:0},checkboxText:{fontWeight:"normal"},rightHandSide:{marginLeft:16},schoolTextContainer:{flex:1}});function zd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Zd=new(function(e){No()(n,e);var t=zd(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gr(e,Nr.TimePieces)>0&&ce(e,"research_unlocked")}},{key:"getName",value:function(){return"Use Time Pieces (Research)"}},{key:"getArea",value:function(){return["Campus","Research"]}},{key:"getSubcategory",value:function(){return bo["Use Time Pieces"]}},{key:"getDisplayDescription",value:function(){return"Use your time pieces to get some research. Requires at least one active researcher."}},{key:"getBaseActionEffects",value:function(){return{timePiecesPerResearchSecond:{value:2,tags:[Ee.TimePiecePerResearch]}}}},{key:"getDisplayEffect",value:function(e){return"Instantly obtain "+Rn(3e3/this.getActionEffects(e).timePiecesPerResearchSecond,{shortForm:!0,showDecimals:!0})+" (Real World time) of research"}},{key:"canAfford",value:function(e){return Gc()(Vo()(n.prototype),"canAfford",this).call(this,e)&&Gr(e,Nr.TimePieces)>=3e3}},{key:"getCost",value:function(e){return{resources:{"Time Pieces":3e3},items:{}}}},{key:"isEnabled",value:function(e){return Gc()(Vo()(n.prototype),"isEnabled",this).call(this,e)&&Object.keys(e.research.researcherAllocation.schools).some((function(t){var n;return(null!=(n=e.research.researcherAllocation.schools[t])?n:0)>0}))}},{key:"doAction",value:function(e,t){var n,r=3e3/this.getActionEffects(t).timePiecesPerResearchSecond,o=Ce([Ee.GameSpeed],t,r,{isWarp:!0});return t=Wr(Nr.TimePieces,-(null!=(n=this.getCost(t).resources["Time Pieces"])?n:0))(t),Object.keys(t.research.researcherAllocation.schools).forEach((function(e){var n,r=null!=(n=t.research.researcherAllocation.schools[e])?n:0;if(r>0){var i=Ce([e,Ee.Research],t,1,{isWarp:!0,fromResearch:!0});t=_t(e,r*i*o)(t)}})),t}}]),n}(jo)),Xd=Un("memory_chamber","(Storyline) The Memory Chamber",[qe.STORYLINE]);function qd(e){return ve(e,"memory_chamber_completed")?.7-Math.min(.016*Math.max(zt(e)-15,0),.4):1}Xd.setOnTrigger(fe("memory_chamber_triggered")).createMessage().setSimpleDescription('Your researcher approaches you. In her hands is a large blueprint.\n    \n"I have figured out an interesting idea," she says. "There is a way we could build a magical storage, not for our resources, but for our memories."').addOption("Continue",Xd.createMessage().setSimpleDescription('Confused, you ask her to explain further.\n      \n"Well, you see," she continues. "We are doing a ton of research right now, and it would be a shame if it were to be lost to future generations. Not only that, but the exploration we have been doing is also something they would be able to benefit from... as long as they know about it, of course."\n\nYou ponder her proposal and look at the blueprint. The costs are definitely hefty.').addOption("Build the Memory Chamber (5000 Mana, 30K Stone)",{transform:function(e){return e=Wr(Nr.Mana,-5e3)(e),e=Wr(Nr.Stone,-3e4)(e)},isEnabled:function(e){return Gr(e,Nr.Mana)>=5e3&&Gr(e,Nr.Stone)>=3e4}},Xd.createMessage().setSimpleDescription("You decide to build the Memory Chamber and motion to your researcher to do so.\n    \nA few days later, your researcher takes you to the freshly built chamber: a small room in a corner of the campus. You enter it and enchant it with plenty of Mana. The room is mostly empty bookshelves right now.").addOption("Continue",{transform:function(e){return e=me("memory_chamber_completed")(e),e=fe("memory_chamber_exp_granted")(e)}},Xd.createMessage().setSimpleDescription('"We\'ll make sure to fill it with the fruits of our research", says the researcher. "We will leave behind a lasting legacy." You nod, satisfied, knowing that your efforts will not be forgotten in the future.\n\n**You have completed the "The Memory Chamber" storyline! You will begin future runs with some experience on your schools based on each school\'s MPL (Maximum Primary Level). In addition, areas you have beaten the boss of in the past will require less exploration depending on your highest MPL!**')))),xe([[Ee.ExplorationBossRequirement]],"MemoryChamberExploration",Oe.Multiplier,(function(e,t){return function(e,t){return ve(e,("string"===typeof t?t:t.getId())+"_dungeon_floor_completed")}(e,t.floor)?qd(e):1})),Te("memory_chamber_post_retirement",(function(e){if(ve(e,"memory_chamber_completed")&&!ce(e,"memory_chamber_exp_granted"))return function(e){return Gt(e).forEach((function(t){var n=Jt(e,t),r=100*Math.pow(1.25,n);e=_t(t,r)(e)})),e=fe("memory_chamber_exp_granted")(e)}}));var Kd=Xd.build();Yc(Kd,60,!0,(function(e){return!ce(e,"memory_chamber_triggered")&&void 0!=e.primarySchool&&Pt(e,e.primarySchool)>=15&&ce(e,"exploration_unlocked")&&!ve(e,"memory_chamber_completed")})),Te("safeguard_memory_chamber_trigger",(function(e){if(!ce(e,"memory_chamber_triggered")&&!ve(e,"memory_chamber_completed")&&void 0!=e.primarySchool&&vu(e,"livingForestGrove")>10)return lt(Kd,{})})),ti.register(new ei("The Memory Chamber",3060,(function(e){return be(e,"memory_chamber_completed")}),(function(e){return ve(e,"memory_chamber_completed")}),"There's a chance of this happening randomly if your primary School is Lv15 or higher...","Start new runs with exp on every school depending on its MPL; Exploration amount requirement to unlock boss for previously beaten areas halved",(function(e){return!0})));var $d=Kd;function eh(){var e,t=Object(o.useContext)(re),n=ue(G(t),!0);n.isFake=!0;var r,i=qt(n),a=Kt(n),u=qt(t),c=Kt(t),l=100*(i-u)/u,s=100*(a-c)/c,d=(r=t).global.lastDungeonFloorCompletedLastRun==r.thisRun.lastDungeonFloorCompleted&&null!=r.thisRun.lastDungeonFloorCompleted&&null==r.thisRun.endingTriggered&&!(r.primaryElement===kt.Darkness&&"darknessTemple3F"!=r.thisRun.lastDungeonFloorCompleted),h=ti.getAll().filter((function(e){return!e.isBonusActive(t)&&e.isCompleted(t)})),g="",m=be(t,"memory_chamber_completed"),A=be(t,"upgraded_memory_chamber_completed");if(m&&!A){var y=qd(t),p=qd(n),v=100*(p-y)/y;g=" Your Memory Chamber will also reduce the required exploration for previously completed areas to **"+Mn(100*p,{showDecimals:!1})+"% ("+(0!=v?Mn(v,{showDecimals:!1})+"%":"no change")+")**."}var b="";h.length>0&&(b=" The following Storyline bonuses will also fully activate:\n    \n"+h.map((function(e){return"* **"+e.name+"**: "+e.getBonusDescription(t)})).join("\n"));var j='You have built up enough knowledge that you feel it might be enough. You consider retirement.\n\nIf you retire, **you will reset the game.** Everything will revert back to its initial state, except:\n* Any unlocked schools or elements will stay unlocked;\n* Any bonuses you obtained from "(Storyline)" events will remain;\n* You will gain a boost to research, building production and loot based on the maximum level you have ever attained on your primary school (MPL), as well as on the sum of the MPLs you have attained on each school you have unlocked.\n\nWhen you retire, you will be able to choose a new primary school and element.\n\n'+("**If you retire now, your research multiplier will become "+Mn(i,{showDecimals:!0})+"x (+"+Mn(l,{showDecimals:!0})+"%) and your production and loot multiplier will become "+Mn(a,{showDecimals:!0})+"x (+"+Mn(s,{showDecimals:!0})+"%).**"+g+b)+"\n\n*Do you want to retire?*",O=Object(o.useState)(!1),k=f()(O,2),x=k[0],w=k[1],C=Object(o.useContext)(Mi);Object(o.useEffect)((function(){C||w(!1)}),[C]);var S=Zd.isVisible(t)&&Zd.isEnabled(t),E=Object.values(t.eventOccurrences).some((function(e){return e.currentMessageId&&!$e(e.currentMessageId).isTerminal()})),B=Sa(t)&&Pt(t,null!=(e=t.primarySchool)?e:xt.Conjuration)>zt(t)+4,T=Ea(t),D=Object(R.useTheme)();return Object(Wn.jsxs)(M.default,{style:th.container,children:[Object(Wn.jsx)(zn,{h1:!0,children:"Retirement"}),Object(Wn.jsx)(M.default,{style:th.explanation,children:Object(Wn.jsx)(pr,{children:j})}),B&&Object(Wn.jsx)(M.default,{style:th.warning,children:Object(Wn.jsx)(zn,{style:{fontStyle:"italic"},children:"It looks like your multipliers might be too low for your current progression in Exploration, and your retirement bonus seems reasonably high. This might be a good time to retire!"})}),T&&Object(Wn.jsx)(M.default,{style:th.warning,children:Object(Wn.jsx)(zn,{style:{color:D.theme.colors.warning},children:"Warning: Your multipliers seem to be very high for your current progression in Exploration. You might benefit more by making more progress in Exploration. Are you sure you want to retire?"})}),d&&Object(Wn.jsx)(M.default,{style:th.warning,children:Object(Wn.jsx)(zn,{style:{color:D.theme.colors.warning},children:"Warning: It looks like you could be stuck on a boss. If you cannot defeat a boss, and you have already tried retiring once to defeat it without success, you may possibly have better results by thinking harder about how to defeat the boss rather than starting over again. Are you sure you want to retire?"})}),S&&Object(Wn.jsx)(M.default,{style:th.warning,children:Object(Wn.jsx)(zn,{style:{color:D.theme.colors.warning},children:'Warning: It looks like you still have many unused Time Pieces! Consider using them up with "Use Time Pieces (Research)" (or in other ways) before retiring, as they will be gone when you retire!'})}),E&&Object(Wn.jsx)(M.default,{style:th.warning,children:Object(Wn.jsx)(zn,{style:{color:D.theme.colors.warning},children:"Warning: You still have ongoing events! Are you sure you want to retire?"})}),Object(Wn.jsxs)(M.default,{style:th.buttonContainer,children:[!x&&Object(Wn.jsx)(R.Button,{title:"Retire",onPress:function(){return w(!0)}}),x&&Object(Wn.jsx)(R.Button,{title:"Are you sure? Press again to confirm",onPress:function(){t.apply((function(e){return ue(e,!1)}))}})]})]})}var th=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},explanation:{marginTop:16},buttonContainer:{marginTop:16},warning:{marginTop:8}});function nh(e){var t=mi(e.onSwipeLeft,e.onSwipeRight),n=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),r=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(t,n)}),[t,n]),i=mi(e.onSwipeLeft,e.onSwipeRight),a=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),u=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(i,a)}),[i,a]),c=Object(R.useTheme)(),l=Object(o.useContext)(re),s=l.global.enableBottomMenu,f=Object(E.default)(),d=f.height,h=f.width,g=d-(s&&h<640?48:0),m=dn(l).length>0;return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:{flex:1},children:[Object(Wn.jsx)(B.GestureDetector,{gesture:r,children:Object(Wn.jsx)(w.default,{style:{flex:1},contentContainerStyle:ih.magicContainer,children:Object(Wn.jsx)(Ts,{isVisible:e.visible,uiKey:"SpellMenuContainer",onlyBySchool:e.favoritesOnBottom})})},"spellMenuContentsGesture"),e.favoritesOnBottom&&m&&Object(Wn.jsx)(M.default,{style:{height:Math.max(Math.min(g-472,270),180),borderTopColor:c.theme.colors.divider,borderTopWidth:1},children:Object(Wn.jsx)(B.GestureDetector,{gesture:u,children:k.default.select({default:Object(Wn.jsx)(M.default,{style:[ih.favoritesContainer,{flex:1}],children:Object(Wn.jsx)(Ss,{isVisible:e.visible})}),web:Object(Wn.jsx)(w.default,{contentContainerStyle:ih.favoritesContainer,children:Object(Wn.jsx)(Ss,{isVisible:e.visible})})})},"spellMenuContentsFavoritesGesture")})]})}),[r,u,e.visible,c,m,e.favoritesOnBottom,g])}function rh(e){var t=Object(o.useRef)(new b.default.Value(e.visible?0:300)).current,n=Object(o.useRef)(new b.default.Value(e.visible?.5:0)).current,r=Object(R.useTheme)();return Object(o.useEffect)((function(){e.visible?(b.default.timing(t,{toValue:0,duration:150,useNativeDriver:!0}).start(),b.default.timing(n,{toValue:.5,duration:150,useNativeDriver:!0}).start()):(b.default.timing(t,{toValue:300,duration:150,useNativeDriver:!0}).start(),b.default.timing(n,{toValue:0,duration:150,useNativeDriver:!0}).start())}),[e.visible]),Object(o.useMemo)((function(){return Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsx)(ko.default,{accessibilityLabel:"Close Spell Menu",accessibilityRole:"button",accessibilityElementsHidden:!0,importantForAccessibility:"no-hide-descendants",onPress:e.onBackgroundPress,children:Object(Wn.jsx)(b.default.View,{style:[ih.backdrop,{opacity:n}],pointerEvents:e.visible?"auto":"none"})}),Object(Wn.jsx)(b.default.View,{style:[ih.container,{transform:[{translateX:t}],backgroundColor:r.theme.colors.background}],accessibilityElementsHidden:!e.visible,importantForAccessibility:e.visible?"auto":"no-hide-descendants",children:Object(Wn.jsx)(nh,{visible:e.visible,onSwipeLeft:e.onSwipeLeft,onSwipeRight:e.onSwipeRight,favoritesOnBottom:e.favoritesOnBottom})})]})}),[n,t,e.visible,e.onBackgroundPress,r])}var oh,ih=C.default.create({backdrop:{position:"absolute",height:"100%",width:"100%",backgroundColor:"#000",zIndex:80},backdropTouchable:{position:"absolute",height:"100%",width:"100%",zIndex:90},container:{justifyContent:"flex-start",alignItems:"stretch",position:"absolute",zIndex:100,height:"100%",width:300,right:0,top:0},magicContainer:{padding:8},favoritesContainer:{paddingHorizontal:8,paddingBottom:8}});!function(e){e.Basic="Basic",e.Storyline="Storyline"}(oh||(oh={}));var ah=function(){function e(t,n,r,o,i){Y()(this,e),this.id=t,this.secretType=n,this.getDescription=r,this.isUnlockable=o,this._isCompleted=i}return U()(e,[{key:"getId",value:function(){return this.id}},{key:"getType",value:function(){return this.secretType}},{key:"unlock",value:function(e){return ye("secret_"+this.secretType+"_"+this.id)(e)}},{key:"isUnlocked",value:function(e){return ve(e,"secret_"+this.secretType+"_"+this.id)}},{key:"isCompleted",value:function(e){return null!=this._isCompleted?this._isCompleted(e):this.isUnlocked(e)}}]),e}(),uh={Basic:new _e,Storyline:new _e};function ch(e,t){var n=function(e,t){return uh[t].getAll().filter((function(t){return t.isUnlockable(e)&&!t.isUnlocked(e)&&!t.isCompleted(e)}))}(e,t);if(0!==n.length)return n[Math.floor(Math.random()*n.length)]}function lh(e){var t=Object(o.useContext)(re),n=e.secret,r=e.secret.isCompleted(t),i=e.secret.isUnlocked(t),a=Object(o.useMemo)((function(){var e=i?n.getDescription(t):"???";return Object(Wn.jsx)(M.default,{style:sh.descriptionTextContainer,children:Object(Wn.jsx)(di,{style:{flex:1,justifyContent:"center"},children:e})})}),[n.getDescription(t),i]),u=Object(R.useTheme)(),c=Object(o.useMemo)((function(){var e="lock";return i&&(e="more-horiz"),r&&(e="check"),Object(Wn.jsx)(g.default,{accessibilityLabel:r?"Completed":i?"Discovered":"Locked",name:e,size:20,color:r?u.theme.colors.grey1:u.theme.colors.grey3})}),[i,r,u]);return Object(Wn.jsxs)(M.default,{style:sh.topContainer,children:[c,a]})}var sh=C.default.create({topContainer:{flexDirection:"row",alignItems:"center",paddingVertical:8},descriptionTextContainer:{marginLeft:8,justifyContent:"center",flex:1}});function fh(e){var t,n,r=Object(o.useContext)(re),i=(t=r,n=e.secretType,uh[n].getAll().filter((function(e){return e.isUnlockable(t)||e.isUnlocked(t)||e.isCompleted(t)}))),a=Object(o.useMemo)((function(){return i.map((function(e){return Object(Wn.jsx)(lh,{secret:e},e.id)}))}),[i.map((function(e){return e.id})).join(",")]);return Object(o.useMemo)((function(){return 0===a.length?null:Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{children:a[0]},i[0].id),a.slice(1).map((function(e,t){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(Fi,{}),e]},i[t].id)}))]})}),[a])}C.default.create({});var dh=n(520);function hh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var gh=new(function(e){No()(n,e);var t=hh(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Divine Storyline"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Attempt to divine how to trigger a Storyline."}},{key:"getDisplayEffect",value:function(){return"Unlocks information about a Storyline. You can view this information in the stats screen."}},{key:"getManaCost",value:function(){return 6e3}},{key:"getBaseCooldown",value:function(){return 57600}},{key:"getSchoolLevelRequirements",value:function(){return{Divination:20}}},{key:"isEnabled",value:function(e){return Gc()(Vo()(n.prototype),"isEnabled",this).call(this,e)&&null!=ch(e,oh.Storyline)}},{key:"doSpellAction",value:function(e){var t,n=ch(e,oh.Storyline);return null!=(t=null==n?void 0:n.unlock(e))?t:e}}]),n}(tl));function mh(e){var t=Object(o.useContext)(re),n=e.storyline,r=uh.Storyline.getById(n.name),i=r.isUnlockable(t)&&gh.isVisible(t),a=r.isUnlocked(t),u=n.isCompleted(t),c=n.isBonusActive(t),l=a||u||c,s=Object(o.useMemo)((function(){var e="???";return i&&(e='A hint about this Storyline can be unlocked using the spell "Divine Storyline".'),a&&(e=r.getDescription(t)),u&&(e="You have completed this Storyline, but not all of its bonuses are active. Retire to obtain the rest!"),c&&(e=n.getBonusDescription(t)),Object(Wn.jsx)(M.default,{style:Ah.descriptionTextContainer,children:c?Object(Wn.jsxs)(M.default,{style:Ah.effectContainer,children:[Object(Wn.jsx)(zn,{children:"Storyline completed!"}),Object(Wn.jsxs)(M.default,{style:Ah.effectSubcontainer,children:[Object(Wn.jsx)(zn,{children:"Bonus: "}),Object(Wn.jsx)(hi,{style:Ah.descriptionViewer,children:e})]})]}):Object(Wn.jsx)(di,{style:Ah.descriptionViewer,children:e})})}),[r.getDescription(t),n.getBonusDescription(t),i,a,u,c]),f=Object(R.useTheme)(),d=Object(o.useMemo)((function(){var e=Object(Wn.jsx)(g.default,{accessibilityLabel:"Locked",name:"lock",size:20,color:f.theme.colors.grey3});return i&&(e=Object(Wn.jsx)(dh.default,{accessibilityLabel:"Discoverable",name:"lock-open-variant",size:20,color:f.theme.colors.grey3})),a&&(e=Object(Wn.jsx)(g.default,{accessibilityLabel:"Discovered",name:"more-horiz",size:20,color:f.theme.colors.grey3})),u&&(e=Object(Wn.jsx)(g.default,{accessibilityLabel:"Completed but Inactive",name:"error-outline",size:20,color:f.theme.colors.black})),c&&(e=Object(Wn.jsx)(g.default,{accessibilityLabel:"Completed",name:"check",size:20,color:f.theme.colors.black})),e}),[i,a,u,c,f]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Ah.storylineContainer,children:[Object(Wn.jsx)(ko.default,{accessibilityRole:"button",accessibilityHint:"Expand",onPress:e.onPressExpand,children:Object(Wn.jsxs)(M.default,{style:Ah.topRowContainer,children:[d,Object(Wn.jsx)(zn,{h3:!0,accessibilityRole:"none",onPress:e.onPressExpand,style:[Ah.topContainer,!l&&Ah.disabledStorylineText],children:l?n.name:"???"},n.name),Object(Wn.jsx)(M.default,{style:Ah.expandContainer,children:Object(Wn.jsx)(Oo.default,{name:e.collapsed?"chevron-right":"chevron-down",size:24,color:f.theme.colors.black})})]})}),!e.collapsed&&Object(Wn.jsx)(M.default,{children:s})]},n.name)}),[n.name,l,d,f,!e.collapsed&&s,e.collapsed,e.onPressExpand])}var Ah=C.default.create({storylineContainer:{marginVertical:8},topRowContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},expandContainer:{width:40},descriptionTextContainer:{marginBottom:8,marginTop:8,flex:1,flexDirection:"row",flexWrap:"wrap"},descriptionViewer:{flex:1,justifyContent:"center"},effectContainer:{flex:1},effectSubcontainer:{flexDirection:"row",alignItems:"flex-start",flexWrap:"wrap"},smallButtonTitle:{fontSize:12},topContainer:{flex:1,marginLeft:8},disabledStorylineText:{color:"#aaa"}});function yh(e){var t=Object(o.useState)(""),n=f()(t,2),r=n[0],i=n[1],a=Object(o.useCallback)((function(e){i(r==e?"":e)}),[r]),u=ni(),c=u.map((function(e){return e.name})).join(","),l=Object(o.useMemo)((function(){return u.map((function(e){return Object(Wn.jsx)(mh,{storyline:e,collapsed:r!=e.name,onPressExpand:a.bind(null,e.name)},e.name)}))}),[c,r,i]);return Object(o.useMemo)((function(){return 0===u.length?null:Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(M.default,{children:l[0]},u[0].name),l.slice(1).map((function(e,t){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsx)(Fi,{}),e]},u[t].name)}))]})}),[c,l])}C.default.create({});function ph(e){var t,n,r=e.school,i=Object(o.useContext)(re),a=Gt(i).map((function(e){return Pt(i,e)})),u=Object(o.useMemo)((function(){var e=cn(i,r),t=rr(i),n=Na(i),o=Pt(i,r),a=0,u=!1,c=[],s=[],f=[],d=G(i);for(d.isFake=!0;!u&&o+a<St(i);){a+=1,d.schoolExperience[r]=Tt(d,Pt(i,r)+a,r);var h=cn(d,r),g=rr(d),m=Na(d);c=h.filter((function(t){return!e.includes(t)})),s=g.filter((function(e){return!t.includes(e)})),f=m.filter((function(e){return!n.includes(e)})),(c.length>0||s.length>0||f.length>0)&&(u=!0)}var A=c.map(is),y=s.map(as.bind(null,i)),p=f.map((function(e){return"*"+e.getFloorName()+"*"})),v=[].concat(l()(A),l()(y),l()(p));return v.length>0?"Your next unlock is at level "+(a+o)+":\n    \n"+v.join("\n"):"If you only level up this school, you will not unlock anything new!"}),[JSON.stringify(a)]),c=Tt(i,Pt(i,r)+1,r)-Ct(i,r),s=Nd(i);return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"Level:"}),Object(Wn.jsx)(zn,{style:xh.valueText,children:Pt(i,r)})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"To Next Level:"}),Object(Wn.jsx)(zn,{style:xh.valueText,children:Mn(c)})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"To Next Level (Time):"}),Object(Wn.jsx)(zn,{style:xh.valueText,children:0==(null!=(t=null==s?void 0:s[r])?t:0)||c==1/0?"\u221e":Bn(La.a.duration(1e3*c/(null!=(n=null==s?void 0:s[r])?n:0)))})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:{flex:1},children:"Maximum Primary Level in previous runs (MPL):"}),Object(Wn.jsx)(zn,{style:xh.valueText,children:Mn(Jt(i,r))})]}),Object(Wn.jsx)(M.default,{style:xh.insideBlock,children:Object(Wn.jsx)(pr,{children:u})})]})}var vh=i.a.memo((function(e){var t=Object(o.useContext)(re),n=e.school,r=n+" Lv"+Pt(t,n)+(n==t.primarySchool?" (Primary)":""),i=Object(o.useCallback)((function(){return e.onPress(n)}),[e.onPress,n]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(R.ListItem,{topDivider:!0,accessibilityRole:"button",onPress:i,children:[Object(Wn.jsx)(R.ListItem.Content,{children:Object(Wn.jsx)(R.ListItem.Title,{children:r})}),Object(Wn.jsx)(R.ListItem.Chevron,{type:"material",name:e.isExpanded?"close":"chevron-right"})]}),e.isExpanded&&Object(Wn.jsx)(M.default,{style:xh.schoolElementContainer,children:Object(Wn.jsx)(ph,{school:n})})]},n)}),[i,r,e.isExpanded,n])}));function bh(){var e=Object(o.useState)(""),t=f()(e,2),n=t[0],r=t[1],i=Gt(Object(o.useContext)(re)).map((function(e,t){return Object(Wn.jsx)(vh,{school:e,isExpanded:e===n,onPress:r},e)}));return Object(Wn.jsxs)(M.default,{children:[i,Object(Wn.jsx)(Fi,{})]})}function jh(){var e=Object(o.useContext)(re),t=ni(),n=t.filter((function(t){return t.isCompleted(e)}));return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"Total Completed Storylines:"}),Object(Wn.jsxs)(zn,{style:xh.valueText,children:[n.length," / ",t.length]})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"Completion Percentage:"}),Object(Wn.jsx)(zn,{style:xh.valueText,children:Mn(100*n.length/t.length)+"%"})]}),Object(Wn.jsx)(M.default,{style:xh.storylineContainer,children:Object(Wn.jsx)(yh,{})})]})}),[n.length,t.length])}function Oh(){var e,t,n,r,i,a,u,c,l,s,f,d,h=Object(o.useContext)(re),g=La.a.duration(null==(e=h.global)?void 0:e.secondsPlayed,"seconds"),m=La.a.duration(null==(t=h.thisRun)?void 0:t.secondsPlayed,"seconds"),A=La.a.duration(null==(n=h.global)?void 0:n.thisWorldSecondsPlayed,"seconds"),y="untracked"==(null==(r=h.global)?void 0:r.activeSecondsPlayed)?null:Bn(La.a.duration(null==(i=h.global)?void 0:i.activeSecondsPlayed,"seconds")),p="untracked"==(null==(a=h.thisRun)?void 0:a.activeSecondsPlayed)?null:Bn(La.a.duration(null==(u=h.thisRun)?void 0:u.activeSecondsPlayed,"seconds")),v=Bn(La.a.duration(h.global.thisWorldActiveSecondsPlayed,"seconds")),b=La.a.duration(null!=(c=Date.now()-(null==(l=h.global)?void 0:l.startTimestamp))?c:0),j=La.a.duration(null!=(s=Date.now()-(null==(f=h.thisRun)?void 0:f.startTimestamp))?s:0),O=La.a.duration(null!=(d=Date.now()-h.global.thisWorldStartTimestamp)?d:0),k=ic(h),x=ac(h),w=uc(h),C=qt(h),S=Kt(h),E=function(e){var t=e.currentChallengeId;if(t)return wl.getById(t)}(h),R=h.primarySchool+" - "+h.primaryElement,B=Object(o.useMemo)((function(){return E&&Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:2,children:"Current challenge:"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:E.getName()})]})}),[E]),T=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:2,children:"Primary school and element:"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:R})]})}),[R]),D=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:2,children:"In-game time played (total):"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],numberOfLines:3,children:Bn(g)})]})}),[Bn(g)]),P=Object(o.useMemo)((function(){return k>0&&Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"In-game time played (this world):"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:Bn(A)})]})}),[k,Bn(A)]),I=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"In-game time played (this run):"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:Bn(m)})]})}),[Bn(m)]),_=Object(o.useMemo)((function(){return null!=y&&Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"Real world time played (total):"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:y})]})}),[y]),N=Object(o.useMemo)((function(){return k>0&&Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"Real world time played (this world):"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:v})]})}),[k,v]),F=Object(o.useMemo)((function(){return null!=p&&Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"Real world time played (this run):"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:p})]})}),[p]),L=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"Real world time since starting the game:"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:Bn(b)})]})}),[Bn(b)]),Y=Object(o.useMemo)((function(){return k>0&&Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"Real world time since starting this world:"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:Bn(O)})]})}),[k,Bn(O)]),V=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:3,children:"Real world time since starting this run:"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:Bn(j)})]})}),[Bn(j)]),U=Object(o.useMemo)((function(){return k>0&&Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:2,children:"Total times world created:"}),Object(Wn.jsx)(zn,{style:[xh.valueText,xh.valueTextLong],children:Mn(k)})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{style:xh.captionText,numberOfLines:2,children:"World modifiers:"}),Object(Wn.jsxs)(zn,{style:[xh.valueText,xh.valueTextLong],children:["Boon ",Mn(x)," / Diff"," ",Mn(w)]})]})]})}),[k,x,w]),Q=Object(o.useMemo)((function(){return Object(Wn.jsxs)(Wn.Fragment,{children:[Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"Total times retired:"}),Object(Wn.jsx)(zn,{style:xh.valueText,children:h.global.totalTimesResetted})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"Global research multiplier:"}),Object(Wn.jsxs)(zn,{style:xh.valueText,children:[Mn(C,{showDecimals:!0}),"x"]})]}),Object(Wn.jsxs)(M.default,{style:xh.row,children:[Object(Wn.jsx)(zn,{children:"Global production multiplier:"}),Object(Wn.jsxs)(zn,{style:xh.valueText,children:[Mn(S,{showDecimals:!0}),"x"]})]})]})}),[h.global.totalTimesResetted,C,S]);return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{children:[B,T,D,P,I,_,N,F,L,Y,V,U,Q]})}),[B,T,D,P,I,_,N,F,L,Y,V,U,Q])}function kh(){var e=Object(o.useContext)(re),t=uh.Basic.getAll().filter((function(t){return t.isUnlocked(e)})).length>0;return Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:xh.container,children:[Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{accessibilityRole:"header",children:"Stats"}),Object(Wn.jsx)(Oh,{})]}),Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{accessibilityRole:"header",children:"Schools"}),Object(Wn.jsx)(bh,{})]}),Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{accessibilityRole:"header",children:"Storylines"}),Object(Wn.jsx)(jh,{})]}),t&&Object(Wn.jsxs)(Cc,{children:[Object(Wn.jsx)(R.Card.Title,{accessibilityRole:"header",children:"Secrets"}),Object(Wn.jsx)(fh,{secretType:oh.Basic})]})]})}),[t])}var xh=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},schoolElementContainer:{margin:8,marginBottom:24},row:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4},insideBlock:{marginTop:16},valueText:{minWidth:60,textAlign:"right",marginLeft:8},valueTextLong:{minWidth:112},storylineContainer:{marginTop:8},captionText:{flex:1}});function wh(){return Object(Wn.jsx)(M.default,{style:Ch.container,children:Object(Wn.jsx)(Ji,{area:"Strengthening"})})}var Ch=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"}});function Sh(){var e,t=Object(o.useContext)(re),n=zu(t),r=!Object.values(jt("Upgrades")).map((function(e){return Object.values(e)})).flat().some((function(e){return e.isVisible(t)})),i=r&&!["Enjoy basking in the glory of the institution you have built","You have completed the demo! Please purchase the full game to continue, or retire to start again","Explore the Garden of Creation","Defeat the Creator","Win the Tournament of Magic","Explore the Wizard's Arena"].includes(null!=(e=null==n?void 0:n.description)?e:""),a=Object(o.useMemo)((function(){return i?"You have purchased all the upgrades available to you! But you may find more if you make progress in Exploration...":"You have purchased all the upgrades available to you!"}),[i]);return Object(Wn.jsxs)(M.default,{style:Eh.container,children:[r&&Object(Wn.jsx)(M.default,{style:Eh.hintWarningContainer,children:Object(Wn.jsx)(zn,{style:Eh.hintWarningText,children:a})}),Object(Wn.jsx)(Ji,{area:"Upgrades"})]})}var Eh=C.default.create({container:{flex:1,alignItems:"stretch",justifyContent:"flex-start",width:"100%"},hintWarningContainer:{marginTop:16},hintWarningText:{fontStyle:"italic"}});function Mh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Rh=function(e){No()(n,e);var t=Mh(n);function n(e){var r;return Y()(this,n),(r=t.call(this,e)).state={hasError:!1,error:null},r}return U()(n,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?this.props.errorFallback:this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(i.a.Component);function Bh(){return null}var Th=n(580);function Dh(){return Object(Th.useKeepAwake)(),null}function Ph(){return null}function Ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}O.default.allowRTL(!1);var Nh={hpBarForeground:"#f00",hpBarBackground:"#800",progressBar:"#07f",background:"#fff",disabled:"#eee",grey0:"#333",grey1:"#444",grey2:"#666",grey3:"#888",grey4:"#ccc",grey5:"#eee",cappedResource:"#00c",warning:"#e90"},Fh={divider:C.default.hairlineWidth<1?"#666":"rgba(255, 255, 255, 0.12)",disabled:"#363636",grey5:"#303030",grey4:"#444",grey3:"#666",grey2:"#888",grey1:"#ccc",grey0:"#eee",background:"#222",hpBarForeground:"#a00",hpBarBackground:"#500",progressBar:"#06c",cappedResource:"#bbf",error:"#f00"},Lh={Default:{lightColors:_h({},Nh),darkColors:_h({primary:"#247"},Fh)},Fire:{lightColors:_h({primary:si("light",kt.Fire)},Nh),darkColors:_h({primary:si("dark",kt.Fire)},Fh)},Earth:{lightColors:_h({primary:si("light",kt.Earth)},Nh),darkColors:_h({primary:si("dark",kt.Earth)},Fh)},Water:{lightColors:_h({primary:si("light",kt.Water)},Nh),darkColors:_h({primary:si("dark",kt.Water)},Fh)},Air:{lightColors:_h({primary:si("light",kt.Air)},Nh),darkColors:_h({primary:si("dark",kt.Air)},Fh)},Nature:{lightColors:_h({primary:si("light",kt.Nature)},Nh),darkColors:_h({primary:si("dark",kt.Nature)},Fh)},Lightning:{lightColors:_h({primary:si("light",kt.Lightning)},Nh),darkColors:_h({primary:si("dark",kt.Lightning)},Fh)},Darkness:{lightColors:_h({primary:si("light",kt.Darkness)},Nh),darkColors:_h({primary:si("dark",kt.Darkness)},Fh)}};var Yh={};function Vh(){var e=Object(R.useTheme)(),t=Object(o.useContext)(re),n=Object(o.useMemo)((function(){var e,n;return{lightColors:null==Lh||null==(e=Lh[("no"!=t.global.overrideElementDisplay?t.global.overrideElementDisplay:t.primaryElement)||"Default"])?void 0:e.lightColors,darkColors:null==Lh||null==(n=Lh[("no"!=t.global.overrideElementDisplay?t.global.overrideElementDisplay:t.primaryElement)||"Default"])?void 0:n.darkColors,mode:t.global.themeMode}}),[Lh,t.global.overrideElementDisplay,t.primaryElement,t.global.themeMode]);return Object(o.useEffect)((function(){e.replaceTheme(n)}),[n]),null}function Uh(){var e=Object(R.useTheme)(),t=Object(o.useMemo)((function(){return{translucent:!0,backgroundColor:"transparent",barStyle:"light-content"}}),[]);return Object(Wn.jsxs)(M.default,{style:Jh.maxContainer,nativeID:e.theme.mode,children:[Object(Wn.jsx)(R.Header,{containerStyle:[Jh.headerContainer,{borderBottomColor:e.theme.colors.background}],statusBarProps:t,centerComponent:{text:"Welcome to Magic Research",style:{color:"#fff"},accessibilityRole:"header"}}),Object(Wn.jsx)(Xf,{}),Object(Wn.jsx)(x.default,{style:Jh.safeAreaContainer,children:Object(Wn.jsx)(M.default,{style:[Jh.biggerContainer,{backgroundColor:e.theme.colors.background}],children:Object(Wn.jsx)(M.default,{style:Jh.introContainer,children:Object(Wn.jsx)(w.default,{contentContainerStyle:Jh.container,children:Object(Wn.jsx)(Sf,{})})})})})]})}function Qh(e){var t,n=Object(E.default)(),r=n.height,i=n.width,a=Object(o.useContext)(re),u=Object(o.useRef)(a);u.current=a;var c=Object(o.useContext)(Ui),s=Object(o.useState)(!1),d=f()(s,2),h=d[0],A=d[1],y=Object(o.useState)("none"),p=f()(y,2),v=p[0],O=p[1],C=yi(0,i),T=[{name:"Campus",scrollable:!0,hideBottomResourceBar:!1,scrollView:!1},{name:"Research",scrollable:!0,hideBottomResourceBar:!1,scrollView:!0},{name:"Apprentices",scrollable:!0,hideBottomResourceBar:!0,scrollView:!1},{name:"Inventory",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Exploration",scrollable:!1,hideBottomResourceBar:!0,scrollView:!1},{name:"Upgrades",scrollable:!0,hideBottomResourceBar:!1,scrollView:!0},{name:"Creatures",scrollable:!0,hideBottomResourceBar:!1,scrollView:!0},{name:"Strengthen",scrollable:!0,hideBottomResourceBar:!1,scrollView:!0},{name:"Retirement",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Ending",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Creation",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Stats",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Bestiary",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Options",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"About",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Help",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0},{name:"Debug",scrollable:!0,hideBottomResourceBar:!0,scrollView:!0}],D=Object.fromEntries(T.map((function(e){return[e.name,e]}))),P=Object(o.useState)("Campus"),I=f()(P,2),_=I[0],N=I[1],F=Object(o.useState)([]),L=f()(F,2),Y=L[0],V=L[1],U=Object(o.useRef)(Y);U.current=Y;var Q=[_].concat(l()(Y.map((function(e){return e.section})))),G=Qi(c,"active_sections",Q),H=f()(G,2),W=(H[0],H[1]);Object(o.useEffect)((function(){W(Q)}),[JSON.stringify(Q)]),Object(o.useEffect)((function(){1==C.activeContentTabs&&V([]);var e=U.current.slice(0,C.activeContentTabs-1);V(function(e){for(var t in e)e[t].key=Number.parseInt(t)+1;return e}(e))}),[C.activeContentTabs]);var J=Object(o.useCallback)((function(e){if(U.current.find((function(t){return t.section==e})))V(U.current.filter((function(t){return t.section!=e})));else{for(var t=U.current.map((function(e){return e.key})),n=1;t.includes(n);)n++;var r=[].concat(l()(U.current),[{section:e,key:n}]);V(r.slice(0,C.activeContentTabs-1))}}),[V,JSON.stringify(C)]),z=Object(R.useTheme)(),Z=Object(o.useCallback)((function(e){"goToExploration"!=e||Q.includes("Exploration")?"goToEnding"!=e||Q.includes("Ending")?"closeAllMenus"==e&&(A(!1),O("none")):(N("Ending"),V([])):N("Exploration")}),[N,Q,V]),X=Object(o.useCallback)((function(e){var t=Sn(e);return t.forEach(Z),e.uiCommands=t.filter((function(e){return"goToExploration"!=e&&"goToEnding"!=e&&"closeAllMenus"!=e})),e}),[Z]);Object(o.useEffect)((function(){return Te("appUiCommand",(function(e){if(Sn(e).filter((function(e){return["goToExploration","goToEnding","closeAllMenus"].includes(e)})).length>0)return function(e){return X(e)}})),function(){return De("appUiCommand")}}),[X]);var q=Object(o.useCallback)((function(){A(!h),O("none")}),[h]),K=Object(o.useCallback)((function(){O("event"!==v?"event":"none"),A(!1)}),[v]),$=Object(o.useCallback)((function(){O("spell"!==v?"spell":"none"),A(!1)}),[v]),ee=Object(o.useCallback)((function(e){N(e),A(!1),O("none")}),[N]),te=Object.values(a.eventOccurrences).filter((function(e){return e.currentMessageId&&!$e(e.currentMessageId).isTerminal()&&$e(e.currentMessageId).isActionable(a,e.params)})).length;Object(o.useEffect)((function(){N("Campus"),V([])}),[a.global.totalTimesResetted]);var ne=!C.wideLayout&&!(null!=(t=D[Q[0]])&&t.hideBottomResourceBar),oe=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:Jh.centerText,children:Object(Wn.jsx)(R.Text,{accessibilityRole:"header",style:{color:"#fff"},children:1==Q.length?Q[0]:"Magic Research"})})}),[Q.join(),z]),ie=Object(o.useRef)(new b.default.Value(ne?.5:0)).current;Object(o.useEffect)((function(){ne?b.default.timing(ie,{toValue:1,duration:150,useNativeDriver:!0}).start():b.default.timing(ie,{toValue:0,duration:150,useNativeDriver:!0}).start()}),[ne]);for(var ae=a.global.enableSwiping,ue=Object(o.useCallback)((function(){ae&&(h?A(!1):"none"===v&&O("spell"))}),[h,A,v,O,ae]),le=Object(o.useCallback)((function(){ae&&("none"!=v?O("none"):h||C.showMenu||A(!0))}),[h,A,v,O,ae]),se=[],de=[],ge=function(){var e=mi(ue,le),t=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),n=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(e,t)}),[e,t]),r=mi(ue,le),i=Object(o.useMemo)((function(){return B.Gesture.Native()}),[]),a=Object(o.useMemo)((function(){return B.Gesture.Simultaneous(r,i)}),[r,i]);se.push(n),de.push(a)},me=0;me<1;me++)ge();var Ae=Object.fromEntries(T.map((function(e){return[e.name,Object(o.useRef)()]}))),ye=Qi(c,"mainScrollPositions",{}),pe=f()(ye,2),ve=pe[0],be=pe[1],je=Object(o.useMemo)((function(){return Object.fromEntries(T.map((function(e){return[e.name,function(t){var n=t.nativeEvent.contentOffset.y;ve[e.name]=n,be(ve)}]})))}),[]);Object(o.useEffect)((function(){for(var e of Q){var t,n,r,o;if(null==(t=D[e])||!t.scrollable)return;if(!k.default.select({default:!0,web:!1}))return;null==(n=Ae[e])||null==(r=n.current)||r.scrollTo({y:null!=(o=null==ve?void 0:ve[e])?o:0,animated:!1})}}),[Q.join(",")]);var Oe=a.global.enableBottomMenu,ke=a.global.leftHandedMode,xe=a.global.putCastSpellOnBottomMenu;function we(e,t,n){return Object(Wn.jsx)(M.default,{style:n!=t&&{display:"none"},children:Object(Wn.jsx)(As,{isVisible:n==t,children:e})})}var Ce=Object(o.useMemo)((function(){for(var e=[],t=0;t<C.activeContentTabs;t++)e.push(t);return e}),[C.activeContentTabs]),Se=Object(o.useMemo)((function(){var e=1;return Object(Wn.jsx)(M.default,{accessibilityElementsHidden:h||"none"!=v,importantForAccessibility:h||"none"!=v?"no-hide-descendants":"auto",style:{flex:1,flexDirection:"row",alignItems:"stretch",justifyContent:"space-evenly"},children:Ce.map((function(t){var n,r,o,i,a,u;if(1==C.activeContentTabs&&t>0)return null;var c=0==t?_:null!=(n=null==(r=Y[t-1])?void 0:r.section)?n:"-",l=0==t?0:null==Y||null==(o=Y[t-1])?void 0:o.key;if(void 0===l){for(;Y.find((function(t){return t.key==e}));)e++;l=e,e++}var s=Y.length>0,f=Object(Wn.jsxs)(w.default,{ref:Ae[c],style:Jh.mainContainer,onScroll:je[c],contentContainerStyle:"Inventory"!=c&&Jh.container,children:[we(Object(Wn.jsx)(Wd,{}),"Research",c),we(Object(Wn.jsx)(Wf,{}),"Inventory",c),we(Object(Wn.jsx)(Sh,{}),"Upgrades",c),we(Object(Wn.jsx)(kh,{}),"Stats",c),we(Object(Wn.jsx)(Gu,{}),"Bestiary",c),we(Object(Wn.jsx)(Mc,{}),"Creatures",c),we(Object(Wn.jsx)(wh,{}),"Strengthen",c),we(Object(Wn.jsx)(eh,{}),"Retirement",c),we(Object(Wn.jsx)(Sl,{}),"Ending",c),we(Object(Wn.jsx)(jc,{}),"Creation",c),we(Object(Wn.jsx)(Pd,{}),"Options",c),we(Object(Wn.jsx)(kf,{}),"Help",c),we(Object(Wn.jsx)(br,{}),"About",c),"Debug"===c&&Object(Wn.jsx)(kl,{})]}),d=Object(Wn.jsx)(M.default,{style:Jh.mainContainer,children:Object(Wn.jsx)(As,{isVisible:"Exploration"==c,children:Object(Wn.jsx)(df,{})})});return Object(Wn.jsx)(Mi.Provider,{value:t<C.activeContentTabs,children:Object(Wn.jsxs)(M.default,{style:[s&&{marginHorizontal:4,borderWidth:1,borderColor:z.theme.colors.divider},{flex:1,display:"-"==c?"none":void 0}],children:[s&&Object(Wn.jsxs)(M.default,{style:[{height:56,paddingVertical:8,paddingHorizontal:16,flexDirection:"row",alignItems:"center",borderBottomWidth:1,borderBottomColor:z.theme.colors.divider}],children:[Object(Wn.jsx)(M.default,{style:{flex:1},children:Object(Wn.jsx)(zn,{h2:!0,children:c})}),t>0&&Object(Wn.jsx)(M.default,{style:{flexDirection:"row",alignItems:"center"},children:Object(Wn.jsx)(g.default,{name:"close",size:20,color:z.theme.colors.black,onPress:function(){return J(c)},style:{marginLeft:8},accessibilityRole:"button",accessibilityLabel:"Close Section"})})]}),Object(Wn.jsx)(M.default,{style:[{flex:1},!(null!=(u=D[c])&&u.scrollView)&&{display:"none"}],children:Object(Wn.jsx)(B.GestureDetector,{gesture:null==se?void 0:se[l],children:f},"mainGesture")}),Object(Wn.jsx)(M.default,{style:[Jh.mainContainer,"Campus"!==c&&{display:"none"}],children:Object(Wn.jsx)(As,{isVisible:"Campus"==c,children:Object(Wn.jsx)($u,{onSwipeLeft:ue,onSwipeRight:le})})}),Object(Wn.jsx)(M.default,{style:[Jh.mainContainer,"Apprentices"!==c&&{display:"none"}],children:Object(Wn.jsx)(As,{isVisible:"Apprentices"==c,children:Object(Wn.jsx)(fa,{onSwipeLeft:ue,onSwipeRight:le})})}),Object(Wn.jsx)(M.default,{style:[Jh.mainContainer,"Exploration"!==c&&{display:"none"}],children:Object(Wn.jsx)(B.GestureDetector,{gesture:de[l],children:d},"explorationGesture")})]},null!=(a=l)?a:t)},null!=(i=l)?i:t)}))})}),[z,h,v,Y,Ce,_,J]),Ee=Object(o.useCallback)((function(){return h?(A(!1),!0):"none"!=v&&(O("none"),!0)}),[h,v,A,O]);Object(o.useEffect)((function(){var e=j.default.addEventListener("hardwareBackPress",Ee);return function(){return e.remove()}}),[Ee]);var Me=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Jh.biggerContainer,{backgroundColor:z.theme.colors.background}],onAccessibilityEscape:h||"none"!=v?Ee:void 0,children:[Object(Wn.jsxs)(M.default,{style:Jh.horizontalContainer,children:[Object(Wn.jsx)(M.default,{style:Jh.webMenuContainer,accessibilityElementsHidden:h||"none"!=v,importantForAccessibility:h||"none"!=v?"no-hide-descendants":"auto",children:Object(Wn.jsx)(xd,{visible:!0,pinnedSections:Y.map((function(e){return e.section})),onPressFavorite:J,onNavigationPress:ee,onSwipeLeft:ue,onSwipeRight:le})}),Se,C.showSpellMenu?Object(Wn.jsx)(M.default,{style:Jh.webRightMenuContainer,accessibilityElementsHidden:h||"none"!=v,importantForAccessibility:h||"none"!=v?"no-hide-descendants":"auto",children:Object(Wn.jsx)(nh,{visible:!0,onSwipeLeft:ue,onSwipeRight:le,favoritesOnBottom:!1})}):Object(Wn.jsx)(rh,{visible:"spell"===v,onBackgroundPress:$,onSwipeLeft:ue,onSwipeRight:le,favoritesOnBottom:!1}),C.showEventsMenu?Object(Wn.jsx)(M.default,{style:Jh.webRightMenuContainer,children:Object(Wn.jsx)(w.default,{children:Object(Wn.jsx)(Pl,{onSwipeLeft:ue,onSwipeRight:le})})}):Object(Wn.jsx)(_l,{visible:"event"===v,onBackgroundPress:K,onSwipeLeft:ue,onSwipeRight:le})]}),Object(Wn.jsx)(ud,{})]})}),[z,JSON.stringify(C),r,v,Se,JSON.stringify(Y),Ee]),Re=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:[Jh.biggerContainer,{backgroundColor:z.theme.colors.background}],onAccessibilityEscape:h||"none"!=v?Ee:void 0,children:[Object(Wn.jsxs)(M.default,{style:["web"===k.default.OS?{height:r-72}:{flex:1},Jh.mainContainerPhone],children:[Object(Wn.jsxs)(M.default,{style:{flex:1},children:[Se,Object(Wn.jsx)(As,{isVisible:"spell"===v,children:Object(Wn.jsx)(rh,{visible:"spell"===v,onBackgroundPress:$,onSwipeLeft:ue,onSwipeRight:le,favoritesOnBottom:Oe&&xe})}),Object(Wn.jsx)(As,{isVisible:"event"===v,children:Object(Wn.jsx)(_l,{visible:"event"===v,onBackgroundPress:K,onSwipeLeft:ue,onSwipeRight:le})})]}),ne&&Object(Wn.jsxs)(b.default.View,{style:[{opacity:ie,borderTopWidth:1,borderTopColor:z.theme.colors.divider}],children:[Object(Wn.jsx)(M.default,{style:Jh.accessibilityHidden,accessible:!0,accessibilityLabel:"Resources",accessibilityRole:"header",accessibilityElementsHidden:!1}),Object(Wn.jsx)(af,{})]}),Oe&&Object(Wn.jsxs)(Wn.Fragment,{children:[ke&&xe&&Object(Wn.jsx)(M.default,{style:{left:-46,bottom:-110,position:"absolute",zIndex:120},children:Object(Wn.jsx)(ji,{accessibilityLabel:"Cast Spell",hitSlop:{top:50,left:20,bottom:20,right:50},onPressIn:$,onPress:function(){},enableAutoRepress:!1,containerStyle:{borderTopRightRadius:100,width:144,height:168},buttonStyle:{paddingRight:92,paddingTop:92,paddingLeft:4,borderTopRightRadius:100,borderTopWidth:2,borderRightWidth:2,borderColor:z.theme.colors.divider,width:144,height:76},icon:Object(Wn.jsx)(m.default,{style:{position:"relative",left:50,bottom:62,width:24,height:24,overflow:"visible"},name:"magic-wand",size:24,color:"#fff"})})}),Object(Wn.jsx)(M.default,{style:{borderTopWidth:1,borderTopColor:z.theme.colors.divider},children:Object(Wn.jsx)(nd,{onNavigationPress:ee,onSpellMenuPress:$,selected:Q[0],leftHanded:ke,showCastSpellButton:xe})}),!ke&&xe&&Object(Wn.jsx)(M.default,{style:{right:-144,bottom:-110,position:"absolute",zIndex:120},children:Object(Wn.jsx)(ji,{accessibilityLabel:"Cast Spell",hitSlop:{top:50,left:50,bottom:20,right:20},onPressIn:$,onPress:function(){},enableAutoRepress:!1,containerStyle:{borderTopLeftRadius:100,width:240,height:168},buttonStyle:{paddingLeft:92,paddingTop:92,paddingRight:4,borderTopLeftRadius:100,borderTopWidth:2,borderLeftWidth:2,borderColor:z.theme.colors.divider,width:144,height:76},icon:Object(Wn.jsx)(m.default,{style:{position:"relative",right:50,bottom:62,width:24,height:24,overflow:"visible"},name:"magic-wand",size:24,color:"#fff"})})})]}),Object(Wn.jsx)(As,{isVisible:h,children:Object(Wn.jsx)(wd,{visible:h,pinnedSections:Y.map((function(e){return e.section})),onPressFavorite:J,onBackgroundPress:q,onNavigationPress:ee,onSwipeLeft:ue,onSwipeRight:le})})]}),Object(Wn.jsx)(ud,{})]})}),[ie,z,h,Se,q,ee,$,K,r,ue,le,Oe,xe,ke,Ee,JSON.stringify(Y)]),Be=Object(o.useMemo)((function(){return[Jh.headerContainer,{borderBottomColor:z.theme.colors.background}]}),[z]),Pe=Object(o.useMemo)((function(){return{translucent:!0,backgroundColor:"transparent",barStyle:"light-content"}}),[]),Ie=Object(o.useMemo)((function(){return Object(Wn.jsx)(S.default,{accessibilityLabel:"Menu",accessibilityRole:"button",onPressIn:q,hitSlop:{top:20,left:20,bottom:20,right:20},children:Object(Wn.jsx)(g.default,{name:"menu",size:24,color:"#fff"})})}),[q]),_e=Object(o.useContext)(Yl),Ne=Object(o.useCallback)((function(){if(Q.includes("Exploration")){var e=ce(u.current,"combat_paused_magic_tap");u.current.apply((function(t){return e?he("combat_paused_magic_tap")(t):fe("combat_paused_magic_tap")(t)})),_e.announceForAccessibility(e?"Resuming Exploration":"Pausing Exploration")}}),[_e,Q.join()]),Fe=Object(o.useMemo)((function(){return Object(Wn.jsxs)(M.default,{style:Jh.rightHeaderContainer,children:[!(Oe&&xe)&&Object(Wn.jsx)(S.default,{style:Jh.rightHeaderIcon,onPressIn:$,accessibilityLabel:"Cast Spell",accessibilityRole:"button",hitSlop:{top:20,left:20,bottom:20,right:20},children:Object(Wn.jsx)(m.default,{name:"magic-wand",size:24,color:"#fff"})}),Object(Wn.jsxs)(S.default,{accessibilityLabel:"Events",accessibilityRole:"button",style:Jh.rightHeaderIcon,onPressIn:K,hitSlop:{top:20,left:10,bottom:20,right:20},children:[Object(Wn.jsx)(g.default,{name:"notifications",size:24,color:"#fff"}),te>0&&Object(Wn.jsx)(R.Badge,{value:te,status:"error",containerStyle:Jh.notificationsBadge})]})]})}),[K,te,Oe,xe]);return Object(o.useMemo)((function(){return C.wideLayout?Object(Wn.jsxs)(B.GestureHandlerRootView,{style:[Jh.maxContainer,{backgroundColor:z.theme.colors.background}],onMagicTap:Ne,children:[Object(Wn.jsx)(ad,{setPlayerState:e.setPlayerState,onLoadingProgress:e.onLoadingProgress}),Object(Wn.jsx)(R.Header,{containerStyle:Be,statusBarProps:Pe,leftComponent:void 0,centerComponent:oe,rightComponent:C.showEventsMenu?void 0:Object(Wn.jsxs)(M.default,{style:Jh.rightHeaderContainer,children:[!C.showSpellMenu&&Object(Wn.jsx)(S.default,{style:Jh.rightHeaderIcon,onPressIn:$,accessibilityLabel:"Cast Spell",accessibilityRole:"button",hitSlop:{top:20,left:20,bottom:20,right:20},children:Object(Wn.jsx)(m.default,{name:"magic-wand",size:24,color:"#fff"})}),Object(Wn.jsxs)(S.default,{style:Jh.rightHeaderIcon,onPressIn:K,accessibilityLabel:"Events",accessibilityRole:"button",hitSlop:{top:20,left:10,bottom:20,right:20},children:[Object(Wn.jsx)(g.default,{name:"notifications",size:24,color:"#fff"}),te>0&&Object(Wn.jsx)(R.Badge,{value:te,status:"error",containerStyle:Jh.notificationsBadge})]})]})}),Object(Wn.jsxs)(x.default,{onMagicTap:Ne,style:Jh.safeAreaContainer,children:[Object(Wn.jsx)(Fl,{}),Me]})]}):Object(Wn.jsxs)(B.GestureHandlerRootView,{style:[Jh.maxContainer,{backgroundColor:z.theme.colors.background}],onMagicTap:Ne,children:[Object(Wn.jsx)(ad,{setPlayerState:e.setPlayerState,onLoadingProgress:e.onLoadingProgress}),Object(Wn.jsx)(R.Header,{containerStyle:Be,statusBarProps:Pe,leftComponent:Ie,centerComponent:oe,rightComponent:Fe}),Object(Wn.jsxs)(x.default,{onMagicTap:Ne,style:Jh.safeAreaContainer,children:[Object(Wn.jsx)(Fl,{}),Re]})]})}),[e.setPlayerState,e.onLoadingProgress,q,$,K,Se,te,h,v,ee,JSON.stringify(C),r,ie,z,Re,Me,Be,Pe,Ie,Fe,Ne])}function Gh(e){var t=Object(R.useTheme)();return Object(Wn.jsxs)(M.default,{style:[Jh.offlineProgressContainer,{backgroundColor:t.theme.colors.background}],children:[Object(Wn.jsx)(v.default,{size:"large"}),Object(Wn.jsxs)(R.Text,{children:["Warping through time..."," ",Mn(e.currentTicks,{showDecimals:!1})," /"," ",Mn(e.totalTicks,{showDecimals:!1})]})]})}function Hh(){var e,t,n=Object(o.useState)((function(){return G(ne)})),r=f()(n,2),i=r[0],a=r[1],c=Object(o.useState)({}),l=f()(c,2),s=l[0],d=l[1],h=Object(o.useState)(!1),g=f()(h,2),m=g[0],v=g[1],b=Object(o.useState)(0),j=f()(b,2),O=j[0],w=j[1],C=Object(o.useState)(0),S=f()(C,2),B=S[0],P=S[1],I=Object(o.useCallback)((function(e,t){P(e),w(t),v(e!=t)}),[]),_=Object(o.useMemo)((function(){return{getUIState:function(e){return null==s?void 0:s[e]},setUIState:function(e,t){s[e]=t,d(s)}}}),[s,d]),F=Object(o.useState)({}),L=f()(F,2),Y=L[0],V=L[1],U=Object(o.useRef)(Y);U.current=Y;var H=Object(o.useCallback)((function(e,t,n,r){var o=Object.assign({},U.current);o[e]||(o[e]={content:t,position:n,postMeasurementId:1,measurementId:0,mouseEnterTimestamp:0,mouseLeaveTimestamp:0}),o[e].content=t,o[e].position=n,null!=r&&(o[e].postMeasurementId=r),V(o)}),[V]),W=Object(o.useCallback)((function(e){var t=Object.assign({},U.current);null!=t[e]&&(t[e].content=null,V(t))}),[V]),J=Object(o.useCallback)((function(e){var t=U.current;null!=t[e]&&(delete t[e],delete U.current[e],V(Object.assign({},t)))}),[V]),X=Object(o.useCallback)((function(e){var t;if(null!=(t=U.current)&&t[e]){var n=Object.assign({},U.current);n[e].mouseLeaveTimestamp=Date.now(),V(n)}}),[V]),q=Object(o.useCallback)((function(e,t){var n=Object.assign({},U.current);n[e]||(n[e]={content:null,position:{containerWidth:1},postMeasurementId:1,measurementId:0,mouseEnterTimestamp:0,mouseLeaveTimestamp:0}),n[e].measurementId=t,n[e].mouseEnterTimestamp=Date.now(),V(n)}),[V]),K=null;for(var $ in Y)if(Y[$].mouseEnterTimestamp>Y[$].mouseLeaveTimestamp&&Y[$].measurementId===Y[$].postMeasurementId&&null!=Y[$].content){K=Y[$];break}var ee=Object(o.useMemo)((function(){var e,t,n;return{tooltip:null==(e=K)?void 0:e.content,position:null!=(t=null==(n=K)?void 0:n.position)?t:{containerWidth:1}}}),[null==(e=K)?void 0:e.content,null==(t=K)?void 0:t.position]),te=Object(o.useMemo)((function(){return{setTooltip:H,clearTooltip:W,onMouseLeave:X,onMouseEnter:q,onUnmountTooltip:J}}),[H,W,X,q,J]),oe=Object(o.useState)(!0),ie=f()(oe,2),ae=ie[0],ue=ie[1],ce=Object(o.useState)(!1),le=f()(ce,2),se=le[0],fe=le[1],de=Object(o.useState)(!1),he=f()(de,2),ge=he[0],me=he[1],Ae=Object(o.useRef)(i);Ae.current=i;var ye=Object(o.useCallback)((function(e){var t,n=Ie(Ae.current,e);n.global.appVersionTimestamp=z()||0,n.global.appVersionString=null!=(t=Z())?t:"0.0.0",n.global.isFullVersionSave=!Q.isDemo(),a(n)}),[Ae,a]),pe=Object(o.useCallback)((function(e){a(e(Ae.current)),N()}),[Ae,a]),ve=Object(o.useMemo)((function(){return _h(_h({},i),{},{apply:ye,overwrite:pe})}),[i,ye,pe]);Object(o.useEffect)((function(){(function(){var e=u()((function*(){try{var e=yield function(){return pn.apply(this,arguments)}();a(e),N(),yield Ve(),ue(!1)}catch(t){console.error("Error loading data"),fe(!0)}}));return function(){return e.apply(this,arguments)}})()()}),[]);var be=Object(o.useState)(0),je=f()(be,2),Oe=je[0],ke=je[1];Object(o.useEffect)((function(){var e=function(){var e=u()((function*(){try{yield function(e){return vn.apply(this,arguments)}(i),Oe>0&&ke(0)}catch(e){console.error("Error saving data",e),Oe>0&&Oe<Math.floor(Ze(i)/5)-10?me(!0):Oe<=0&&ke(Math.floor(Ze(i)/5))}}));return function(){return e.apply(this,arguments)}}();ae||e()}),[Math.floor(Ze(i)/5),ae,Oe,ke]);var xe=Object(o.useTransition)(),we=f()(xe,2),Ce=(we[0],we[1]),Se=Object(o.useMemo)((function(){var e,t;return Object(R.createTheme)({lightColors:null==Lh||null==(e=Lh[("no"!=ve.global.overrideElementDisplay?ve.global.overrideElementDisplay:ve.primaryElement)||"Default"])?void 0:e.lightColors,darkColors:null==Lh||null==(t=Lh[("no"!=ve.global.overrideElementDisplay?ve.global.overrideElementDisplay:ve.primaryElement)||"Default"])?void 0:t.darkColors,mode:ve.global.themeMode})}),[Lh,ve.global.overrideElementDisplay,ve.primaryElement,ve.global.themeMode]),Ee=void 0==ve.primaryElement||void 0==ve.primarySchool,Me=Object(o.useState)(Ee),Re=f()(Me,2),Be=Re[0],Te=Re[1];Object(o.useEffect)((function(){Be!=Ee&&setTimeout((function(){return Te(Ee)}),0)}),[Be,Ee,Ce,Te]);var De=Object(E.default)(),Pe=De.height,_e=De.width,Ne=Object(o.useCallback)(u()((function*(){var e=yield wn(Ae.current);yield y.setStringAsync(e)})),[]),Fe=Object(o.useCallback)(u()((function*(){yield vc(Ae.current)})),[]),Le=Object(o.useCallback)(u()((function*(){var e=yield A.default.getItem("PlayerContextState");yield y.setStringAsync(null!=e?e:"null")})),[]),Ye=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:Jh.errorContainer,children:Object(Wn.jsxs)(M.default,{style:Jh.errorWrapper,children:[Object(Wn.jsx)(M.default,{style:Jh.errorHeader,children:Object(Wn.jsx)(R.Text,{h2:!0,children:"Something went very wrong!"})}),Object(Wn.jsx)(R.Text,{children:"It looks like an unexpected error happened while loading the game. Please try closing the app and opening it again. If the error persists, please contact magic.research.game@gmail.com and send your debug saved data for further support."}),Object(Wn.jsx)(R.Button,{onPress:Le,title:"Copy debug save data to clipboard",containerStyle:Jh.saveButton})]})})}),[Ne,Fe]),Ue=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:Jh.errorContainer,children:Object(Wn.jsxs)(M.default,{style:Jh.errorWrapper,children:[Object(Wn.jsx)(M.default,{style:Jh.errorHeader,children:Object(Wn.jsx)(R.Text,{h2:!0,children:"Something went wrong!"})}),Object(Wn.jsx)(R.Text,{children:"It looks like an unexpected error happened. Please try closing the app and opening it again. If the error persists, please contact magic.research.game@gmail.com and send your saved data for further support."}),Object(Wn.jsx)(R.Button,{onPress:Ne,title:"Copy savefile to clipboard",containerStyle:Jh.saveButton}),Object(Wn.jsx)(R.Button,{onPress:Fe,title:"Save to file",containerStyle:Jh.saveButton})]})})}),[Ne,Fe]),Qe=Object(o.useState)([]),Ge=f()(Qe,2),He=Ge[0],We=Ge[1],Je=Object(o.useMemo)((function(){return ve.global.wakeLock?Object(Wn.jsx)(Dh,{}):null}),[ve.global.wakeLock]),ze=Object(o.useRef)(He);ze.current=He;var Xe=Object(o.useMemo)((function(){return k.default.select({default:{announceForAccessibility:function(e){return p.default.announceForAccessibilityWithOptions(e,{queue:!1})}},web:{announceForAccessibility:function(e){var t,n={text:e,key:Math.random().toString()},r=null==(t=ze.current)?void 0:t[0];(null==r?void 0:r.text)==n.text?(We([]),setTimeout((function(){return We([n])}),100)):We([n])}}})}),[]),qe=Object(o.useState)("visible"),Ke=f()(qe,2),$e=Ke[0],et=Ke[1];Object(o.useEffect)((function(){if("web"==k.default.OS){var e=function(){et(document.visibilityState)};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}}}),[]),Object(o.useEffect)((function(){"web"==k.default.OS&&"visible"==$e&&JSON.stringify(yi(0,_e))==JSON.stringify(yi(0,_e+1))&&(window.resizeBy(1,0),window.resizeBy(-1,0))}),[$e]);var tt=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:[{flex:1},!m&&{display:"none"}],children:Object(Wn.jsx)(x.default,{style:[Jh.safeAreaContainer,Jh.centerAligned],children:Object(Wn.jsx)(Gh,{currentTicks:B,totalTicks:O})})})}),[B,O,m]),nt=Object(o.useMemo)((function(){return"web"===k.default.OS&&"visible"==$e&&Object(Wn.jsx)("div",{style:Jh.accessibilityView,"aria-live":"polite",role:"status",children:He.map((function(e){return Object(Wn.jsx)("div",{role:"none",children:Object(Wn.jsx)(R.Text,{children:e.text},e.key)},e.key)}))})}),[He.map((function(e){return e.key})).join(),$e]),rt=Object(o.useMemo)((function(){return Object(Wn.jsx)(M.default,{style:[{flex:1},m&&{display:"none"}],nativeID:Se.mode,children:Object(Wn.jsx)(As,{isVisible:!Be&&!m,children:Object(Wn.jsx)(Qh,{setPlayerState:a,onLoadingProgress:I})})})}),[m,Se.mode,Be,a,I]),ot=Object(o.useMemo)((function(){var e,t;return[{backgroundColor:"dark"===Se.mode?null==(e=Se.darkColors)?void 0:e.background:null==(t=Se.lightColors)?void 0:t.background},"web"===k.default.OS&&{height:Pe,flex:"auto"}]}),[Se,Pe]);return se?Ye:ge?Ue:ae||Ee!=Be?Object(Wn.jsx)(Rh,{errorFallback:Ue,children:Object(Wn.jsx)(Yl.Provider,{value:Xe,children:Object(Wn.jsx)(qf,{theme:Se})})}):Be?Object(Wn.jsx)(T.SafeAreaProvider,{initialMetrics:D.initialWindowMetrics,style:ot,children:Object(Wn.jsx)(R.ThemeProvider,{theme:Se,children:Object(Wn.jsx)(Rh,{errorFallback:Ue,children:Object(Wn.jsx)(Yl.Provider,{value:Xe,children:Object(Wn.jsx)(Si.Provider,{value:ee,children:Object(Wn.jsx)(Ei.Provider,{value:te,children:Object(Wn.jsx)(re.Provider,{value:ve,children:Object(Wn.jsxs)(Ui.Provider,{value:_,children:[Object(Wn.jsx)(Sd,{}),Object(Wn.jsx)(Bh,{}),Object(Wn.jsx)(Vh,{}),Je,Object(Wn.jsx)(Uh,{}),!ve.global.hideTooltips&&Object(Wn.jsx)(Ri,{})]})})})})})})})}):Object(Wn.jsx)(T.SafeAreaProvider,{initialMetrics:D.initialWindowMetrics,style:ot,children:Object(Wn.jsx)(R.ThemeProvider,{theme:Se,children:Object(Wn.jsx)(Rh,{errorFallback:Ue,children:Object(Wn.jsx)(Yl.Provider,{value:Xe,children:Object(Wn.jsx)(Si.Provider,{value:ee,children:Object(Wn.jsx)(Ei.Provider,{value:te,children:Object(Wn.jsx)(re.Provider,{value:ve,children:Object(Wn.jsxs)(Ui.Provider,{value:_,children:[Object(Wn.jsx)(Sd,{}),Object(Wn.jsx)(Bh,{}),Object(Wn.jsx)(Ph,{}),Object(Wn.jsx)(Xf,{}),Object(Wn.jsx)(Vh,{}),Je,nt,tt,rt,!ve.global.hideTooltips&&Object(Wn.jsx)(Ri,{})]})})})})})})})})}R.ThemeProvider.prototype.shouldComponentUpdate=function(e,t){return this.props.theme!=e.theme||JSON.stringify(this.state)!=JSON.stringify(t)},R.ThemeProvider.prototype.render=function(){var e=function(e,t){var n=JSON.stringify(e);return Yh[n]||(Yh[n]=t),Yh[n]}(this.state.theme,{theme:this.state.theme,updateTheme:this.updateTheme,replaceTheme:this.replaceTheme});return Object(Wn.jsx)(R.ThemeContext.Provider,{value:e,children:this.props.children})};var Wh="android"===k.default.OS?16:"web"===k.default.OS?8:0,Jh=C.default.create({headerContainer:{paddingTop:Wh},rightHeaderContainer:{flexDirection:"row"},rightHeaderIcon:{marginLeft:20},gestureRecognizer:{flex:1},safeAreaContainer:{flex:1,justifyContent:"center"},centerAligned:{alignItems:"center"},maxContainer:{flex:1,height:"100%"},biggerContainer:{flex:1,backgroundColor:"#fff"},mainContainerPhone:{overflow:"hidden"},introContainer:{flex:1,alignItems:"center"},horizontalContainer:{flexDirection:"row",alignItems:"stretch",overflow:"hidden",flex:1},mainContainer:{flex:1},webMenuContainer:{width:284,paddingRight:8},webRightMenuContainer:{width:300,paddingLeft:8},notificationsBadge:{position:"absolute",top:-8,right:-8},menuContainer:{position:"absolute"},container:{padding:8},centerText:{flex:1,justifyContent:"center",alignItems:"center"},offlineProgressContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},saveButton:{marginTop:8},errorContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},errorWrapper:{maxWidth:600,marginHorizontal:16},errorHeader:{marginBottom:8},accessibilityView:{height:0,width:0,overflow:"hidden",position:"absolute",left:100,top:100},accessibilityHidden:{width:1,height:1,position:"absolute",left:0,top:0},closeButtonInner:{paddingHorizontal:0,paddingVertical:0,height:32,width:32,borderRadius:16},pinButtonInner:{paddingHorizontal:0,paddingVertical:0,height:32,width:32}});function zh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Zh=function(e){No()(n,e);var t=zh(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return ce(e,"gather_iron_unlocked")}},{key:"isEnabled",value:function(e){return Gr(e,Nr.Iron)<Ur(e,Nr.Iron)}},{key:"getTags",value:function(){return[].concat(l()(Gc()(Vo()(n.prototype),"getTags",this).call(this)),[Ee.ManualGathering,Ee.Production,Nr.Iron])}},{key:"getName",value:function(){return"Gather Iron"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Gather}},{key:"getDisplayDescription",value:function(){return"Mine for iron."}},{key:"getBaseActionEffects",value:function(){return{iron:{value:.1}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).iron,{showDecimals:!0})+":iron:"}},{key:"getCost",value:function(e){return{resources:{},items:{}}}},{key:"doAction",value:function(e,t){return Wr(Nr.Iron,this.getActionEffects(t).iron)(t)}}]),n}(jo),Xh=Dn("gather_iron_unlocked",Qn("gather_iron_unlocked","The Quarry").setSimpleDescription('Your researcher calls your attention. "There is a place you should see", she exclaims, walking outside the campus. "Follow me." You do as instructed.\n    \nYou end up in what seems to be a fairly rocky cliff. However, you notice the rock in a wall shining a different color. "That\'s iron," your researcher says. "This is a sturdy metal. Not too useful for casting magic, but it could be great for buildings... or..."\n\nYou agree with her. Learning about this place for the first time, you thank the researcher. You\'ll be sure to come back prepared next time - this could be useful!\n\n**You unlocked the ability to gather iron!**').build(),[qe.EARLY_GAME],fe("gather_iron_unlocked"));Te("gather_iron_unlocked",(function(e){if(!ce(e,"gather_iron_unlocked")&&ce(e,"apprentice_dorm_event_triggered")&&Nt(e)>=5e3)return lt(Xh)}));var qh=new Zh;function Kh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var $h=new(function(e){No()(n,e);var t=Kh(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(){return!0}},{key:"isEnabled",value:function(e){return Gr(e,Nr.Mana)<Ur(e,Nr.Mana)}},{key:"getTags",value:function(){return[].concat(l()(Gc()(Vo()(n.prototype),"getTags",this).call(this)),[Ee.ManualGathering,Ee.Production,Nr.Mana])}},{key:"getName",value:function(){return"Gather Mana"}},{key:"getSubcategory",value:function(){return bo.Gather}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Focus your thoughts and gather mana. *Tip: You can press and hold buttons to auto-press them!*"}},{key:"getBaseActionEffects",value:function(){return{mana:{value:1}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).mana,{showDecimals:!0})+":mana:"}},{key:"getCost",value:function(e){return{resources:{},items:{}}}},{key:"doAction",value:function(e,t){return Wr(Nr.Mana,this.getActionEffects(t).mana)(t)}}]),n}(jo));function eg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var tg=function(e){No()(n,e);var t=eg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return ce(e,"gather_wood_unlocked")}},{key:"isEnabled",value:function(e){return Gr(e,Nr.Wood)<Ur(e,Nr.Wood)}},{key:"getTags",value:function(){return[].concat(l()(Gc()(Vo()(n.prototype),"getTags",this).call(this)),[Ee.ManualGathering,Ee.Production,Nr.Wood])}},{key:"getName",value:function(){return"Gather Wood"}},{key:"getSubcategory",value:function(){return bo.Gather}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Collect branches from the nearby forest."}},{key:"getBaseActionEffects",value:function(){return{wood:{value:1}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).wood,{showDecimals:!0})+":wood:"}},{key:"getCost",value:function(e){return{resources:{},items:{}}}},{key:"doAction",value:function(e,t){return Wr(Nr.Wood,this.getActionEffects(t).wood)(t)}}]),n}(jo),ng=Dn("gather_wood_unlocked",Qn("gather_wood_unlocked","Time to Look Outside").setSimpleDescription("Our studies of magic are starting to become more fruitful! With our recent advances, we are ready to start broadening our horizons. The campus is big, but there is only so much in it!\n    \nIt seems like there is a nearby forest where we may be able to find wood, which could help us develop our institution even further...\n\n**You can now gather:wood: Wood!**").build(),[qe.EARLY_GAME],fe("gather_wood_unlocked"));Te("gather_wood_unlocked",(function(e){return ce(e,"gather_wood_unlocked")||"Nature"!=e.primaryElement?!ce(e,"gather_wood_unlocked")&&Nt(e)>=500?lt(ng):void 0:fe("gather_wood_unlocked")}));var rg=new tg;function og(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ig=new(function(e){No()(n,e);var t=og(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return!0}},{key:"getName",value:function(){return"Hire Researcher"}},{key:"getArea",value:function(){return"Research"}},{key:"getDisplayDescription",value:function(){return"Hire a new researcher to gain magical experience faster."}},{key:"getDisplayEffect",value:function(){return"+1 Researcher"}},{key:"canAfford",value:function(e){return Gc()(Vo()(n.prototype),"canAfford",this).call(this,e)&&Gd(e)>e.research.totalResearchers}},{key:"getCost",value:function(e){var t=Ce([].concat(l()(this.getTags()),[Ee.CostScale]),e,1);return{resources:{Coins:250*Math.pow(1+t,e.research.totalResearchers)},items:{}}}},{key:"doAction",value:function(e,t){var n;return t=Wr(Nr.Coins,-(null!=(n=this.getCost(t).resources.Coins)?n:0))(t),Qd(1)(t)}}]),n}(jo));function ag(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ug=new(function(e){No()(n,e);var t=ag(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gr(e,Nr.TimePieces)>0&&Nt(e)>1e4}},{key:"getName",value:function(){return"Use Time Pieces (Warp)"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo["Use Time Pieces"]}},{key:"getDisplayDescription",value:function(){return"Use your time pieces to warp time, affecting every aspect of the game."}},{key:"getBaseActionEffects",value:function(){return{timePiecePerWarpedSec:{value:5,tags:[Ee.TimePiecePerWarpedSec]}}}},{key:"getDisplayEffect",value:function(e){var t;return"Warp time forward by "+Rn((null!=(t=this.getCost(e).resources["Time Pieces"])?t:1)/this.getActionEffects(e).timePiecePerWarpedSec,{shortForm:!1,showDecimals:!1})+" (Real World)"}},{key:"canAfford",value:function(e){return Gc()(Vo()(n.prototype),"canAfford",this).call(this,e)&&Gr(e,Nr.TimePieces)>=3e3}},{key:"getCost",value:function(e){return{resources:{"Time Pieces":3e3},items:{}}}},{key:"doAction",value:function(e,t){var n,r=null!=(n=this.getCost(t).resources["Time Pieces"])?n:1,o=r/this.getActionEffects(t).timePiecePerWarpedSec;return(t=Wr(Nr.TimePieces,-r)(t)).warpTimeSecs=o,t}}]),n}(jo));function cg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var lg=new(function(e){No()(n,e);var t=cg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"apprentice_dorm_unlocked")}},{key:"getBuildingName",value:function(){return"Apprentice Dorm"}},{key:"getArea",value:function(){return["Autocast","Campus"]}},{key:"getSubcategory",value:function(){return bo.Housing}},{key:"getDisplayDescription",value:function(){return"Housing for apprentices, which can help cast spells."}},{key:"getBaseActionEffects",value:function(){return{apprentices:{value:1}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).apprentices)+" Max Apprentices"}},{key:"getBaseResourceCost",value:function(){return{Coins:300,Wood:480,Stone:240}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.5,Wood:1.5,Stone:1.5}}}]),n}(Zo));xe([[Ee.Apprentice]],"ApprenticeDormApprentice",Oe.Addition,(function(e){return Go(e,lg)*lg.getActionEffects(e).apprentices}));var sg=Dn("apprentice_dorm_unlocked",Qn("apprentice_dorm_unlocked","Apprentices Need Sleep").setSimpleDescription('Your researcher walks up to you. She is together with a shaky individual, who seems to be barely breaking into adulthood and appears scared at your sight.\n\n"I have a great idea!", she says. "This is my cousin. He is a wizard-in-training... an apprentice wizard," she continues, while gazing at him, before looking at you once more.').addOption("Continue",Qn("apprentice_dorm_unlocked_1","Apprentices Need Sleep").setSimpleDescription('"It is a honor to meet you, headmaster," exclaims the apprentice, while bowing at you somewhat too deeply.\n\nThe researcher continues. "It\'d be great to have him stay here! He could help you cast spells and continue improving our campus. Besides, a magical institution makes no sense without people who\'d like to learn. What do you think?", she asks you.\n\nYou recall thinking about how tedious it was to cast spells. This could be a big help!').addOption("Continue",Qn("apprentice_dorm_unlocked_2","Apprentices Need Sleep").setSimpleDescription("\"There's just a little problem,\" the researcher continues. \"There is nowhere for him to sleep in! We'll need to build something.\"\n            \nYou saw it coming. Still, you can't wait - you've had enough casting *Create Pebble* manually. You reassure the researcher and her cousin that you will think about it, and you walk away, starting to picture what you would need to construct suitable housing for your first apprentice.\n\n**You can now build Apprentice Dorms!**").build(),fe("apprentice_dorm_unlocked")).build()).build(),[qe.EARLY_GAME],fe("apprentice_dorm_event_triggered"));Te("apprentice_dorm_event_triggered",(function(e){if(!ce(e,"apprentice_dorm_event_triggered")&&ce(e,"autocast_intro_triggered")&&Nt(e)>=3e3)return t=e,n=qe.EARLY_GAME,t.global.hideEventTags.includes(n)?function(e){return e=fe("apprentice_dorm_unlocked")(e),e=fe("apprentice_dorm_event_triggered")(e)}:lt(sg);var t,n}));var fg=Un("tournament_of_magic_intro","The Tournament of Magic",[qe.EARLY_GAME]);fg.setOnTrigger(fe("tournament_of_magic_intro_event_triggered")).createMessage().setSimpleDescription('Your researcher approaches you and mentions something to you.\n  \n"Headmaster, I think you may already be aware, but - now that we have a proper, true magical institution, we should start thinking about the *Tournament of Magic*." You are not sure of what she means by that, but she continues: "The Tournament of Magic is a competition between magical institutions. It is a major event in regards to the research of magic, and those who manage to compete in it - let alone the winner - are sure to get great fame and prosperity."\n\n"It could really take our school to new heights!", she exclaims.\n\nYou talk to her some more, and you start feeling like it is a great goal to have... though you know you are nowhere close to reaching it. At least for now...');var dg=fg.build();Te("tournament_of_magic_intro_event_triggered",(function(e){if(!ce(e,"tournament_of_magic_intro_event_triggered")&&ce(e,"autocast_unlocked")&&Nt(e)>=8e3)return lt(dg)}));var hg=Dn("autocast_unlocked",Qn("autocast_unlocked","The First Apprentice").setSimpleDescription('Construction for the first apprentice dorm is finished! You celebrate to a small audience. You notice the apprentice from before is still there. You approach him, though he still seems fearful and bows deeply.\n    \n"Is that... housing I could use?", he says, with a timid voice. You nod, and ask him if he\'d like to become your first apprentice. He shakes, visibly and clearly nervous.\n\n"That would be great... I-It\'s a honor, to be able to learn from one such as you, headmaster. I\'ll move in right away."\n\n**You have unlocked Apprentices! Apprentices can automatically cast spells for you after a set amount of time. You may manage them in the Apprentices section, in the left-hand-side menu.**').build(),[qe.EARLY_GAME],fe("autocast_unlocked"));Te("autocast_unlocked",(function(e){if(!ce(e,"autocast_unlocked")&&Go(e,lg)>0)return lt(hg)}));var gg=lg;function mg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ag=new(function(e){No()(n,e);var t=mg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"furnace_unlocked")}},{key:"getBuildingName",value:function(){return"Furnace"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Production}},{key:"getDisplayDescription",value:function(){return"An oven with a very hot flame. Useful for crafting."}},{key:"getBaseActionEffects",value:function(){return{wood:{value:3,tags:[Nr.Wood,Ee.Consumption]},temperature:{value:1,tags:[Nr.Temperature,Ee.Production]},temperatureCap:{value:500,tags:[Nr.Temperature,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(t.temperature,{showDecimals:!0})+":temperature:/sec, -"+Mn(t.wood,{showDecimals:!0})+":wood:/sec, +"+Mn(t.temperatureCap)+" Max:temperature:"}},{key:"canTurnOff",value:function(){return!0}},{key:"getBaseResourceCost",value:function(){return{Coins:1500,Stone:3e3,Iron:100}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Stone:1.3,Iron:1.3}}}]),n}(Zo));xe([[Ag.getId(),Nr.Temperature,Ee.Production]],"FurnaceFireTransform",Oe.Multiplier,(function(e){return e.primaryElement==kt.Fire?2:1})),zr.register(new Jr("Furnaces",(function(e){var t=Ho(e,Ag),n=Ag.getActionEffects(e),r=n.wood;return{Temperature:n.temperature*t,Wood:-r*t}}))),Te("furnace_cap_listener",(function(e){return function(e){return Qr(e)}}),(function(e){return Ho(e,Ag)})),xe([[Nr.Temperature,Ee.Cap]],"FurnaceTemperatureCap",Oe.Addition,(function(e){return Go(e,Ag)*Ag.getActionEffects(e).temperatureCap}));var yg=Dn("furnace_unlocked",Qn("furnace_unlocked","A Really Hot Oven").setSimpleDescription('You see your apprentice by the door of your room. You approach him and ask him what is wrong. He shakes a bit, but then finds courage and speaks.\n\n"I-I have been thinking about crafting, but it\'s very hard to shape metal right now," he says. "Maybe if we had a really hot flame, we would be able to be much more effective with crafting... maybe even make real weapons?"\n\nYou realize he has a point. You still don\'t know why your apprentice and your researcher are both eager to make weapons, but building a furnace could make it a lot easier to craft multiple types of items.\n\n**You can now build Furnaces!**').build(),[qe.EARLY_GAME],fe("furnace_unlocked"));Te("furnace_unlocked",(function(e){if(!ce(e,"furnace_unlocked")&&ir(e)&&Nt(e)>=13e3)return lt(yg)}));var pg=Ag;function vg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var bg=new(function(e){No()(n,e);var t=vg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"lumber_yard_unlocked")}},{key:"getBuildingName",value:function(){return"Lumber Yard"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Production}},{key:"getDisplayDescription",value:function(){return"Processes branches and trees, generating wood automatically."}},{key:"getBaseActionEffects",value:function(){return{wood:{value:1,tags:[Nr.Wood,Ee.Production]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).wood,{showDecimals:!0})+":wood:/sec"}},{key:"getBaseResourceCost",value:function(){return{Mana:200,Wood:25,Stone:10}}},{key:"getBaseResourceScale",value:function(){return{Mana:1,Wood:1.3,Stone:1.3}}}]),n}(Zo));zr.register(new Jr("LumberYards",(function(e){var t=Go(e,bg);return{Wood:bg.getActionEffects(e).wood*t}})));var jg=Dn("lumber_yard_unlocked",Qn("lumber_yard_unlocked","Wood Processing").setSimpleDescription("These trips to the forest are starting to get tedious. You are starting to wonder if there is a way you could make it easier on yourself.\n    \nPerhaps there is a way? Maybe we can reuse the wood we obtained to make something bigger? You get lost in thought as you walk back to campus.\n\nBy the time you arrive, you have figured it out. Lumber yards right at the edge of the forest. It can surely work!\n\n**You can now build Lumber Yards!**").build(),[qe.EARLY_GAME],fe("lumber_yard_unlocked"));Te("lumber_yard_unlocked",(function(e){return ce(e,"lumber_yard_unlocked")||e.primaryElement!==kt.Nature?!ce(e,"lumber_yard_unlocked")&&Gr(e,Nr.Wood)>=50?lt(jg):void 0:fe("lumber_yard_unlocked")}));var Og=bg;function kg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var xg=function(e){No()(n,e);var t=kg(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return this.getName()}},{key:"getUpgradeRequirements",value:function(){return[]}},{key:"getArea",value:function(){return"Upgrades"}},{key:"getCost",value:function(e){return{resources:{Monstium:this.getMonstiumCost()},items:this.getItemCost()}}},{key:"getItemCost",value:function(){return{}}},{key:"doAction",value:function(e,t){t=Wr(Nr.Monstium,-this.getMonstiumCost())(t);var n=this.getItemCost();for(var r in n)t=oo(tr(r),n[r],t);return fe("upgrade:"+this.getName())(t)}},{key:"isPurchased",value:function(e){return ce(e,"upgrade:"+this.getName())}},{key:"isVisibleExtraChecks",value:function(e){return!0}},{key:"isVisible",value:function(e){return!this.isPurchased(e)&&(!this.getUpgradeRequirements().some((function(t){return!t.isPurchased(e)}))&&!!this.isVisibleExtraChecks(e))}}]),n}(jo);function wg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Cg=new(function(e){No()(n,e);var t=wg(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Mana Crystals"}},{key:"getMonstiumCost",value:function(){return 3500}},{key:"getDisplayDescription",value:function(e){return"Unlock the ability to build Mana Crystals, which let you store more :mana: than Mana Shards."}},{key:"getDisplayEffect",value:function(e){return"Unlock Mana Crystals"}},{key:"getUpgradeRequirements",value:function(){return[]}}]),n}(xg));function Sg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Eg=new(function(e){No()(n,e);var t=Sg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||Cg.isPurchased(e)}},{key:"getBuildingName",value:function(){return"Mana Crystal"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Mana}},{key:"getDisplayDescription",value:function(){return"A larger version of a Mana Shard. Increases the amount of Mana you can store."}},{key:"getBaseActionEffects",value:function(){return{mana:{value:200,tags:[Nr.Mana,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).mana)+" Max:mana:"}},{key:"getBaseResourceCost",value:function(){return{Coins:1e4,Stone:8e3,Iron:1200}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Stone:1.3,Iron:1.3}}}]),n}(Zo));xe([[Nr.Mana,Ee.Cap]],"ManaCrystalCap",Oe.Addition,(function(e){return Go(e,Eg)*Eg.getActionEffects(e).mana})),Te("mana_crystal_cap_listener",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,Eg)}));var Mg=Eg;function Rg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Bg=new(function(e){No()(n,e);var t=Rg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"has_gathered_at_least_1_stone")&&ce(e,"has_gathered_at_least_1_water")}},{key:"getBuildingName",value:function(){return"Mana Spout"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Mana}},{key:"getDisplayDescription",value:function(){return"Automatically generate Mana and refill your supply."}},{key:"getBaseActionEffects",value:function(){return{mana:{value:.5,tags:[Nr.Mana,Ee.Production]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).mana,{showDecimals:!0})+":mana:/sec"}},{key:"getBaseResourceCost",value:function(){return{Stone:10,Water:2}}},{key:"getBaseResourceScale",value:function(){return{Stone:1.3,Water:1.3}}}]),n}(Zo));zr.register(new Jr("ManaSpout",(function(e){return{Mana:Go(e,Bg)*Bg.getActionEffects(e).mana}}))),Te("mana_spout_unlocked_1",(function(e){if(!ce(e,"has_gathered_at_least_1_stone")&&Gr(e,Nr.Stone)>=1)return fe("has_gathered_at_least_1_stone")})),Te("mana_spout_unlocked_2",(function(e){if(!ce(e,"has_gathered_at_least_1_water")&&Gr(e,Nr.Water)>=1)return fe("has_gathered_at_least_1_water")}));var Tg=Bg;function Dg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Pg=new(function(e){No()(n,e);var t=Dg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"mana_geyser_unlocked")}},{key:"getBuildingName",value:function(){return"Mana Geyser"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Mana}},{key:"getDisplayDescription",value:function(){return"A metal-reinforced building that produces mana."}},{key:"getBaseActionEffects",value:function(){return{mana:{value:2,tags:[Nr.Mana,Ee.Production]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).mana,{showDecimals:!0})+":mana:/sec"}},{key:"getBaseResourceCost",value:function(){return{Coins:600,Water:150,Iron:30}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Water:1.3,Iron:1.3}}}]),n}(Zo));zr.register(new Jr("ManaGeysers",(function(e){return{Mana:Go(e,Pg)*Pg.getActionEffects(e).mana}})));var Ig=Dn("mana_geyser_unlocked",Qn("mana_geyser_unlocked","Mana Geysers").setSimpleDescription("As you slowly start getting more and more iron, you think of a plan to improve on your Mana Spouts. You are thinking that, by adding iron, you should be able to create a structure that can produce mana at a much faster rate than a simple spout.\n    \nYou will definitely require a lot of iron, but it'll be worth it in the long run, you tell yourself. Mana is the cornerstone of magic!\n\n**You can now build Mana Geysers!**").build(),[qe.EARLY_GAME],fe("mana_geyser_unlocked"));Te("mana_geyser_unlocked",(function(e){if(!ce(e,"mana_geyser_unlocked")&&Gr(e,Nr.Iron)>=10&&Go(e,Tg)>=1)return lt(Ig)}));var _g=Pg;function Ng(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Fg=new(function(e){No()(n,e);var t=Ng(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"has_gathered_at_least_50_mana")}},{key:"getBuildingName",value:function(){return"Mana Shard"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Mana}},{key:"getDisplayDescription",value:function(e){var t="";return 0===Go(e,this)&&(t=" *Tip: You can get more :coins:Coins with the Illusion spell, Magic Show!*"),"Increase the amount of mana you can store."+t}},{key:"getBaseActionEffects",value:function(){return{mana:{value:100,tags:[Nr.Mana,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).mana)+" Max:mana:"}},{key:"getBaseResourceCost",value:function(){return{Coins:100}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3}}}]),n}(Zo));xe([[Nr.Mana,Ee.Cap]],"ManaShardCap",Oe.Addition,(function(e){return Go(e,Fg)*Fg.getActionEffects(e).mana})),Te("mana_shard_cap_listener",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,Fg)}));var Lg=Dn("has_gathered_at_least_50_mana",Qn("has_gathered_at_least_50_mana","The Mana Shard").setSimpleDescription("The mana reserves of the school are building up. Looking at them, you realize they may soon hit their maximum.\n    \nIf only you had a way to store more mana... Then you remember what you had learned as an apprentice, that Mana Shards can increase capacity.\n    \nWe could buy some if we had enough coins... maybe with some Illusion spell?\n\n**You can now build Mana Shards!**").build(),[qe.EARLY_GAME],fe("has_gathered_at_least_50_mana"));Te("mana_shard_unlocked",(function(e){if(!ce(e,"has_gathered_at_least_50_mana")&&Gr(e,Nr.Mana)>=50)return lt(Lg)}));var Yg=Fg;function Vg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ug=new(function(e){No()(n,e);var t=Vg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"mine_unlocked")}},{key:"getBuildingName",value:function(){return"Mine"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Production}},{key:"getDisplayDescription",value:function(){return"A structured specially designed to harvest stone and ores from the ground."}},{key:"getBaseActionEffects",value:function(){return{stone:{value:27,tags:[Nr.Stone,Ee.Production]},iron:{value:2,tags:[Nr.Iron,Ee.Production]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(t.stone,{showDecimals:!0})+":stone:/sec, +"+Mn(t.iron,{showDecimals:!0})+":iron:/sec"}},{key:"getBaseResourceCost",value:function(){return{Mana:1e3,Coins:12e3,Wood:8e3,Iron:1500}}},{key:"getBaseResourceScale",value:function(){return{Mana:1,Coins:1.3,Wood:1.3,Iron:1.3}}}]),n}(Zo));zr.register(new Jr("Mines",(function(e){var t=Go(e,Ug),n=Ug.getActionEffects(e);return{Stone:t*n.stone,Iron:t*n.iron}})));var Qg=Dn("mine_unlocked",Qn("mine_unlocked","Mining").setSimpleDescription("In one of your trips to the rocky cliff with iron, you start thinking that it would be a lot easier if there was a building that could extract the minerals on its own. You suddenly get an idea for a new building - a way in which you could get stones and iron without the need to manually gather them!\n\nYou can't wait to try it out.\n\n**You can now build Mines!**").build(),[],fe("mine_unlocked"));Te("mine_unlocked",(function(e){if(!ce(e,"mine_unlocked")&&ce(e,"gather_iron_unlocked")&&Nt(e)>6e5)return lt(Qg)}));var Gg=Ug;function Hg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Wg=new(function(e){No()(n,e);var t=Hg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"monstruarium_unlocked")}},{key:"getBuildingName",value:function(){return"Monstruarium"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Storage}},{key:"getDisplayDescription",value:function(){return"Magically infused storage building that can also hold hazardous materials."}},{key:"getBaseActionEffects",value:function(){return{stone:{value:1200,tags:[Nr.Stone,Ee.PerBuildingCap]},wood:{value:1200,tags:[Nr.Wood,Ee.PerBuildingCap]},iron:{value:600,tags:[Nr.Iron,Ee.PerBuildingCap]},monstium:{value:4e3,tags:[Nr.Monstium,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e),n={Stone:"+"+Mn(t.stone)+" Max:stone:",Wood:"+"+Mn(t.wood)+" Max:wood:",Iron:"+"+Mn(t.iron)+" Max:iron:",Monstium:"+"+Mn(t.monstium)+" Max:monstium:"};return Object.keys(n).filter((function(t){var n;return void 0!==(null==(n=e.resources)?void 0:n[t])})).map((function(e){return n[e]})).join(", ")}},{key:"getBaseResourceCost",value:function(){return{Mana:1100,Coins:8e3,Iron:500}}},{key:"getBaseResourceScale",value:function(){return{Mana:1.3,Coins:1.3,Iron:1.3}}}]),n}(Zo));xe([[Ee.Cap,Nr.Stone]],"MonstruariumStoneWoodCap",Oe.Addition,(function(e){return Go(e,Wg)*function(e){return Wg.getActionEffects(e).stone}(e)})),xe([[Ee.Cap,Nr.Wood]],"MonstruariumStoneWoodCap",Oe.Addition,(function(e){return Go(e,Wg)*function(e){return Wg.getActionEffects(e).wood}(e)})),xe([[Ee.Cap,Nr.Iron]],"MonstruariumIronCap",Oe.Addition,(function(e){return Go(e,Wg)*function(e){return Wg.getActionEffects(e).iron}(e)})),xe([[Ee.Cap,Nr.Monstium]],"MonstruariumMonstiumCap",Oe.Addition,(function(e){return Go(e,Wg)*function(e){return Wg.getActionEffects(e).monstium}(e)})),Te("monstruarium_caps_recalculation",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,Wg)}));var Jg=Dn("monstruarium_unlocked",Qn("monstruarium_unlocked","A New Hazardous Resource").setSimpleDescription('Felling those enemies is interesting, as sometimes you can find useful items afterwards. You have noticed, however, that they also leave behind some material that you have been calling "Monstium". You are not sure what it does, but it feels somewhat hazardous.\n    \nThere might be a way to store more of this... You think for a bit, and devise a larger storage unit, with more capacity than warehouses, and with a special compartment dedicated to potentially dangerous materials. To make it truly work, you think of imbuing it with mana. You are eager to give it a try.\n\n**You can now build Monstruariums!**').build(),[],fe("monstruarium_unlocked"));Te("monstruarium_unlocked",(function(e){if(!ce(e,"monstruarium_unlocked")&&Gr(e,Nr.Monstium)>=200)return lt(Jg)}));var zg=Wg;function Zg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Xg=new(function(e){No()(n,e);var t=Zg(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"researcher_cabin_unlocked")}},{key:"getBuildingName",value:function(){return"Researcher Cabin"}},{key:"getArea",value:function(){return["Research","Campus"]}},{key:"getSubcategory",value:function(){return bo.Housing}},{key:"getDisplayDescription",value:function(){return"Housing for researchers to live in campus."}},{key:"getBaseActionEffects",value:function(){return{maxResearchers:{value:1,tags:[Ee.Researcher,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).maxResearchers)+" Max Researchers"}},{key:"getBaseResourceCost",value:function(){return{Coins:150,Wood:320,Stone:110}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Wood:1.3,Stone:1.3}}}]),n}(Zo));xe([[Ee.Researcher,Ee.Cap]],"ResearcherCabin",Oe.Addition,(function(e){return Go(e,Xg)*Xg.getActionEffects(e).maxResearchers})),Te("researcher_cabin_cap_recalculation",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,Xg)}));var qg=Dn("researcher_cabin_unlocked",Qn("researcher_cabin_unlocked","Housing for Researchers").setSimpleDescription('Your researcher comes up to you. "Studying here has been great so far!", she says. "But it certainly is somewhat lonely... it would be great to have company. We could get double the work done; imagine how fast we could discover new things!", she exclaims.\n    \n"But there\'s a problem. There\'s nowhere for them to stay in. I have an idea for a cabin, but... we\'ll need to build it, first. Oh well.. back to work," she mentions, as she turns away and continues focusing on her research.\n\nYou ponder her words for some time. Regardless of her feelings, you recognize that double the researchers could greatly speed things up. You think of possibly building a Researcher Cabin as she suggested, and hiring an extra researcher.\n\n**You can now build Researcher Cabins!**').build(),[qe.EARLY_GAME],fe("researcher_cabin_unlocked"));Te("researcher_cabin_unlocked",(function(e){if(!ce(e,"researcher_cabin_unlocked")&&ce(e,"research_unlocked")&&Nt(e)>=1300)return lt(qg)}));var Kg=Xg;function $g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var em=new(function(e){No()(n,e);var t=$g(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"warehouse_unlocked")}},{key:"getBuildingName",value:function(){return"Warehouse"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Storage}},{key:"getDisplayDescription",value:function(){return"Increases the maximum resources you can store."}},{key:"getBaseActionEffects",value:function(){return{stone:{value:400,tags:[Nr.Stone,Ee.PerBuildingCap]},wood:{value:400,tags:[Nr.Wood,Ee.PerBuildingCap]},iron:{value:200,tags:[Nr.Iron,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e),n={Stone:"+"+Mn(t.stone)+" Max :stone:",Wood:"+"+Mn(t.wood)+" Max :wood:",Iron:"+"+Mn(t.iron)+" Max :iron:"};return Object.keys(n).filter((function(t){var n;return void 0!==(null==(n=e.resources)?void 0:n[t])})).map((function(e){return n[e]})).join(", ")}},{key:"getBaseResourceCost",value:function(){return{Coins:200,Stone:30}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Stone:1.3}}}]),n}(Zo));xe([[Ee.Cap,Nr.Stone]],"WarehouseStoneCap",Oe.Addition,(function(e){return Go(e,em)*function(e){return em.getActionEffects(e).stone}(e)})),xe([[Ee.Cap,Nr.Wood]],"WarehouseWoodCap",Oe.Addition,(function(e){return Go(e,em)*function(e){return em.getActionEffects(e).wood}(e)})),xe([[Ee.Cap,Nr.Iron]],"WarehouseIronCap",Oe.Addition,(function(e){return Go(e,em)*function(e){return em.getActionEffects(e).iron}(e)})),Te("warehouse_caps_recalculation",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,em)}));var tm=Dn("warehouse_unlocked",Qn("warehouse_unlocked","Storage Ideas").setSimpleDescription("Accumulating stone is worthwhile. As you watch your reserves getting closer to full, you start thinking if there might be a way to improve the situation.\n    \nMaybe you can use the stone to create more room? It seems like a smart, straightforward idea... you could make a stone warehouse.\n\n**You can now build Warehouses!**").build(),[qe.EARLY_GAME],fe("warehouse_unlocked"));Te("warehouse_unlocked",(function(e){if(!ce(e,"warehouse_unlocked")&&Gr(e,Nr.Stone)>=30)return lt(tm)}));var nm=em;function rm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var om=new(function(e){No()(n,e);var t=rm(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"vault_unlocked")}},{key:"getBuildingName",value:function(){return"Vault"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Storage}},{key:"getDisplayDescription",value:function(){return"Allows you to store more coins safely."}},{key:"getBaseActionEffects",value:function(){return{coins:{value:2e4,tags:[Nr.Coins,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){var t={Coins:"+"+Mn(this.getActionEffects(e).coins)+" Max:coins:"};return Object.keys(t).filter((function(t){var n;return void 0!==(null==(n=e.resources)?void 0:n[t])})).map((function(e){return t[e]})).join(", ")}},{key:"getBaseResourceCost",value:function(){return{Coins:500,Stone:600}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Stone:1.3}}}]),n}(Zo));xe([[Nr.Coins,Ee.Cap]],"VaultCoinsCap",Oe.Addition,(function(e){return Go(e,om)*function(e){return om.getActionEffects(e).coins}(e)})),Te("vault_coins_cap_recalculation",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,om)}));var im=Dn("vault_unlocked",Qn("vault_unlocked","Coin Storage").setSimpleDescription("You are managing to stockpile large amounts of coins! It would be wise to find a place to put them in.\n    \nWarehouses have been useful; stone has proven to be a good material for tons of things. You think about using it for a specialized building for money storage. You are concerned about bandits, but are convinced it'll be worth it in the long run.\n\n**You can now build Vaults!**").build(),[qe.EARLY_GAME],fe("vault_unlocked"));Te("vault_unlocked",(function(e){if(!ce(e,"vault_unlocked")&&Gr(e,Nr.Coins)>=800&&Go(e,nm)>=1)return lt(im)}));var am=om;function um(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var cm=new(function(e){No()(n,e);var t=um(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Go(e,this)>0||ce(e,"water_tank_unlocked")}},{key:"getBuildingName",value:function(){return"Water Tank"}},{key:"getArea",value:function(){return"Campus"}},{key:"getSubcategory",value:function(){return bo.Storage}},{key:"getDisplayDescription",value:function(){return"Allows you to stockpile water."}},{key:"getBaseActionEffects",value:function(){return{water:{value:250,tags:[Nr.Water,Ee.PerBuildingCap]}}}},{key:"getDisplayEffect",value:function(e){var t={Water:"+"+Mn(this.getActionEffects(e).water)+" Max:water:"};return Object.keys(t).filter((function(t){var n;return void 0!==(null==(n=e.resources)?void 0:n[t])})).map((function(e){return t[e]})).join(", ")}},{key:"getBaseResourceCost",value:function(){return{Coins:350,Wood:300,Stone:200}}},{key:"getBaseResourceScale",value:function(){return{Coins:1.3,Wood:1.3,Stone:1.3}}}]),n}(Zo));xe([[Ee.Cap,Nr.Water]],"WaterTankWaterCap",Oe.Addition,(function(e){return Go(e,cm)*function(e){return cm.getActionEffects(e).water}(e)})),Te("water_tank_caps_recalculation",(function(e){return function(e){return Qr(e)}}),(function(e){return Go(e,cm)}));var lm=Dn("water_tank_unlocked",Qn("water_tank_unlocked","Water Storage").setSimpleDescription("You have been struggling with water storage for a while. Creating it is easy, but you have nowhere to place it - it just drops to the ground!\n    \nYou feel a surge of inspiration, as you realize you could build a container. Then you figure it's downright obvious.\n\nYou set out to build a water tank with stone and wood.\n\n**You can now build Water Tanks!**").build(),[qe.EARLY_GAME],fe("water_tank_unlocked"));Te("water_tank_unlocked",(function(e){if(!ce(e,"water_tank_unlocked")&&ce(e,"gather_wood_unlocked")&&Gr(e,Nr.Water)>=10)return lt(lm)}));var sm=cm;var fm=Dn("Autocast_Intro",Qn("Autocast_Intro","Casting Spells is Repetitive").setSimpleDescription("How many times have you manually cast a spell by now? You have lost count. It certainly is not difficult for you. However, there is real repetition to these casts.\n    \nYou wonder if there might be a way to somehow automate this, as it's starting to feel a bit dull. But thinking about it, you can't figure out any solution...").build(),[qe.EARLY_GAME],fe("autocast_intro_triggered"));Te("autocast_intro_triggered",(function(e){if(!ce(e,"autocast_intro_triggered")&&ce(e,"research_unlocked")&&Nt(e)>=2200)return lt(fm)}));var dm=fm,hm=Dn("crafting_intro_1",Qn("crafting_intro_1","Crafting Station").setSimpleDescription('Your focus is interrupted by your researcher, who yells at you. "Headmaster!", she says.\n\n"Gathering resources like wood and iron is great", she continues. "Wouldn\'t it even be more interesting if we could make more complex stuff from them?"').addOption("Continue",Qn("crafting_intro_1_2","Crafting Station").setSimpleDescription('You try to convey to your researcher that we have, in fact, been creating complex things from resources: the buildings. But she frowns.\n      \n"No, that\'s not what I meant", she says, unhappily. "Buildings are huge! I\'m thinking more of useful, smaller things. Potions? Weapons? Magical items?"').addOption("Continue",Qn("crafting_intro_1_3","Crafting Station").setSimpleDescription("You continue listening to her.\n          \n\"If we had a crafting station, we could make a lot of these... if only it wasn't so expensive to build, I could do it myself and learn more about it!\", she says, somewhat frustrated.\n\nYou aren't sure whether to pay heed to it - why would you need things like weapons in a magical institution? You think about it some more...").addOption("Build a Crafting Station (2000 Coins, 2000 Wood, 100 Iron)",Qn("crafting_intro_1_4","Crafting Station").setSimpleDescription('It was difficult, but the crafting station is finished! Your researcher, filled with joy, runs towards it and examines it from every angle. You notice your apprentice also taking notice of it, and looking at it curiously.\n              \nA crafting station... You wonder if you might be able to do something with it right away?\n\n"Conjuration and Enchantment," says your researcher, as she passes by you with the apprentice. "Focus our research in those schools, and we should be able to make items." They head outside together.\n\n**You have unlocked the "Inventory" and "Crafting" features! You can access your inventory via the left-side menu. You can craft from the inventory screen.**').build(),(function(e){return e=Wr(Nr.Coins,-2e3)(e),e=Wr(Nr.Wood,-2e3)(e),e=Wr(Nr.Iron,-100)(e),e=fe("new_inventory_unlocked")(e),e=fe("crafting_unlocked")(e)}),void 0,(function(e){return Gr(e,Nr.Coins)>=2e3&&Gr(e,Nr.Wood)>=2e3&&Gr(e,Nr.Iron)>=100})).addOption("Maybe later").build()).build()).build(),[],fe("crafting_intro"));Te("crafting_intro",(function(e){if(!ce(e,"crafting_intro")&&ce(e,"gather_iron_unlocked")&&(!ir(e)||!or(e))&&Nt(e)>=1e4)return lt(hm)}));var gm=hm,mm=Dn("exploration_intro_1",Qn("exploration_intro_1","The School Basement").setSimpleDescription('"E-Excuse me, headmaster...?" You hear a timid voice coming from the door. You gaze up, to find your apprentice at the door, and motion for him to come inside. He walks towards you, looking disheveled and holding a club.\n    \n"I found a trap door in the school garden, behind some bushes", he begins explaining. "I found it curious, so I decided to see what was below it." He glances at you. You can tell that, despite his usual fear of you, he is actually quite enthusiastic about this.').addOption("Continue",Qn("exploration_intro_2","The School Basement").setSimpleDescription('"It\'s a very spacious basement, with a lot of rooms, and it seems to go very deep!", he says. "Headmaster, you should definitely investigate. I feel there\'s a lot of secrets to be found!"\n  \n"B-but it was, well... dangerous", he continues, while looking down. "Please be prepared before going down there. There are scary... ...creatures, roaming around the place."').addOption("Continue",Qn("exploration_intro_3","The School Basement").setSimpleDescription('You nod, and bid farewell to the apprentice.\n          \nYou are aware this is quite the old building, where wizards used to live and study several generations ago. You consider the basement may be full of things that could help expand your knowledge. However, you recall the apprentice\'s warning: it will probably be dangerous. You strongly consider arming yourself with a weapon and some protection before heading in, though you admit you may already be equipped for it.\n\nMaybe this is why the researcher was also excited about making weapons...?\n\n**You have unlocked the "Exploration" feature! You can access this feature from the left-side menu. Explore various locations to discover a wide array of new things; but beware, as powerful foes may be lurking behind every corner!**').build()).build()).build(),[],fe("exploration_unlocked"));Te("exploration_intro",(function(e){if(!ce(e,"exploration_unlocked")&&ce(e,"wizard_robe_bought")&&dl(e,il.Hand)&&dl(e,il.Body)&&Nt(e)>=33e3)return lt(mm)})),Ko(0,Ic.UNLOCK_EXPLORATION);var Am=mm;var ym=Dn("Research_Intro",Qn("Research_Intro","A wild researcher appeared").setSimpleDescription('An enthusiastic lady looks at your Mana and notices the large amount you have.\n\n"Wow, this would be great source material," she says.').addOption("Continue",Qn("Research_Intro_1","A wild researcher appeared").setSimpleDescription('You look at her, perplexed and somewhat confused. Then she continues explaining.\n\n"Large amounts of Mana are hard to come by, and are almost a requirement for the successful study of Magic."').addOption("Continue",Qn("Research_Intro_2","A wild researcher appeared").setSimpleDescription('"Are you trying to study magic here? This is exciting!\n            \nI\'d be willing to work here for a small price... let\'s say 200 Coins. Of course, you would be the first to learn what I find out, and you would be able to tell me what I should focus on," she says earnestly.\n\n"So what will it be?"').addOption("Pay 200 Coins",Qn("Research_Intro_3","A wild researcher appeared").setSimpleDescription('You produce 200 coins out of your pockets, and hand them over to the researcher. She looks at the coins and puts them away in the pockets of her robes.\n\n"Perfect! I will get started right away," she exclaims. "I\'m sure this is the beginning of a very fruitful relationship for us both!".\n\n**You have unlocked the "Research" feature! You may find it on the left-side menu.**').build(),(function(e){return e=Wr(Nr.Coins,-200)(e),e=fe("research_unlocked")(e),e=Qd(1)(e)}),void 0,(function(e){return Gr(e,Nr.Coins)>=200})).addOption("Maybe later").build()).build()).build(),[],fe("Research_Intro_Triggered"));Te("research_intro_triggered_1",(function(e){if(!ce(e,"Research_Intro_Triggered")&&Ur(e,Nr.Mana)>=200)return lt(ym)}));var pm=ym;function vm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var bm=new(function(e){No()(r,e);var t=vm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"lightweightChest"}},{key:"getPicture",value:function(){return n(855)}},{key:"getBaseName",value:function(){return"Lightweight Chest"}},{key:"getTags",value:function(){return[{tag:"Quest Item"}]}},{key:"getDescription",value:function(){return"A very light wooden chest. Great for carrying items."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 300}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:3,Enchantment:3}}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&!ce(e,"selling_unlocked")}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:750,Wood:4500,Iron:10},items:{}}}}]),r}(If)),jm=Dn("shop_intro",Qn("shop_intro","Selling Items").setSimpleDescription('The new crafting table is doing well, but every time you get rid of an item to make room for another, you feel a little bad inside.\n    \nAs if reading your mind, a fat businessman with gaudy clothes shows up in campus. He grins at you, with a sneaky smile.\n\n"Gooooood afternoon, headmaster", he exclaims to you. He looks at your item collection for a short while, then turns to you again. "May I interest you in a business propooooosal?"').addOption("Continue",Qn("shop_intro_2","Selling Items").setSimpleDescription('"You have some very interesting items here", he says. "I would very much like to have them! I\'d be happy to even offer you a bit of cooooins for them."\n        \nThat\'s like music to your ears! But then the businessman continues.\n\n"Of cooourse, that is only possible if I can carry them! You are a very talented individual. Would you be able to craft me a :lightweightChest: Lightweight Chest for that purpose? If you dooooo... I\'ll make sure to come back ooooften and buy your items, multiple times!"\n\nYou notice he already has a backpack...').addOption("Charm the Businessman (1200 Mana)",Qn("shop_intro_4","Selling Items").setSimpleDescription("You use your Illusion prowess to charm the businessman; you don't think he actually needs the chest. It seems to work!\n            \n\"Ah,\" he says with a more relaxed grin. \"I actually doooon't need the chest. I'll be happy just to buy your items, just let me know. I'll come ooooften.\" He gives you a glance, then turns back and leaves.\n\n**You can now sell items for :coins:!**").build(),(function(e){return e=Wr(Nr.Mana,-1200)(e),e=fe("selling_unlocked")(e)}),(function(e){return Pt(e,xt.Illusion)>=5}),(function(e){return Gr(e,Nr.Mana)>=1200})).addOption("Hand over a Lightweight Chest",Qn("shop_intro_3","Selling Items").setSimpleDescription('You give the businessman the chest he asked for. His grin widens.\n            \n"Thank yoooooou", he says. "Let me knoooow if there\'s anything you would like me to take from you. I\'ll come ooooften." He gives you a glance, then turns back and leaves.\n\n**You can now sell items for :coins:!**').build(),(function(e){return e=oo(bm,1,e),e=fe("selling_unlocked")(e)}),void 0,(function(e){return ro(bm,e)>0})).addOption("Maybe later").build()).build(),[],fe("shop_intro"));Te("shop_intro_inventory",(function(e){if(!ce(e,"has_crafted")&&qr(e).length>0)return fe("has_crafted")})),Te("shop_intro",(function(e){if(!ce(e,"shop_intro")&&ir(e)&&ce(e,"has_crafted")&&Nt(e)>=16e3)return lt(jm)}));var Om=jm,km=Dn("alchemy_lab",Qn("alchemy_lab_1","(Storyline) Cauldron of Potion-Making").setSimpleDescription("You find yourself near your furnace. You can feel the heat emanating from it. It evokes memories of a distant past... of when you were learning about magic. You recall a scene where you gathered around a big cauldron...\n    \nIt struck you, then. A *cauldron*! Why didn't you think about this before? You head out and look for your researcher. You find her, and start talking to her about the art of making magical beverages.").addOption("Continue",Qn("alchemy_lab_2","(Storyline) Cauldron of Potion-Making").setSimpleDescription('"Magical... beverages? Do you mean potions?", she says. "We definitely can\'t make those with our crafting station..."\n        \nShe didn\'t seem to catch on, so you explain that you want to build a cauldron and start investigating the production of powerful potions.\n\n"Oh, of course", she says. She goes back to studying without paying mind to you. It seems like you will need to show her what you mean.').addOption("Build a cauldron (6500 Stone, 500 Iron, 2000 Temperature)",Qn("alchemy_lab_3","(Storyline) Cauldron of Potion-Making").setSimpleDescription('That was quite some hard work. The cauldron looks sturdy and prepared for some serious brewing. You have a new robust addition to the campus now!\n            \nYour researcher is still skeptical.\n\n"I can see where this could go", she says, raising her brow. "But there\'s more we need to do. We need a consistent, strong source of flame and tons of water, to keep this boiling. *Then* we\'ll be able to try to make potions." She goes back to her research.\n\nYou understand this, and you start working towards that goal.').addOption("Fill the cauldron and start a fire (2000 Water, 6500 Wood)",Qn("alchemy_lab_4","(Storyline) Cauldron of Potion-Making").setSimpleDescription('The sparks of the fire are noisy. You place the cauldron on top of it, and slowly add water in it. It takes a long time, but you eventually finish and wait for the water to boil.\n                \nThe cauldron starts bubbling. Your researcher finally comes and looks at the cauldron. She observes the flame and the steam coming out from the top of the cauldron, then speaks to you.\n\n"This is actually great!", she exclaims. "We are definitely prepared now! We should study the art of making potions. I am sure we could make many useful things!"').addOption("Continue",Qn("alchemy_lab_5","(Storyline) Cauldron of Potion-Making").setSimpleDescription('Your researcher seems eager to try it out. You are more reluctant: you remember how difficult it was to figure out the right formula. Still, with enough research, you have high hopes that you will find plenty of uses for it...\n\nThen you remember. Your professor was saying how they had kept trying to turn iron into gold, but despite years of work, they found no success. But maybe you could...?\n\n**You have completed the "Cauldron of Potion-Making" storyline and have permanently unlocked the Alchemy school! You may now do research on Alchemy, which will let you craft ever-more-powerful potions with various effects. This will persist even after restarting the game!**').build()).build(),(function(e){return e=Wr(Nr.Water,-2e3)(e),e=Wr(Nr.Wood,-6500)(e),e=Qt(xt.Alchemy)(e)}),void 0,(function(e){return Gr(e,Nr.Water)>=2e3&&Gr(e,Nr.Wood)>=6500})).addOption("Maybe later").build(),(function(e){return e=Wr(Nr.Stone,-6500)(e),e=Wr(Nr.Iron,-500)(e),e=Wr(Nr.Temperature,-2e3)(e)}),void 0,(function(e){return Gr(e,Nr.Stone)>=6500&&Gr(e,Nr.Iron)>=500&&Gr(e,Nr.Temperature)>=2e3})).addOption("Maybe later").build()).build(),[qe.STORYLINE],fe("alchemy_lab_triggered"));Te("safeguard_alchemy_lab_trigger",(function(e){if(!ce(e,"alchemy_lab_triggered")&&Go(e,pg)>0&&!Gt(e).includes(xt.Alchemy)&&vu(e,"schoolBasementB3")>25)return lt(km,{})})),Yc(km,100,!0,(function(e){return!ce(e,"alchemy_lab_triggered")&&ir(e)&&Go(e,pg)>0&&!Gt(e).includes(xt.Alchemy)}));var xm=new ei("The Alchemy Lab",1010,(function(e){return Gt(e).includes(xt.Alchemy)}),(function(e){return Gt(e).includes(xt.Alchemy)}),"There's a chance of this happening randomly if you have unlocked your inventory and you have at least a Furnace...","Alchemy school unlocked",(function(e){return!0}));ti.register(xm),$o(0,Ic.ALCHEMY_UNLOCKED);var wm=km;function Cm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Sm=new(function(e){No()(r,e);var t=Cm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"basementBat"}},{key:"getLevel",value:function(){return 2}},{key:"getName",value:function(){return"Basement Bat"}},{key:"getPicture",value:function(){return n(856)}},{key:"getBaseStats",value:function(){return{maxHP:30,defense:0,attack:11,attackDelay:1.1,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;return Math.random()<.25?{name:"Suck Blood",delay:this.getAttackDelay(e),transform:function(e){var n=cu(1.2*t.getAttack(e),ya(e));return e=du(e=su(e,-n,"Suck Blood"),+n)}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 50}},{key:"getMonstiumAwarded",value:function(e){return 9}},{key:"getItemsAwarded",value:function(){return[{itemId:"medicinalHerb",chance:.15,amount:1},{itemId:"batWing",chance:.3,amount:2}]}}]),r}(Ru));function Em(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Mm=new(function(e){No()(r,e);var t=Em(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"mouse"}},{key:"getLevel",value:function(){return 1}},{key:"getName",value:function(){return"Mouse"}},{key:"getPicture",value:function(){return n(857)}},{key:"getBaseStats",value:function(){return{maxHP:40,defense:2,attack:9,attackDelay:2,dodgeChance:0,critChance:0}}},{key:"getCoinsAwarded",value:function(e){return 45}},{key:"getMonstiumAwarded",value:function(e){return 7}},{key:"getItemsAwarded",value:function(){return[{itemId:"medicinalHerb",chance:.1,amount:1},{itemId:"ratTail",chance:.25,amount:2}]}}]),r}(Ru));function Rm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Bm=function(e){No()(r,e);var t=Rm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"skeleton"}},{key:"getLevel",value:function(){return 4}},{key:"getName",value:function(){return"Skeleton"}},{key:"getPicture",value:function(){return n(858)}},{key:"getBaseStats",value:function(){return{maxHP:500,defense:6,attack:19,attackDelay:3,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;return Math.random()<.5?{name:"Strong Blow",delay:2*this.getAttackDelay(e),transform:function(e){return Au(e,1,2*t.getAttack(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 175}},{key:"getMonstiumAwarded",value:function(e){return 20}},{key:"getItemsAwarded",value:function(){return[{itemId:"medicinalHerb",chance:.8,amount:1}]}},{key:"isBoss",value:function(){return!0}},{key:"onDeath",value:function(e,t){return ce(e=Ca(e=Gc()(Vo()(r.prototype),"onDeath",this).call(this,e,t),"schoolBasementB1"),"skeleton_defeated_event_triggered")||(e=lt(Tm)(e)),fe("school_basement_b2_unlocked")(e)}}]),r}(Ru),Tm=Un("skeleton_defeated_event","The Frontier of Danger",[]).setOnTrigger(fe("skeleton_defeated_event_triggered")).createMessage().setSimpleDescription('As you manage to defeat the powerful Skeleton, you notice what it was guarding all along: a staircase down to what seems to be... another floor? What could possibly be down here?\n  \nThe mysteries abound, and you recall what your researcher told you before. The event called Tournament of Magic. You still feel very far away from that, but through this adventure, you have already managed to discover an entire school of magic. You realize that this might just be the best way forward to actually be able to participate in the event. You arm yourself with more courage before moving on into the unknown...\n\n**You can now enter the School Basement B2! You can access this floor by pressing the "Next Floor" button in the Exploration screen.**').build(),Dm=new Bm;function Pm(e){return{enemy:e,normal:ou(e),breeding:function(t){return t=Ba(t,"A creature defeated "+e.getName()+"!"),t=e.onDeath(t,!0)}}}var Im=function(){function e(){Y()(this,e),this.couldFightBossSecondsPlayed=void 0}return U()(e,[{key:"getExplorationRequiredTimeSec",value:function(){return 5}},{key:"_getExplorationSuccessesForBoss",value:function(){return 50}},{key:"getExplorationSuccessesForBoss",value:function(e){return Math.ceil(Ce([Ee.ExplorationBossRequirement],e,this._getExplorationSuccessesForBoss(),{floor:this}))}},{key:"doExplore",value:function(e){var t=this.getExplorationPossibilities(e),n=t.reduce((function(e,t){return e+t.weight}),0),r=Math.random()*n;for(var o in t){var i=t[o];if((r-=i.weight)<0)return i.transforms}return null}},{key:"doFightBoss",value:function(e){var t=this.getBoss(e);if(t)return ou(t)}},{key:"invalidateFightBossCache",value:function(){this.couldFightBossSecondsPlayed=void 0}},{key:"canFightBoss",value:function(e){var t=Ze(e);if(null!=this.couldFightBossSecondsPlayed&&!e.isFake){if(t>this.couldFightBossSecondsPlayed)return!0;this.couldFightBossSecondsPlayed=void 0}var n=vu(e,this.getId())>=this.getExplorationSuccessesForBoss(e)&&void 0!=this.getBoss(e);return n&&!e.isFake&&(this.couldFightBossSecondsPlayed=t),n}},{key:"isUnlocked",value:function(e){return!1}},{key:"getNextFloor",value:function(){}},{key:"getMinimumMPLRecommendation",value:function(){}},{key:"getMaximumMPLRecommendation",value:function(){}}]),e}();function _m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Nm=new(function(e){No()(r,e);var t=_m(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"angrySheep"}},{key:"getLevel",value:function(){return 5}},{key:"getName",value:function(){return"Angry Sheep"}},{key:"getPicture",value:function(){return n(859)}},{key:"getBaseStats",value:function(){return{maxHP:120,defense:4,attack:15,attackDelay:4,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;if(Math.random()<.25)return{name:"Hop Around",delay:this.getAttackDelay(e),transform:function(e){return e}};return Math.random()<.1?{name:"Charge!",delay:1.5*this.getAttackDelay(e),transform:function(e){return Au(e,1,3*t.getAttack(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 110}},{key:"getMonstiumAwarded",value:function(e){return 13}},{key:"getItemsAwarded",value:function(){return[{itemId:"medicinalHerb",chance:.1,amount:1},{itemId:"wool",chance:1,amount:1}]}}]),r}(Ru));function Fm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Lm=function(e){No()(r,e);var t=Fm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"littleDevil"}},{key:"getLevel",value:function(){return 8}},{key:"getName",value:function(){return"Little Devil"}},{key:"getPicture",value:function(){return n(860)}},{key:"getBaseStats",value:function(){return{maxHP:900,defense:14,attack:26,attackDelay:2.7,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;if(Math.random()<.2)return{name:"Fire Ball",delay:5,transform:function(e){return Au(e,1,1.9*t.getAttack(e))}};return Math.random()<.2?{name:"Weaken",delay:5,transform:mo("Weaken (Little Devil)","Weaken (Little Devil)",12,{isBeneficial:!1,mode:"add"})}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 450}},{key:"getMonstiumAwarded",value:function(e){return 48}},{key:"getItemsAwarded",value:function(){return[{itemId:"medicinalHerb",chance:1,amount:3},{itemId:"batWing",chance:1,amount:2}]}},{key:"isBoss",value:function(){return!0}},{key:"onDeath",value:function(e,t){return e=Ca(e=Gc()(Vo()(r.prototype),"onDeath",this).call(this,e,t),"schoolBasementB2"),fe("school_basement_b3_unlocked")(e)}}]),r}(Ru);xe([[io.Player,da.Attack]],"LittleDevilWeaken",Oe.Addition,(function(e){return fo(e,"Weaken (Little Devil)")?-12:0}));var Ym=new Lm;function Vm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Um=new(function(e){No()(r,e);var t=Vm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"airSpeck"}},{key:"getPicture",value:function(){return n(861)}},{key:"getBaseName",value:function(){return"Air Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small green gem. Full of air elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function Qm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Gm=new(function(e){No()(r,e);var t=Qm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"darknessSpeck"}},{key:"getPicture",value:function(){return n(862)}},{key:"getBaseName",value:function(){return"Darkness Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small black gem. Full of darkness elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function Hm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Wm=new(function(e){No()(r,e);var t=Hm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"earthSpeck"}},{key:"getPicture",value:function(){return n(863)}},{key:"getBaseName",value:function(){return"Earth Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small brown gem. Full of earth elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function Jm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var zm=new(function(e){No()(r,e);var t=Jm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"fireSpeck"}},{key:"getPicture",value:function(){return n(864)}},{key:"getBaseName",value:function(){return"Fire Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small red gem. Full of fire elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function Zm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Xm=new(function(e){No()(r,e);var t=Zm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"lightningSpeck"}},{key:"getPicture",value:function(){return n(865)}},{key:"getBaseName",value:function(){return"Lightning Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small purple gem. Full of lightning elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function qm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Km=new(function(e){No()(r,e);var t=qm(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"natureSpeck"}},{key:"getPicture",value:function(){return n(866)}},{key:"getBaseName",value:function(){return"Nature Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small lime green gem. Full of nature elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function $m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var eA=new(function(e){No()(r,e);var t=$m(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"waterSpeck"}},{key:"getPicture",value:function(){return n(867)}},{key:"getBaseName",value:function(){return"Water Speck"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A small blue gem. Full of water elemental power."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function tA(e){switch(e.primaryElement){case"Fire":return zm;case"Earth":return Wm;case"Water":return eA;case"Air":return Um;case"Nature":return Km;case"Lightning":return Xm;case"Darkness":return Gm;default:return zm}}function nA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var rA=new(function(e){No()(r,e);var t=nA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"slime"}},{key:"getLevel",value:function(){return 6}},{key:"getName",value:function(){return"Slime"}},{key:"getPicture",value:function(){return n(868)}},{key:"getBaseStats",value:function(){return{maxHP:200,defense:5,attack:14,attackDelay:2.5,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;if(Math.random()<.1)return{name:"Flee",delay:3*this.getAttackDelay(e),transform:function(e){return e=bu(e=Ka(e),"The "+t.getName()+" has run away...")}};return Math.random()<.3?{name:"Fast Attack",delay:.25*this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 90}},{key:"getMonstiumAwarded",value:function(e){return 19}},{key:"getItemsAwarded",value:function(e){return[{itemId:"medicinalHerb",chance:.2,amount:1},{itemId:tA(e).getId(),chance:.005,amount:1},{itemId:"goldNugget",chance:.003,amount:1}]}}]),r}(Ru));function oA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var iA=function(e){No()(r,e);var t=oA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"ancientHeadmaster"}},{key:"getName",value:function(){return"Ancient Headmaster"}},{key:"getPicture",value:function(){return n(869)}},{key:"getBaseStats",value:function(){return{maxHP:2200,defense:8,attack:24,attackDelay:4,dodgeChance:0,critChance:0}}},{key:"getLevel",value:function(){return 13}},{key:"getNextAction",value:function(e){var t=this;if(function(e){var t,n;return uu(e)/(null!=(t=null==(n=Wa(e))?void 0:n.getMaxHP(e))?t:1)}(e)<.25)return{name:"Rock Tomb",delay:12,transform:function(e){return Au(e,1,4.4*t.getAttack(e))}};if(!fo(e,"SilencePlayer")){if(Math.random()<.5)return{name:"Silence!",delay:5,transform:mo("SilencePlayer","Silence",20,{isBeneficial:!1,mode:"add"})}}return Math.random()<.4?{name:"Stalagmite",delay:5,transform:function(e){return Au(e,1,2.32*t.getAttack(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 1200}},{key:"getMonstiumAwarded",value:function(e){return 99}},{key:"getItemsAwarded",value:function(e){return[{itemId:tA(e).getId(),chance:1,amount:1}]}},{key:"isBoss",value:function(){return!0}},{key:"getBackdropColor",value:function(){return"#400"}},{key:"onDeath",value:function(e,t){return ce(e=Ca(e=Gc()(Vo()(r.prototype),"onDeath",this).call(this,e,t),"schoolBasementB3"),"headmaster_event_2_triggered")||(e=lt(uA)(e)),!Q.isDemo()&&Gt(e).includes(xt.Divination)&&!be(e,"headmaster_under_15_minutes")&&Ze(e)<720&&(e=lt(aA)(e)),Q.isDemo()&&(e=lt(Gn)(e)),e}}]),r}(Ru),aA=Un("ancient_headmaster_15_minutes_event","(Storyline) Swift Start",[qe.STORYLINE]).setOnTrigger(me("headmaster_under_15_minutes")).createMessage().setSimpleDescription("You felled the Ancient Headmaster, but it doesn't feel like the first time. How many times has this happened? It is so familiar, it is like you are able to do it in nearly no time at all - it hasn't even been 12 minutes since you opened your institution!\n  \nYou do notice, however, a page that is shining purple on the book you brought back with you. This is new! You quickly copy it, before it disappears into thin air.\n\nYou don't understand much yet, but you can tell it has instructions on how to build more efficiently. Perhaps future generations could benefit from this.\n\n**You have defeated the Ancient Headmaster in under 12 minutes and completed the \"Swift Start\" Storyline! In future runs, cost for all buildings will scale 20% slower, enabling you to build much more with the same storage!**").build(),uA=Dn("ancient_headmaster_event_2",Qn("ancient_headmaster_event_2","History of a Magical School").setSimpleDescription("As you strike the final blow, the old body of the Ancient Headmaster shakes violently, falls to its knees, and finally disintegrates into dark particles. You emerge victorious! You wipe the sweat off your face; that was a difficult battle.").addOption("Continue",Qn("ancient_headmaster_event_3","History of a Magical School").setSimpleDescription('You examine the room. Several bookshelves line up the walls, with a desk in the middle of the room. It feels like this could have been the study of the being you have just felled, back when they were still alive.\n\nOn top of the desk lies a single book: "School Improvement for Novice Headmasters". You are surprised something like this would be the one thing on the desk of the Ancient Headmaster. You decide to take it with you.').addOption("Continue",Qn("ancient_headmaster_event_4","History of a Magical School").setSimpleDescription('Back in campus, you find your researcher and your apprentice chatting with each other. You show them the book and relate what happened at the basement.\n          \nWith a sigh of relief that you made it back out in one piece, the researcher takes the book from your hands and starts skimming it. Her eyes go wide open.\n\n"Th-this is...", she begins saying. "This is incredible! This book describes a ton of ideas and plans we could use to improve the school, in a way we haven\'t thought of before!"').addOption("Continue",Qn("ancient_headmaster_event_5","History of a Magical School").setSimpleDescription('"The one catch, is that all of these require a strange material, the substance we call Monstium." She stops and looks at you. "You have been saving it, haven\'t you?"\n              \nYou nod, and ask for the book back. She gives it to you. "I\'m looking forward to see what we can do next!", she exclaims.\n\n**You have unlocked the "Upgrades" feature! Spend accumulated :monstium: to improve various aspects of the game until retirement. You can access this feature from the left-side menu.**').build(),fe("upgrades_unlocked")).build()).build()).build(),[],fe("headmaster_event_2_triggered"));Ko(0,Ic.SCHOOL_BASEMENT_CLEAR);var cA=new iA;function lA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var sA=new(function(e){No()(r,e);var t=lA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"redSlime"}},{key:"getLevel",value:function(){return 11}},{key:"getName",value:function(){return"Red Slime"}},{key:"getPicture",value:function(){return n(870)}},{key:"getBaseStats",value:function(){return{maxHP:250,defense:6,attack:20,attackDelay:2.25,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;if(Math.random()<.05)return{name:"Flee",delay:3*this.getAttackDelay(e),transform:function(e){return e=bu(e=Ka(e),"The "+t.getName()+" has run away...")}};return Math.random()<.35?{name:"Fast Attack",delay:.25*this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 160}},{key:"getMonstiumAwarded",value:function(e){return 30}},{key:"getItemsAwarded",value:function(e){return[{itemId:"medicinalHerb",chance:.3,amount:1},{itemId:tA(e).getId(),chance:.015,amount:1},{itemId:"goldNugget",chance:.004,amount:1}]}}]),r}(Ru));function fA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var dA=new(function(e){No()(r,e);var t=fA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"zombie"}},{key:"getLevel",value:function(){return 10}},{key:"getName",value:function(){return"Zombie"}},{key:"getPicture",value:function(){return n(871)}},{key:"getBaseStats",value:function(){return{maxHP:330,defense:0,attack:34,attackDelay:5,dodgeChance:0,critChance:0}}},{key:"getCoinsAwarded",value:function(e){return 130}},{key:"getMonstiumAwarded",value:function(e){return 30}},{key:"getItemsAwarded",value:function(e){return[{itemId:tA(e).getId(),chance:.01,amount:1},{itemId:"goldNugget",chance:.005,amount:1}]}}]),r}(Ru));function hA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var gA=new(function(e){No()(n,e);var t=hA(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"schoolBasementB3"}},{key:"getFloorName",value:function(){return"School Basement B3"}},{key:"getBoss",value:function(){return cA}},{key:"isUnlocked",value:function(e){return ce(e,"school_basement_b3_unlocked")}},{key:"getBreedingLevel",value:function(){return 11}},{key:"isMainStoryDungeonFloor",value:function(){return!0}},{key:"getMaximumMPLRecommendation",value:function(){return 15}},{key:"getExplorationPossibilities",value:function(e){return[{weight:60,transforms:Pm(Nm)},{weight:80,transforms:Pm(dA)},{weight:40,transforms:Pm(sA)}]}}]),n}(Im)),mA=Dn("ancient_headmaster_event_1",Qn("ancient_headmaster_event_1","The End of the Basement").setSimpleDescription("You have been going deeper and deeper into the basement and it has become more dangerous as you delve into it.\n    \nThere is one last room you haven't checked. It's very well decorated, with golden patterns lining the door. You have a terrible feeling that something powerful lies beyond that door.\n\n**You have unlocked the boss fight for School Basement B3!**").build(),[],fe("headmaster_event_1_triggered"));Te("HeadmasterB3SchoolBasementUnlocker",(function(e){if(!ce(e,"headmaster_event_1_triggered")&&gA.canFightBoss(e))return lt(mA)}));var AA=gA;function yA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var pA=new(function(e){No()(n,e);var t=yA(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"schoolBasementB2"}},{key:"getFloorName",value:function(){return"School Basement B2"}},{key:"getBoss",value:function(){return Ym}},{key:"isUnlocked",value:function(e){return ce(e,"school_basement_b2_unlocked")}},{key:"getBreedingLevel",value:function(){return 7}},{key:"getNextFloor",value:function(){return AA}},{key:"isMainStoryDungeonFloor",value:function(){return!0}},{key:"getMaximumMPLRecommendation",value:function(){return 15}},{key:"getExplorationPossibilities",value:function(e){return[{weight:20,transforms:Pm(Mm)},{weight:80,transforms:Pm(Sm)},{weight:60,transforms:Pm(rA)},{weight:60,transforms:Pm(Nm)}]}}]),n}(Im));function vA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var bA=new(function(e){No()(n,e);var t=vA(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"schoolBasementB1"}},{key:"getFloorName",value:function(){return"School Basement B1"}},{key:"getBoss",value:function(){return Dm}},{key:"isUnlocked",value:function(e){return!0}},{key:"getBreedingLevel",value:function(){return 1}},{key:"getExplorationPossibilities",value:function(e){return[{weight:100,transforms:Pm(Mm)},{weight:40,transforms:Pm(Sm)}]}},{key:"isMainStoryDungeonFloor",value:function(){return!0}},{key:"getMaximumMPLRecommendation",value:function(){return 15}},{key:"getNextFloor",value:function(){return pA}}]),n}(Im)),jA=Dn("evocation_intro",Qn("evocation_intro_1","(Storyline) Evocation").setSimpleDescription('As you continue fighting the animals that infest the school basement, you get a sudden realization. What if you actually used magic to fight back? You give it a try, and are easily able to fell one of those mice that pester you as you look around the basement.\n    \nThat was definitely powerful! You can\'t wait to go back and ask your researcher to start studying this. This is an entirely new school of magic of its own.\n\n**You have completed the "Evocation" storyline and have permanently unlocked the Evocation school! You may now do research on Evocation, which will let you learn damaging combat spells. This will persist even after restarting the game!**').build(),[qe.STORYLINE],Qt(xt.Evocation));Te("EvocationIntro",(function(e){if(!Gt(e).includes(xt.Evocation)&&vu(e,bA.getId())>=10)return lt(jA)}));var OA=new ei("Evocation",2010,(function(e){return Gt(e).includes(xt.Evocation)}),(function(e){return Gt(e).includes(xt.Evocation)}),"Defeat 10 monsters in School Basement B1","Evocation school unlocked",(function(e){return!0}));ti.register(OA),$o(0,Ic.EVOCATION_UNLOCKED);var kA=jA,xA=Dn("headmasters_staff",Qn("headmasters_staff_1","(Storyline) The Headmaster's Staff").setSimpleDescription('The researcher and the apprentice approach you. "We\'ve been thinking", starts saying the researcher. "You are the renowned headmaster of this institution, but you certainly don\'t look the part. You are missing a staff!", she exclaims. The apprentice nods in agreement.\n    \n"We can craft now. We should try our best to build an emblematic item for you. You deserve this!", she continues.\n\n"...Actually," interrupts the apprentice, "we cannot craft this on our own. It seems ironic, but you should definitely craft yourself a staff. I-it is painful for me to say, but a headmaster without a staff... is... somewhat uninspiring."').addOption("Craft a Headmaster's Staff (1500 Mana, 3500 Wood, Requires Conjuration Lv8)",Qn("headmasters_staff_2","(Storyline) The Headmaster's Staff").setSimpleDescription('You put together the staff and infuse it with a lot of mana. The apprentice and researcher watch you in awe. You produce a Headmaster\'s Staff!\n\n...Or is it? It still looks just like a normal magic staff.\n\nYour researcher cheers you on. "You should enchant it!", she says. "I\'m sure it will be great once you do!"').addOption("Enchant the Headmaster's Staff (1700 Mana, Requires Enchantment Lv9)",Qn("headmasters_staff_3","(Storyline) The Headmaster's Staff").setSimpleDescription('You pool together even more mana. The staff begins to shine! You feel the magical energies starting to roar. The apprentice jumps back as you cast the spell.\n            \nThe researcher keeps cheering. "This is working!", she screams with excitement. "Just a little more!"').addOption("Enchant the Headmaster's Staff (1900 Mana, Requires Enchantment Lv10)",Qn("headmasters_staff_4","(Storyline) The Headmaster's Staff").setSimpleDescription("This time, you focus deeply. You pool a ton of magical energy, and with one swift movement, you enchant the staff.\n\nA flash of light emanates from the staff for a split second and brightens the room! The staff glows brightly, starts rattling, then it gently begins floating towards you! The researcher and apprentice both look at it, with their mouths wide open.\n\nYou grip the staff... and somehow the power vanishes, without a trace?").addOption("Continue",Qn("headmasters_staff_5","(Storyline) The Headmaster's Staff").setSimpleDescription("You are confused. You leave the room, without saying anything to the researcher and the apprentice, and go back to your personal chamber. You put away the staff and look at it...\n                    \n*You are not worthy. You will never be worthy.* The voice resonates through your insides, but you don't know where it's coming from... Somehow, you got the feeling the staff *is* magically enchanted, but why can't you unlock its powers?\n\nYou decide to store it. Maybe a successor would be able to use it...\n\n**You have completed \"The Headmaster's Staff\" storyline! You will permanently be four times more efficient when manually gathering in future runs (after restarting the game).**").build()).build(),(function(e){return e=Wr(Nr.Mana,-1900)(e),e=me("headmasters_staff_completed")(e)}),void 0,(function(e){return Gr(e,Nr.Mana)>=1900&&Pt(e,xt.Enchantment)>=10})).addOption("Maybe later").build(),(function(e){return e=Wr(Nr.Mana,-1700)(e)}),void 0,(function(e){return Gr(e,Nr.Mana)>=1700&&Pt(e,xt.Enchantment)>=9})).addOption("Maybe later").build(),(function(e){return e=Wr(Nr.Mana,-1500)(e),e=Wr(Nr.Wood,-3500)(e)}),void 0,(function(e){return Gr(e,Nr.Mana)>=1500&&Gr(e,Nr.Wood)>=3500&&Pt(e,xt.Conjuration)>=8})).addOption("Maybe later").build(),[qe.STORYLINE],fe("headmasters_staff_triggered"));Yc(xA,20,!0,(function(e){return ir(e)&&!ce(e,"headmasters_staff_triggered")&&!ve(e,"headmasters_staff_completed")})),xe([[Ee.ManualGathering]],"HeadmastersStaff",Oe.Multiplier,(function(e){return ve(e,"headmasters_staff_completed")?4:1})),ti.register(new ei("The Headmaster's Staff",1020,(function(e){return be(e,"headmasters_staff_completed")}),(function(e){return ve(e,"headmasters_staff_completed")}),"There's a chance of this happening randomly if you have unlocked your inventory...","Manual gathering 4x more effective",(function(e){return!0})));var wA=xA,CA=Un("lumbering_expertise","(Storyline) Lumbering Expertise",[qe.STORYLINE]);CA.setOnTrigger(fe("lumbering_expertise_triggered")).createMessage().setSimpleDescription("As you observe your collection of Lumber Yards produce quite a lot of wood, you start thinking about their inner workings. Should you place a blade here, or perhaps enchant this other thing?\n    \nYou lose yourself in thought, but then you happen to see the very first one you built, and... you have a realization. You have a great idea on how to build them so that they work much better! But it's too late... they are already built. It would be pretty much impossible to apply the improvements now.\n\nYou decide to search for your researcher...").addOption("Continue",{transform:me("lumbering_expertise_completed")},CA.createMessage().setSimpleDescription('When you find her and tell her about your thoughts, she is visibly excited and urges you to write down your thoughts. "It might be too late now, but it will not be too late for others who come after us!", she exclaims.\n\nYou take her up on her offer, and put some effort into documenting your thoughts. Will someone really benefit from this...? Your researcher seems to be sure that someone will, even if you\'ll never end up seeing it...\n\n**You have completed the "Lumbering Expertise" Storyline! In future runs, Lumber Yards will be three times as effective!**'));var SA=CA.build();Te("LumberingExpertise",(function(e){if(!be(e,"lumbering_expertise_completed")&&!ce(e,"lumbering_expertise_triggered")&&Go(e,Og)>=20)return lt(SA)})),xe([[Nr.Wood,Og.getName(),Ee.Production]],"LumberingExpertise",Oe.Multiplier,(function(e){return ve(e,"lumbering_expertise_completed")?3:1})),ti.register(new ei("Lumbering Expertise",2050,(function(e){return be(e,"lumbering_expertise_completed")}),(function(e){return ve(e,"lumbering_expertise_completed")}),"Build at least 20 Lumber Yards","3x:wood: production from Lumber Yards",(function(e){return!0})));var EA=SA;function MA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var RA=new(function(e){No()(r,e);var t=MA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"batWing"}},{key:"getPicture",value:function(){return n(872)}},{key:"getBaseName",value:function(){return"Bat Wing"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"The clipped wing of a bat that you felled."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 36}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function BA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var TA=new(function(e){No()(r,e);var t=BA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"ratTail"}},{key:"getPicture",value:function(){return n(873)}},{key:"getBaseName",value:function(){return"Mouse Tail"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"The tail of a mouse that you have slayed. Useful in Alchemy."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 24}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If)),DA=Qn("magic_library_final","(Storyline) The Magic Library").setSimpleDescription('You follow the librarian to one of the furthest shelves in the room. He points to a section of the bookshelf.\n\n"These are my most valuable books. Choose one. Choose carefully - the old headmaster enchanted those books, so that the rest will vanish if you take one."').addOption("Take the Blue Tome",Qn("magic_library_f1","(Storyline) The Magic Library").setSimpleDescription('You take the Blue Tome from the shelf. The librarian bows at you deeply. "It was a pleasure to meet you, and to know that my library is now alive again." With a swoosh, he vanishes. You look back at the shelf where the tome was at and notice it is now empty.\n      \nYou pass the tome to your researcher, who opens it and looks at it for a while, but she seems troubled.\n\n"This book is way too advanced", she says. "It would probably take us a *lifetime* to understand what it says!"\n\nYou try to argue back with her, but you quickly realize she\'s being genuine.').addOption("Continue",Qn("magic_library_f1_2","(Storyline) The Magic Library").setSimpleDescription("You sigh, disappointed by the turn of events. However, you still ask her to look into the matter. You are hopeful that even if it doesn't benefit you, it'll serve a good purpose for someone else in the future...\n          \n**You have completed \"The Magic Library\" storyline by selecting the Blue Tome! In future runs, the knowledge from the tome will let you start the game with the Inventory, Crafting and Exploration features unlocked from the beginning!**").build(),me("magic_library_blue_tome_taken")).build(),void 0,(function(e,t){return!ve(e,"magic_library_blue_tome_taken")})).addOption("Take the Yellow Tome",Qn("magic_library_f2","(Storyline) The Magic Library").setSimpleDescription('You take the Yellow Tome from the shelf. The librarian bows at you deeply. "It was a pleasure to meet you, and to know that my library is now alive again." With a swoosh, he vanishes. You look back at the shelf where the tome was at and notice it is now empty.\n      \nYou pass the tome to your researcher, who opens it and looks at it for a while, but she seems troubled.\n\n"This book is way too advanced", she says. "It would probably take us a *lifetime* to understand what it says!"\n\nYou try to argue back with her, but you quickly realize she\'s being genuine.').addOption("Continue",Qn("magic_library_f2_2","(Storyline) The Magic Library").setSimpleDescription("You sigh, disappointed by the turn of events. However, you still ask her to look into the matter. You are hopeful that even if it doesn't benefit you, it'll serve a good purpose for someone else in the future...\n          \n**You have completed \"The Magic Library\" storyline by selecting the Yellow Tome! In future runs, the knowledge from the tome will let you be more efficient with storage, allowing you to store 20% more of every resource except :mana:Mana!**").build(),me("magic_library_yellow_tome_taken")).build(),void 0,(function(e,t){return!ve(e,"magic_library_yellow_tome_taken")})).addOption("Take the Green Tome",Qn("magic_library_f3","(Storyline) The Magic Library").setSimpleDescription('You take the Green Tome from the shelf. The librarian bows at you deeply. "It was a pleasure to meet you, and to know that my library is now alive again." With a swoosh, he vanishes. You look back at the shelf where the tome was at and notice it is now empty.\n      \nYou pass the tome to your researcher, who opens it and looks at it for a while, but she seems troubled.\n\n"This book is way too advanced", she says. "It would probably take us a *lifetime* to understand what it says!"\n\nYou try to argue back with her, but you quickly realize she\'s being genuine.').addOption("Continue",Qn("magic_library_f3_2","(Storyline) The Magic Library").setSimpleDescription("You sigh, disappointed by the turn of events. However, you still ask her to look into the matter. You are hopeful that even if it doesn't benefit you, it'll serve a good purpose for someone else in the future...\n          \n**You have completed \"The Magic Library\" storyline by selecting the Green Tome! In future runs, the knowledge from the tome will let you explore twice as fast!**").build(),me("magic_library_green_tome_taken")).build(),void 0,(function(e,t){return!ve(e,"magic_library_green_tome_taken")})).addOption("Take the Red Tome",Qn("magic_library_f4","(Storyline) The Magic Library").setSimpleDescription('You take the Red Tome from the shelf. The librarian bows at you deeply. "It was a pleasure to meet you, and to know that my library is now alive again." With a swoosh, he vanishes. You look back at the shelf where the tome was at and notice it is now empty.\n      \nYou pass the tome to your researcher, who opens it and looks at it for a while, but she seems troubled.\n\n"This book is way too advanced", she says. "It would probably take us a *lifetime* to understand what it says!"\n\nYou try to argue back with her, but you quickly realize she\'s being genuine.').addOption("Continue",Qn("magic_library_f4_2","(Storyline) The Magic Library").setSimpleDescription("You sigh, disappointed by the turn of events. However, you still ask her to look into the matter. You are hopeful that even if it doesn't benefit you, it'll serve a good purpose for someone else in the future...\n          \n**You have completed \"The Magic Library\" storyline by selecting the Red Tome! In future runs, the knowledge from the tome will grant you a permanent +100 Max:hp: and +0.2:hpRegen:/sec boost!**").build(),me("magic_library_red_tome_taken")).build(),void 0,(function(e,t){return!ve(e,"magic_library_red_tome_taken")})).build(),PA=Dn("magic_library",Qn("magic_library_1","(Storyline) The Magic Library").setSimpleDescription("As you delve through the corridors of the school basement, you encounter a large room, full of old books. Shelves and shelves of books are assembled in rows across the room.\n    \nYou walk between the shelves. The dust is thick. You take a peek at one of the books, but can't immediately deduce what it's about.\n\nYou decide to fetch your researcher and come back; you quickly head out of the basement, interrupt her, and ask her to come see the room.").addOption("Continue",Qn("magic_library_2","(Storyline) The Magic Library").setSimpleDescription('The researcher looks around the room, with clear interest.\n      \n"This looks like it used to be the library of the school, a very long time ago", she says. "There could be a ton of knowledge here, but we need to fix this place. There is just too much dust for this to be any useful."\n\nYou ready yourself to clear the dust with magic...').addOption("Conjure a breeze to clear the dust (2400 Mana)",Qn("magic_library_3","(Storyline) The Magic Library").setSimpleDescription('"A lot better!", you hear as you finish the spell, although it sounded quite odd. You turn to face your researcher and see her expression, but you don\'t find her looking at you. She is instead looking directly at a corner. You follow her gaze...\n          \n...and you find *a ghost, staring right back at you and moving towards you and your researcher!*').addOption("Continue",Qn("magic_library_4","(Storyline) The Magic Library").setSimpleDescription('You instinctively spring into a defensive position and ready yourself for combat. The ghost, however, stops in its tracks.\n              \nThe ghastly figure in front of you looks like the white silhouette of an old man, with a top hat, a mustache and a coat. It (he?) looks at you curiously.\n\n"Please, I mean no harm!", he begins to say. You realize the voice you had heard was actually from this ghost. You try to calm yourself down.').addOption("Continue",Qn("magic_library_5","(Storyline) The Magic Library").setSimpleDescription('"Let me introduce myself", he says. "I am the librarian of this magic school. Or at least, I *used to be,* back when I still had a body..." He sighs, with a sad expression on his ghastly face.\n                  \n"After the headmaster passed away, the place fell into disrepair. The students left. There was nobody left. But I couldn\'t bring myself to leave. I spent more than half of my life taking care of this very room. And now... this place is so full of monsters."').addOption("Continue",Qn("magic_library_6","(Storyline) The Magic Library").setSimpleDescription('"Can you do me a favor?", he asks you. "It would make me feel at peace to be able to see this place restored to how it was supposed to be. If you can exterminate the mice and bats around here, and bring me their tails and wings as proof, I can show you where some of the most powerful books are in this room."\n                        \n"100 Mouse Tails and 100 Bat Wings should do the trick."').addOption("Hand over the tails and wings",Qn("magic_library_7","(Storyline) The Magic Library").setSimpleDescription('You hand over the materials. It sure took you a while to accumulate those...\n                          \nThe librarian ghost seems quite happy.\n\n"This is... I feel I can finally rest in peace now", he exclaims. You hear his voice breaking a bit as he says that.\n\n"Very well. Follow me."').addOption("Continue",DA).build(),(function(e){return e=oo(TA,100,e),e=oo(RA,100,e)}),void 0,(function(e,t){return ro(TA,e)>=100&&ro(RA,e)>=100})).addOption("Maybe later").build()).build()).build()).build(),Wr(Nr.Mana,-2400),void 0,(function(e,t){return Gr(e,Nr.Mana)>=2400})).addOption("Maybe later").build()).build(),[qe.STORYLINE],fe("magic_library_event_triggered"));for(var IA in Te("magic_library_blue_tome",(function(e){if(ve(e,"magic_library_blue_tome_taken")&&(!ce(e,"exploration_unlocked")||!or(e)||!ir(e)))return function(e){return e=fe("exploration_unlocked")(e),e=fe("new_inventory_unlocked")(e),e=fe("crafting_unlocked")(e)}})),ti.register(new ei("The Magic Library (Blue Tome)",2020,(function(e){return be(e,"magic_library_blue_tome_taken")}),(function(e){return ve(e,"magic_library_blue_tome_taken")}),"There's a chance of this happening randomly if you are exploring the School Basement...","Start game with Inventory, Crafting and Exploration unlocked",(function(e){return!0}))),Nr)IA!=Nr.Mana&&xe([[IA,Ee.Cap]],IA+"MagicLibraryYellowTome",Oe.Multiplier,(function(e){return ve(e,"magic_library_yellow_tome_taken")?1.2:1}));ti.register(new ei("The Magic Library (Yellow Tome)",2021,(function(e){return be(e,"magic_library_yellow_tome_taken")}),(function(e){return ve(e,"magic_library_yellow_tome_taken")}),"There's a chance of this happening randomly if you are exploring the School Basement...","+20% max of every resource except :mana:Mana",(function(e){return!0}))),xe([[Ee.ExplorationDelay]],"MagicLibraryGreenTomeExplorationDelay",Oe.Multiplier,(function(e){return ve(e,"magic_library_green_tome_taken")?.5:1})),ti.register(new ei("The Magic Library (Green Tome)",2022,(function(e){return be(e,"magic_library_green_tome_taken")}),(function(e){return ve(e,"magic_library_green_tome_taken")}),"There's a chance of this happening randomly if you are exploring the School Basement...","-50% Exploration delay",(function(e){return!0}))),xe([[io.Player,da.MaxHP]],"MagicLibraryRedTomeMaxHP",Oe.Addition,(function(e){return ve(e,"magic_library_red_tome_taken")?100:0})),xe([[io.Player,da.HPRegen]],"MagicLibraryRedTomeHPRegen",Oe.Addition,(function(e){return ve(e,"magic_library_red_tome_taken")?.2:0})),ti.register(new ei("The Magic Library (Red Tome)",2023,(function(e){return be(e,"magic_library_red_tome_taken")}),(function(e){return ve(e,"magic_library_red_tome_taken")}),"There's a chance of this happening randomly if you are exploring the School Basement...","+100 Max:hp:, +0.2:hpRegen:",(function(e){return!0}))),Yc(PA,40,!0,(function(e){return!ce(e,"magic_library_event_triggered")&&nu(e)!=H.None&&[bA.getId(),pA.getId(),AA.getId()].includes(tu(e).getId())&&(!ve(e,"magic_library_blue_tome_taken")||!ve(e,"magic_library_yellow_tome_taken")||!ve(e,"magic_library_green_tome_taken")||!ve(e,"magic_library_red_tome_taken"))}));var _A=PA;function NA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var FA=new(function(e){No()(r,e);var t=NA(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"cloth"}},{key:"getPicture",value:function(){return n(874)}},{key:"getBaseName",value:function(){return"Cloth"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A basic material for a lot of equipment, especially for spellcasters."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:1}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{wool:4}}}}]),r}(If)),LA=Un("monster_encyclopedia","(Storyline) Foe Encyclopedia",[qe.STORYLINE]);LA.setOnTrigger(fe("monster_encyclopedia_triggered")).createMessage().setSimpleDescription("You have now felled a small variety of different enemies in your exploration of the school. Many of them, you realize that you're seeing over and over again.\n    \nIt occurs to you that keeping track of those foes might become useful later on, as you notice them dropping unique, useful objects when you defeat them. Perhaps a record of this would help you in the future, in the case you need these?\n\nYou propose the idea to your researcher. She agrees that it is a good idea, nodding.").addOption("Continue",LA.createMessage().setSimpleDescription('Your apprentice shows up, his excitement clearly showing once more through the way he approaches you. "A *Bestiary*! A *record of our adventures*! We will *surely* become famous this way!"\n        \nYou proceed to calm down the apprentice, as your researcher laughs a little. It\'ll certainly be useful...\n\nYou prepare to set up the book, and check once more to see if you have enough stationery...').addOption("Create a Bestiary (10 Cloth)",{transform:function(e){return e=oo(FA,10,e)},isEnabled:function(e,t){return ro(FA,e)>=10}},LA.createMessage().setSimpleDescription("Cloth is probably not the best material, you think. But it'll have to do. You put it together, bind it with a makeshift book cover, and crudely etch \"Bestiary\" on it with big letters.\n            \nYou show it to your researcher, who makes a face of disgust. You understand her feeling - it looks like a children's book cover. The apprentice, however, can't keep his eyes off the book, seemingly oblivious to this fact.").addOption("Continue",{transform:function(e){return e=ye("bestiary_unlocked")(e)}},LA.createMessage().setSimpleDescription('Well, you\'re certainly not very good at this... maybe it was a better idea to ask your researcher for help? Nevertheless, you jot down what you have learned from the foes. You are certain this will help you at some point in the future, and perhaps, it might also help others...\n                \n**You have cleared the "Foe Encyclopedia" Storyline! You have permanently unlocked the "Bestiary" feature. Defeat enemies enough times to see information about their stats, loot, and encounter chances. This will stay unlocked in future runs!**'))).addOption("Maybe later")),ti.register(new ei("Foe Encyclopedia",2060,(function(e){return be(e,"bestiary_unlocked")}),(function(e){return ve(e,"bestiary_unlocked")}),"Explore the School Basement B2",'Unlock "Bestiary" feature',(function(e){return!0})));var YA=LA.build();Te("monster_encyclopedia_unlocked",(function(e){if(!ve(e,"bestiary_unlocked")&&!ce(e,"monster_encyclopedia_triggered")&&(e.exploration.successfulExplorationsPerFloor[pA.getId()]>20||pA.canFightBoss(e)))return lt(YA)}));var VA=YA,UA=Dn("statue",Qn("statue_1","(Storyline) The Statue").setSimpleDescription('You hear footsteps and turn around to see the researcher and the apprentice walking towards you.\n    \n"Good morning!", exclaims the researcher. "We were thinking", she continues, "that we should build a statue in campus. It would serve as a landmark and a way to make our institution unique."\n\nYou think it could be a great idea, but you know you will need a lot of materials...').addOption("Build a statue (Requires Lv11 Conjuration, 7200 Stone, 800 Iron)",Qn("statue_2","(Storyline) The Statue").setSimpleDescription("You put together all the stones and the iron and ready yourself to cast a spell to shape the new statue. You decide to...").addOption("Build a statue of the researcher (2000 Mana)",Qn("statue_3_researcher","(Storyline) The Statue").setSimpleDescription('You shape the materials creating a splitting image of the researcher. She gasps, surprised, and blushes in embarrassment.\n          \n"A statue of *myself*? Why?!", she pouts. You explain to her that magical research is the cornerstone to any respectable school, and by building a statue of her, you honor and highlight this fact. She is unconvinced by your argument, but you know better.\n\n**You have completed "The Statue" storyline by building a statue of the researcher! In future runs, your researchers will be inspired by this statue and work 25% faster!**').build(),(function(e){return e=Wr(Nr.Mana,-2e3)(e),e=me("researcher_statue_built")(e)}),(function(e){return!ve(e,"researcher_statue_built")}),(function(e){return Gr(e,Nr.Mana)>=2e3})).addOption("Build a statue of the apprentice (2000 Mana)",Qn("statue_3_apprentice","(Storyline) The Statue").setSimpleDescription('You shape the materials creating a splitting image of the apprentice. He stares at it with his mouth open; thankfully his newly built statue looks a lot more determined!\n          \n"W-Wow", he begins to say, but you can tell he is at a loss of words. Your decision, however, was very clear. Students are the soul of any school, and he was the very first one.\n\n**You have completed "The Statue" storyline by building a statue of the apprentice! In future runs, you will have an extra 4 apprentices right from when you unlock the feature, without the need to build housing!**').build(),(function(e){return e=Wr(Nr.Mana,-2e3)(e),e=me("apprentice_statue_built")(e)}),(function(e){return!ve(e,"apprentice_statue_built")}),(function(e){return Gr(e,Nr.Mana)>=2e3})).addOption("Build a statue of yourself (2000 Mana)",Qn("statue_3_headmaster","(Storyline) The Statue").setSimpleDescription('You shape the materials creating a splitting image of yourself. You stare at it: it looks glorious and you feel proud of it.\n          \n"Amazing", says the researcher. "This is the best way to honor our school - what can be better than a statue of our very leader?" The apprentice bows deeply as a show of respect.\n\n**You have completed "The Statue" storyline by building a statue of yourself! In future runs, the statue\'s presence will grant you an extra +5:mana:/sec and +500 Max:mana:!**').build(),(function(e){return e=Wr(Nr.Mana,-2e3)(e),e=me("headmaster_statue_built")(e)}),(function(e){return!ve(e,"headmaster_statue_built")}),(function(e){return Gr(e,Nr.Mana)>=2e3})).build(),(function(e){return e=Wr(Nr.Stone,-7200)(e),e=Wr(Nr.Iron,-800)(e)}),void 0,(function(e){return Pt(e,xt.Conjuration)>=11&&Gr(e,Nr.Stone)>=7200&&Gr(e,Nr.Iron)>=800})).build(),[qe.STORYLINE],fe("statue_event_triggered"));xe([[Ee.Research]],"ResearcherStatueResearch",Oe.Multiplier,(function(e){return ve(e,"researcher_statue_built")?1.25:1})),ti.register(new ei("The Statue (Researcher)",1030,(function(e){return be(e,"researcher_statue_built")}),(function(e){return ve(e,"researcher_statue_built")}),"There's a chance of this happening randomly if your inventory is unlocked...","+25% Research speed",(function(e){return!0}))),xe([[Ee.Apprentice]],"ApprenticeStatue",Oe.Addition,(function(e){return ve(e,"apprentice_statue_built")?4:0})),ti.register(new ei("The Statue (Apprentice)",1031,(function(e){return be(e,"apprentice_statue_built")}),(function(e){return ve(e,"apprentice_statue_built")}),"There's a chance of this happening randomly if your inventory is unlocked...","Start runs with 4 extra apprentices",(function(e){return!0}))),xe([[Nr.Mana,Ee.Cap]],"HeadmasterStatue",Oe.Addition,(function(e){return ve(e,"headmaster_statue_built")?500:0})),zr.register(new Jr("TheStatueHeadmaster",(function(e){return ve(e,"headmaster_statue_built")?{Mana:Ce([Nr.Mana,Ee.Production],e,5)}:{}}))),ti.register(new ei("The Statue (Headmaster)",1032,(function(e){return be(e,"headmaster_statue_built")}),(function(e){return ve(e,"headmaster_statue_built")}),"There's a chance of this happening randomly if your inventory is unlocked...","+500 Max:mana:, +5:mana:/sec",(function(e){return!0}))),Yc(UA,20,!0,(function(e){return!ce(e,"statue_event_triggered")&&ir(e)&&(!ve(e,"researcher_statue_built")||!ve(e,"apprentice_statue_built")||!ve(e,"headmaster_statue_built"))}));var QA=UA;function GA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var HA=new(function(e){No()(n,e);var t=GA(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Time Dilation"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Slow down the passage of time."}},{key:"getBaseActionEffects",value:function(){return{duration:{value:30,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{dispellable:!1})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"Time moves at 0.5x speed for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 510}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:14}}}]),n}(tl));xe([[Ee.GameSpeed]],"TimeDilationGameSpeed",Oe.Multiplier,(function(e){return fo(e,"Time Dilation")?.5:1}));var WA=HA,JA=Un("time_ritual","(Storyline) The Time Ritual",[qe.STORYLINE]);JA.setOnTrigger(fe("time_ritual_triggered")).createMessage().setSimpleDescription('As you look at the :timepiece:Time Pieces you have accumulated, your researcher and apprentice surprise you, holding a large scroll.\n  \n"Those t-time pieces... they are the same, aren\'t they." The apprentice is looking at the scroll, pointing at a drawing of something on it.').addOption("Continue",JA.createMessage().setSimpleDescription('"Headmaster, we have found instructions for a strange ritual," says your researcher, looking at you intently. "With enough mana and skill, it should be possible to bend time to our will."\n\nThe prospect is tempting. You lean over and look at the scroll - and you see there is not just one set of instructions, but several!\n\nYou glance at your apprentice. You are going to need help with the ritual.').addOption("Continue",JA.createMessage().setSimpleDescription("And then you decide to...").addOption("Do the ritual to hoard more time (2500 Mana, Conjuration Lv13)",{transform:function(e){return e=Wr(Nr.Mana,-2500)(e)},isEnabled:function(e){return Gr(e,Nr.Mana)>=2500&&Pt(e,xt.Conjuration)>=13},isVisible:function(e){return!be(e,"hoard_time_ritual_finished")}},JA.createMessage().setSimpleDescription("You move to a large room, together with your apprentice and researcher. Together with your apprentice, you take positions in opposite ends of the room, and then you start chanting.\n\nImages of an empty room fill your vision. Then a time piece appears and falls into the room. Then another one. Then two more. Then ten more. And more, and more. So many time pieces. They pile up in the center, reach the ceiling, but they continue to grow until the walls of the room. And they keep coming. You are trapped in between time pieces, and there is no escape. You feel your consciousness fading...").addOption("Continue",{transform:me("hoard_time_ritual_finished")},JA.createMessage().setSimpleDescription('When you come to, you are where you started, looking at your Time Pieces. Except there are no time pieces. You feel odd. You hear the researcher calling for you from behind, and turn around to see her and the apprentice calling you for supper, as if nothing had happened.\n\nDid the ritual work? You aren\'t sure, but something does seem different...\n\n**You have completed the "The Time Ritual" storyline! In future runs, you will be able to store 70K more :timepiece:Time Pieces!**'))).addOption("Do the ritual to make time pass faster (3500 Mana, Illusion Lv16)",{transform:function(e){return e=Wr(Nr.Mana,-3500)(e)},isEnabled:function(e){return Gr(e,Nr.Mana)>=3500&&Pt(e,xt.Illusion)>=16},isVisible:function(e){return!be(e,"speed_up_time_ritual_finished")}},JA.createMessage().setSimpleDescription("You move to a large room, together with your apprentice and researcher. Together with your apprentice, you take positions in opposite ends of the room, and then you start chanting.\n\nImages of all the time you have spent at the campus flash before your eyes. They seem unnaturally sped up. They get more vivid, until you can no longer see anything else except them. They continue getting faster and faster and you start feeling overwhelmed. You feel your consciousness fading...").addOption("Continue",{transform:me("speed_up_time_ritual_finished")},JA.createMessage().setSimpleDescription('When you come to, you are where you started, looking at your Time Pieces. Except there are no time pieces. You feel odd. You hear the researcher calling for you from behind, and turn around to see her and the apprentice calling you for supper, as if nothing had happened.\n\nDid the ritual work? You aren\'t sure, but something does seem different...\n\n**You have completed the "The Time Ritual" storyline! In future runs, the "8x" Time Piece speedup option will consume 25% less :timepiece:!**'))).addOption("Do the ritual to make time pass slower (4500 Mana, Illusion Lv20)",{transform:function(e){return e=Wr(Nr.Mana,-4500)(e)},isEnabled:function(e){return Gr(e,Nr.Mana)>=4500&&Pt(e,xt.Illusion)>=20},isVisible:function(e){return WA.isVisible(e)&&!be(e,"time_dilation_time_ritual_finished")}},JA.createMessage().setSimpleDescription("You move to a large room, together with your apprentice and researcher. Together with your apprentice, you take positions in opposite ends of the room, and then you start chanting.\n\nImages of all the time you have spent at the campus flash before your eyes. Or at least, that's what it seems, because movement seems to be in comically slow motion. You stare at your researcher in those images, who is introducing herself when you first met her, but her mouth moves ever so slow, and it becomes slower and slower. Unbearably slow. You feel your consciousness fading...").addOption("Continue",{transform:me("time_dilation_time_ritual_finished")},JA.createMessage().setSimpleDescription('When you come to, you are where you started, looking at your Time Pieces. Except there are no time pieces. You feel odd. You hear the researcher calling for you from behind, and turn around to see her and the apprentice calling you for supper, as if nothing had happened.\n\nDid the ritual work? You aren\'t sure, but something does seem different...\n\n**You have completed the "The Time Ritual" storyline! In future runs, the "Time Dilation" spell will cost 0:mana:!**'))).addOption("Do the ritual to increase Time Piece income (6000 Mana, Enchantment Lv25)",{transform:function(e){return e=Wr(Nr.Mana,-6e3)(e)},isEnabled:function(e){return Gr(e,Nr.Mana)>=6e3&&Pt(e,xt.Enchantment)>=25},isVisible:function(e){return!be(e,"income_time_ritual_finished")&&!Q.isDemo()}},JA.createMessage().setSimpleDescription("You move to a large room, together with your apprentice and researcher. Together with your apprentice, you take positions in opposite ends of the room, and then you start chanting.\n\nIn an odd vision, you see yourself next to a stream of Time Pieces flowing next to you. The stream suddenly begins speeding up. More and more Time Pieces are flowing. The stream floods and grazes your feet. But it doesn't stop, it keeps rising, to your ankles, then to your knees, and then to your waist. You can't move. It covers your shoulders. And your entire head. You feel your consciousness fading...").addOption("Continue",{transform:me("income_time_ritual_finished")},JA.createMessage().setSimpleDescription('When you come to, you are where you started, looking at your Time Pieces. Except there are no time pieces. You feel odd. You hear the researcher calling for you from behind, and turn around to see her and the apprentice calling you for supper, as if nothing had happened.\n\nDid the ritual work? You aren\'t sure, but something does seem different...\n\n**You have completed the "The Time Ritual" storyline! In future runs, your Time Piece income from time spent offline will increase by 50%!**'))).addOption("Do the ritual to convert into more research (9000 Mana, Illusion Lv29)",{transform:function(e){return e=Wr(Nr.Mana,-9e3)(e)},isEnabled:function(e){return Gr(e,Nr.Mana)>=9e3&&Pt(e,xt.Illusion)>=29},isVisible:function(e){return!be(e,"research_time_ritual_finished")&&!Q.isDemo()}},JA.createMessage().setSimpleDescription("You move to a large room, together with your apprentice and researcher. Together with your apprentice, you take positions in opposite ends of the room, and then you start chanting.\n\nA room full of books. You spot your researcher. She seems to be frantically doing a lot of work. Faster and faster. The books pile up in front of her as she moves and reads in impossible speeds. It continues to get faster and the books continue to pile up until you can no longer see. You feel your consciousness fading...").addOption("Continue",{transform:me("research_time_ritual_finished")},JA.createMessage().setSimpleDescription('When you come to, you are where you started, looking at your Time Pieces. Except there are no time pieces. You feel odd. You hear the researcher calling for you from behind, and turn around to see her and the apprentice calling you for supper, as if nothing had happened.\n\nDid the ritual work? You aren\'t sure, but something does seem different...\n\n**You have completed the "The Time Ritual" storyline! In future runs, the "Use Time Pieces" button under "Research" will give 50% more experience!**')))));var zA=JA.build(),ZA=zA;function XA(){tt(pm),tt(dm),tt(gm),tt(Om),tt(Am),tt(wA),tt(wm),tt(QA),tt(kA),tt(_A),tt(EA),tt(ZA),ti.register(new ei("The Time Ritual (Hoard Time)",1050,(function(e){return be(e,"hoard_time_ritual_finished")}),(function(e){return ve(e,"hoard_time_ritual_finished")}),"There's a chance of this happening randomly if you have unlocked Research, Apprentices, and you have some :timepiece:...","+70K Max:timepiece:",(function(e){return!0}))),ti.register(new ei("The Time Ritual (Speed Up)",1051,(function(e){return be(e,"speed_up_time_ritual_finished")}),(function(e){return ve(e,"speed_up_time_ritual_finished")}),"There's a chance of this happening randomly if you have unlocked Research, Apprentices, and you have some :timepiece:...",'Time Pieces\' "8x" speedup consumes 25% less :timepiece:',(function(e){return!0}))),ti.register(new ei("The Time Ritual (Slow Down)",1052,(function(e){return be(e,"time_dilation_time_ritual_finished")}),(function(e){return ve(e,"time_dilation_time_ritual_finished")}),"There's a chance of this happening randomly if you have unlocked Research, Apprentices, and you have some :timepiece:...",'"Time Dilation" spell costs 0:mana:',(function(e){return!0}))),Q.isDemo()||(ti.register(new ei("The Time Ritual (Income)",1053,(function(e){return be(e,"income_time_ritual_finished")}),(function(e){return ve(e,"income_time_ritual_finished")}),"There's a chance of this happening randomly if you have unlocked Research, Apprentices, and you have some :timepiece:...","+50%:timepiece: gain while offline",(function(e){return!0}))),ti.register(new ei("The Time Ritual (Research)",1054,(function(e){return be(e,"research_time_ritual_finished")}),(function(e){return ve(e,"research_time_ritual_finished")}),"There's a chance of this happening randomly if you have unlocked Research, Apprentices, and you have some :timepiece:...",'"Use Time Pieces (Research)" gives +50% Exp',(function(e){return!0})))),xe([[Nr.TimePieces,Ee.Cap]],"TimeRitualCap",Oe.Addition,(function(e){return ve(e,"hoard_time_ritual_finished")?7e4:0})),xe([[Ee.TimePiecePerFasterSpeedup]],"TimeRitualFasterSpeedup",Oe.Multiplier,(function(e,t){return!ve(e,"speed_up_time_ritual_finished")||null!=t&&t.isWarp?1:.75})),xe([[WA.getName(),Ee.Cost]],"TimeRitualDilationCost",Oe.Multiplier,(function(e){return ve(e,"time_dilation_time_ritual_finished")?0:1})),xe([[Ee.TimePiecePerResearch]],"TimeRitualResearchCost",Oe.Multiplier,(function(e){return ve(e,"research_time_ritual_finished")?1/1.5:1})),xe([[Ee.OfflineTimePieceGain,Nr.TimePieces]],"TimeRitualIncome",Oe.Multiplier,(function(e){return ve(e,"income_time_ritual_finished")?1.5:1})),Yc(zA,15,!0,(function(e){return!ce(e,"time_ritual_triggered")&&Gr(e,Nr.TimePieces)>0&&ce(e,"research_unlocked")&&ce(e,"autocast_unlocked")&&(!ve(e,"hoard_time_ritual_finished")||!ve(e,"speed_up_time_ritual_finished")||!ve(e,"research_time_ritual_finished")&&!Q.isDemo()||!ve(e,"income_time_ritual_finished")&&!Q.isDemo()||!ve(e,"time_dilation_time_ritual_finished")&&WA.isVisible(e))})),tt($d),tt(VA),us(),Uc(),function(){var e=Un("RandomSpoutEvents_Staff","Found a staff!",[qe.INCONSEQUENTIAL_RANDOM_EVENT,qe.DO_NOT_AUTO_TRIGGER_IF_ONGOING]);e.createMessage().setSimpleDescription("A staff was found on the ground.").addOption("Pick up",{transform:Wr(Nr.Mana,-100)},e.createMessage().setSimpleDescription("You pick up the staff. It's cursed! You feel your mana getting drained.\n          \n**You lose 100:mana:!**")).addOption("Destroy",e.createMessage().setSimpleDescription("You destroy the staff. Wonder what it could have been...")),Yc(e.build(),2,!1),Yc(Dn("RandomSpoutEvents_2",Qn("RandomSpoutEvents_2","The Mana Spouts are Bursting!").setSimpleDescription("It looks like our mana spouts are suddenly bursting with activity and producing Mana twice as fast!").build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT],mo("Mana Spouts bursting with activity!","Mana Spouts bursting with activity!",300,{mode:"add"})),100,!1,(function(e){return Go(e,Tg)>0})),xe([[Tg.getName(),Ee.Production]],"ManaSpoutsBurstingWithActivity",Oe.Multiplier,(function(e){return fo(e,"Mana Spouts bursting with activity!")?2:1})),Yc(Dn("RandomSpoutEvents_3",Qn("RandomSpoutEvents_3","Bandits!").setSimpleDescription("*Oh no!* It looks like bandits have looted one of your vaults! You notice a significant amount of coins missing. Frustrated, you hope to catch them next time...\n        \n**You lose {coins}:coins:!**").build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT],(function(e,t){return Wr(Nr.Coins,-t.coins)(e)})),100,!1,(function(e){return Go(e,am)>0}),(function(e){return{coins:Math.floor(Gr(e,Nr.Coins)*(.15+.2*Math.random()))}}));var t=function(e){Yc(Dn("RandomSpoutEvents_8_"+e,Qn("RandomSpoutEvents_8_"+e,"Old Book of "+e).setSimpleDescription("One of your researchers seems to have come across a dusty book. The book seems to contain knowledge about "+e+". Thrilled, your researchers get back to work with the new knowledge.\n  \n  **You gain {exp} "+e+" experience!**").build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT],(function(t,n){return _t(e,n.exp)(t)})),30,!1,(function(t){return ce(t,"research_unlocked")&&Gt(t).includes(e)&&Pt(t,e)<St(t)}),(function(t){return{exp:Math.floor((.6+.2*Math.random())*Bt(t,Pt(t,e)+1,e)*Math.pow(.96,Pt(t,e)))}}))};for(var n in xt)t(n);Yc(Dn("RandomSpoutEvents_9",Qn("RandomSpoutEvents_9","A Pile of Wood").setSimpleDescription("You stumble upon a pile of wood as you walk through campus. You are not sure why it's there, but it seems misplaced. You decide to take it.\n        \n**You obtain {amount}:wood:!**").build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT],(function(e,t){return Wr(Nr.Wood,t.amount)(e)})),100,!1,(function(e){return ce(e,"gather_wood_unlocked")&&Go(e,nm)>0}),(function(e){return{amount:Math.floor(350+(Ur(e,Nr.Wood)-350)*Math.random())}})),Yc(Dn("RandomSpoutEvents_10",Qn("RandomSpoutEvents_10","A Pile of Stone").setSimpleDescription("You find a pile of stone as you walk through campus. You are not sure why it's there, but it seems misplaced. You decide to take it.\n        \n**You obtain {amount}:stone:!**").build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT],(function(e,t){return Wr(Nr.Stone,t.amount)(e)})),100,!1,(function(e){return Go(e,nm)>0}),(function(e){return{amount:Math.floor(350+(Ur(e,Nr.Stone)-350)*Math.random())}})),Yc(Dn("RandomSpoutEvents_11",Qn("RandomSpoutEvents_11","A traveling merchant appeared").setSimpleDescription('A traveling merchant crosses the campus doors and waves at you.\n\n"Hello!", he exclaims. "I\'m interested in buying {stoneCost} stones. I\'m willing to pay {coinCost} coins for them. Would you like to sell me some?"').addOption("Sell an illusion of {stoneCost} stones (150 Mana)",Qn("RandomSpoutEvents_11_1","A traveling merchant appeared").setSimpleDescription('You use your Illusion knowledge to trick the merchant and give him {stoneCost} fake stones. The merchant falls for it!\n          \n"Here are your coins", he says. "Nice doing business with you!". He walks away afterwards.\n\nHe will be in for a surprise later, but you are happy you got the coins!').build(),(function(e,t){return e=Wr(Nr.Mana,-150)(e),e=Wr(Nr.Coins,t.coinCost)(e)}),(function(e){return Pt(e,xt.Illusion)>=3}),(function(e){return Gr(e,Nr.Mana)>=150})).addOption("Sell {stoneCost} stones",Qn("RandomSpoutEvents_11_2","A traveling merchant appeared").setSimpleDescription('You give the merchant the {stoneCost} stones. He happily takes them.\n          \n"Here are your coins", he says. "Nice doing business with you!". He walks away afterwards.').build(),(function(e,t){return e=Wr(Nr.Stone,-t.stoneCost)(e),e=Wr(Nr.Coins,t.coinCost)(e)}),void 0,(function(e,t){return Gr(e,Nr.Stone)>=t.stoneCost})).addOption("Decline",Qn("RandomSpoutEvents_11_3","A traveling merchant appeared").setSimpleDescription("You decline the transaction. These stones seem more valuable to you. The traveling merchant acknowledges you, and decides to leave.").build()).build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT,qe.DO_NOT_AUTO_TRIGGER_IF_ONGOING]),50,!1,(function(e){return Ur(e,Nr.Stone)>=600}),(function(e){var t=300+Math.floor((Ur(e,Nr.Stone)-300)*Math.random());return{stoneCost:t,coinCost:Math.floor(1250*t/300)}})),Yc(Dn("RandomSpoutEvents_12",Qn("RandomSpoutEvents_12","Your Researchers are Inspired!").setSimpleDescription("Your researchers seem to have a burst of inspiration! They will be studying a little faster for a while.").build(),[qe.INCONSEQUENTIAL_RANDOM_EVENT],mo("Your researchers are inspired!","Your researchers are inspired!",900,{mode:"add"})),100,!1,(function(e){return ce(e,"research_unlocked")})),xe([[Ee.Research]],"ResearcherInspiration",Oe.Multiplier,(function(e,t){return fo(e,"Your researchers are inspired!")?1.25:1}));var r=Un("RainEvent","It's raining!",[qe.INCONSEQUENTIAL_RANDOM_EVENT]).setOnTrigger((function(e,t){return mo("RainEvent","Rain",300,{params:{amountPerSec:t.amount}})(e)})).createMessage().setSimpleDescription("The weather has made a turn for the worse, and it isn't long before raindrops start falling in campus. In just a few minutes, it becomes a large downpour!\n  \nThis rain will certainly help you accumulate water...\n\n**You will obtain {amount}:water:/sec for the next 5 minutes!**").build();zr.register(new Jr("RainEvent",(function(e){var t,n;if(!fo(e,"RainEvent"))return{};var r=ho(e).find((function(e){return"RainEvent"==e.id}));return{Water:null!=(t=null==r||null==(n=r.params)?void 0:n.amountPerSec)?t:0}}))),Yc(r,100,!1,(function(e){return Go(e,sm)>0}),(function(e){return{amount:Math.floor(.0075*Ur(e,Nr.Water)*(.33*Math.random()+.833))}}))}(),function(){var e=Dn("RandomOneTimeCampusEvents_1",Qn("RandomOneTimeCampusEvents_1","Divine my Future").setSimpleDescription('A young woman, dressed as a wizarding apprentice shows up on campus with a crystal ball.\n    \n"Headmaster, your magical prowess is known far and wide", she says. "Crystal balls are important magical artifacts that can be used to know the future. I would like to know my own destiny, but my skill is not strong enough. Perhaps you can help me...?" she asks, looking at you.').addOption("Divine her future (5000 Mana, requires Divination Lv20)",Qn("RandomOneTimeCampusEvents_1_ex","Divine my Future").setSimpleDescription("You put together your Divination skills and attempt to learn about the woman's future. As you focus, images of her flood your mind. Strangely enough, you also see... yourself? She is standing by your side. And it looks like both of you are in the middle of casting a Divination spell!\n          \nYou then understand. She is particularly talented with Divination. You are sure that with a little training, she would be able to directly help you with this school. You relay this information to her. She is impressed and in awe.\n\n\"Wow... so that's really my destiny\", she says. \"I... I've been trying to. If that is really my destiny... then I will try even harder. *I must!* Headmaster, please teach me Divination!\", she exclaims. You accept.\n\n**The woman's help with Divination spells will decrease Divination spell cooldowns by half!**").build(),(function(e){return e=Wr(Nr.Mana,-5e3)(e),e=fe("RandomOneTimeCampusEvents_1_DivinerJoined")(e)}),(function(e){return Gt(e).includes(xt.Divination)}),(function(e){return Pt(e,xt.Divination)>=20&&Gr(e,Nr.Mana)>=5e3})).addOption("Pretend to read the future (300 Mana)",Qn("RandomOneTimeCampusEvents_1_1","Divine my Future").setSimpleDescription('You utilize your Illusion prowess to create a fuzzy image inside the crystal ball. You pretend to be focused in divining the future as the apprentice watches in awe.\n          \nAs the illusion runs its course, you appear to exit your trance. You tell the woman that she is destined to learn magic and refine her powers at your institution. As much of a lie as it was, she falls for it.\n\n"Wow... so that\'s really my destiny", she says, while lost in thought. "Then I should comply. ...I-I know that if you go against destiny, you will never be able to be successful... ...Can I stay here and study magic?", she asks. You nod.\n\n**You have obtained an extra apprentice!**').build(),(function(e){return e=Wr(Nr.Mana,-300)(e),e=fe("RandomOneTimeCampusEvents_1_ResearcherJoined")(e)}),(function(e){return Pt(e,xt.Illusion)>=3}),(function(e){return Gr(e,Nr.Mana)>=300})).addOption("Decline",Qn("RandomOneTimeCampusEvents_1_2","Divine my Future").setSimpleDescription("You decline her request. Sad, she thanks you, and leaves.").build()).addOption("Maybe later").build(),[],fe("RandomOneTimeCampusEvents_1_triggered"));xe([[Ee.Apprentice]],"RandomOneTimeCampusEvents_1_ApprenticeJoined",Oe.Addition,(function(e){return ce(e,"RandomOneTimeCampusEvents_1_ResearcherJoined")?1:0})),xe([[Ee.SpellCooldown,xt.Divination]],"RandomOneTimeCampusEvents_1_DivinerJoined",Oe.Multiplier,(function(e){return ce(e,"RandomOneTimeCampusEvents_1_DivinerJoined")?.5:1})),Yc(e,80,!1,(function(e){return!ce(e,"RandomOneTimeCampusEvents_1_triggered")&&ce(e,"autocast_unlocked")}));var t=Qn("RandomOneTimeCampusEvents_1_x_1","A traveling merchant appeared").setSimpleDescription('"Great doing business with you!", he exclaims, taking your coins. Placing the pebble back inside the bag, he hands over the bag to you.\n      \n  This magical stone will come in handy!').build(),n=Qn("RandomOneTimeCampusEvents_1_x_2","A traveling merchant appeared").setSimpleDescription('"That\'s too bad", he says, putting the stone back in the bag. "Have a good day!", he exclaims while turning back and leaving the campus.').build();Yc(Dn("RandomOneTimeCampusEvents_2",Qn("RandomOneTimeCampusEvents_2","A traveling merchant appeared").setSimpleDescription('A traveling merchant appears at the campus gates and approaches you. "Look at this", he says, while getting a moist bag out from his pockets. He opens the bag, and shows you a small stone. You notice the stone seems to be emanating water.\n      \n"This pebble magically produces water", he says. "This might be useful to you. It can be yours for 1500 coins. Would you like to purchase it?"').addOption("Charm the merchant (400 Mana)",Qn("RandomOneTimeCampusEvents_2_1","A traveling merchant appeared").setSimpleDescription("You use your Illusion prowess to charm the merchant into thinking positively about you. Without noticing, he says: \"Actually... 1500 coins is quite a high price. I'd be happy to give you a *very* good deal. I can't go lower than 150 coins, though. Are you interested?").addOption("Buy the pebble",t,(function(e){return e=Wr(Nr.Coins,-150)(e),e=fe("RandomOneTimeCampusEvents_2_bought")(e)}),void 0,(function(e){return Gr(e,Nr.Coins)>=150})).addOption("Decline",n,he("RandomOneTimeCampusEvents_2_bought")).addOption("Maybe later").build(),Wr(Nr.Mana,-400),(function(e){return Pt(e,xt.Illusion)>=3}),(function(e){return Gr(e,Nr.Mana)>=400})).addOption("Buy the pebble",t,(function(e){return e=Wr(Nr.Coins,-1500)(e),e=fe("RandomOneTimeCampusEvents_2_bought")(e)}),void 0,(function(e){return Gr(e,Nr.Coins)>=1500})).addOption("Decline",n,he("RandomOneTimeCampusEvents_2_bought")).addOption("Maybe later").build(),[],fe("RandomOneTimeCampusEvents_2_triggered")),80,!1,(function(e){return!ce(e,"RandomOneTimeCampusEvents_2_triggered")})),zr.register(new Jr("WaterPebble",(function(e){return ce(e,"RandomOneTimeCampusEvents_2_bought")?{Water:1}:{}})))}()}function qA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var KA=new(function(e){No()(n,e);var t=qA(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Wool Farm"}},{key:"getMonstiumCost",value:function(){return 600}},{key:"getDisplayDescription",value:function(e){return"Adds a section of the school dedicated to raising sheep for wool."}},{key:"getDisplayEffect",value:function(e){return'Unlocks "Wool Farm" exploration area'}},{key:"getUpgradeRequirements",value:function(){return[]}}]),n}(xg));function $A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ey=new(function(e){No()(n,e);var t=$A(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Wool Farm Expansion"}},{key:"getMonstiumCost",value:function(){return 12500}},{key:"getDisplayDescription",value:function(e){return"Expands the Wool Farm to be able to find and fight Enchanted Sheep."}},{key:"getDisplayEffect",value:function(e){return'Unlocks "Magical Pen" exploration area inside "Wool Farm"'}},{key:"isVisibleExtraChecks",value:function(e){return Oa.getById("thunderTower").isUnlocked(e)}},{key:"getUpgradeRequirements",value:function(){return[KA]}}]),n}(xg));function ty(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ny=new(function(e){No()(r,e);var t=ty(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"enchantedSheep"}},{key:"getLevel",value:function(){return 26}},{key:"getName",value:function(){return"Enchanted Sheep"}},{key:"getPicture",value:function(){return n(875)}},{key:"getBaseStats",value:function(){return{maxHP:1400,defense:48,attack:70,attackDelay:2,dodgeChance:.1,critChance:.02}}},{key:"getNextAction",value:function(e){var t=this;if(Math.random()<.01)return{name:"Hop Around",delay:this.getAttackDelay(e),transform:function(e){return e}};return Math.random()<.1?{name:"Charge!",delay:2*this.getAttackDelay(e),transform:function(e){return Au(e,1,2*t.getAttack(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 1660}},{key:"getMonstiumAwarded",value:function(e){return 152}},{key:"getItemsAwarded",value:function(e){return[{itemId:"manaRegenerationPotion",chance:.02,amount:1},{itemId:"magicWool",chance:1,amount:1}]}}]),r}(Ru));function ry(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var oy=new(function(e){No()(n,e);var t=ry(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Wool Farm Remake"}},{key:"isVisibleExtraChecks",value:function(e){return ce(e,"wizards_arena_unlocked")}},{key:"getMonstiumCost",value:function(){return 1e6}},{key:"getItemCost",value:function(){return{bookOfDivineKnowledge:20}}},{key:"getDisplayDescription",value:function(e){return"Expands the Wool Farm even more to be able to find and fight Black Sheep."}},{key:"getDisplayEffect",value:function(e){return'Unlocks "Special Stockade" exploration area inside "Wool Farm"'}},{key:"getUpgradeRequirements",value:function(){return[ey]}}]),n}(xg));function iy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ay=function(e){No()(r,e);var t=iy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"blackSheep"}},{key:"getLevel",value:function(){return 46}},{key:"getName",value:function(){return"Black Sheep"}},{key:"getPicture",value:function(){return n(876)}},{key:"getBaseStats",value:function(){return{maxHP:6e4,defense:350,attack:320,attackDelay:1.2,dodgeChance:.1,critChance:.02}}},{key:"getNextAction",value:function(e){var t=this;if(Math.random()<.01)return{name:"Hop Around",delay:this.getAttackDelay(e),transform:function(e){return e}};return Math.random()<.3?{name:"Charge!",delay:2*this.getAttackDelay(e),transform:function(e){return Au(e,1,3*t.getAttack(e),t.getCriticalChance(e))}}:{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e),t.getCriticalChance(e))}}}},{key:"getCoinsAwarded",value:function(e){return 99999}},{key:"getMonstiumAwarded",value:function(e){return 4650}},{key:"getItemsAwarded",value:function(e){return[{itemId:"blackWool",chance:1,amount:1},{itemId:"bookOfDivineKnowledge",chance:.5,amount:1}]}}]),r}(Ru);Te("blackSheepEncountered",(function(e){if(nu(e)==H.Combat&&"blackSheep"===Wa(e).getId())return mo("EnemyStunPrevention","Stun Protection",600,{combatOnly:!0,isEnemyTemporaryEffect:!0})}),(function(e){return nu(e)}));var uy=new ay;function cy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ly=new(function(e){No()(n,e);var t=cy(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"theSpecialStockade"}},{key:"getFloorName",value:function(){return"The Special Stockade"}},{key:"getExplorationRequiredTimeSec",value:function(){return 20}},{key:"_getExplorationSuccessesForBoss",value:function(){return 0}},{key:"getBoss",value:function(){}},{key:"getBreedingLevel",value:function(){return 49}},{key:"isMainStoryDungeonFloor",value:function(){return!1}},{key:"isUnlocked",value:function(e){return oy.isPurchased(e)}},{key:"getExplorationPossibilities",value:function(e){return[{weight:100,transforms:Pm(uy)}]}},{key:"getNextFloor",value:function(){}}]),n}(Im));function sy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var fy=new(function(e){No()(n,e);var t=sy(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"theMagicalPen"}},{key:"getFloorName",value:function(){return"The Magical Pen"}},{key:"getExplorationRequiredTimeSec",value:function(){return 10}},{key:"_getExplorationSuccessesForBoss",value:function(){return 0}},{key:"getBoss",value:function(){}},{key:"getBreedingLevel",value:function(){return 28}},{key:"isMainStoryDungeonFloor",value:function(){return!1}},{key:"isUnlocked",value:function(e){return ey.isPurchased(e)}},{key:"getExplorationPossibilities",value:function(e){return[{weight:100,transforms:Pm(ny)}]}},{key:"getNextFloor",value:function(){return ly}}]),n}(Im));function dy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var hy=new(function(e){No()(n,e);var t=dy(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"theCorral"}},{key:"getFloorName",value:function(){return"The Corral"}},{key:"getExplorationRequiredTimeSec",value:function(){return 6}},{key:"_getExplorationSuccessesForBoss",value:function(){return 0}},{key:"getBoss",value:function(){}},{key:"isMainStoryDungeonFloor",value:function(){return!1}},{key:"getBreedingLevel",value:function(){return 8}},{key:"isUnlocked",value:function(e){return!0}},{key:"getExplorationPossibilities",value:function(e){return[{weight:100,transforms:Pm(Nm)}]}},{key:"getNextFloor",value:function(){return fy}}]),n}(Im)),gy=U()((function e(){Y()(this,e)}));function my(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ay=new(function(e){No()(n,e);var t=my(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"woolFarm"}},{key:"getName",value:function(){return"Wool Farm"}},{key:"getDungeonFloors",value:function(){return[hy,fy,ly]}},{key:"isUnlocked",value:function(e){return KA.isPurchased(e)}}]),n}(gy));function yy(e,t,n,r){var o=Un(e,"Found a chest",[qe.INCONSEQUENTIAL_RANDOM_EVENT,qe.DO_NOT_AUTO_TRIGGER_IF_ONGOING]);o.createMessage().setSimpleDescription("As you explore, you happen across a suspicious chest. You think about what you should do...").addOption("Open the chest (Requires inventory space)",{transform:function(e){for(var t of r){var n=tr(t.itemOccurrence.itemId);e=eo({itemId:n.getId(),params:n.generateCraftedParams(e)},t.amount,e)}return e},isEnabled:function(e){return qr(e).length+r.length<=$r(e)}},o.createMessage().setSimpleDescription("You open the chest. You find a little something! You take it with you.\n    \n**You obtained the following item(s): "+r.map((function(e){var t=tr(e.itemOccurrence.itemId);return(e.amount>1?Mn(e.amount)+" ":"")+":"+t.getId()+":"+t.getName(e.itemOccurrence.params)})).join(", ")+"!**")).addOption("Do not open",o.createMessage().setSimpleDescription("You are not sure about the chest and think it might be a trap. You decide to leave it alone...")).addOption("Decide later");var i=o.build();return Yc(i,n,!1,(function(e){var n;return nu(e)!=H.None&&t.includes(null==(n=tu(e))?void 0:n.getId())})),i}function py(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var vy=Co()((function(e,t,n,r,o){return{description:t?"Use":"Use ("+Mn(e,{showDecimals:!0})+" sec)",isEnabled:t,isActive:n,transform:function(e){var t=tr(r).getPrimaryAction(e,o);return null!=t&&t.isEnabled&&((e=to({itemId:r,params:o},1,e)).lastItemUsedTimes[r]=Ze(e),e=tr(r).doConsumableItemEffect(e,o)),e}}}),{cacheKey:JSON.stringify}),by=function(e){No()(n,e);var t=py(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getTags",value:function(e,t){return[{tag:"Consumable"}]}},{key:"getCooldownSec",value:function(e){return 10}},{key:"getCooldownLeftSec",value:function(e){var t=(e.lastItemUsedTimes[this.getId()]||0)+this.getCooldownSec(e)-Ze(e);return nu(e)!=H.Combat||t<=0?0:t}},{key:"getPrimaryAction",value:function(e,t){var n=this.getCooldownLeftSec(e),r=no({itemId:this.getId(),params:t},e),o=fo(e,"PlayerStun"),i=this.isActive(e);return vy(n,n<=0&&r>0&&!o,i,this.getId(),t)}},{key:"isActive",value:function(e){return fo(e,this.getId())}}]),n}(If);function jy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Oy=new(function(e){No()(r,e);var t=jy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"healthPotion"}},{key:"getPicture",value:function(){return n(877)}},{key:"getBaseName",value:function(){return"Health Potion"}},{key:"getDescription",value:function(){return"A small red potion. Restores :hp:."}},{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t).magnitude;e=su(e,n,"Health Potion");var r={id:Math.random().toString(),damage:-n,isCrit:!1,isHit:!0,time:Ze(e),target:io.Player,tags:[]};return e.exploration.lastEnemyActionResult=r,e.exploration.actionResultQueue.push(r),e}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:80,tags:[Ee.ActionMagnitude]}}}},{key:"getEffect",value:function(e,t){return"+"+Mn(this.getItemEffects(e,t).magnitude)+":hp:"}},{key:"getSalePrice",value:function(){return 96}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:3}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Water:200},items:{medicinalHerb:1}}}}]),r}(by));function ky(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var xy=new(function(e){No()(r,e);var t=ky(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"glaive"}},{key:"getPicture",value:function(){return n(878)}},{key:"getBaseName",value:function(){return"Glaive"}},{key:"getDescription",value:function(){return"An effective weapon, similar to a spear, for dealing large amounts of damage."}},{key:"getAttackBonus",value:function(e,t){return 50}},{key:"getAttackDelayBonusPct",value:function(e,t){return-15}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 4500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:11}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:1500,Wood:4500,Temperature:2400},items:{}}}}]),r}(Lf));function wy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Cy=new(function(e){No()(r,e);var t=wy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"scimitar"}},{key:"getPicture",value:function(){return n(879)}},{key:"getBaseName",value:function(){return"Scimitar"}},{key:"getDescription",value:function(){return"A defensive sword with a curved, wider blade."}},{key:"getAttackBonus",value:function(e,t){return 43}},{key:"getDefenseBonus",value:function(e,t){return 10}},{key:"getEffect",value:function(){return"+43:attack:, +10:defense:"}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 4200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:11}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:1600,Wood:2500,Temperature:2100},items:{}}}}]),r}(Lf));function Sy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ey=function(e){No()(n,e);var t=Sy(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getId",value:function(){return"schoolBasement"}},{key:"getName",value:function(){return"School Basement"}},{key:"getDungeonFloors",value:function(){return[bA,pA,AA]}},{key:"isUnlocked",value:function(e){return!0}}]),n}(gy);yy("school_basement_chest_basic",[bA.getId(),pA.getId(),AA.getId()],80,[{itemOccurrence:{itemId:TA.getId(),params:{}},amount:10},{itemOccurrence:{itemId:RA.getId(),params:{}},amount:10}]),yy("school_basement_chest_rarer",[bA.getId(),pA.getId()],50,[{itemOccurrence:{itemId:Oy.getId(),params:{}},amount:2}]),yy("school_basement_chest_rare",[AA.getId()],10,[{itemOccurrence:{itemId:Cy.getId(),params:{}},amount:1}]),yy("school_basement_chest_rare2",[AA.getId()],10,[{itemOccurrence:{itemId:xy.getId(),params:{}},amount:1}]);var My=new Ey;function Ry(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var By=new(function(e){No()(r,e);var t=Ry(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"mimic"}},{key:"getLevel",value:function(){return 15}},{key:"getName",value:function(){return"Mimic"}},{key:"getPicture",value:function(){return n(880)}},{key:"getBaseStats",value:function(){return{maxHP:1200,defense:40,attack:48,attackDelay:2.2,dodgeChance:0,critChance:0}}},{key:"getNextAction",value:function(e){var t=this;return{name:"Attack",delay:this.getAttackDelay(e),transform:function(e){return Au(e,1,t.getAttack(e))}}}},{key:"getCoinsAwarded",value:function(e){return 1e6}},{key:"getMonstiumAwarded",value:function(e){return 99}},{key:"getItemsAwarded",value:function(){return[]}},{key:"isBoss",value:function(){return!0}},{key:"onDeath",value:function(e,t){e=Gc()(Vo()(r.prototype),"onDeath",this).call(this,e,t);var n=Object.values(e.eventOccurrences).find((function(e){return"mimic_event_1"==e.eventId}));return n&&(e.eventOccurrences[n.eventOccurrenceId].currentMessageId="mimic_event_2",e.eventOccurrences[n.eventOccurrenceId].timestamp=Date.now(),e=at(n.eventOccurrenceId)(e)),me("mimic_defeated")(e)}}]),r}(Ru)),Ty=Qn("mimic_event_1","(Storyline) The Mimic").setSimpleDescription("As you explore through the school basement, you find a peculiar treasure chest. You can see teeth coming out of the opening. It's a mimic!\n  \nYou know mimics are very dangerous monsters, but you are aware that they also hold amazing treasures inside...").addOption("Fight the Mimic",void 0,(function(e){return e.exploration||(e.exploration=K),e.exploration.currentDungeonFloorId=pA.getId(),e=En(e,"goToExploration"),e=En(e,"closeAllMenus"),e=En(e,"closeEventOverlay"),e=ou(By)(e)})).addOption("Maybe later").build();Qn("mimic_event_2","(Storyline) The Mimic").setSimpleDescription("You defeat the mimic with your overwhelming strength! You inspect its corpse and manage to loot a vast amount of coins!\n  \nHowever, before you can finish, the mimic suddenly jumps back and flees at an amazing speed. Your eyes can barely follow where it went! You decide pursuing is fruitless...\n\nMaybe you will encounter it some other time?").build();Yc(Dn("mimic_event_1",Ty,[qe.STORYLINE],fe("mimic_event_1_triggered")),25,!0,(function(e){return!ce(e,"mimic_event_1_triggered")&&nu(e)!=H.None&&(tu(e).getId()==pA.getId()||tu(e).getId()==AA.getId())&&!ve(e,"mimic_defeated")}));var Dy=Dn("mimic_event_2",Qn("mimic_event_3","(Storyline) The Mimic").setSimpleDescription('You enter the new campus building, only to find a toothed treasure chest right in the middle of the main hall! As you prepare to run or fight, the chest... starts speaking!\n  \n"M-M-Massssster", it says, with a hideous voice. "You are sssssstrong... pleassssse don\'t hurt me again. I can help you..." Then, it spits out a small amount of coins.\n\n"I will make coinssssss... for you..."\n\nIt\'s odd, but the mimic doesn\'t seem to be aggressive. You cautiously pick up the coins and nod to the mimic. A treasure chest that creates coins... this might be helpful!\n\n**You have completed "The Mimic" storyline! You will permanently gain +100:coins:/sec. This will persist even after restarting the game!**').build(),[qe.STORYLINE],ye("mimic_event_finished"));Te("mimic_event_2",(function(e){if(!ve(e,"mimic_event_finished")&&ve(e,"mimic_defeated")&&Gr(e,Nr.Mana)>0&&Ze(e)>5)return lt(Dy)}));var Py=new ei("The Mimic",2030,(function(e){return ve(e,"mimic_event_finished")}),(function(e){return ve(e,"mimic_event_finished")}),"There's a chance of this happening randomly if you are exploring the School Basement B2 or B3...","+100:coins:/sec",(function(e){return!0}));ti.register(Py),$o(0,Ic.MIMIC),zr.register(new Jr("Mimic",(function(e){return ve(e,"mimic_event_finished")?{Coins:100}:{}})));var Iy=By;function _y(){yf.reset(),yf.register({title:"Introduction",isVisible:function(e){return!0},order:0,description:"**Welcome to Magic Research!**\n      \nIn Magic Research, you are the headmaster of a magical institution. Cast spells, accumulate resources, create buildings, and much more to gain prestige and build the best magical school in the world!\n\nIn the top left corner, you will find **the menu button** which shows you a breakdown of your current resources and let you access various areas of the game.\n\nIn the top right corner, you will find **the notification bell button** while takes you to the list of events that have happened recently and allows you to see more information about them or interact with them.\n\nThe other important button is usually in the bottom right corner: **the magic wand button**. This will take you to the magic menu, where you can cast any spell you may have learned.\n\nDepending on screen size, some of those buttons can be in different positions on the screen, or the menus they open will be visible at all times."}),yf.register({title:"Events",isVisible:function(e){return!0},order:10,description:"Events are occurrences that happen either randomly with the passage of time or when something specific happens. You will know an event has happened because a dialog will show up and cover the screen.\n\nYou can see a list of events by going to **the event list menu**, by pressing the notification bell button at the top right of the screen. Pressing on any event will let you see the last message of the event, and you can check out the previous messages by using the arrows at the top of the dialog.    \n\nEvents are **very important** in the game, as most progress ends up happening via events that trigger when certain actions are done.\n\nEvents can be either *Completed* or *Ongoing*. Completed events require no further action on your part. Ongoing events, on the other hand, mean that you haven't reached the end of the event for some reason. If possible, you should strive to complete all ongoing events. If you have ongoing events, the notification bell icon will show a number in red indicating this fact.\n\nThere is a special kind of event called **Storyline**. These events are particularly important; keep an eye for them and aim to complete as many as possible."}),yf.register({title:"Spells",isVisible:function(e){return!0},order:20,description:"Spells are your primary way of interacting with the game. You can cast them usually from **the cast spell menu** and they cost a certain amount of :mana:. Because of this reason, :mana: is the most important resource in the game. You can obtain Mana by gathering it manually in your Campus, or via buildings like the Mana Spouts.\n    \nSpells are divided into **schools of magic**. These roughly group spells by a theme. There are three schools of magic: **Conjuration**, which mostly allows you to create resources such as :stone: and :water:; **Enchantment** that allows you to improve the performance of your buildings; and **Illusion** which allows you to obtain more :coins:. (Or are there really just these three...?)\n\nUsing spells from a certain school will give you experience on that school. Eventually, the school level will increase, which will usually unlock new spells.\n\nAt the beginning of the game, you selected a *primary school of magic*. It will be easier to level this primary school, which means you will likely unlock more advanced spells for this school quicker than for the other schools."}),yf.register({title:"Offline Progress",isVisible:function(e){return se(e,"research_unlocked")&&ve(e,"has_seen_offline_progress")},order:90,description:'When you spend time away from the game, you will earn a resource called :timepiece:Time Pieces. This resource serves as your way to recover some of the lost time you have spent away from the game.\n    \nAs a general rule, for each second you spend away from the game, you will earn 1 :timepiece:. So, for example, being away for 8 hours will result in you earning 28.8K :timepiece: once you open the game again.\n\nThere are several ways to use this resource. The first one is to **increase the game speed** at a cost of 3 to 4 :timepiece:/sec. You can toggle this from the left hand side menu. The second one is called *"Use Time Pieces (Warp)"* and lets you spend 3000 :timepiece: to **skip ahead 10 minutes of gameplay**. You can do this from the Campus screen. The last one is called *"Use Time Pieces (Research)"* and lets you spend 3000 :timepiece: at once to **get 25 real-time minutes of Research**. You can do this in the Campus or Research screen.\n\nThe best way to use Time Pieces depends on your current situation. Increasing the game speed is quite cheap and can make all the aspects of the game pass a lot faster. If you do not have enough time to play the game actively, Warp can help you make a lot of progress in a small amount of time, especially if you prepare the game to be effective without you having to put manual action. 10 real-time minutes can boost you quite far, so you may only need to use this once or twice to reach the goal that you\'re aiming for. On the other hand, if you want to unlock spells faster and do not need any other type of progress, using :timepiece: for Research is effective and can also help get you significant progress at a cheaper rate.'}),yf.register({title:"Campus",isVisible:function(e){return!0},order:100,description:"In the **Campus** screen, you can do a limited set of actions such as **Gather Mana**, or use your resources to **construct Buildings**.\n    \nAt the bottom of this screen, you can also see **your current Goal** - if you are not sure of what to do next, you can follow what it says."}),yf.register({title:"Research",isVisible:function(e){return se(e,"research_unlocked")},order:110,description:"In the **Research** screen, you can assign the researchers that you have hired to do research on schools of magic. Each researcher generates a set amount of school experience per second.\n    \nResearch is a much more effective way of raising school levels than casting spells, and it becomes even more effective the more you progress in the game."}),yf.register({title:"Apprentices",isVisible:function(e){return se(e,"autocast_unlocked")},order:120,description:"In the **Apprentices** screen, you can order the apprentices from the school to cast spells automatically for you. This is very useful for **automating** several of the actions you typically do. One example: ordering apprentices to cast *Enchant Mana Spouts* will let you get the vastly improved :mana: production without having to make a clear effort to cast the enchantment over and over.\n    \nIn order for an apprentice to be able to cast a spell, your school level for that spell needs to be one level higher than the level required to unlock it. For example, for *Enchant Mana Spouts*, you need Enchantment Lv1 to cast it - but you need Enchantment Lv2 for apprentices to be able to cast it for you.\n\n**Apprentices cast each spell once every 60 seconds.** If you want apprentices to cast a spell faster, you can **assign multiple apprentices to the same spell** which will increase the frequency of the spell proportionally. For example, **2 apprentices would cast the spell twice per minute (once every 30 seconds)**, 3 apprentices would cast it three times per minute (once every 20 seconds), 4 apprentices would be 4 times per minute (once every 15 seconds), and so on.\n\nIf a spell cannot be cast when an apprentice attempts to cast it, usually because there is not enough :mana:Mana, the apprentice will cast the spell as soon as it is able to.\n\nSometimes, it can be useful to have apprentices stop casting spells temporarily. You can pause apprentices with the **Pause Apprentices** button at the bottom of this screen.\n\nIn addition, as you play the game you will face different situations which means you will want to have different spells being cast automatically. You can use **Loadouts** for this, at the bottom of the Apprentices screen. Saving to a loadout will record your current apprentice assignment to the specified slot. You can then load it later to go back to that assignment."}),yf.register({title:"Inventory and Crafting",isVisible:function(e){return function(e){return se(e,"crafting_unlocked")||se(e,"inventory_unlocked")}(e)},order:130,description:'In the **Inventory** screen, you are able to see the *items* you have accumulated and crafted. Items are objects that have various effects. Some of them can be *equipped* on yourself, which will provide various bonuses. Others can be used directly from this screen. You may also throw away (or later, sell) unwanted items. Double pressing on an item will use or equip it directly.\n    \nOn the top right of this screen is a **Craft Items** button, that opens the crafting interface. From that interface, you can select an item and, if you have the materials, you can create the item. The materials are either resources or other items.\n\nYou can unlock new items to craft by increasing your school levels. Conjuration and Enchantment typically unlock new items to craft, but other schools may also unlock new items. In some cases, some items may require a certain level from multiple schools at once. For example, the item "Branch" requires Lv4 Conjuration and Lv4 Enchantment.\n\nThe **Sort Inventory** button in this screen places items in this order: Consumables, Hand, Body, Accessory, and the rest. Use it to keep your most important items at the top, for ease of access.'}),yf.register({title:"Exploration",isVisible:function(e){return se(e,"exploration_unlocked")},order:140,description:'In the **Exploration** screen, you can let your headmaster travel to various areas and brave dangers - and find untold knowledge. Maybe something you find while exploring will decisively bring prestige to the school!\n    \nSelect a destination or dungeon to explore, and the headmaster will begin exploring. Once the exploration finishes, the headmaster will begin combat against an enemy.\n\nIf combat is successful, you will earn :coins:, :monstium: and possibly some items. The stronger the enemy, the bigger the rewards typically are. These rewards are shown on the Exploration screen as they are obtained.\n\nIf combat is unsuccessful, the headmaster will be defeated and will wait until its health is fully recovered before exploring again.\n\nAfter succeeding in combat a certain number of times, a *Boss* is unlocked for the area, which is exceptionally strong. Defeating the Boss will let you move on to the next floor of the destination you are in. You can do this by pressing the "Next Floor" button.'}),yf.register({title:"Combat",isVisible:function(e){return se(e,"exploration_unlocked")},order:150,description:"During **Combat**, your headmaster fights an enemy head-on. The goal is to reduce the enemy's :hp: (health, or HP), to zero, before letting your own :hp: drop to zero.\n    \nYour headmaster will automatically attack using the hand item it is equipped with, while the enemy can act in different ways, often attacking back. You can see the progress of the current combat in the **Exploration** screen.\n\nMost of combat relies upon two stats: :attack:Attack and :defense:Defense. The general damage calculation for any attack is: Attack's :attack: - 0.5x Target's :defense:. A little extra :defense: can be pretty effective at reducing damage, especially for weaker attacks. Likewise, against an enemy with high :defense:, even just a little more :attack: can increase the total damage drastically. \n\nThere are two additional combat stats: :attackDelay:Attack Delay affects how often you (or the enemy) attack, while :hpRegen:HP Regen automatically recovers your :hp: over time.\n\nYou can also manually use items or cast spells from the bottom of the **Combat** screen, which can help give you an edge. You can add often-used items or spells to the **Quickbar**, which is a separate screen that conveniently allows you to do so without having to search for each item or spell. In the Quickbar you can also see your current temporary effects (positive and negative)."}),yf.register({title:"Upgrades",isVisible:function(e){return se(e,"upgrades_unlocked")},order:160,description:"In the **Upgrades** screen, you can spend your accumulated :monstium: into various improvements to several areas of the game, from buildings in your campus, inventory size, combat attributes, among others.\n    \nUpgrades do not persist through retirement and must be purchased again every time."}),yf.register({title:"Retirement",isVisible:function(e){return se(e,"retirement_unlocked")},order:500,description:"**Retirement** is one of the most powerful features in the game. In essence, retiring allows you to restart the game from the beginning, including choosing a new primary school and element. However, there are strong benefits to retirement which are detailed below.\n    \nWhen you retire, the level your primary school is currently at is permanently recorded. This level is called the **Maximum Primary Level**, or **MPL**. The MPL for a school can never go down - if you re-select a school as your primary and then retire again without reaching your previous MPL, you will keep the previous value.\n\nAfter you retire, you will get a **Global Research Multiplier**. This multiplier is very important, as it can vastly improve the effectiveness of research, letting you unlock stronger spells much, much quicker.\n\nIn addition, there is a similar **Global Production Multiplier** which will affect all resource production you have from buildings and other features in the game. This includes Mana, which means after retirement it should be much easier to cast stronger spells or cast spells more often. This also affects loot.\n\nBoth of the multipliers above are determined based on two factors. The first is the maximum MPL you have ever achieved, regardless of school. This is the main factor impacting the two multipliers. The second is the sum of all the MPLs you have across all the schools. This is a secondary factor and it will impact the multipliers, but not as much.\n\nOne last benefit from retirement is related to Storylines, which you may or may not have found yet. Any **benefits acquired from Storylines will persist through retirements**, meaning progress will become faster. In addition, some Storylines only provide their benefit after you retire once - retiring is encouraged in order to get the full benefit in those cases.\n\nDeciding when to retire is very important. One suggestion is to retire if progress has gotten slower or achieving the next Goal (see: **Campus** help section) appears impossible. Another is to retire if the research and production multipliers will substantially increase, or if you complete a Storyline with powerful effects that only appear after retirement. For the first retirement *only*, it is usually a good idea to retire if your new Global Research Multiplier will be above 3x (i.e. do not retire right away after unlocking Retirement)."}),yf.register({title:"Storylines",isVisible:function(e){return ve(e,"storyline_event_ever_triggered")},order:510,description:"**Storylines** are special events. Like other events, they can happen randomly or once a certain action happens, but they are often rarer and harder to come by. Storylines are mostly independent from each other, so even if you have a pending Storyline event you haven't completed yet, you may still encounter other Storylines, randomly or otherwise.\n    \nStorylines provide powerful permanent benefits when completed. If you happen to come across a Storyline event, you should complete it if possible, as the benefits can often significantly change how the game plays.\n\nStorylines only provide benefits and there are no drawbacks. If there is a choice inside a Storyline, you will be able to make a different choice later if you encounter the Storyline again after retirement, and possibly reach a different ending that provides a different benefit. Bonuses from completed Storylines never go away, even if you finish the same Storyline again with a different ending.\n\nStorylines represent progress through the game, and as a player one of the goals of the game is to complete every Storyline. You can see the progress in completing all Storylines in the Stats menu."}),yf.register({title:"Stats",isVisible:function(e){return!0},order:900,description:"In the **Stats** screen, you can see a set of statistics about your game, such as the total amount of played time, the Maximum Primary Levels for every school, or the amount of completed Storylines."}),yf.register({title:"Bestiary",isVisible:function(e){return ve(e,"bestiary_unlocked")},order:905,description:"In the **Bestiary** screen, you can see information about enemies you have defeated in this run or in past runs. For an enemy to show up, you must have defeated it at least once. The bestiary shows the base stats of the enemy, such as :hp: and :attack:, as well as the location where it appears. If you defeat the enemy more than 50 times, it can also show what is the loot you can obtain from the enemy. (Bosses only need to be defeated once to show this information)"}),yf.register({title:"Options / Save Data",isVisible:function(e){return!0},order:910,description:'In the **Options** screen, you can access a few configuration options for the game and you can export or import your save data. You can use this feature to transfer your progress from the demo of Magic Research to the full game.\n    \nTo export your save data, press the **Copy save data to clipboard** button. Once you have done this, paste this in some text document. This text is your current save data. You can share this with other people or store it somewhere safe as a backup. You can also press "Save to file" to obtain a file that you can later use to load your game.\n\nTo import new save data, you can paste the text that was exported on the previous step into the text field. In mobile, you may also load a save file that you exported to a file. If the import is successful, the interface will instantly change and reflect the new data. **Note: you will lose your old save data once this happens, so make sure to export and store it somewhere first!**'})}function Ny(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Fy=function(e){No()(n,e);var t=Ny(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"has_gathered_at_least_10_mana")}},{key:"getSpellName",value:function(){return"Create Pebble"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Convert Mana into a few pebbles."}},{key:"getBaseActionEffects",value:function(){return{stone:{value:5,tags:[Nr.Stone]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).stone)+":stone:"}},{key:"getManaCost",value:function(){return 10}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:1}}},{key:"doSpellAction",value:function(e){return Wr(Nr.Stone,this.getActionEffects(e).stone)(e)}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Stone)<Ur(e,Nr.Stone)}}]),n}(tl),Ly=Dn("has_gathered_at_least_10_mana",Qn("has_gathered_at_least_10_mana","You are a Wizard").setSimpleDescription("Gathering Mana is useful, but why would you do it if you had nothing to use it for?\n\nYou slowly recall how to cast spells and remember a basic Conjuration spell, *Create Pebble*. You think of trying it soon!\n\n**You have unlocked the ability to cast spells! You can cast spells by pressing the wand icon at the top right or bottom right corner of the screen.**").build(),[qe.EARLY_GAME],fe("has_gathered_at_least_10_mana"));Te("create_stone_unlocked",(function(e){if(!ce(e,"has_gathered_at_least_10_mana")&&Gr(e,Nr.Mana)>=10)return lt(Ly)}));var Yy=new Fy;function Vy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Uy=new(function(e){No()(n,e);var t=Vy(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"has_gathered_at_least_10_mana")}},{key:"getSpellName",value:function(){return"Create Water"}},{key:"getElement",value:function(){return kt.Water}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Convert Mana into some drops of water."}},{key:"getBaseActionEffects",value:function(){return{water:{value:2,tags:[Nr.Water]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).water)+":water:"}},{key:"doSpellAction",value:function(e){return Wr(Nr.Water,this.getActionEffects(e).water)(e)}},{key:"getManaCost",value:function(){return 20}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:1}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Water)<Ur(e,Nr.Water)}}]),n}(tl));function Qy(){Wu=[],Ju({description:"Gather more Mana",isCompleted:function(e){return Yy.isVisible(e)&&Uy.isVisible(e)},progress:function(e){return Gr(e,Nr.Mana)/20}}),Ju({description:"Create more Stone and Water",isCompleted:function(e){return Tg.isVisible(e)}}),Ju({description:"Gather more Mana",isCompleted:function(e){return ce(e,"has_gathered_at_least_50_mana")},progress:function(e){return Gr(e,Nr.Mana)/50}}),Ju({description:"Build a Mana Shard",isCompleted:function(e){return ce(e,"Research_Intro_Triggered")}}),Ju({description:k.default.select({default:"Hire the Researcher! Tip: You can find ongoing events by pressing on the Events button at the top right corner of the screen",web:"Hire the Researcher"}),isCompleted:function(e){return ce(e,"research_unlocked")}}),Ju({description:"Gather more Stone",isCompleted:function(e){return ce(e,"warehouse_unlocked")},progress:function(e){return Gr(e,Nr.Stone)/30}}),Ju({description:"Build a Warehouse",isCompleted:function(e){return Go(e,nm)>=1}}),Ju({description:"Continue doing research",isCompleted:function(e){return ce(e,"apprentice_dorm_event_triggered")},progress:function(e){return Nt(e)/3e3}}),Ju({description:"Gather more Wood",isCompleted:function(e){return ce(e,"lumber_yard_unlocked")},progress:function(e){return Gr(e,Nr.Wood)/50}}),Ju({description:'Finish the "Apprentices Need Sleep" event',isCompleted:function(e){return ce(e,"apprentice_dorm_unlocked")}}),Ju({description:"Build an Apprentice Dorm",isCompleted:function(e){return Go(e,gg)>=1}}),Ju({description:"Gather 800 coins",isCompleted:function(e){return ce(e,"vault_unlocked")},progress:function(e){return Gr(e,Nr.Coins)/800}}),Ju({description:"Continue doing research",isCompleted:function(e){return ce(e,"crafting_intro")||ir(e)},progress:function(e){return Nt(e)/1e4}}),Ju({description:"Build the crafting station",isCompleted:function(e){return ir(e)}}),Ju({description:"Craft an item",isCompleted:function(e){return ce(e,"has_crafted")}}),Ju({description:"Continue doing research",isCompleted:function(e){return ce(e,"shop_intro")},progress:function(e){return Nt(e)/16e3}}),Ju({description:"Raise Conjuration and Enchantment to Lv3 or above",isCompleted:function(e){return Pt(e,xt.Conjuration)>=3&&Pt(e,xt.Enchantment)>=3}}),Ju({description:"Appease the businessman",isCompleted:function(e){return ce(e,"selling_unlocked")}}),Ju({description:"Continue doing research",isCompleted:function(e){return ce(e,"wizard_robe_triggered")},progress:function(e){return Nt(e)/24e3}}),Ju({description:"Purchase the Wizard's Robe",isCompleted:function(e){return ce(e,"wizard_robe_bought")}}),Ju({description:"Continue doing research",isCompleted:function(e){return Nt(e)>=33e3},progress:function(e){return Nt(e)/33e3}}),Ju({description:"Equip a hand item and a body item",isCompleted:function(e){return ce(e,"exploration_unlocked")}}),Ju({description:"Explore the School Basement",isCompleted:function(e){return ce(e,"upgrades_unlocked")}}),Ju({description:"You have completed the demo! Please purchase the full game to continue, or retire to start again",isCompleted:function(e){return!1}})}function Gy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Hy=new(function(e){No()(r,e);var t=Gy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"defensePotion"}},{key:"getPicture",value:function(){return n(881)}},{key:"getBaseName",value:function(){return"Defense Potion"}},{key:"getDescription",value:function(){return"A potion that hardens your skin. Temporarily raises :defense:."}},{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t);return mo("Defense Potion","Defense Potion",n.duration,{params:{commonBuff:{Player:{Defense:n.magnitude}}}})(e)}},{key:"isActive",value:function(e){return fo(e,"Defense Potion")}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:8,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:180,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getEffect",value:function(e,t){var n=this.getItemEffects(e,t);return"+"+Mn(n.magnitude)+" :defense: for "+Mn(Math.floor(n.duration))+" sec"}},{key:"getSalePrice",value:function(){return 300}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:6}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Water:300,Stone:2e3},items:{}}}}]),r}(by));function Wy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Jy=new(function(e){No()(r,e);var t=Wy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"manaPotion"}},{key:"getPicture",value:function(){return n(882)}},{key:"getBaseName",value:function(){return"Mana Potion"}},{key:"getDescription",value:function(){return"A small blue potion. Restores :mana:."}},{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t).magnitude;return Wr(Nr.Mana,n)(e)}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:200,tags:[Ee.ActionMagnitude]}}}},{key:"getEffect",value:function(e,t){return"+"+Mn(this.getItemEffects(e,t).magnitude)+":mana:"}},{key:"getSalePrice",value:function(){return 50}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:1}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:300,Water:50},items:{}}}}]),r}(by));function zy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Zy=new(function(e){No()(r,e);var t=zy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t).magnitude;e=su(e,n,"Medicinal Herb");var r={id:Math.random().toString(),damage:-n,isCrit:!1,isHit:!0,time:Ze(e),target:io.Player,tags:[]};return e.exploration.lastEnemyActionResult=r,e.exploration.actionResultQueue.push(r),e}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:20,tags:[Ee.ActionMagnitude]}}}},{key:"getId",value:function(){return"medicinalHerb"}},{key:"getPicture",value:function(){return n(883)}},{key:"getBaseName",value:function(){return"Medicinal Herb"}},{key:"getDescription",value:function(){return"A bundle of herbs. Restores a little :hp:."}},{key:"getEffect",value:function(e,t){return"+"+Mn(this.getItemEffects(e,t).magnitude)+":hp:"}},{key:"getTags",value:function(e,t){return Gc()(Vo()(r.prototype),"getTags",this).call(this,e,t).concat([{tag:"Material"}])}},{key:"getSalePrice",value:function(){return 25}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(by));function Xy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var qy=new(function(e){No()(r,e);var t=Xy(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"speedPotion"}},{key:"getPicture",value:function(){return n(884)}},{key:"getBaseName",value:function(){return"Speed Potion"}},{key:"getDescription",value:function(){return"A potion that makes you attack quicker. Reduces :attackDelay: temporarily."}},{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t);return mo("Speed Potion","Speed Potion",n.duration,{params:{commonBuff:{Player:{AttackDelayMultiplier:1/(1+n.magnitude)}}}})(e)}},{key:"isActive",value:function(e){return fo(e,"Speed Potion")}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:.1764,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:180,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getEffect",value:function(e,t){var n=this.getItemEffects(e,t);return"-"+Mn(100*Math.abs(1-1/(n.magnitude+1)))+"%:attackDelay: for "+Mn(Math.floor(n.duration))+" sec"}},{key:"getSalePrice",value:function(){return 300}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:7}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Water:300},items:{batWing:3}}}}]),r}(by));function Ky(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var $y=new(function(e){No()(r,e);var t=Ky(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"strengthPotion"}},{key:"getPicture",value:function(){return n(885)}},{key:"getBaseName",value:function(){return"Strength Potion"}},{key:"getDescription",value:function(){return"A potion that makes your attacks more damaging. Boosts :attack: temporarily."}},{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t);return mo("Strength Potion","Strength Potion",n.duration,{params:{commonBuff:{Player:{Attack:n.magnitude}}}})(e)}},{key:"isActive",value:function(e){return fo(e,"Strength Potion")}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:10,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:180,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getEffect",value:function(e,t){var n=this.getItemEffects(e,t);return"+"+Mn(n.magnitude)+" :attack: for "+Mn(Math.floor(n.duration))+" sec"}},{key:"getSalePrice",value:function(){return 240}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:4}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Water:300},items:{ratTail:3}}}}]),r}(by));function ep(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var tp=new(function(e){No()(r,e);var t=ep(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"vitalityPotion"}},{key:"getPicture",value:function(){return n(886)}},{key:"getBaseName",value:function(){return"Vitality Potion"}},{key:"getDescription",value:function(){return"A potion that fills you with vigor. Temporarily raises Max:hp:."}},{key:"doConsumableItemEffect",value:function(e,t){var n=this.getItemEffects(e,t);return mo("Vitality Potion","Vitality Potion",n.duration,{params:{commonBuff:{Player:{MaxHP:n.magnitude}}}})(e)}},{key:"isActive",value:function(e){return fo(e,"Vitality Potion")}},{key:"getBaseItemEffects",value:function(){return{magnitude:{value:100,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:180,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getEffect",value:function(e,t){var n=this.getItemEffects(e,t);return"+"+Mn(n.magnitude)+" Max:hp: for "+Mn(Math.floor(n.duration))+" sec"}},{key:"getSalePrice",value:function(){return 300}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:5}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Water:400,Monstium:100},items:{medicinalHerb:1}}}}]),r}(by));function np(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var rp=new(function(e){No()(r,e);var t=np(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"cloak"}},{key:"getPicture",value:function(){return n(887)}},{key:"getBaseName",value:function(){return"Cloak"}},{key:"getDescription",value:function(){return"A basic cloak made out of cloth."}},{key:"getDefenseBonus",value:function(e,t){return 4}},{key:"getSlot",value:function(){return il.Accessory}},{key:"getSalePrice",value:function(){return 1200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:7}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{cloth:4}}}}]),r}(Lf));function op(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ip=new(function(e){No()(r,e);var t=op(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"cloakOfRegeneration"}},{key:"getPicture",value:function(){return n(888)}},{key:"getBaseName",value:function(){return"Cloak of Regeneration"}},{key:"getDescription",value:function(){return"A special cloak that slowly restores the wielder's life when worn."}},{key:"getDefenseBonus",value:function(e,t){return 4}},{key:"getHPRegenBonus",value:function(e,t){return.4}},{key:"getSlot",value:function(){return il.Accessory}},{key:"getSalePrice",value:function(){return 3600}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Enchantment:11}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:2800},items:{cloak:1,cloth:20}}}}]),r}(Lf));function ap(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var up=new(function(e){No()(r,e);var t=ap(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"clothShoes"}},{key:"getPicture",value:function(){return n(889)}},{key:"getBaseName",value:function(){return"Cloth Shoes"}},{key:"getDescription",value:function(){return"Basic shoes made out of cloth. Makes walking somewhat easier."}},{key:"getDefenseBonus",value:function(e,t){return 1}},{key:"getAttackDelayBonusPct",value:function(e,t){return-10}},{key:"getSlot",value:function(){return il.Accessory}},{key:"getSalePrice",value:function(){return 1200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:7}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{cloth:8}}}}]),r}(Lf));function cp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var lp=new(function(e){No()(r,e);var t=cp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"crystallizedMana"}},{key:"getPicture",value:function(){return n(890)}},{key:"getBaseName",value:function(){return"Crystallized Mana"}},{key:"getDescription",value:function(){return"A small rock made out of condensed :mana:."}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,2)}},{key:"getSlot",value:function(){return il.Accessory}},{key:"getSalePrice",value:function(){return 500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:3}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:1e3},items:{}}}}]),r}(Lf));function sp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var fp=new(function(e){No()(r,e);var t=sp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"enchantedCloak"}},{key:"getPicture",value:function(){return n(891)}},{key:"getBaseName",value:function(){return"Enchanted Cloak"}},{key:"getDescription",value:function(){return"A cloak that has been reformed and enhanced with magic."}},{key:"getDefenseBonus",value:function(e,t){return 9}},{key:"getSlot",value:function(){return il.Accessory}},{key:"getSalePrice",value:function(){return 2400}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:2200},items:{cloak:1,cloth:8}}}}]),r}(Lf));function dp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var hp=new(function(e){No()(r,e);var t=dp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"woodenSandals"}},{key:"getPicture",value:function(){return n(892)}},{key:"getBaseName",value:function(){return"Wooden Sandals"}},{key:"getDescription",value:function(){return"A pair of uncomfortable, clunky sandals."}},{key:"getDefenseBonus",value:function(e,t){return 3}},{key:"getAttackDelayBonusPct",value:function(e,t){return 10}},{key:"getSlot",value:function(){return il.Accessory}},{key:"getSalePrice",value:function(){return 160}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:4}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:750},items:{}}}}]),r}(Lf));function gp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var mp=new(function(e){No()(r,e);var t=gp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"elderWizardRobe"}},{key:"getPicture",value:function(){return n(893)}},{key:"getBaseName",value:function(){return"Elder Wizard's Robe"}},{key:"getDescription",value:function(){return"Strong magically infused clothing, to be worn by powerful spellcasters."}},{key:"getDefenseBonus",value:function(e,t){return 10}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,20)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,600)}},{key:"getSlot",value:function(){return il.Body}},{key:"getSalePrice",value:function(){return 4e3}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:7,Enchantment:9}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:2400},items:{cloth:16}}}}]),r}(Lf));function Ap(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var yp=new(function(e){No()(r,e);var t=Ap(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"fullPlate"}},{key:"getPicture",value:function(){return n(894)}},{key:"getBaseName",value:function(){return"Full Plate"}},{key:"getDescription",value:function(){return"A full armor, made out of iron. Provides very strong protection, at the cost of movement speed."}},{key:"getDefenseBonus",value:function(e,t){return 35}},{key:"getAttackDelayBonusPct",value:function(e,t){return 10}},{key:"getSlot",value:function(){return il.Body}},{key:"getSalePrice",value:function(){return 1e4}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:13}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:8e3,Temperature:4500},items:{}}}}]),r}(Lf));function pp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var vp=new(function(e){No()(r,e);var t=pp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"ironArmor"}},{key:"getPicture",value:function(){return n(895)}},{key:"getBaseName",value:function(){return"Iron Mail"}},{key:"getDescription",value:function(){return"Heavy chest protection, to withstand tough blows."}},{key:"getDefenseBonus",value:function(e,t){return 16}},{key:"getSlot",value:function(){return il.Body}},{key:"getSalePrice",value:function(){return 2500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:7}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:300,Temperature:1200},items:{}}}}]),r}(Lf));function bp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var jp=new(function(e){No()(r,e);var t=bp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"reinforcedIronMail"}},{key:"getPicture",value:function(){return n(896)}},{key:"getBaseName",value:function(){return"Reinforced Iron Mail"}},{key:"getDescription",value:function(){return"An Iron Mail that has been enhanced with extra material to provide more protection."}},{key:"getDefenseBonus",value:function(e,t){return 22}},{key:"getSlot",value:function(){return il.Body}},{key:"getSalePrice",value:function(){return 5e3}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:11}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:2e3,Temperature:3200},items:{ironArmor:1}}}}]),r}(Lf));function Op(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var kp=function(e){No()(r,e);var t=Op(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"wizardRobe"}},{key:"getPicture",value:function(){return n(897)}},{key:"getBaseName",value:function(){return"Wizard's Robe"}},{key:"getDescription",value:function(){return"Magically infused clothing, for those who favor spellcasting."}},{key:"getDefenseBonus",value:function(e,t){return 6}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,10)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getSlot",value:function(){return il.Body}},{key:"getSalePrice",value:function(){return 2e3}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:6,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Mana:1600},items:{cloth:12}}}}]),r}(Lf),xp=new kp,wp=Dn("Wizard_Robe",Qn("WizardRobe_Merchant","Clothing for a Wizard").setSimpleDescription('You hear a familiar voice. "You won\'t believe the deal I have for yoooooou."\n    \nYou turn around, only to see the familiar face of the businessman who has been buying your items.').addOption("Continue",Qn("WizardRobe_Merchant_1","Clothing for a Wizard").setSimpleDescription("He shows you a finely crafted :wizardRobe:*Wizard's Robe*. You inspect it and find no fault with it; it is magically infused and you can feel a faint power coming from it.\n        \n\"Would you want to buy it? It can be yooooours... for the *bargain* price of 30000 coins. And I'm sure it would look great on you...\"").addOption("Charm the Businessman (1400 Mana)",Qn("WizardRobe_Merchant_4","Clothing for a Wizard").setSimpleDescription('You use your Illusion prowess to charm the businessman; the price is too high. You attempt to barter for the robe...\n            \n"Hmm..." He observes you, top to bottom. "Ok. I will go lower. How about... 5000 coins?"\n\n*Now* you think the price is more fair.').addOption("Pay 5000 Coins",Qn("WizardRobe_Merchant_5","Clothing for a Wizard").setSimpleDescription('You hand over the coins and buy the robe. The businessman grins slightly. "Great doooooing business with you!", he exclaims, before handing the robe to you.\n                \n**You have obtained a :wizardRobe:Wizard\'s Robe!**').build(),(function(e){return e=Wr(Nr.Coins,-5e3)(e),e=eo({itemId:xp.getId(),params:{}},1,e),e=fe("wizard_robe_bought")(e)}),void 0,(function(e){return Gr(e,Nr.Coins)>=5e3})).addOption("Maybe later").build(),(function(e){return e=Wr(Nr.Mana,-1400)(e)}),(function(e){return Pt(e,xt.Illusion)>=6}),(function(e){return Gr(e,Nr.Mana)>=1400})).addOption("Pay 30000 Coins",Qn("WizardRobe_Merchant_2","Clothing for a Wizard").setSimpleDescription('You hand over the coins and buy the robe. The businessman grins. "Great doooooing business with you!", he exclaims, before handing the robe to you.\n\n**You have obtained a :wizardRobe:Wizard\'s Robe!**').build(),(function(e){return e=Wr(Nr.Coins,-3e4)(e),e=eo({itemId:xp.getId(),params:{}},1,e),e=fe("wizard_robe_bought")(e)}),void 0,(function(e){return Gr(e,Nr.Coins)>=3e4})).addOption("Maybe later").build()).build(),[],fe("wizard_robe_triggered"));Te("wizard_robe",(function(e){if(!ce(e,"wizard_robe_triggered")&&ce(e,"selling_unlocked")&&Nt(e)>=24e3)return lt(wp)}));var Cp=new kp;function Sp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ep=new(function(e){No()(r,e);var t=Sp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"airWand"}},{key:"getPicture",value:function(){return n(898)}},{key:"getBaseName",value:function(){return"Air Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Air. It is very swift."}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,16)}},{key:"getAttackBonus",value:function(e,t){return 15}},{key:"getAttackDelayBonusPct",value:function(e,t){return-50}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Air"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{airSpeck:1}}}}]),r}(Lf));function Mp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Rp=new(function(e){No()(r,e);var t=Mp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"assassinsDagger"}},{key:"getPicture",value:function(){return n(899)}},{key:"getBaseName",value:function(){return"Assassin's Dagger"}},{key:"getDescription",value:function(){return"A dagger that's particularly sharp and solid."}},{key:"getAttackBonus",value:function(e,t){return 30}},{key:"getAttackDelayBonusPct",value:function(e,t){return-55}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 5400}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:12}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:2500,Temperature:3e3},items:{}}}}]),r}(Lf));function Bp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Tp=new(function(e){No()(r,e);var t=Bp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"branch"}},{key:"getPicture",value:function(){return n(900)}},{key:"getBaseName",value:function(){return"Branch"}},{key:"getDescription",value:function(){return"A magically infused branch. Produces a small amount of :mana:."}},{key:"getAttackBonus",value:function(e,t){return 5}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,2)}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:4,Enchantment:4}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:300,Mana:1e3},items:{}}}}]),r}(Lf));function Dp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Pp=new(function(e){No()(r,e);var t=Dp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"club"}},{key:"getPicture",value:function(){return n(901)}},{key:"getBaseName",value:function(){return"Club"}},{key:"getDescription",value:function(){return"A wooden club. Slightly heavy."}},{key:"getAttackBonus",value:function(e,t){return 20}},{key:"getAttackDelayBonusPct",value:function(e,t){return 20}},{key:"getEffect",value:function(){return"+20:attack:, +20%:attackDelay:"}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:4}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:900},items:{}}}}]),r}(Lf));function Ip(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var _p=new(function(e){No()(r,e);var t=Ip(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"dagger"}},{key:"getPicture",value:function(){return n(902)}},{key:"getBaseName",value:function(){return"Dagger"}},{key:"getDescription",value:function(){return"An agile, lightweight weapon."}},{key:"getAttackBonus",value:function(e,t){return 10}},{key:"getAttackDelayBonusPct",value:function(e,t){return-50}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 600}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:4}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:60,Wood:40,Temperature:300},items:{}}}}]),r}(Lf));function Np(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Fp=new(function(e){No()(r,e);var t=Np(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"darknessWand"}},{key:"getPicture",value:function(){return n(903)}},{key:"getBaseName",value:function(){return"Darkness Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Darkness. Very powerful."}},{key:"getAttackBonus",value:function(e,t){return 45}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,32)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,800)}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Darkness"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{darknessSpeck:1}}}}]),r}(Lf));function Lp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Yp=new(function(e){No()(r,e);var t=Lp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"earthWand"}},{key:"getPicture",value:function(){return n(904)}},{key:"getBaseName",value:function(){return"Earth Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Earth. Has defensive powers."}},{key:"getAttackBonus",value:function(e,t){return 15}},{key:"getDefenseBonus",value:function(e,t){return 15}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,16)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Earth"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{earthSpeck:1}}}}]),r}(Lf));function Vp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Up=new(function(e){No()(r,e);var t=Vp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"fireWand"}},{key:"getPicture",value:function(){return n(905)}},{key:"getBaseName",value:function(){return"Fire Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Fire. Can be an effective weapon!"}},{key:"getAttackBonus",value:function(e,t){return 35}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,16)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Fire"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{fireSpeck:1}}}}]),r}(Lf));function Qp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Gp=new(function(e){No()(r,e);var t=Qp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"handAxe"}},{key:"getPicture",value:function(){return n(906)}},{key:"getBaseName",value:function(){return"Hand Axe"}},{key:"getDescription",value:function(){return"An axe. Slow, but very damaging."}},{key:"getAttackBonus",value:function(e,t){return 50}},{key:"getAttackDelayBonusPct",value:function(e,t){return 50}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 1500}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:6}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:150,Wood:300,Temperature:600},items:{}}}}]),r}(Lf));function Hp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Wp=new(function(e){No()(r,e);var t=Hp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"lightningWand"}},{key:"getPicture",value:function(){return n(907)}},{key:"getBaseName",value:function(){return"Lightning Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Lightning. May stun."}},{key:"getAttackBonus",value:function(e,t){return 15}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,16)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getEffect",value:function(e,t){var n=this.getManaRegenBonus(e,t),r=this.getMaxManaBonus(e,t);return"+15:attack:, +"+Mn(n,{showDecimals:!0})+":mana:/sec, +"+Mn(r,{showDecimals:!1})+' Max:mana:, +10% chance to apply "Stunned"'}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Lightning"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{lightningSpeck:1}}}}]),r}(Lf));Ya.register((function(e){var t,n;null!=(t=pu(e))&&t.isHit&&"lightningWand"==(null==(n=dl(e,il.Hand))?void 0:n.itemId)&&(Math.random()<.1&&(e=mo("EnemyStun","Stunned!",1,{isBeneficial:!1,combatOnly:!0,isEnemyTemporaryEffect:!0})(e)));return e}));var Jp=Wp;function zp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Zp=new(function(e){No()(r,e);var t=zp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"natureWand"}},{key:"getPicture",value:function(){return n(908)}},{key:"getBaseName",value:function(){return"Nature Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Nature. Drains enemy life."}},{key:"getAttackBonus",value:function(e,t){return 15}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,16)}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getEffect",value:function(e,t){var n=this.getManaRegenBonus(e,t),r=this.getMaxManaBonus(e,t);return"+15:attack:, -8 enemy :hp:/sec, +"+Mn(n,{showDecimals:!0})+":mana:/sec, +"+Mn(r,{showDecimals:!1})+" Max:mana:"}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Nature"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{natureSpeck:1}}}}]),r}(Lf));Ue("NatureWand",(function(e,t){var n;return(null==(n=dl(e,il.Hand))?void 0:n.itemId)===Zp.getId()&&(e=du(e,-8*t)),e}));var Xp=Zp;function qp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Kp=new(function(e){No()(r,e);var t=qp(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"sickle"}},{key:"getPicture",value:function(){return n(909)}},{key:"getBaseName",value:function(){return"Sickle"}},{key:"getDescription",value:function(){return"A weapon often used by farmers... or by reapers."}},{key:"getAttackBonus",value:function(e,t){return 45}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 2400}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:9}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:1100,Wood:3e3,Temperature:1500},items:{}}}}]),r}(Lf));function $p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ev=new(function(e){No()(r,e);var t=$p(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"spear"}},{key:"getPicture",value:function(){return n(910)}},{key:"getBaseName",value:function(){return"Spear"}},{key:"getDescription",value:function(){return"A sharp, dangerous weapon for attacking at a distance."}},{key:"getAttackBonus",value:function(e,t){return 30}},{key:"getAttackDelayBonusPct",value:function(e,t){return-15}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 1200}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Air"==e.primaryElement}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:5}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:80,Wood:500,Temperature:500},items:{}}}}]),r}(Lf));function tv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var nv=new(function(e){No()(r,e);var t=tv(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"spikedClub"}},{key:"getPicture",value:function(){return n(911)}},{key:"getBaseName",value:function(){return"Spiked Club"}},{key:"getDescription",value:function(){return"A club with a wooden base, but reinforced with spikes for a more destructive punch."}},{key:"getAttackBonus",value:function(e,t){return 55}},{key:"getAttackDelayBonusPct",value:function(e,t){return 20}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 3600}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:10}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:6500,Iron:600,Temperature:1800},items:{}}}}]),r}(Lf));function rv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ov=new(function(e){No()(r,e);var t=rv(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"sword"}},{key:"getPicture",value:function(){return n(912)}},{key:"getBaseName",value:function(){return"Sword"}},{key:"getDescription",value:function(){return"A sword: a mighty weapon in the hands of an expert."}},{key:"getAttackBonus",value:function(e,t){return 30}},{key:"getSlot",value:function(){return il.Hand}},{key:"getSalePrice",value:function(){return 1200}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:5}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:120,Wood:200,Temperature:600},items:{}}}}]),r}(Lf));function iv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var av=new(function(e){No()(r,e);var t=iv(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"waterWand"}},{key:"getPicture",value:function(){return n(913)}},{key:"getBaseName",value:function(){return"Water Wand"}},{key:"getDescription",value:function(){return"A wizard's magical wand with the power of Water. Boosts vitality."}},{key:"getAttackBonus",value:function(e,t){return 15}},{key:"getMaxHPBonus",value:function(e,t){return 80}},{key:"getMaxManaBonus",value:function(e,t){return Ce([Ee.PerItemCap,Nr.Mana,this.getId()],e,400)}},{key:"getManaRegenBonus",value:function(e,t){return Ce([this.getId(),Nr.Mana,Ee.Production],e,16)}},{key:"getSlot",value:function(){return il.Hand}},{key:"isCraftable",value:function(e){return Gc()(Vo()(r.prototype),"isCraftable",this).call(this,e)&&"Water"==e.primaryElement}},{key:"getSalePrice",value:function(){return 1800}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Conjuration:8,Enchantment:8}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Wood:3e3,Mana:2500},items:{waterSpeck:1}}}}]),r}(Lf));function uv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var cv=new(function(e){No()(r,e);var t=uv(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"goldNugget"}},{key:"getPicture",value:function(){return n(914)}},{key:"getBaseName",value:function(){return"Gold Nugget"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"A tiny piece of solid gold. Very valuable, and might be useful for certain crafting."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 1e3}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{Alchemy:20}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{Iron:6e3},items:{}}}}]),r}(If));function lv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var sv=new(function(e){No()(r,e);var t=lv(r);function r(){return Y()(this,r),t.apply(this,arguments)}return U()(r,[{key:"getId",value:function(){return"wool"}},{key:"getPicture",value:function(){return n(915)}},{key:"getBaseName",value:function(){return"Wool"}},{key:"getTags",value:function(){return[{tag:"Material"}]}},{key:"getDescription",value:function(){return"Wool. Can be used to make cloth."}},{key:"getEffect",value:function(){}},{key:"getSalePrice",value:function(){return 16}},{key:"getCraftingSchoolLevelRequirements",value:function(){return{}}},{key:"getCraftingMaterialsBase",value:function(){return{resources:{},items:{}}}}]),r}(If));function fv(){er(Jy),er(lp),er(Pp),er(bm),er(Tp),er(_p),er(Gp),er(vp),er(ev),er(ov),er(Cp),er(mp),er(Zy),er(TA),er(Oy),er(RA),er($y),er(qy),er(sv),er(FA),er(rp),er(fp),er(ip),er(hp),er(up),er(cv),er(zm),er(Wm),er(eA),er(Um),er(Km),er(Xm),er(Gm),er(Kp),er(nv),er(Cy),er(xy),er(Rp),er(Up),er(Yp),er(av),er(Ep),er(Xp),er(Jp),er(Fp),er(Hy),er(tp),er(jp),er(yp),Te("InventoryUnlockerListener",(function(e){if(qr(e).length>0&&!or(e))return fe("new_inventory_unlocked")}))}function dv(){Te("PlayerDoom",(function(e){if(!fo(e,"PlayerDoom")&&!function(e,t){return so(e,t)<Ze(e)-1e10+5e9}(e,"PlayerDoom"))return function(e){return su(e,-1/0,"Doom")}}),(function(e){return fo(e,"PlayerDoom")}))}function hv(){xe([[io.Player,da.AttackDelay]],"PlayerStunAttackDelay",Oe.Addition,(function(e){return fo(e,"PlayerStun")?1/0:0})),xe([[io.Enemy,da.AttackDelay]],"EnemyStunAttackDelay",Oe.Addition,(function(e){return fo(e,"EnemyStun")?1/0:0})),vo("PlayerStunning",(function(e,t){return"PlayerStun"===t.id&&fo(e,"PlayerStunPrevention")?(t.endTime=so(e,"PlayerStun"),t):t})),Te("PlayerStunning",(function(e){if(fo(e,"PlayerStun")){var t=so(e,"PlayerStun")-Ze(e);return function(n){return n.exploration.playerActionProgress=0,n=mo("PlayerStunPrevention","Stun Protection",Ce([io.Player,Ee.PostStunProtectionDuration],e,6)+t,{mode:"add",combatOnly:!0})(n)}}}),(function(e){return so(e,"PlayerStun")})),Te("PlayerStunningRecovery",(function(e){if(!fo(e,"PlayerStun"))return function(e){return e.exploration.playerActionProgress=0,e}}),(function(e){return fo(e,"PlayerStun")})),vo("EnemyStunning",(function(e,t){return"EnemyStun"===t.id&&fo(e,"EnemyStunPrevention")?(t.endTime=so(e,"EnemyStun"),t):t})),Te("EnemyStunning",(function(e){if(fo(e,"EnemyStun")){var t=so(e,"EnemyStun")-Ze(e);return function(n){return n.exploration.enemyActionProgress=0,nu(n)===H.Combat&&(n=mo("EnemyStunPrevention","Stun Protection",Ce([io.Enemy,Ee.PostStunProtectionDuration],e,6)+t,{mode:"add",combatOnly:!0,isEnemyTemporaryEffect:!0})(n)),n}}}),(function(e){return so(e,"EnemyStun")})),Te("EnemyStunningRecovery",(function(e){if(!fo(e,"EnemyStun"))return function(e){return Za=void 0,e.exploration.enemyActionProgress=0,e}}),(function(e){return fo(e,"EnemyStun")}))}function gv(){Fe.register(fd),Ko(0,Ic.ALL_STORYLINES_COMPLETED),Te("RetirementUnlocker",(function(e){if(!ce(e,"retirement_unlocked")&&Nt(e)>1e4)return fe("retirement_unlocked")})),hv(),dv()}function mv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Av=new(function(e){No()(n,e);var t=mv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Create Boulder"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create a giant rock and boost your Stone reserves."}},{key:"getBaseActionEffects",value:function(){return{stone:{value:1200,tags:[Nr.Stone]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).stone)+":stone:"}},{key:"getManaCost",value:function(){return 440}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:5}}},{key:"doSpellAction",value:function(e){return Wr(Nr.Stone,this.getActionEffects(e).stone)(e)}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Stone)<Ur(e,Nr.Stone)}}]),n}(tl));function yv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var pv=new(function(e){No()(n,e);var t=yv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"gather_iron_unlocked")}},{key:"getSpellName",value:function(){return"Create Iron Bar"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Materialize an iron bar."}},{key:"getBaseActionEffects",value:function(){return{iron:{value:80,tags:[Nr.Iron]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).iron)+":iron:"}},{key:"doSpellAction",value:function(e){return Wr(Nr.Iron,this.getActionEffects(e).iron)(e)}},{key:"getManaCost",value:function(){return 320}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:7}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Iron)<Ur(e,Nr.Iron)}}]),n}(tl));function vv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var bv=new(function(e){No()(n,e);var t=vv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"gather_iron_unlocked")}},{key:"getSpellName",value:function(){return"Create Iron Ore"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Materialize a piece of iron ore."}},{key:"getBaseActionEffects",value:function(){return{iron:{value:5,tags:[Nr.Iron]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).iron)+":iron:"}},{key:"doSpellAction",value:function(e){return Wr(Nr.Iron,this.getActionEffects(e).iron)(e)}},{key:"getManaCost",value:function(){return 40}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:4}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Iron)<Ur(e,Nr.Iron)}}]),n}(tl));function jv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ov=new(function(e){No()(n,e);var t=jv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Create Rock"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create a larger rock to get plenty of Stone."}},{key:"getBaseActionEffects",value:function(){return{stone:{value:90,tags:[Nr.Stone]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).stone)+":stone:"}},{key:"getManaCost",value:function(){return 80}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:2}}},{key:"doSpellAction",value:function(e){return Wr(Nr.Stone,this.getActionEffects(e).stone)(e)}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Stone)<Ur(e,Nr.Stone)}}]),n}(tl));function kv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var xv=new(function(e){No()(n,e);var t=kv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Create Water II"}},{key:"getElement",value:function(){return kt.Water}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Convert Mana into a larger chunk of water."}},{key:"getBaseActionEffects",value:function(){return{water:{value:35,tags:[Nr.Water]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).water)+":water:"}},{key:"doSpellAction",value:function(e){return Wr(Nr.Water,this.getActionEffects(e).water)(e)}},{key:"getManaCost",value:function(){return 180}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:3}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Water)<Ur(e,Nr.Water)}}]),n}(tl));function wv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Cv=new(function(e){No()(n,e);var t=wv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Create Water III"}},{key:"getElement",value:function(){return kt.Water}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Convert Mana into a large amount of water."}},{key:"getBaseActionEffects",value:function(){return{water:{value:420,tags:[Nr.Water]}}}},{key:"getDisplayEffect",value:function(e){return"+"+Mn(this.getActionEffects(e).water)+":water:"}},{key:"doSpellAction",value:function(e){return Wr(Nr.Water,this.getActionEffects(e).water)(e)}},{key:"getManaCost",value:function(){return 1060}},{key:"getSchoolLevelRequirements",value:function(){return{Conjuration:6}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Water)<Ur(e,Nr.Water)}}]),n}(tl));function Sv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ev=new(function(e){No()(n,e);var t=Sv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&Go(e,pg)>0}},{key:"getSpellName",value:function(){return"Enchant Furnaces"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Magically alter your Furnaces to produce (and consume) faster for a limited time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:30,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return Mn(t.magnitude,{showDecimals:!0})+"x:temperature: production and "+Mn(t.magnitude,{showDecimals:!0})+"x:wood: consumption by Furnaces for "+Mn(Math.floor(t.duration))+" sec."}},{key:"getManaCost",value:function(){return 90}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:3}}}]),n}(tl));xe([[pg.getName(),Ee.Production],[pg.getName(),Ee.Consumption]],"EnchantFurnaces",Oe.Multiplier,(function(e){return fo(e,"Enchant Furnaces")?Ev.getActionEffects(e,"magnitude").magnitude:1}));var Mv=Ev;function Rv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Bv=new(function(e){No()(n,e);var t=Rv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&Go(e,Og)>0}},{key:"getSpellName",value:function(){return"Enchant Lumber Yards"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Magically alter your Lumber Yards to work faster for a limited time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:30,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return Mn(t.magnitude,{showDecimals:!0})+"x:wood: produced by Lumber Yards for "+Mn(Math.floor(t.duration))+" sec."}},{key:"getManaCost",value:function(){return 80}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:2}}}]),n}(tl));xe([[Og.getName(),Ee.Production]],"EnchantLumberYards",Oe.Multiplier,(function(e){return fo(e,"Enchant Lumber Yards")?Bv.getActionEffects(e,"magnitude").magnitude:1}));var Tv=Bv;function Dv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Pv=function(e){No()(n,e);var t=Dv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&Go(e,_g)>0}},{key:"getSpellName",value:function(){return"Enchant Mana Geysers"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Magically alter your Mana Geysers to produce more mana for a limited time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:20.4,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return Mn(t.magnitude,{showDecimals:!0})+"x:mana: produced by Mana Geysers for "+Mn(Math.floor(t.duration))+" sec."}},{key:"getManaCost",value:function(){return 160}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:9}}}]),n}(tl),Iv=new Pv;xe([[_g.getName(),Ee.Production]],"EnchantManaGeysers",Oe.Multiplier,(function(e){return fo(e,"Enchant Mana Geysers")?Iv.getActionEffects(e,"magnitude").magnitude:1}));var _v=new Pv;function Nv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Fv=new(function(e){No()(n,e);var t=Nv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&Go(e,Tg)>0}},{key:"getSpellName",value:function(){return"Enchant Mana Spouts"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Magically alter your Mana Spouts to produce more mana for a limited time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:30.4,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return Mn(t.magnitude,{showDecimals:!0})+"x:mana: produced by Mana Spouts for "+Mn(Math.floor(t.duration))+" sec."}},{key:"getManaCost",value:function(){return 60}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:1}}}]),n}(tl));xe([[Tg.getName(),Ee.Production]],"EnchantManaSpouts",Oe.Multiplier,(function(e){return fo(e,"Enchant Mana Spouts")?Fv.getActionEffects(e,"magnitude").magnitude:1}));var Lv=Fv;function Yv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Vv=function(e){No()(n,e);var t=Yv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&Go(e,Gg)>0}},{key:"getSpellName",value:function(){return"Enchant Mines"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Magically alter your Mines to work faster for a limited time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:30,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return Mn(t.magnitude,{showDecimals:!0})+"x:stone: and :iron: produced by Mines for "+Mn(Math.floor(t.duration))+" sec."}},{key:"getManaCost",value:function(){return 300}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:12}}}]),n}(tl),Uv=new Vv;xe([[Gg.getName(),Ee.Production]],"EnchantMines",Oe.Multiplier,(function(e){return fo(e,"Enchant Mines")?Uv.getActionEffects(e,"magnitude").magnitude:1}));var Qv=new Vv;function Gv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Hv=new(function(e){No()(n,e);var t=Gv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Levitation"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Allows you to float a short distance from the ground. Makes you more efficient at exploration."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"-"+Mn(100*(1-1/t.magnitude))+"% exploration time for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 1300}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:13}}}]),n}(tl));xe([[Ee.ExplorationDelay]],"Levitation",Oe.Multiplier,(function(e){return fo(e,"Levitation")?1/Hv.getActionEffects(e,"magnitude").magnitude:1}));var Wv=Hv;function Jv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var zv=new(function(e){No()(n,e);var t=Jv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Quickness"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Make yourself move and attack faster."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:.15,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"-"+Mn(100*Math.abs(1-1/(t.magnitude+1)))+"%:attackDelay: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 580}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:7}}}]),n}(tl));xe([[io.Player,da.AttackDelay]],"Quickness",Oe.Multiplier,(function(e){return fo(e,"Quickness")?1/(1+zv.getActionEffects(e,"magnitude").magnitude):1}));var Zv=zv;function Xv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var qv=new(function(e){No()(n,e);var t=Xv(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Stoneskin"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Harden your skin to render yourself stronger against attacks."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:10,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(t.magnitude)+":defense: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 480}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:6}}}]),n}(tl));xe([[io.Player,da.Defense]],"Stoneskin",Oe.Addition,(function(e){return fo(e,"Stoneskin")?qv.getActionEffects(e,"magnitude").magnitude:0}));var Kv=qv;function $v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var eb=new(function(e){No()(n,e);var t=$v(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Strength"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Fill yourself with magical strength and increase your damage."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:9,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(t.magnitude)+":attack: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 640}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:8}}}]),n}(tl));xe([[io.Player,da.Attack]],"Strength",Oe.Addition,(function(e){return fo(e,"Strength")?eb.getActionEffects(e,"magnitude").magnitude:0}));var tb=eb;function nb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var rb=new(function(e){No()(n,e);var t=nb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Vigor of Health"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Increase your maximum :hp: by enchanting yourself."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:80,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(t.magnitude)+" Max:hp: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 120}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:5}}}]),n}(tl));xe([[io.Player,da.MaxHP]],"VigorOfHealth",Oe.Addition,(function(e){return fo(e,"Vigor of Health")?rb.getActionEffects(e,"magnitude").magnitude:0}));var ob=rb;function ib(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var ab=new(function(e){No()(n,e);var t=ib(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Physical Augment"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Equivalent to Vigor of Health, Stoneskin, Quickness and Strength all at once."}},{key:"getBaseActionEffects",value:function(){return{duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=ob.getActionEffects(e),n=Kv.getActionEffects(e),r=Zv.getActionEffects(e),o=tb.getActionEffects(e),i=this.getActionEffects(e);return"+"+Mn(t.magnitude)+" Max:hp:, +"+Mn(n.magnitude)+":defense:, -"+Mn(100*Math.abs(1-1/(r.magnitude+1)))+"%:attackDelay: and +"+Mn(o.magnitude)+":attack: for "+Mn(Math.floor(i.duration))+" sec"}},{key:"getManaCost",value:function(){return 1820}},{key:"getSchoolLevelRequirements",value:function(){return{Enchantment:14}}},{key:"isActive",value:function(e){return fo(e,"Vigor of Health")&&fo(e,"Stoneskin")&&fo(e,"Quickness")&&fo(e,"Strength")}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e).duration;return e=mo("Vigor of Health","Vigor of Health",t,{})(e),e=mo("Stoneskin","Stoneskin",t,{})(e),e=mo("Quickness","Quickness",t,{})(e),e=mo("Strength","Strength",t,{})(e)}},{key:"isCastingRecommended",value:function(e){return $c(e,"Vigor of Health")||$c(e,"Stoneskin")||$c(e,"Quickness")||$c(e,"Strength")}}]),n}(tl));function ub(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var cb=function(e){No()(n,e);var t=ub(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getArea",value:function(){return"Exploration"}},{key:"isEnabled",value:function(e){return Gc()(Vo()(n.prototype),"isEnabled",this).call(this,e)&&nu(e)==H.Combat}}]),n}(tl);function lb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var sb=new(function(e){No()(n,e);var t=lb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Air Cutter"}},{key:"getElement",value:function(){return kt.Air}},{key:"getDisplayDescription",value:function(){return"Slice an enemy with small blades of condensed wind."}},{key:"getBaseActionEffects",value:function(){return{average:{value:33,tags:[Ee.ActionMagnitude]},variance:{value:3,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e),n=ve(e,"advanced_evocation_unlocked")?", extra accurate":"";return zc(t.average,t.variance)+n}},{key:"doSpellAction",value:function(e){return Zc(e,this)}},{key:"getBaseCooldown",value:function(){return 1}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Air"==e.primaryElement}},{key:"getManaCost",value:function(){return 75}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:3}}}]),n}(cb));function fb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var db=new(function(e){No()(n,e);var t=fb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Blizzard"}},{key:"getElement",value:function(){return kt.Water}},{key:"getDisplayDescription",value:function(){return"Materialize a bitter cold blizzard to damage your enemy."}},{key:"getBaseActionEffects",value:function(){return{average:{value:175,tags:[Ee.ActionMagnitude]},variance:{value:15,tags:[Ee.ActionVariance]},slowDuration:{value:2.5,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return ve(e,"advanced_evocation_unlocked")?zc(t.average,t.variance)+", +20%:attackDelay: for "+Mn(t.slowDuration,{showDecimals:!0})+" sec":zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Xc(e,this)}},{key:"getBaseCooldown",value:function(){return 4.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Water"==e.primaryElement}},{key:"getManaCost",value:function(){return 520}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:13}}}]),n}(cb));function hb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var gb=new(function(e){No()(n,e);var t=hb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Cone of Fire"}},{key:"getElement",value:function(){return kt.Fire}},{key:"getDisplayDescription",value:function(){return"Hit an enemy with a cone-shaped burst of flames."}},{key:"getBaseActionEffects",value:function(){return{average:{value:240,tags:[Ee.ActionMagnitude]},variance:{value:10,tags:[Ee.ActionVariance]},dotStrength:{value:10,tags:[Ee.TemporaryEffectMagnitude]},dotDuration:{value:3,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return ve(e,"advanced_evocation_unlocked")?zc(t.average,t.variance)+", -"+Mn(t.dotStrength)+":hp:/sec for "+Mn(t.dotDuration,{showDecimals:!0})+" sec":zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return qc(e,this)}},{key:"getBaseCooldown",value:function(){return 3.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Fire"==e.primaryElement}},{key:"getManaCost",value:function(){return 1400}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:8}}}]),n}(cb));function mb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ab=new(function(e){No()(n,e);var t=mb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Fire Ball"}},{key:"getElement",value:function(){return kt.Fire}},{key:"getDisplayDescription",value:function(){return"Create a ball of pure hot flames and hurl it at an enemy."}},{key:"getBaseActionEffects",value:function(){return{average:{value:115,tags:[Ee.ActionMagnitude]},variance:{value:5,tags:[Ee.ActionVariance]},dotStrength:{value:5,tags:[Ee.TemporaryEffectMagnitude]},dotDuration:{value:3,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return ve(e,"advanced_evocation_unlocked")?zc(t.average,t.variance)+", -"+Mn(t.dotStrength)+":hp:/sec for "+Mn(t.dotDuration,{showDecimals:!0})+" sec":zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return qc(e,this)}},{key:"getBaseCooldown",value:function(){return 2.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Fire"==e.primaryElement}},{key:"getManaCost",value:function(){return 500}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:3}}}]),n}(cb));function yb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var pb=new(function(e){No()(n,e);var t=yb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Gale"}},{key:"getElement",value:function(){return kt.Air}},{key:"getDisplayDescription",value:function(){return"Blast an enemy with a strong gust of wind."}},{key:"getBaseActionEffects",value:function(){return{average:{value:75,tags:[Ee.ActionMagnitude]},variance:{value:5,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e),n=ve(e,"advanced_evocation_unlocked")?", extra accurate":"";return zc(t.average,t.variance)+n}},{key:"doSpellAction",value:function(e){return Zc(e,this)}},{key:"getBaseCooldown",value:function(){return 1}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Air"==e.primaryElement}},{key:"getManaCost",value:function(){return 200}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:8}}}]),n}(cb));function vb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var bb=new(function(e){No()(n,e);var t=vb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Ice Needle"}},{key:"getElement",value:function(){return kt.Water}},{key:"getDisplayDescription",value:function(){return"Create a needle out of solid ice and launch it at an enemy."}},{key:"getBaseActionEffects",value:function(){return{average:{value:55,tags:[Ee.ActionMagnitude]},variance:{value:5,tags:[Ee.ActionVariance]},slowDuration:{value:1.5,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return ve(e,"advanced_evocation_unlocked")?zc(t.average,t.variance)+", +20%:attackDelay: for "+Mn(t.slowDuration,{showDecimals:!0})+" sec":zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Xc(e,this)}},{key:"getBaseCooldown",value:function(){return 2.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Water"==e.primaryElement}},{key:"getManaCost",value:function(){return 140}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:3}}}]),n}(cb));function jb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Ob=new(function(e){No()(n,e);var t=jb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Infernal Blaze"}},{key:"getElement",value:function(){return kt.Fire}},{key:"getDisplayDescription",value:function(){return"Sear an enemy with powerful flames."}},{key:"getBaseActionEffects",value:function(){return{average:{value:400,tags:[Ee.ActionMagnitude]},variance:{value:20,tags:[Ee.ActionVariance]},dotStrength:{value:20,tags:[Ee.TemporaryEffectMagnitude]},dotDuration:{value:3,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return ve(e,"advanced_evocation_unlocked")?zc(t.average,t.variance)+", -"+Mn(t.dotStrength)+":hp:/sec for "+Mn(t.dotDuration,{showDecimals:!0})+" sec":zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return qc(e,this)}},{key:"getBaseCooldown",value:function(){return 4.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Fire"==e.primaryElement}},{key:"getManaCost",value:function(){return 2300}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:13}}}]),n}(cb));function kb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var xb=new(function(e){No()(n,e);var t=kb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Landslide"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getDisplayDescription",value:function(){return"Crush an enemy with the power of a landslide."}},{key:"getBaseActionEffects",value:function(){return{average:{value:300,tags:[Ee.ActionMagnitude]},variance:{value:80,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Kc(e,this)}},{key:"getBaseCooldown",value:function(){return 4.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Earth"==e.primaryElement}},{key:"getManaCost",value:function(){return 1500}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:13}}}]),n}(cb));function wb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Cb=new(function(e){No()(n,e);var t=wb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Mana Spike"}},{key:"getDisplayDescription",value:function(){return"Condense :mana: into a sharp spike, then thrust it at an enemy."}},{key:"getBaseActionEffects",value:function(){return{average:{value:42.5,tags:[Ee.ActionMagnitude]},variance:{value:2.5,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Kc(e,this)}},{key:"getBaseCooldown",value:function(){return 1}},{key:"getManaCost",value:function(){return 250}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:1}}}]),n}(cb));function Sb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Eb=new(function(e){No()(n,e);var t=Sb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Rock Tomb"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getDisplayDescription",value:function(){return"Bury an enemy below a pile of heavy stones."}},{key:"getBaseActionEffects",value:function(){return{average:{value:185,tags:[Ee.ActionMagnitude]},variance:{value:50,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Kc(e,this)}},{key:"getBaseCooldown",value:function(){return 3.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Earth"==e.primaryElement}},{key:"getManaCost",value:function(){return 800}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:8}}}]),n}(cb));function Mb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Rb=new(function(e){No()(n,e);var t=Mb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Stalagmite"}},{key:"getElement",value:function(){return kt.Earth}},{key:"getDisplayDescription",value:function(){return"Impale an enemy with a spike appearing right below them."}},{key:"getBaseActionEffects",value:function(){return{average:{value:90,tags:[Ee.ActionMagnitude]},variance:{value:25,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Kc(e,this)}},{key:"getBaseCooldown",value:function(){return 2.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Earth"==e.primaryElement}},{key:"getManaCost",value:function(){return 300}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:3}}}]),n}(cb));function Bb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Tb=new(function(e){No()(n,e);var t=Bb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Twister"}},{key:"getElement",value:function(){return kt.Air}},{key:"getDisplayDescription",value:function(){return"Create a small tornado to rip through the enemy."}},{key:"getBaseActionEffects",value:function(){return{average:{value:130,tags:[Ee.ActionMagnitude]},variance:{value:10,tags:[Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e),n=ve(e,"advanced_evocation_unlocked")?", extra accurate":"";return zc(t.average,t.variance)+n}},{key:"doSpellAction",value:function(e){return Zc(e,this)}},{key:"getBaseCooldown",value:function(){return 1}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Air"==e.primaryElement}},{key:"getManaCost",value:function(){return 340}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:13}}}]),n}(cb));function Db(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Pb=new(function(e){No()(n,e);var t=Db(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Water Bomb"}},{key:"getElement",value:function(){return kt.Water}},{key:"getDisplayDescription",value:function(){return"Put a large ball of water together, then strike an enemy with it."}},{key:"getBaseActionEffects",value:function(){return{average:{value:110,tags:[Ee.ActionMagnitude]},variance:{value:10,tags:[Ee.ActionVariance]},slowDuration:{value:2,tags:[Ee.TemporaryEffectDuration]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return ve(e,"advanced_evocation_unlocked")?zc(t.average,t.variance)+", +20%:attackDelay: for "+Mn(t.slowDuration,{showDecimals:!0})+" sec":zc(t.average,t.variance)}},{key:"doSpellAction",value:function(e){return Xc(e,this)}},{key:"getBaseCooldown",value:function(){return 3.5}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&"Water"==e.primaryElement}},{key:"getManaCost",value:function(){return 330}},{key:"getSchoolLevelRequirements",value:function(){return{Evocation:8}}}]),n}(cb));function Ib(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var _b=new(function(e){No()(n,e);var t=Ib(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Blur"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Alter your physical appearance to make yourself more blurry, increasing your dodge chance."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:.15,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:40,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(100*t.magnitude)+"%:dodge: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 850}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:9}}}]),n}(tl));xe([[io.Player,da.Dodge]],"Blur",Oe.Addition,(function(e){return fo(e,"Blur")?_b.getActionEffects(e).magnitude:0}));var Nb=_b;function Fb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Lb=new(function(e){No()(n,e);var t=Fb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getElement",value:function(){return kt.Water}},{key:"getSpellName",value:function(){return"Bubble Show"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create a fun entertainment show based on bubbles."}},{key:"getBaseActionEffects",value:function(){return{average:{value:400,tags:[Nr.Coins,Ee.ActionMagnitude]},variance:{value:50,tags:[Nr.Coins,Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Jc(t.average,t.variance)+":coins:"}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return Wr(Nr.Coins,t.average+(Math.random()-.5)*t.variance)(e)}},{key:"getManaCost",value:function(){return 150}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:3}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Coins)<Ur(e,Nr.Coins)}}]),n}(tl));function Yb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Vb=new(function(e){No()(n,e);var t=Yb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Dazzle"}},{key:"getBaseCooldown",value:function(){return 8}},{key:"getArea",value:function(){return"Exploration"}},{key:"getDisplayDescription",value:function(){return"Temporarily confuse an enemy's senses, reducing their :accuracy: for a short time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:1.5385,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:5,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{isEnemyTemporaryEffect:!0,combatOnly:!0,isBeneficial:!1})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"-"+Mn(100-1/t.magnitude*100)+"%:accuracy: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 1100}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:11}}},{key:"getEstimatedMinAutocastDelay",value:function(e){return this.getCooldown(e)}}]),n}(cb));xe([[io.Enemy,da.Accuracy]],"Dazzle",Oe.Multiplier,(function(e){return fo(e,"Dazzle")?1/Vb.getActionEffects(e).magnitude:1}));var Ub=Vb;function Qb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Gb=new(function(e){No()(n,e);var t=Qb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Flame Show"}},{key:"getElement",value:function(){return kt.Fire}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create an impressive entertainment show based on fire."}},{key:"getBaseActionEffects",value:function(){return{average:{value:2400,tags:[Nr.Coins,Ee.ActionMagnitude]},variance:{value:400,tags:[Nr.Coins,Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Jc(t.average,t.variance)+":coins:"}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return Wr(Nr.Coins,t.average+(Math.random()-.5)*t.variance)(e)}},{key:"getManaCost",value:function(){return 580}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:4}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Coins)<Ur(e,Nr.Coins)}}]),n}(tl));function Hb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Wb=new(function(e){No()(n,e);var t=Hb(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Getaway"}},{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getBaseCooldown",value:function(){return 1}},{key:"getDisplayDescription",value:function(){return"Create an illusion of yourself to trick the enemy."}},{key:"getDisplayEffect",value:function(){return"Immediately exit combat and explore again much quicker."}},{key:"getManaCost",value:function(){return 320}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:6}}},{key:"doSpellAction",value:function(e){return e.exploration||(e.exploration=K),(e=mo(this.getId(),"Getaway",3,{mode:"replace"})(e)).exploration.explorationStatus=H.Exploring,e.exploration.explorationStartTime=Ze(e),bu(e,"You have cast Getaway and ran away from the enemy!"),e}},{key:"isCastingRecommended",value:function(e){return!0}},{key:"getEstimatedMinAutocastDelay",value:function(e){return 0}}]),n}(cb));xe([[Ee.ExplorationDelay]],"GetawaySpeedup",Oe.Multiplier,(function(e,t){return fo(e,Wb.getId())?.1:1})),Te("GetawayBuffCleaning",(function(e){if(e.exploration.explorationStatus==H.Combat)return Ao(Wb.getId())}),(function(e){return e.exploration.explorationStatus}));var Jb=Wb;function zb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Zb=new(function(e){No()(n,e);var t=zb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"has_gathered_at_least_10_mana")}},{key:"getSpellName",value:function(){return"Magic Show"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create a basic entertainment show based on petty illusions."}},{key:"getBaseActionEffects",value:function(){return{average:{value:33,tags:[Nr.Coins,Ee.ActionMagnitude]},variance:{value:3,tags:[Nr.Coins,Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Jc(t.average,t.variance)+":coins:"}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return Wr(Nr.Coins,t.average+(Math.random()-.5)*t.variance)(e)}},{key:"getManaCost",value:function(){return 30}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:1}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Coins)<Ur(e,Nr.Coins)}}]),n}(tl));function Xb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var qb=new(function(e){No()(n,e);var t=Xb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Rainbow Show"}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create an astounding entertainment show with rainbows."}},{key:"getBaseActionEffects",value:function(){return{average:{value:16e3,tags:[Nr.Coins,Ee.ActionMagnitude]},variance:{value:2e3,tags:[Nr.Coins,Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Jc(t.average,t.variance)+":coins:"}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return Wr(Nr.Coins,t.average+(Math.random()-.5)*t.variance)(e)}},{key:"getManaCost",value:function(){return 2450}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:10}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Coins)<Ur(e,Nr.Coins)}}]),n}(tl));function Kb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var $b=new(function(e){No()(n,e);var t=Kb(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"isVisible",value:function(e){return Gc()(Vo()(n.prototype),"isVisible",this).call(this,e)&&ce(e,"exploration_unlocked")}},{key:"getSpellName",value:function(){return"Slow"}},{key:"getBaseCooldown",value:function(){return 8}},{key:"getDisplayDescription",value:function(){return"Make an enemy move more sluggishly for a period of time."}},{key:"getBaseActionEffects",value:function(){return{magnitude:{value:.2,tags:[Ee.TemporaryEffectMagnitude]},duration:{value:15,tags:[Ee.TemporaryEffectDuration]}}}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return mo(this.getId(),this.getSpellName(),t.duration,{isEnemyTemporaryEffect:!0,combatOnly:!0,isBeneficial:!1})(e)}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Mn(100*t.magnitude)+"%:attackDelay: for "+Mn(Math.floor(t.duration))+" sec"}},{key:"getManaCost",value:function(){return 1350}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:12}}},{key:"getEstimatedMinAutocastDelay",value:function(e){return this.getCooldown(e)}}]),n}(cb));xe([[io.Enemy,da.AttackDelay]],"Slow",Oe.Multiplier,(function(e){return fo(e,"Slow")?1+$b.getActionEffects(e).magnitude:1}));var ej=$b;function tj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var nj=new(function(e){No()(n,e);var t=tj(n);function n(){return Y()(this,n),t.call(this)}return U()(n,[{key:"getSpellName",value:function(){return"Wind Show"}},{key:"getElement",value:function(){return kt.Air}},{key:"getArea",value:function(){return"Campus"}},{key:"getDisplayDescription",value:function(){return"Create an entertainment show based on wind gusts."}},{key:"getBaseActionEffects",value:function(){return{average:{value:125,tags:[Nr.Coins,Ee.ActionMagnitude]},variance:{value:25,tags:[Nr.Coins,Ee.ActionVariance]}}}},{key:"getDisplayEffect",value:function(e){var t=this.getActionEffects(e);return"+"+Jc(t.average,t.variance)+":coins:"}},{key:"doSpellAction",value:function(e){var t=this.getActionEffects(e);return Wr(Nr.Coins,t.average+(Math.random()-.5)*t.variance)(e)}},{key:"getManaCost",value:function(){return 70}},{key:"getSchoolLevelRequirements",value:function(){return{Illusion:2}}},{key:"isCastingRecommended",value:function(e){return Gr(e,Nr.Coins)<Ur(e,Nr.Coins)}}]),n}(tl));function rj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var oj=new(function(e){No()(n,e);var t=rj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getSpellName",value:function(){return"Dispel Self"}},{key:"getArea",value:function(){return"Exploration"}},{key:"getBaseCooldown",value:function(){return 5}},{key:"getDisplayDescription",value:function(){return"Get rid of any negative status effects affecting you."}},{key:"getDisplayEffect",value:function(){return"Heals all :debuff:debuffs"}},{key:"getManaCost",value:function(){return 4700}},{key:"getSchoolLevelRequirements",value:function(){return{Protection:19}}},{key:"doSpellAction",value:function(e){return ho(e).forEach((function(t){t.isBeneficial||t.isEnemyTemporaryEffect||(e=Ao(t.id)(e))})),e}},{key:"isCastingRecommended",value:function(e){return ho(e).some((function(e){return!e.isBeneficial&&!e.isEnemyTemporaryEffect}))}}]),n}(tl));function ij(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var aj=new(function(e){No()(n,e);var t=ij(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Health Boost"}},{key:"getMonstiumCost",value:function(){return 450}},{key:"getDisplayDescription",value:function(e){return"Condition your body in order to be able to withstand more blows."}},{key:"getDisplayEffect",value:function(e){return"+40 Max:hp:"}}]),n}(xg));xe([[io.Player,da.MaxHP]],"HealthBoost",Oe.Addition,(function(e){return aj.isPurchased(e)?40:0}));var uj=aj;function cj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var lj=new(function(e){No()(n,e);var t=cj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Exploration Training"}},{key:"getMonstiumCost",value:function(){return 1200}},{key:"getDisplayDescription",value:function(e){return"Train yourself on techniques that can make exploration more effective."}},{key:"getDisplayEffect",value:function(e){return"-20% Exploration time"}},{key:"getUpgradeRequirements",value:function(){return[uj]}}]),n}(xg));xe([[Ee.ExplorationDelay]],"ExplorationTraining",Oe.Multiplier,(function(e){return lj.isPurchased(e)?.8:1}));var sj=lj;function fj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var dj=new(function(e){No()(n,e);var t=fj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Innate Regeneration"}},{key:"getMonstiumCost",value:function(){return 1800}},{key:"getDisplayDescription",value:function(e){return"Alter your body so that it's slightly more effective at healing itself."}},{key:"getDisplayEffect",value:function(e){return"+0.2:hpRegen:"}},{key:"getUpgradeRequirements",value:function(){return[uj]}}]),n}(xg));xe([[io.Player,da.HPRegen]],"InnateRegeneration",Oe.Addition,(function(e){return dj.isPurchased(e)?.2:0}));var hj=dj;function gj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var mj=new(function(e){No()(n,e);var t=gj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Larger Health Boost"}},{key:"getMonstiumCost",value:function(){return 3e3}},{key:"getDisplayDescription",value:function(e){return"Further condition your body in order to be able to withstand more blows."}},{key:"getDisplayEffect",value:function(e){return"+60 Max:hp:"}},{key:"getUpgradeRequirements",value:function(){return[uj]}}]),n}(xg));xe([[io.Player,da.MaxHP]],"LargerHealthBoost",Oe.Addition,(function(e){return mj.isPurchased(e)?60:0}));var Aj=mj;function yj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var pj=new(function(e){No()(n,e);var t=yj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Large Pouch"}},{key:"getMonstiumCost",value:function(){return 600}},{key:"getDisplayDescription",value:function(e){return"Increases the size of the pouch you use to store items, allowing you to store more items."}},{key:"getDisplayEffect",value:function(e){return"+5 Inventory slots"}}]),n}(xg));xe([[Ee.InventorySlot]],"LargePouch",Oe.Addition,(function(e){return pj.isPurchased(e)?5:0}));var vj=pj;function bj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var jj=new(function(e){No()(n,e);var t=bj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Enchanted Pouch"}},{key:"getMonstiumCost",value:function(){return 2e3}},{key:"getDisplayDescription",value:function(e){return"Further increases the size of the pouch you use to store items, allowing you to store even more items."}},{key:"getDisplayEffect",value:function(e){return"+5 Inventory slots"}},{key:"getUpgradeRequirements",value:function(){return[vj]}}]),n}(xg));xe([[Ee.InventorySlot]],"EnchantedPouch",Oe.Addition,(function(e){return jj.isPurchased(e)?5:0}));var Oj=jj;function kj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var xj=new(function(e){No()(n,e);var t=kj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Research Fair"}},{key:"getMonstiumCost",value:function(){return 600}},{key:"getDisplayDescription",value:function(e){return"Host a research fair in campus, to advertise the magical research the school is doing."}},{key:"getDisplayEffect",value:function(e){return"Reduces the cost to hire researchers."}}]),n}(xg));xe([[ig.getName(),Ee.CostScale]],"ResearchFairCostScale",Oe.Multiplier,(function(e){return xj.isPurchased(e)?2/3:1}));var wj=xj;function Cj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Sj=new(function(e){No()(n,e);var t=Cj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Researcher Focus"}},{key:"getMonstiumCost",value:function(){return 2e3}},{key:"getDisplayDescription",value:function(e){return"Train your researchers so that they can focus better, to increase their effectivity."}},{key:"getDisplayEffect",value:function(e){return"+50% Research speed"}},{key:"getUpgradeRequirements",value:function(){return[wj]}}]),n}(xg));xe([[Ee.Research]],"ResearcherFocus",Oe.Multiplier,(function(e){return Sj.isPurchased(e)?1.5:1}));var Ej=Sj;function Mj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Rj=new(function(e){No()(n,e);var t=Mj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Research Publication"}},{key:"getMonstiumCost",value:function(){return 4250}},{key:"getDisplayDescription",value:function(e){return"Publish the results of your research to increase the prestige of your institution."}},{key:"getDisplayEffect",value:function(e){return"Reduces the cost to hire researchers."}},{key:"getUpgradeRequirements",value:function(){return[wj]}}]),n}(xg));xe([[ig.getName(),Ee.CostScale]],"ResearchPublicationCostScale",Oe.Multiplier,(function(e){return Rj.isPurchased(e)?2/3:1}));var Bj=Rj;function Tj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Dj=new(function(e){No()(n,e);var t=Tj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Reinforced Lumber Yards"}},{key:"getMonstiumCost",value:function(){return 350}},{key:"getDisplayDescription",value:function(e){return"Increase the effectivity of the blades in your Lumber Yards, making them work faster."}},{key:"getDisplayEffect",value:function(e){return"2x:wood: production from Lumber Yards"}},{key:"getUpgradeRequirements",value:function(){return[]}}]),n}(xg));xe([[Nr.Wood,Og.getName(),Ee.Production]],"ReinforcedLumberYards",Oe.Multiplier,(function(e){return Dj.isPurchased(e)?2:1}));var Pj=Dj;function Ij(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var _j=new(function(e){No()(n,e);var t=Ij(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Reinforced Warehouses"}},{key:"getMonstiumCost",value:function(){return 450}},{key:"getDisplayDescription",value:function(e){return"Strengthen the walls and the structure of your warehouses, allowing it to store more items."}},{key:"getDisplayEffect",value:function(e){return"2.5x Warehouse storage"}}]),n}(xg));xe([[nm.getName(),Ee.PerBuildingCap]],"ReinforcedWarehouses",Oe.Multiplier,(function(e){return _j.isPurchased(e)?2.5:1})),Te("ReinforcedWarehousesListener",(function(e){if(_j.isPurchased(e))return Qr}),(function(e){return _j.isPurchased(e)}));var Nj=_j;function Fj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Lj=new(function(e){No()(n,e);var t=Fj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Reinforced Water Tanks"}},{key:"getMonstiumCost",value:function(){return 450}},{key:"getDisplayDescription",value:function(e){return"Renew your water tanks, allowing them to store plenty more water."}},{key:"getDisplayEffect",value:function(e){return"5x Water Tank storage"}},{key:"getUpgradeRequirements",value:function(){return[Nj]}}]),n}(xg));xe([[sm.getName(),Ee.PerBuildingCap]],"ReinforcedWaterTanks",Oe.Multiplier,(function(e){return Lj.isPurchased(e)?5:1})),Te("ReinforcedWaterTanksListener",(function(e){if(Lj.isPurchased(e))return Qr}),(function(e){return Lj.isPurchased(e)}));var Yj=Lj;function Vj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo()(e);if(t){var o=Vo()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo()(this,n)}}var Uj=new(function(e){No()(n,e);var t=Vj(n);function n(){return Y()(this,n),t.apply(this,arguments)}return U()(n,[{key:"getName",value:function(){return"Reinforced Vaults"}},{key:"getMonstiumCost",value:function(){return 2e3}},{key:"getDisplayDescription",value:function(e){return"Add an extra layer of iron to your vaults, allowing you to store twice as much :coins:."}},{key:"getDisplayEffect",value:function(e){return"2x Vault storage"}},{key:"getUpgradeRequirements",value:function(){return[Yj]}}]),n}(xg));xe([[am.getName(),Ee.PerBuildingCap,Nr.Coins]],"Reinforced Vaults",Oe.Multiplier,(function(e){return Uj.isPurchased(e)?2:1})),Te("ReinforcedVaultsListener",(function(e){if(Uj.isPurchased(e))return Qr}),(function(e){return Uj.isPurchased(e)}));var Qj=Uj;function Gj(){Q.setDemoMode(!0),vt($h),vt(rg),vt(qh),vt(ig),vt(Zd),vt(ug),Ue("Autocast",xr),Qo(Tg),Qo(_g),Qo(Og),Qo(Gg),Qo(Yg),Qo(Mg),Qo(nm),Qo(zg),Qo(sm),Qo(am),Qo(pg),Qo(Kg),Qo(gg),on(Yy),on(Ov),on(Av),on(Uy),on(xv),on(Cv),on(bv),on(pv),on(al),on(Lv),on(Tv),on(Mv),on(_v),on(Qv),on(ob),on(Kv),on(Zv),on(tb),on(Wv),on(ab),on(Zb),on(nj),on(Lb),on(Gb),on(Jb),on(Nb),on(qb),on(Ub),on(ej),on(WA),on(Cb),on(Ab),on(gb),on(Ob),on(Rb),on(Eb),on(xb),on(bb),on(Pb),on(db),on(sb),on(pb),on(Tb),XA(),Ue("Researchers",_d),Ue("TotalTimePlayed",(function(e,t,n){if(e.global||(e.global=ee),e.thisRun||(e.thisRun=te),e.global.secondsPlayed+=t,e.thisRun.secondsPlayed+=t,e.global.thisWorldSecondsPlayed+=t,!n){var r=Ce([Ee.GameSpeed],e,1);"untracked"!=e.global.activeSecondsPlayed&&(e.global.activeSecondsPlayed+=t/r),"untracked"!=e.thisRun.activeSecondsPlayed&&(e.thisRun.activeSecondsPlayed+=t/r),e.global.thisWorldActiveSecondsPlayed+=t/r}return e})),fv(),Oa.register(My),ka.register(bA),ka.register(pA),ka.register(AA),Oa.register(Ay),ka.register(hy),ka.register(fy),ka.register(ly),Ha.register(Mm),Ha.register(Sm),Ha.register(Dm),Ha.register(Nm),Ha.register(rA),Ha.register(Ym),Ha.register(Iy),Ha.register(dA),Ha.register(sA),Ha.register(cA),Cu(),vt(wj),vt(Bj),vt(Ej),vt(vj),vt(Oj),vt(Pj),vt(Nj),vt(Yj),vt(Cg),vt(Qj),vt(uj),vt(Aj),vt(hj),vt(sj),vt(KA),Ue("CommonDoT",(function(e,t){return ho(e).filter((function(e){var t;return null!=(null==(t=e.params)?void 0:t.commonDoTAmount)})).forEach((function(n){e=n.isEnemyTemporaryEffect?du(e,-n.params.commonDoTAmount*t):su(e,-n.params.commonDoTAmount*t,n.name)})),e})),Object.keys(io).forEach((function(e){Object.keys(da).forEach((function(t){xe([[e,t]],"CommonBuff"+e+t,Oe.Addition,(function(n){var r=ho(n).filter((function(n){var r,o,i;return null!=(null==(r=n.params)||null==(o=r.commonBuff)||null==(i=o[e])?void 0:i[t])})),o=0;return r.forEach((function(n){var r,i,a,u;o+=null!=(r=null==(i=n.params)||null==(a=i.commonBuff)||null==(u=a[e])?void 0:u[t])?r:0})),o})),xe([[e,t]],"CommonBuffMultiplication"+e+t,Oe.Multiplier,(function(n){var r=ho(n).filter((function(n){var r,o,i;return null!=(null==(r=n.params)||null==(o=r.commonBuff)||null==(i=o[e])?void 0:i[t+"Multiplier"])})),o=1;return r.forEach((function(n){var r,i,a,u;o*=null!=(r=null==(i=n.params)||null==(a=i.commonBuff)||null==(u=a[e])?void 0:u[t+"Multiplier"])?r:1})),o}))}))})),Object.keys(xt).forEach((function(e){xe([[e,Ee.CanCastSpell]],"SelectiveSilence"+e,Oe.Multiplier,(function(t,n){return fo(t,"SelectiveSilence"+e)?0:1}))})),xe([[Ee.CanCastSpell,oj.getId()]],"SelectiveSilenceDispel",Oe.Multiplier,(function(e){return fo(e,"SelectiveSilenceDispel")?0:1})),Ue("PlayerPoison",(function(e,t){var n,r,o;return fo(e,"PlayerPoison")&&(e=su(e,-(null!=(n=null==(r=e.temporaryEffects.PlayerPoison)||null==(o=r.params)?void 0:o.amount)?n:0)*t,"Poison")),e})),Ue("Enemy",(function(e,t){var n,r,o,i,a,u;return fo(e,"EnemyRegeneration")&&(e=du(e,(null!=(n=null==(r=e.temporaryEffects.EnemyRegeneration)||null==(o=r.params)?void 0:o.amount)?n:0)*t)),fo(e,"EnemyPoison")&&(e=du(e,-(null!=(i=null==(a=e.temporaryEffects.EnemyPoison)||null==(u=a.params)?void 0:u.amount)?i:0)*t)),e})),Ue("Summon",(function(e,t){var n,r,o;return fo(e,"SummonRegeneration")&&au(e)>0&&(e=fu(e,(null!=(n=null==(r=e.temporaryEffects.SummonRegeneration)||null==(o=r.params)?void 0:o.amount)?n:0)*t)),e})),Ya.register((function(e){if(fo(e,"CloakOfFlames")){var t,n=null==(t=pu(e))?void 0:t.damage;if(n&&n>0){var r=Math.min(99,.3*n);e=su(e,-r,"Cloak of Flames");var o={id:Math.random().toString(),damage:r,isHit:!0,isCrit:!1,time:Ze(e),target:io.Player,tags:[]};e.exploration.lastEnemyActionResult=o,e.exploration.actionResultQueue.push(o)}}return e})),Ua.register((function(e){if(fo(e,"CloakOfFlames")){var t,n=null==(t=pu(e))?void 0:t.damage;if(n&&n>0){var r=Math.min(99,.3*n);e=fu(e,-r);var o={id:Math.random().toString(),damage:r,isHit:!0,isCrit:!1,time:Ze(e),target:io.Summon,tags:[]};e.exploration.lastEnemyActionResult=o,e.exploration.actionResultQueue.push(o)}}return e})),Te("EnemyReflect",(function(e){var t,n,r,o,i;if(fo(e,"EnemyReflect")){var a=null==(t=e.exploration)||null==(n=t.lastPlayerActionResult)||null==(r=n.tags)?void 0:r.includes(Ee.Spell),u=(null==(o=e.exploration)||null==(i=o.lastPlayerActionResult)?void 0:i.damage)||0;return a&&u>0?function(e){e=su(e,-u,"Spell Mirror");var t={id:Math.random().toString(),damage:u,isHit:!0,isCrit:!1,time:Ze(e),target:io.Player,tags:[]};return e.exploration.lastEnemyActionResult=t,e.exploration.actionResultQueue.push(t),e}:void 0}}),(function(e){var t,n,r;return null!=(t=null==(n=e.exploration)||null==(r=n.lastPlayerActionResult)?void 0:r.id)?t:"none"})),Qy(),ti.getAll().forEach((function(e){uh.Storyline.register(new ah(e.name,oh.Storyline,e.hintDescription,e.isHintUnlockable,e.isCompleted))})),_y(),gv()}Object(r.default)((function(){return Object(o.useEffect)((function(){Gj()}),[]),Object(Wn.jsx)(Hh,{})}))}},[[585,1,2]]]);
//# sourceMappingURL=app.8e8225f6.chunk.js.map